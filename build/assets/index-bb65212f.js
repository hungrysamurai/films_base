function a3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function l3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g2={exports:{}},Oc={},y2={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),u3=Symbol.for("react.portal"),c3=Symbol.for("react.fragment"),h3=Symbol.for("react.strict_mode"),d3=Symbol.for("react.profiler"),f3=Symbol.for("react.provider"),p3=Symbol.for("react.context"),m3=Symbol.for("react.forward_ref"),g3=Symbol.for("react.suspense"),y3=Symbol.for("react.memo"),v3=Symbol.for("react.lazy"),l0=Symbol.iterator;function w3(t){return t===null||typeof t!="object"?null:(t=l0&&t[l0]||t["@@iterator"],typeof t=="function"?t:null)}var v2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w2=Object.assign,E2={};function qi(t,e,n){this.props=t,this.context=e,this.refs=E2,this.updater=n||v2}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C2(){}C2.prototype=qi.prototype;function pm(t,e,n){this.props=t,this.context=e,this.refs=E2,this.updater=n||v2}var mm=pm.prototype=new C2;mm.constructor=pm;w2(mm,qi.prototype);mm.isPureReactComponent=!0;var u0=Array.isArray,S2=Object.prototype.hasOwnProperty,gm={current:null},T2={key:!0,ref:!0,__self:!0,__source:!0};function _2(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)S2.call(e,r)&&!T2.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wa,type:t,key:i,ref:o,props:s,_owner:gm.current}}function E3(t,e){return{$$typeof:Wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ym(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wa}function C3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c0=/\/+/g;function ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C3(""+t.key):e.toString(36)}function su(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wa:case u3:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ed(o,0):r,u0(s)?(n="",t!=null&&(n=t.replace(c0,"$&/")+"/"),su(s,e,n,"",function(u){return u})):s!=null&&(ym(s)&&(s=E3(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(c0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",u0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+ed(i,a);o+=su(i,e,n,l,s)}else if(l=w3(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+ed(i,a++),o+=su(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,n){if(t==null)return t;var r=[],s=0;return su(t,r,"","",function(i){return e.call(n,i,s++)}),r}function S3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},iu={transition:null},T3={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:iu,ReactCurrentOwner:gm};Q.Children={map:Il,forEach:function(t,e,n){Il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!ym(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=qi;Q.Fragment=c3;Q.Profiler=d3;Q.PureComponent=pm;Q.StrictMode=h3;Q.Suspense=g3;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T3;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=w2({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)S2.call(e,l)&&!T2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Wa,type:t.type,key:s,ref:i,props:r,_owner:o}};Q.createContext=function(t){return t={$$typeof:p3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f3,_context:t},t.Consumer=t};Q.createElement=_2;Q.createFactory=function(t){var e=_2.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:m3,render:t}};Q.isValidElement=ym;Q.lazy=function(t){return{$$typeof:v3,_payload:{_status:-1,_result:t},_init:S3}};Q.memo=function(t,e){return{$$typeof:y3,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=iu.transition;iu.transition={};try{t()}finally{iu.transition=e}};Q.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Q.useCallback=function(t,e){return mt.current.useCallback(t,e)};Q.useContext=function(t){return mt.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};Q.useEffect=function(t,e){return mt.current.useEffect(t,e)};Q.useId=function(){return mt.current.useId()};Q.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return mt.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};Q.useRef=function(t){return mt.current.useRef(t)};Q.useState=function(t){return mt.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return mt.current.useTransition()};Q.version="18.2.0";y2.exports=Q;var E=y2.exports;const Mc=l3(E),h0=a3({__proto__:null,default:Mc},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _3=E,x3=Symbol.for("react.element"),I3=Symbol.for("react.fragment"),k3=Object.prototype.hasOwnProperty,R3=_3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A3={key:!0,ref:!0,__self:!0,__source:!0};function x2(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)k3.call(e,r)&&!A3.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:x3,type:t,key:i,ref:o,props:s,_owner:R3.current}}Oc.Fragment=I3;Oc.jsx=x2;Oc.jsxs=x2;g2.exports=Oc;var p=g2.exports,gf={},I2={exports:{}},Mt={},k2={exports:{}},R2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,z){var q=D.length;D.push(z);e:for(;0<q;){var H=q-1>>>1,fe=D[H];if(0<s(fe,z))D[H]=z,D[q]=fe,q=H;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var z=D[0],q=D.pop();if(q!==z){D[0]=q;e:for(var H=0,fe=D.length,Jr=fe>>>1;H<Jr;){var an=2*(H+1)-1,Hs=D[an],It=an+1,Zr=D[It];if(0>s(Hs,q))It<fe&&0>s(Zr,Hs)?(D[H]=Zr,D[It]=q,H=It):(D[H]=Hs,D[an]=q,H=an);else if(It<fe&&0>s(Zr,q))D[H]=Zr,D[It]=q,H=It;else break e}}return z}function s(D,z){var q=D.sortIndex-z.sortIndex;return q!==0?q:D.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,g=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=D)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function C(D){if(w=!1,y(D),!g)if(n(l)!==null)g=!0,jt(T);else{var z=n(u);z!==null&&on(C,z.startTime-D)}}function T(D,z){g=!1,w&&(w=!1,v(x),x=-1),f=!0;var q=d;try{for(y(z),h=n(l);h!==null&&(!(h.expirationTime>z)||D&&!de());){var H=h.callback;if(typeof H=="function"){h.callback=null,d=h.priorityLevel;var fe=H(h.expirationTime<=z);z=t.unstable_now(),typeof fe=="function"?h.callback=fe:h===n(l)&&r(l),y(z)}else r(l);h=n(l)}if(h!==null)var Jr=!0;else{var an=n(u);an!==null&&on(C,an.startTime-z),Jr=!1}return Jr}finally{h=null,d=q,f=!1}}var k=!1,I=null,x=-1,M=5,$=-1;function de(){return!(t.unstable_now()-$<M)}function yt(){if(I!==null){var D=t.unstable_now();$=D;var z=!0;try{z=I(!0,D)}finally{z?$t():(k=!1,I=null)}}else k=!1}var $t;if(typeof m=="function")$t=function(){m(yt)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,ke=Ie.port2;Ie.port1.onmessage=yt,$t=function(){ke.postMessage(null)}}else $t=function(){S(yt,0)};function jt(D){I=D,k||(k=!0,$t())}function on(D,z){x=S(function(){D(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,jt(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var q=d;d=z;try{return D()}finally{d=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=d;d=D;try{return z()}finally{d=q}},t.unstable_scheduleCallback=function(D,z,q){var H=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?H+q:H):q=H,D){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,D={id:c++,callback:z,priorityLevel:D,startTime:q,expirationTime:fe,sortIndex:-1},q>H?(D.sortIndex=q,e(u,D),n(l)===null&&D===n(u)&&(w?(v(x),x=-1):w=!0,on(C,q-H))):(D.sortIndex=fe,e(l,D),g||f||(g=!0,jt(T))),D},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(D){var z=d;return function(){var q=d;d=z;try{return D.apply(this,arguments)}finally{d=q}}}})(R2);k2.exports=R2;var P3=k2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2=E,Dt=P3;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P2=new Set,na={};function Ls(t,e){ki(t,e),ki(t+"Capture",e)}function ki(t,e){for(na[t]=e,t=0;t<e.length;t++)P2.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yf=Object.prototype.hasOwnProperty,N3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d0={},f0={};function D3(t){return yf.call(f0,t)?!0:yf.call(d0,t)?!1:N3.test(t)?f0[t]=!0:(d0[t]=!0,!1)}function L3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O3(t,e,n,r){if(e===null||typeof e>"u"||L3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vm=/[\-:]([a-z])/g;function wm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vm,wm);Ye[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vm,wm);Ye[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vm,wm);Ye[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Em(t,e,n,r){var s=Ye.hasOwnProperty(e)?Ye[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O3(e,n,s,r)&&(n=null),r||s===null?D3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=A2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kl=Symbol.for("react.element"),Ys=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),vf=Symbol.for("react.profiler"),N2=Symbol.for("react.provider"),D2=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Tm=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),L2=Symbol.for("react.offscreen"),p0=Symbol.iterator;function uo(t){return t===null||typeof t!="object"?null:(t=p0&&t[p0]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,td;function _o(t){if(td===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);td=e&&e[1]||""}return`
`+td+t}var nd=!1;function rd(t,e){if(!t||nd)return"";nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_o(t):""}function M3(t){switch(t.tag){case 5:return _o(t.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 2:case 15:return t=rd(t.type,!1),t;case 11:return t=rd(t.type.render,!1),t;case 1:return t=rd(t.type,!0),t;default:return""}}function Cf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xs:return"Fragment";case Ys:return"Portal";case vf:return"Profiler";case Cm:return"StrictMode";case wf:return"Suspense";case Ef:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D2:return(t.displayName||"Context")+".Consumer";case N2:return(t._context.displayName||"Context")+".Provider";case Sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tm:return e=t.displayName||null,e!==null?e:Cf(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Cf(t(e))}catch{}}return null}function b3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cf(e);case 8:return e===Cm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $3(t){var e=O2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rl(t){t._valueTracker||(t._valueTracker=$3(t))}function M2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sf(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b2(t,e){e=e.checked,e!=null&&Em(t,"checked",e,!1)}function Tf(t,e){b2(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_f(t,e.type,n):e.hasOwnProperty("defaultValue")&&_f(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _f(t,e,n){(e!=="number"||Pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xo=Array.isArray;function pi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function y0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(xo(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function $2(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function v0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function j2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function If(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?j2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Al,F2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j3=["Webkit","ms","Moz","O"];Object.keys(bo).forEach(function(t){j3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bo[e]=bo[t]})});function U2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bo.hasOwnProperty(t)&&bo[t]?(""+e).trim():e+"px"}function V2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var F3=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kf(t,e){if(e){if(F3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Rf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=null;function _m(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pf=null,mi=null,gi=null;function w0(t){if(t=Ga(t)){if(typeof Pf!="function")throw Error(A(280));var e=t.stateNode;e&&(e=Uc(e),Pf(t.stateNode,t.type,e))}}function B2(t){mi?gi?gi.push(t):gi=[t]:mi=t}function z2(){if(mi){var t=mi,e=gi;if(gi=mi=null,w0(t),e)for(t=0;t<e.length;t++)w0(e[t])}}function H2(t,e){return t(e)}function W2(){}var sd=!1;function K2(t,e,n){if(sd)return t(e,n);sd=!0;try{return H2(t,e,n)}finally{sd=!1,(mi!==null||gi!==null)&&(W2(),z2())}}function sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Uc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Nf=!1;if(Kn)try{var co={};Object.defineProperty(co,"passive",{get:function(){Nf=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Nf=!1}function U3(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var $o=!1,Nu=null,Du=!1,Df=null,V3={onError:function(t){$o=!0,Nu=t}};function B3(t,e,n,r,s,i,o,a,l){$o=!1,Nu=null,U3.apply(V3,arguments)}function z3(t,e,n,r,s,i,o,a,l){if(B3.apply(this,arguments),$o){if($o){var u=Nu;$o=!1,Nu=null}else throw Error(A(198));Du||(Du=!0,Df=u)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function E0(t){if(Os(t)!==t)throw Error(A(188))}function H3(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return E0(s),t;if(i===r)return E0(s),e;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function G2(t){return t=H3(t),t!==null?Q2(t):null}function Q2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q2(t);if(e!==null)return e;t=t.sibling}return null}var Y2=Dt.unstable_scheduleCallback,C0=Dt.unstable_cancelCallback,W3=Dt.unstable_shouldYield,K3=Dt.unstable_requestPaint,Re=Dt.unstable_now,q3=Dt.unstable_getCurrentPriorityLevel,xm=Dt.unstable_ImmediatePriority,X2=Dt.unstable_UserBlockingPriority,Lu=Dt.unstable_NormalPriority,G3=Dt.unstable_LowPriority,J2=Dt.unstable_IdlePriority,bc=null,yn=null;function Q3(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(bc,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:J3,Y3=Math.log,X3=Math.LN2;function J3(t){return t>>>=0,t===0?32:31-(Y3(t)/X3|0)|0}var Pl=64,Nl=4194304;function Io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Io(a):(i&=o,i!==0&&(r=Io(i)))}else o=n&~s,o!==0?r=Io(o):i!==0&&(r=Io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function Z3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Z3(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Lf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z2(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ka(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function tI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var te=0;function eE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tE,km,nE,rE,sE,Of=!1,Dl=[],Er=null,Cr=null,Sr=null,ia=new Map,oa=new Map,cr=[],nI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function S0(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function ho(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ga(e),e!==null&&km(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rI(t,e,n,r,s){switch(e){case"focusin":return Er=ho(Er,t,e,n,r,s),!0;case"dragenter":return Cr=ho(Cr,t,e,n,r,s),!0;case"mouseover":return Sr=ho(Sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ia.set(i,ho(ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oa.set(i,ho(oa.get(i)||null,t,e,n,r,s)),!0}return!1}function iE(t){var e=as(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=q2(n),e!==null){t.blockedOn=e,sE(t.priority,function(){nE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Af=r,n.target.dispatchEvent(r),Af=null}else return e=Ga(n),e!==null&&km(e),t.blockedOn=n,!1;e.shift()}return!0}function T0(t,e,n){ou(t)&&n.delete(e)}function sI(){Of=!1,Er!==null&&ou(Er)&&(Er=null),Cr!==null&&ou(Cr)&&(Cr=null),Sr!==null&&ou(Sr)&&(Sr=null),ia.forEach(T0),oa.forEach(T0)}function fo(t,e){t.blockedOn===e&&(t.blockedOn=null,Of||(Of=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,sI)))}function aa(t){function e(s){return fo(s,t)}if(0<Dl.length){fo(Dl[0],t);for(var n=1;n<Dl.length;n++){var r=Dl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&fo(Er,t),Cr!==null&&fo(Cr,t),Sr!==null&&fo(Sr,t),ia.forEach(e),oa.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)iE(n),n.blockedOn===null&&cr.shift()}var yi=nr.ReactCurrentBatchConfig,Mu=!0;function iI(t,e,n,r){var s=te,i=yi.transition;yi.transition=null;try{te=1,Rm(t,e,n,r)}finally{te=s,yi.transition=i}}function oI(t,e,n,r){var s=te,i=yi.transition;yi.transition=null;try{te=4,Rm(t,e,n,r)}finally{te=s,yi.transition=i}}function Rm(t,e,n,r){if(Mu){var s=Mf(t,e,n,r);if(s===null)md(t,e,r,bu,n),S0(t,r);else if(rI(s,t,e,n,r))r.stopPropagation();else if(S0(t,r),e&4&&-1<nI.indexOf(t)){for(;s!==null;){var i=Ga(s);if(i!==null&&tE(i),i=Mf(t,e,n,r),i===null&&md(t,e,r,bu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else md(t,e,r,null,n)}}var bu=null;function Mf(t,e,n,r){if(bu=null,t=_m(r),t=as(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bu=t,null}function oE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q3()){case xm:return 1;case X2:return 4;case Lu:case G3:return 16;case J2:return 536870912;default:return 16}default:return 16}}var gr=null,Am=null,au=null;function aE(){if(au)return au;var t,e=Am,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return au=s.slice(t,1<r?1-r:void 0)}function lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ll(){return!0}function _0(){return!1}function bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ll:_0,this.isPropagationStopped=_0,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pm=bt(Gi),qa=ve({},Gi,{view:0,detail:0}),aI=bt(qa),od,ad,po,$c=ve({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(od=t.screenX-po.screenX,ad=t.screenY-po.screenY):ad=od=0,po=t),od)},movementY:function(t){return"movementY"in t?t.movementY:ad}}),x0=bt($c),lI=ve({},$c,{dataTransfer:0}),uI=bt(lI),cI=ve({},qa,{relatedTarget:0}),ld=bt(cI),hI=ve({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),dI=bt(hI),fI=ve({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pI=bt(fI),mI=ve({},Gi,{data:0}),I0=bt(mI),gI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vI[t])?!!e[t]:!1}function Nm(){return wI}var EI=ve({},qa,{key:function(t){if(t.key){var e=gI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nm,charCode:function(t){return t.type==="keypress"?lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CI=bt(EI),SI=ve({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=bt(SI),TI=ve({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nm}),_I=bt(TI),xI=ve({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),II=bt(xI),kI=ve({},$c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RI=bt(kI),AI=[9,13,27,32],Dm=Kn&&"CompositionEvent"in window,jo=null;Kn&&"documentMode"in document&&(jo=document.documentMode);var PI=Kn&&"TextEvent"in window&&!jo,lE=Kn&&(!Dm||jo&&8<jo&&11>=jo),R0=String.fromCharCode(32),A0=!1;function uE(t,e){switch(t){case"keyup":return AI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function NI(t,e){switch(t){case"compositionend":return cE(e);case"keypress":return e.which!==32?null:(A0=!0,R0);case"textInput":return t=e.data,t===R0&&A0?null:t;default:return null}}function DI(t,e){if(Js)return t==="compositionend"||!Dm&&uE(t,e)?(t=aE(),au=Am=gr=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lE&&e.locale!=="ko"?null:e.data;default:return null}}var LI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LI[t.type]:e==="textarea"}function hE(t,e,n,r){B2(r),e=$u(e,"onChange"),0<e.length&&(n=new Pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fo=null,la=null;function OI(t){SE(t,0)}function jc(t){var e=ti(t);if(M2(e))return t}function MI(t,e){if(t==="change")return e}var dE=!1;if(Kn){var ud;if(Kn){var cd="oninput"in document;if(!cd){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),cd=typeof N0.oninput=="function"}ud=cd}else ud=!1;dE=ud&&(!document.documentMode||9<document.documentMode)}function D0(){Fo&&(Fo.detachEvent("onpropertychange",fE),la=Fo=null)}function fE(t){if(t.propertyName==="value"&&jc(la)){var e=[];hE(e,la,t,_m(t)),K2(OI,e)}}function bI(t,e,n){t==="focusin"?(D0(),Fo=e,la=n,Fo.attachEvent("onpropertychange",fE)):t==="focusout"&&D0()}function $I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jc(la)}function jI(t,e){if(t==="click")return jc(e)}function FI(t,e){if(t==="input"||t==="change")return jc(e)}function UI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rn=typeof Object.is=="function"?Object.is:UI;function ua(t,e){if(rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yf.call(e,s)||!rn(t[s],e[s]))return!1}return!0}function L0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O0(t,e){var n=L0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L0(n)}}function pE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mE(){for(var t=window,e=Pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pu(t.document)}return e}function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VI(t){var e=mE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pE(n.ownerDocument.documentElement,n)){if(r!==null&&Lm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=O0(n,i);var o=O0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BI=Kn&&"documentMode"in document&&11>=document.documentMode,Zs=null,bf=null,Uo=null,$f=!1;function M0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$f||Zs==null||Zs!==Pu(r)||(r=Zs,"selectionStart"in r&&Lm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uo&&ua(Uo,r)||(Uo=r,r=$u(bf,"onSelect"),0<r.length&&(e=new Pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zs)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ei={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},hd={},gE={};Kn&&(gE=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Fc(t){if(hd[t])return hd[t];if(!ei[t])return t;var e=ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gE)return hd[t]=e[n];return t}var yE=Fc("animationend"),vE=Fc("animationiteration"),wE=Fc("animationstart"),EE=Fc("transitionend"),CE=new Map,b0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){CE.set(t,e),Ls(e,[t])}for(var dd=0;dd<b0.length;dd++){var fd=b0[dd],zI=fd.toLowerCase(),HI=fd[0].toUpperCase()+fd.slice(1);zr(zI,"on"+HI)}zr(yE,"onAnimationEnd");zr(vE,"onAnimationIteration");zr(wE,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(EE,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function $0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z3(r,e,void 0,t),t.currentTarget=null}function SE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;$0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;$0(s,a,u),i=l}}}if(Du)throw t=Df,Du=!1,Df=null,t}function oe(t,e){var n=e[Bf];n===void 0&&(n=e[Bf]=new Set);var r=t+"__bubble";n.has(r)||(TE(e,t,2,!1),n.add(r))}function pd(t,e,n){var r=0;e&&(r|=4),TE(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[Ml]){t[Ml]=!0,P2.forEach(function(n){n!=="selectionchange"&&(WI.has(n)||pd(n,!1,t),pd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,pd("selectionchange",!1,e))}}function TE(t,e,n,r){switch(oE(e)){case 1:var s=iI;break;case 4:s=oI;break;default:s=Rm}n=s.bind(null,e,n,t),s=void 0,!Nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function md(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=as(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}K2(function(){var u=i,c=_m(n),h=[];e:{var d=CE.get(t);if(d!==void 0){var f=Pm,g=t;switch(t){case"keypress":if(lu(n)===0)break e;case"keydown":case"keyup":f=CI;break;case"focusin":g="focus",f=ld;break;case"focusout":g="blur",f=ld;break;case"beforeblur":case"afterblur":f=ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=x0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=uI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=_I;break;case yE:case vE:case wE:f=dI;break;case EE:f=II;break;case"scroll":f=aI;break;case"wheel":f=RI;break;case"copy":case"cut":case"paste":f=pI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=k0}var w=(e&4)!==0,S=!w&&t==="scroll",v=w?d!==null?d+"Capture":null:d;w=[];for(var m=u,y;m!==null;){y=m;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,v!==null&&(C=sa(m,v),C!=null&&w.push(ha(m,C,y)))),S)break;m=m.return}0<w.length&&(d=new f(d,g,null,n,c),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Af&&(g=n.relatedTarget||n.fromElement)&&(as(g)||g[qn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?as(g):null,g!==null&&(S=Os(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(w=x0,C="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=k0,C="onPointerLeave",v="onPointerEnter",m="pointer"),S=f==null?d:ti(f),y=g==null?d:ti(g),d=new w(C,m+"leave",f,n,c),d.target=S,d.relatedTarget=y,C=null,as(c)===u&&(w=new w(v,m+"enter",g,n,c),w.target=y,w.relatedTarget=S,C=w),S=C,f&&g)t:{for(w=f,v=g,m=0,y=w;y;y=Ws(y))m++;for(y=0,C=v;C;C=Ws(C))y++;for(;0<m-y;)w=Ws(w),m--;for(;0<y-m;)v=Ws(v),y--;for(;m--;){if(w===v||v!==null&&w===v.alternate)break t;w=Ws(w),v=Ws(v)}w=null}else w=null;f!==null&&j0(h,d,f,w,!1),g!==null&&S!==null&&j0(h,S,g,w,!0)}}e:{if(d=u?ti(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var T=MI;else if(P0(d))if(dE)T=FI;else{T=$I;var k=bI}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=jI);if(T&&(T=T(t,u))){hE(h,T,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&_f(d,"number",d.value)}switch(k=u?ti(u):window,t){case"focusin":(P0(k)||k.contentEditable==="true")&&(Zs=k,bf=u,Uo=null);break;case"focusout":Uo=bf=Zs=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,M0(h,n,c);break;case"selectionchange":if(BI)break;case"keydown":case"keyup":M0(h,n,c)}var I;if(Dm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Js?uE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(lE&&n.locale!=="ko"&&(Js||x!=="onCompositionStart"?x==="onCompositionEnd"&&Js&&(I=aE()):(gr=c,Am="value"in gr?gr.value:gr.textContent,Js=!0)),k=$u(u,x),0<k.length&&(x=new I0(x,t,null,n,c),h.push({event:x,listeners:k}),I?x.data=I:(I=cE(n),I!==null&&(x.data=I)))),(I=PI?NI(t,n):DI(t,n))&&(u=$u(u,"onBeforeInput"),0<u.length&&(c=new I0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=I))}SE(h,e)})}function ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $u(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sa(t,n),i!=null&&r.unshift(ha(t,i,s)),i=sa(t,e),i!=null&&r.push(ha(t,i,s))),t=t.return}return r}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function j0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=sa(n,i),l!=null&&o.unshift(ha(n,l,a))):s||(l=sa(n,i),l!=null&&o.push(ha(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KI=/\r\n?/g,qI=/\u0000|\uFFFD/g;function F0(t){return(typeof t=="string"?t:""+t).replace(KI,`
`).replace(qI,"")}function bl(t,e,n){if(e=F0(e),F0(t)!==e&&n)throw Error(A(425))}function ju(){}var jf=null,Ff=null;function Uf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,GI=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,QI=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(t){return U0.resolve(null).then(t).catch(YI)}:Vf;function YI(t){setTimeout(function(){throw t})}function gd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);aa(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),hn="__reactFiber$"+Qi,da="__reactProps$"+Qi,qn="__reactContainer$"+Qi,Bf="__reactEvents$"+Qi,XI="__reactListeners$"+Qi,JI="__reactHandles$"+Qi;function as(t){var e=t[hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qn]||n[hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=V0(t);t!==null;){if(n=t[hn])return n;t=V0(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[hn]||t[qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Uc(t){return t[da]||null}var zf=[],ni=-1;function Hr(t){return{current:t}}function le(t){0>ni||(t.current=zf[ni],zf[ni]=null,ni--)}function re(t,e){ni++,zf[ni]=t.current,t.current=e}var br={},at=Hr(br),Ct=Hr(!1),Es=br;function Ri(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function St(t){return t=t.childContextTypes,t!=null}function Fu(){le(Ct),le(at)}function B0(t,e,n){if(at.current!==br)throw Error(A(168));re(at,e),re(Ct,n)}function _E(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(A(108,b3(t)||"Unknown",s));return ve({},n,r)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Es=at.current,re(at,t),re(Ct,Ct.current),!0}function z0(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=_E(t,e,Es),r.__reactInternalMemoizedMergedChildContext=t,le(Ct),le(at),re(at,t)):le(Ct),re(Ct,n)}var On=null,Vc=!1,yd=!1;function xE(t){On===null?On=[t]:On.push(t)}function ZI(t){Vc=!0,xE(t)}function Wr(){if(!yd&&On!==null){yd=!0;var t=0,e=te;try{var n=On;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Vc=!1}catch(s){throw On!==null&&(On=On.slice(t+1)),Y2(xm,Wr),s}finally{te=e,yd=!1}}return null}var ri=[],si=0,Vu=null,Bu=0,Ut=[],Vt=0,Cs=null,bn=1,$n="";function ns(t,e){ri[si++]=Bu,ri[si++]=Vu,Vu=t,Bu=e}function IE(t,e,n){Ut[Vt++]=bn,Ut[Vt++]=$n,Ut[Vt++]=Cs,Cs=t;var r=bn;t=$n;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var i=32-tn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bn=1<<32-tn(e)+s|n<<s|r,$n=i+t}else bn=1<<i|n<<s|r,$n=t}function Om(t){t.return!==null&&(ns(t,1),IE(t,1,0))}function Mm(t){for(;t===Vu;)Vu=ri[--si],ri[si]=null,Bu=ri[--si],ri[si]=null;for(;t===Cs;)Cs=Ut[--Vt],Ut[Vt]=null,$n=Ut[--Vt],Ut[Vt]=null,bn=Ut[--Vt],Ut[Vt]=null}var Nt=null,Rt=null,ce=!1,Zt=null;function kE(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function H0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nt=t,Rt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cs!==null?{id:bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nt=t,Rt=null,!0):!1;default:return!1}}function Hf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wf(t){if(ce){var e=Rt;if(e){var n=e;if(!H0(t,e)){if(Hf(t))throw Error(A(418));e=Tr(n.nextSibling);var r=Nt;e&&H0(t,e)?kE(r,n):(t.flags=t.flags&-4097|2,ce=!1,Nt=t)}}else{if(Hf(t))throw Error(A(418));t.flags=t.flags&-4097|2,ce=!1,Nt=t}}}function W0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nt=t}function $l(t){if(t!==Nt)return!1;if(!ce)return W0(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uf(t.type,t.memoizedProps)),e&&(e=Rt)){if(Hf(t))throw RE(),Error(A(418));for(;e;)kE(t,e),e=Tr(e.nextSibling)}if(W0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Nt?Tr(t.stateNode.nextSibling):null;return!0}function RE(){for(var t=Rt;t;)t=Tr(t.nextSibling)}function Ai(){Rt=Nt=null,ce=!1}function bm(t){Zt===null?Zt=[t]:Zt.push(t)}var e5=nr.ReactCurrentBatchConfig;function Xt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zu=Hr(null),Hu=null,ii=null,$m=null;function jm(){$m=ii=Hu=null}function Fm(t){var e=zu.current;le(zu),t._currentValue=e}function Kf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){Hu=t,$m=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if($m!==t)if(t={context:t,memoizedValue:e,next:null},ii===null){if(Hu===null)throw Error(A(308));ii=t,Hu.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return e}var ls=null;function Um(t){ls===null?ls=[t]:ls.push(t)}function AE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Um(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Vm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gn(t,n)}return s=r.interleaved,s===null?(e.next=e,Um(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gn(t,n)}function uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Im(t,n)}}function K0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wu(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,w=a;switch(d=e,f=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=ve({},h,d);break e;case 2:lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ts|=o,t.lanes=o,t.memoizedState=h}}function q0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var NE=new A2.Component().refs;function qf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bc={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Ir(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=_r(t,i,s),e!==null&&(nn(e,t,s,r),uu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Ir(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=_r(t,i,s),e!==null&&(nn(e,t,s,r),uu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Ir(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=_r(t,s,r),e!==null&&(nn(e,t,r,n),uu(e,t,r))}};function G0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ua(n,r)||!ua(s,i):!0}function DE(t,e,n){var r=!1,s=br,i=e.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=St(e)?Es:at.current,r=e.contextTypes,i=(r=r!=null)?Ri(t,s):br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Q0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bc.enqueueReplaceState(e,e.state,null)}function Gf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=NE,Vm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=St(e)?Es:at.current,s.context=Ri(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bc.enqueueReplaceState(s,s.state,null),Wu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===NE&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y0(t){var e=t._init;return e(t._payload)}function LE(t){function e(v,m){if(t){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=kr(v,m),v.index=0,v.sibling=null,v}function i(v,m,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,m,y,C){return m===null||m.tag!==6?(m=_d(y,v.mode,C),m.return=v,m):(m=s(m,y),m.return=v,m)}function l(v,m,y,C){var T=y.type;return T===Xs?c(v,m,y.props.children,C,y.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ar&&Y0(T)===m.type)?(C=s(m,y.props),C.ref=mo(v,m,y),C.return=v,C):(C=mu(y.type,y.key,y.props,null,v.mode,C),C.ref=mo(v,m,y),C.return=v,C)}function u(v,m,y,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=xd(y,v.mode,C),m.return=v,m):(m=s(m,y.children||[]),m.return=v,m)}function c(v,m,y,C,T){return m===null||m.tag!==7?(m=gs(y,v.mode,C,T),m.return=v,m):(m=s(m,y),m.return=v,m)}function h(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_d(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case kl:return y=mu(m.type,m.key,m.props,null,v.mode,y),y.ref=mo(v,null,m),y.return=v,y;case Ys:return m=xd(m,v.mode,y),m.return=v,m;case ar:var C=m._init;return h(v,C(m._payload),y)}if(xo(m)||uo(m))return m=gs(m,v.mode,y,null),m.return=v,m;jl(v,m)}return null}function d(v,m,y,C){var T=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(v,m,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kl:return y.key===T?l(v,m,y,C):null;case Ys:return y.key===T?u(v,m,y,C):null;case ar:return T=y._init,d(v,m,T(y._payload),C)}if(xo(y)||uo(y))return T!==null?null:c(v,m,y,C,null);jl(v,y)}return null}function f(v,m,y,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(y)||null,a(m,v,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case kl:return v=v.get(C.key===null?y:C.key)||null,l(m,v,C,T);case Ys:return v=v.get(C.key===null?y:C.key)||null,u(m,v,C,T);case ar:var k=C._init;return f(v,m,y,k(C._payload),T)}if(xo(C)||uo(C))return v=v.get(y)||null,c(m,v,C,T,null);jl(m,C)}return null}function g(v,m,y,C){for(var T=null,k=null,I=m,x=m=0,M=null;I!==null&&x<y.length;x++){I.index>x?(M=I,I=null):M=I.sibling;var $=d(v,I,y[x],C);if($===null){I===null&&(I=M);break}t&&I&&$.alternate===null&&e(v,I),m=i($,m,x),k===null?T=$:k.sibling=$,k=$,I=M}if(x===y.length)return n(v,I),ce&&ns(v,x),T;if(I===null){for(;x<y.length;x++)I=h(v,y[x],C),I!==null&&(m=i(I,m,x),k===null?T=I:k.sibling=I,k=I);return ce&&ns(v,x),T}for(I=r(v,I);x<y.length;x++)M=f(I,v,x,y[x],C),M!==null&&(t&&M.alternate!==null&&I.delete(M.key===null?x:M.key),m=i(M,m,x),k===null?T=M:k.sibling=M,k=M);return t&&I.forEach(function(de){return e(v,de)}),ce&&ns(v,x),T}function w(v,m,y,C){var T=uo(y);if(typeof T!="function")throw Error(A(150));if(y=T.call(y),y==null)throw Error(A(151));for(var k=T=null,I=m,x=m=0,M=null,$=y.next();I!==null&&!$.done;x++,$=y.next()){I.index>x?(M=I,I=null):M=I.sibling;var de=d(v,I,$.value,C);if(de===null){I===null&&(I=M);break}t&&I&&de.alternate===null&&e(v,I),m=i(de,m,x),k===null?T=de:k.sibling=de,k=de,I=M}if($.done)return n(v,I),ce&&ns(v,x),T;if(I===null){for(;!$.done;x++,$=y.next())$=h(v,$.value,C),$!==null&&(m=i($,m,x),k===null?T=$:k.sibling=$,k=$);return ce&&ns(v,x),T}for(I=r(v,I);!$.done;x++,$=y.next())$=f(I,v,x,$.value,C),$!==null&&(t&&$.alternate!==null&&I.delete($.key===null?x:$.key),m=i($,m,x),k===null?T=$:k.sibling=$,k=$);return t&&I.forEach(function(yt){return e(v,yt)}),ce&&ns(v,x),T}function S(v,m,y,C){if(typeof y=="object"&&y!==null&&y.type===Xs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case kl:e:{for(var T=y.key,k=m;k!==null;){if(k.key===T){if(T=y.type,T===Xs){if(k.tag===7){n(v,k.sibling),m=s(k,y.props.children),m.return=v,v=m;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ar&&Y0(T)===k.type){n(v,k.sibling),m=s(k,y.props),m.ref=mo(v,k,y),m.return=v,v=m;break e}n(v,k);break}else e(v,k);k=k.sibling}y.type===Xs?(m=gs(y.props.children,v.mode,C,y.key),m.return=v,v=m):(C=mu(y.type,y.key,y.props,null,v.mode,C),C.ref=mo(v,m,y),C.return=v,v=C)}return o(v);case Ys:e:{for(k=y.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=s(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=xd(y,v.mode,C),m.return=v,v=m}return o(v);case ar:return k=y._init,S(v,m,k(y._payload),C)}if(xo(y))return g(v,m,y,C);if(uo(y))return w(v,m,y,C);jl(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=s(m,y),m.return=v,v=m):(n(v,m),m=_d(y,v.mode,C),m.return=v,v=m),o(v)):n(v,m)}return S}var Pi=LE(!0),OE=LE(!1),Qa={},vn=Hr(Qa),fa=Hr(Qa),pa=Hr(Qa);function us(t){if(t===Qa)throw Error(A(174));return t}function Bm(t,e){switch(re(pa,e),re(fa,t),re(vn,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:If(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=If(e,t)}le(vn),re(vn,e)}function Ni(){le(vn),le(fa),le(pa)}function ME(t){us(pa.current);var e=us(vn.current),n=If(e,t.type);e!==n&&(re(fa,t),re(vn,n))}function zm(t){fa.current===t&&(le(vn),le(fa))}var me=Hr(0);function Ku(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vd=[];function Hm(){for(var t=0;t<vd.length;t++)vd[t]._workInProgressVersionPrimary=null;vd.length=0}var cu=nr.ReactCurrentDispatcher,wd=nr.ReactCurrentBatchConfig,Ss=0,ye=null,Oe=null,Ve=null,qu=!1,Vo=!1,ma=0,t5=0;function Xe(){throw Error(A(321))}function Wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rn(t[n],e[n]))return!1;return!0}function Km(t,e,n,r,s,i){if(Ss=i,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cu.current=t===null||t.memoizedState===null?i5:o5,t=n(r,s),Vo){i=0;do{if(Vo=!1,ma=0,25<=i)throw Error(A(301));i+=1,Ve=Oe=null,e.updateQueue=null,cu.current=a5,t=n(r,s)}while(Vo)}if(cu.current=Gu,e=Oe!==null&&Oe.next!==null,Ss=0,Ve=Oe=ye=null,qu=!1,e)throw Error(A(300));return t}function qm(){var t=ma!==0;return ma=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?ye.memoizedState=Ve=t:Ve=Ve.next=t,Ve}function qt(){if(Oe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=Ve===null?ye.memoizedState:Ve.next;if(e!==null)Ve=e,Oe=t;else{if(t===null)throw Error(A(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ve===null?ye.memoizedState=Ve=t:Ve=Ve.next=t}return Ve}function ga(t,e){return typeof e=="function"?e(t):e}function Ed(t){var e=qt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=Oe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Ss&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ye.lanes|=c,Ts|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,rn(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ye.lanes|=i,Ts|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cd(t){var e=qt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rn(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bE(){}function $E(t,e){var n=ye,r=qt(),s=e(),i=!rn(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Gm(UE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,ya(9,FE.bind(null,n,r,s,e),void 0,null),Be===null)throw Error(A(349));Ss&30||jE(n,e,s)}return s}function jE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FE(t,e,n,r){e.value=n,e.getSnapshot=r,VE(e)&&BE(t)}function UE(t,e,n){return n(function(){VE(e)&&BE(t)})}function VE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rn(t,n)}catch{return!0}}function BE(t){var e=Gn(t,1);e!==null&&nn(e,t,1,-1)}function X0(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},e.queue=t,t=t.dispatch=s5.bind(null,ye,t),[e.memoizedState,t]}function ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zE(){return qt().memoizedState}function hu(t,e,n,r){var s=un();ye.flags|=t,s.memoizedState=ya(1|e,n,void 0,r===void 0?null:r)}function zc(t,e,n,r){var s=qt();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var o=Oe.memoizedState;if(i=o.destroy,r!==null&&Wm(r,o.deps)){s.memoizedState=ya(e,n,i,r);return}}ye.flags|=t,s.memoizedState=ya(1|e,n,i,r)}function J0(t,e){return hu(8390656,8,t,e)}function Gm(t,e){return zc(2048,8,t,e)}function HE(t,e){return zc(4,2,t,e)}function WE(t,e){return zc(4,4,t,e)}function KE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qE(t,e,n){return n=n!=null?n.concat([t]):null,zc(4,4,KE.bind(null,e,t),n)}function Qm(){}function GE(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function QE(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YE(t,e,n){return Ss&21?(rn(n,e)||(n=Z2(),ye.lanes|=n,Ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function n5(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=wd.transition;wd.transition={};try{t(!1),e()}finally{te=n,wd.transition=r}}function XE(){return qt().memoizedState}function r5(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JE(t))ZE(e,n);else if(n=AE(t,e,n,r),n!==null){var s=pt();nn(n,t,r,s),eC(n,e,r)}}function s5(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JE(t))ZE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,rn(a,o)){var l=e.interleaved;l===null?(s.next=s,Um(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=AE(t,e,s,r),n!==null&&(s=pt(),nn(n,t,r,s),eC(n,e,r))}}function JE(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function ZE(t,e){Vo=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Im(t,n)}}var Gu={readContext:Kt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},i5={readContext:Kt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:J0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hu(4194308,4,KE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return hu(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=r5.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:X0,useDebugValue:Qm,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=X0(!1),e=t[0];return t=n5.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,s=un();if(ce){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),Be===null)throw Error(A(349));Ss&30||jE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,J0(UE.bind(null,r,i,t),[t]),r.flags|=2048,ya(9,FE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=un(),e=Be.identifierPrefix;if(ce){var n=$n,r=bn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=t5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},o5={readContext:Kt,useCallback:GE,useContext:Kt,useEffect:Gm,useImperativeHandle:qE,useInsertionEffect:HE,useLayoutEffect:WE,useMemo:QE,useReducer:Ed,useRef:zE,useState:function(){return Ed(ga)},useDebugValue:Qm,useDeferredValue:function(t){var e=qt();return YE(e,Oe.memoizedState,t)},useTransition:function(){var t=Ed(ga)[0],e=qt().memoizedState;return[t,e]},useMutableSource:bE,useSyncExternalStore:$E,useId:XE,unstable_isNewReconciler:!1},a5={readContext:Kt,useCallback:GE,useContext:Kt,useEffect:Gm,useImperativeHandle:qE,useInsertionEffect:HE,useLayoutEffect:WE,useMemo:QE,useReducer:Cd,useRef:zE,useState:function(){return Cd(ga)},useDebugValue:Qm,useDeferredValue:function(t){var e=qt();return Oe===null?e.memoizedState=t:YE(e,Oe.memoizedState,t)},useTransition:function(){var t=Cd(ga)[0],e=qt().memoizedState;return[t,e]},useMutableSource:bE,useSyncExternalStore:$E,useId:XE,unstable_isNewReconciler:!1};function Di(t,e){try{var n="",r=e;do n+=M3(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var l5=typeof WeakMap=="function"?WeakMap:Map;function tC(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yu||(Yu=!0,ip=r),Qf(t,e)},n}function nC(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qf(t,e),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Z0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new l5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=S5.bind(null,t,e,n),e.then(t,t))}function ey(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ty(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var u5=nr.ReactCurrentOwner,Et=!1;function dt(t,e,n,r){e.child=t===null?OE(e,null,n,r):Pi(e,t.child,n,r)}function ny(t,e,n,r,s){n=n.render;var i=e.ref;return vi(e,s),r=Km(t,e,n,r,i,s),n=qm(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(ce&&n&&Om(e),e.flags|=1,dt(t,e,r,s),e.child)}function ry(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rC(t,e,i,r,s)):(t=mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(o,r)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=kr(i,r),t.ref=e.ref,t.return=e,e.child=t}function rC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ua(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return Yf(t,e,n,r,s)}function sC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(ai,kt),kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(ai,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,re(ai,kt),kt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,re(ai,kt),kt|=r;return dt(t,e,s,n),e.child}function iC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yf(t,e,n,r,s){var i=St(n)?Es:at.current;return i=Ri(e,i),vi(e,s),n=Km(t,e,n,r,i,s),r=qm(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(ce&&r&&Om(e),e.flags|=1,dt(t,e,n,s),e.child)}function sy(t,e,n,r,s){if(St(n)){var i=!0;Uu(e)}else i=!1;if(vi(e,s),e.stateNode===null)du(t,e),DE(e,n,r),Gf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=St(n)?Es:at.current,u=Ri(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Q0(e,o,r,u),lr=!1;var d=e.memoizedState;o.state=d,Wu(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Ct.current||lr?(typeof c=="function"&&(qf(e,n,c,r),l=e.memoizedState),(a=lr||G0(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,PE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Xt(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Kt(l):(l=St(n)?Es:at.current,l=Ri(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Q0(e,o,r,l),lr=!1,d=e.memoizedState,o.state=d,Wu(e,r,o,s);var g=e.memoizedState;a!==h||d!==g||Ct.current||lr?(typeof f=="function"&&(qf(e,n,f,r),g=e.memoizedState),(u=lr||G0(e,n,u,r,d,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Xf(t,e,n,r,i,s)}function Xf(t,e,n,r,s,i){iC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&z0(e,n,!1),Qn(t,e,i);r=e.stateNode,u5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,a,i)):dt(t,e,a,i),e.memoizedState=r.state,s&&z0(e,n,!0),e.child}function oC(t){var e=t.stateNode;e.pendingContext?B0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&B0(t,e.context,!1),Bm(t,e.containerInfo)}function iy(t,e,n,r,s){return Ai(),bm(s),e.flags|=256,dt(t,e,n,r),e.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function Zf(t){return{baseLanes:t,cachePool:null,transitions:null}}function aC(t,e,n){var r=e.pendingProps,s=me.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),re(me,s&1),t===null)return Wf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kc(o,r,0,null),t=gs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Zf(n),e.memoizedState=Jf,t):Ym(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return c5(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=kr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=kr(a,i):(i=gs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Zf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Jf,r}return i=t.child,t=i.sibling,r=kr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ym(t,e){return e=Kc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&bm(r),Pi(e,t.child,null,n),t=Ym(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function c5(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sd(Error(A(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Kc({mode:"visible",children:r.children},s,0,null),i=gs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=Zf(o),e.memoizedState=Jf,i);if(!(e.mode&1))return Fl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(A(419)),r=Sd(i,r,void 0),Fl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Et||a){if(r=Be,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(t,s),nn(r,t,s,-1))}return ng(),r=Sd(Error(A(421))),Fl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=T5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rt=Tr(s.nextSibling),Nt=e,ce=!0,Zt=null,t!==null&&(Ut[Vt++]=bn,Ut[Vt++]=$n,Ut[Vt++]=Cs,bn=t.id,$n=t.overflow,Cs=e),e=Ym(e,r.children),e.flags|=4096,e)}function oy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kf(t.return,e,n)}function Td(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dt(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oy(t,n,e);else if(t.tag===19)oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ku(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Td(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ku(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Td(e,!0,n,null,i);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function h5(t,e,n){switch(e.tag){case 3:oC(e),Ai();break;case 5:ME(e);break;case 1:St(e.type)&&Uu(e);break;case 4:Bm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;re(zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?aC(t,e,n):(re(me,me.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);re(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,sC(t,e,n)}return Qn(t,e,n)}var uC,ep,cC,hC;uC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ep=function(){};cC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,us(vn.current);var i=null;switch(n){case"input":s=Sf(t,s),r=Sf(t,r),i=[];break;case"select":s=ve({},s,{value:void 0}),r=ve({},r,{value:void 0}),i=[];break;case"textarea":s=xf(t,s),r=xf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ju)}kf(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(na.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(na.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&oe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};hC=function(t,e,n,r){n!==r&&(e.flags|=4)};function go(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function d5(t,e,n){var r=e.pendingProps;switch(Mm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return St(e.type)&&Fu(),Je(e),null;case 3:return r=e.stateNode,Ni(),le(Ct),le(at),Hm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(lp(Zt),Zt=null))),ep(t,e),Je(e),null;case 5:zm(e);var s=us(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)cC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return Je(e),null}if(t=us(vn.current),$l(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hn]=e,r[da]=i,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(s=0;s<ko.length;s++)oe(ko[s],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":m0(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":y0(r,i),oe("invalid",r)}kf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,a,t),s=["children",""+a]):na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Rl(r),g0(r,i,!0);break;case"textarea":Rl(r),v0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ju)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hn]=e,t[da]=r,uC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rf(n,r),n){case"dialog":oe("cancel",t),oe("close",t),s=r;break;case"iframe":case"object":case"embed":oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ko.length;s++)oe(ko[s],t);s=r;break;case"source":oe("error",t),s=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),s=r;break;case"details":oe("toggle",t),s=r;break;case"input":m0(t,r),s=Sf(t,r),oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ve({},r,{value:void 0}),oe("invalid",t);break;case"textarea":y0(t,r),s=xf(t,r),oe("invalid",t);break;default:s=r}kf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?V2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&F2(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ra(t,l):typeof l=="number"&&ra(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(na.hasOwnProperty(i)?l!=null&&i==="onScroll"&&oe("scroll",t):l!=null&&Em(t,i,l,o))}switch(n){case"input":Rl(t),g0(t,r,!1);break;case"textarea":Rl(t),v0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?pi(t,!!r.multiple,i,!1):r.defaultValue!=null&&pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)hC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=us(pa.current),us(vn.current),$l(e)){if(r=e.stateNode,n=e.memoizedProps,r[hn]=e,(i=r.nodeValue!==n)&&(t=Nt,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=e,e.stateNode=r}return Je(e),null;case 13:if(le(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&Rt!==null&&e.mode&1&&!(e.flags&128))RE(),Ai(),e.flags|=98560,i=!1;else if(i=$l(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(A(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[hn]=e}else Ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else Zt!==null&&(lp(Zt),Zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?$e===0&&($e=3):ng())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Ni(),ep(t,e),t===null&&ca(e.stateNode.containerInfo),Je(e),null;case 10:return Fm(e.type._context),Je(e),null;case 17:return St(e.type)&&Fu(),Je(e),null;case 19:if(le(me),i=e.memoizedState,i===null)return Je(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)go(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ku(t),o!==null){for(e.flags|=128,go(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(me,me.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>Li&&(e.flags|=128,r=!0,go(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ku(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),go(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ce)return Je(e),null}else 2*Re()-i.renderingStartTime>Li&&n!==1073741824&&(e.flags|=128,r=!0,go(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=me.current,re(me,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return tg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function f5(t,e){switch(Mm(e),e.tag){case 1:return St(e.type)&&Fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),le(Ct),le(at),Hm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zm(e),null;case 13:if(le(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(me),null;case 4:return Ni(),null;case 10:return Fm(e.type._context),null;case 22:case 23:return tg(),null;case 24:return null;default:return null}}var Ul=!1,tt=!1,p5=typeof WeakSet=="function"?WeakSet:Set,L=null;function oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function tp(t,e,n){try{n()}catch(r){Ee(t,e,r)}}var ay=!1;function m5(t,e){if(jf=Mu,t=mE(),Lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ff={focusedElem:t,selectionRange:n},Mu=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,S=g.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Xt(e.type,w),S);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(C){Ee(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return g=ay,ay=!1,g}function Bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tp(e,n,i)}s=s.next}while(s!==r)}}function Hc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dC(t){var e=t.alternate;e!==null&&(t.alternate=null,dC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hn],delete e[da],delete e[Bf],delete e[XI],delete e[JI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fC(t){return t.tag===5||t.tag===3||t.tag===4}function ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ju));else if(r!==4&&(t=t.child,t!==null))for(rp(t,e,n),t=t.sibling;t!==null;)rp(t,e,n),t=t.sibling}function sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sp(t,e,n),t=t.sibling;t!==null;)sp(t,e,n),t=t.sibling}var We=null,Jt=!1;function rr(t,e,n){for(n=n.child;n!==null;)pC(t,e,n),n=n.sibling}function pC(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(bc,n)}catch{}switch(n.tag){case 5:tt||oi(n,e);case 6:var r=We,s=Jt;We=null,rr(t,e,n),We=r,Jt=s,We!==null&&(Jt?(t=We,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Jt?(t=We,n=n.stateNode,t.nodeType===8?gd(t.parentNode,n):t.nodeType===1&&gd(t,n),aa(t)):gd(We,n.stateNode));break;case 4:r=We,s=Jt,We=n.stateNode.containerInfo,Jt=!0,rr(t,e,n),We=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tp(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!tt&&(oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ee(n,e,a)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,rr(t,e,n),tt=r):rr(t,e,n);break;default:rr(t,e,n)}}function uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p5),e.forEach(function(r){var s=_5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:We=a.stateNode,Jt=!1;break e;case 3:We=a.stateNode.containerInfo,Jt=!0;break e;case 4:We=a.stateNode.containerInfo,Jt=!0;break e}a=a.return}if(We===null)throw Error(A(160));pC(i,o,s),We=null,Jt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ee(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mC(e,t),e=e.sibling}function mC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),ln(t),r&4){try{Bo(3,t,t.return),Hc(3,t)}catch(w){Ee(t,t.return,w)}try{Bo(5,t,t.return)}catch(w){Ee(t,t.return,w)}}break;case 1:Yt(e,t),ln(t),r&512&&n!==null&&oi(n,n.return);break;case 5:if(Yt(e,t),ln(t),r&512&&n!==null&&oi(n,n.return),t.flags&32){var s=t.stateNode;try{ra(s,"")}catch(w){Ee(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&b2(s,i),Rf(a,o);var u=Rf(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?V2(s,h):c==="dangerouslySetInnerHTML"?F2(s,h):c==="children"?ra(s,h):Em(s,c,h,u)}switch(a){case"input":Tf(s,i);break;case"textarea":$2(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?pi(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?pi(s,!!i.multiple,i.defaultValue,!0):pi(s,!!i.multiple,i.multiple?[]:"",!1))}s[da]=i}catch(w){Ee(t,t.return,w)}}break;case 6:if(Yt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(A(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Ee(t,t.return,w)}}break;case 3:if(Yt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(w){Ee(t,t.return,w)}break;case 4:Yt(e,t),ln(t);break;case 13:Yt(e,t),ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zm=Re())),r&4&&uy(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(u=tt)||c,Yt(e,t),tt=u):Yt(e,t),ln(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(L=t,c=t.child;c!==null;){for(h=L=c;L!==null;){switch(d=L,f=d.child,d.tag){case 0:case 11:case 14:case 15:Bo(4,d,d.return);break;case 1:oi(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){Ee(r,n,w)}}break;case 5:oi(d,d.return);break;case 22:if(d.memoizedState!==null){hy(h);continue}}f!==null?(f.return=d,L=f):hy(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=U2("display",o))}catch(w){Ee(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Ee(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yt(e,t),ln(t),r&4&&uy(t);break;case 21:break;default:Yt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fC(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ra(s,""),r.flags&=-33);var i=ly(t);sp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ly(t);rp(t,a,o);break;default:throw Error(A(161))}}catch(l){Ee(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function g5(t,e,n){L=t,gC(t)}function gC(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ul;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tt;a=Ul;var u=tt;if(Ul=o,(tt=l)&&!u)for(L=s;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?dy(s):l!==null?(l.return=o,L=l):dy(s);for(;i!==null;)L=i,gC(i),i=i.sibling;L=s,Ul=a,tt=u}cy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):cy(t)}}function cy(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||Hc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&q0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&aa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}tt||e.flags&512&&np(e)}catch(d){Ee(e,e.return,d)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function hy(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function dy(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hc(4,e)}catch(l){Ee(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ee(e,s,l)}}var i=e.return;try{np(e)}catch(l){Ee(e,i,l)}break;case 5:var o=e.return;try{np(e)}catch(l){Ee(e,o,l)}}}catch(l){Ee(e,e.return,l)}if(e===t){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var y5=Math.ceil,Qu=nr.ReactCurrentDispatcher,Xm=nr.ReactCurrentOwner,Ht=nr.ReactCurrentBatchConfig,J=0,Be=null,Le=null,Ge=0,kt=0,ai=Hr(0),$e=0,va=null,Ts=0,Wc=0,Jm=0,zo=null,vt=null,Zm=0,Li=1/0,Ln=null,Yu=!1,ip=null,xr=null,Vl=!1,yr=null,Xu=0,Ho=0,op=null,fu=-1,pu=0;function pt(){return J&6?Re():fu!==-1?fu:fu=Re()}function Ir(t){return t.mode&1?J&2&&Ge!==0?Ge&-Ge:e5.transition!==null?(pu===0&&(pu=Z2()),pu):(t=te,t!==0||(t=window.event,t=t===void 0?16:oE(t.type)),t):1}function nn(t,e,n,r){if(50<Ho)throw Ho=0,op=null,Error(A(185));Ka(t,n,r),(!(J&2)||t!==Be)&&(t===Be&&(!(J&2)&&(Wc|=n),$e===4&&hr(t,Ge)),Tt(t,r),n===1&&J===0&&!(e.mode&1)&&(Li=Re()+500,Vc&&Wr()))}function Tt(t,e){var n=t.callbackNode;eI(t,e);var r=Ou(t,t===Be?Ge:0);if(r===0)n!==null&&C0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C0(n),e===1)t.tag===0?ZI(fy.bind(null,t)):xE(fy.bind(null,t)),QI(function(){!(J&6)&&Wr()}),n=null;else{switch(eE(r)){case 1:n=xm;break;case 4:n=X2;break;case 16:n=Lu;break;case 536870912:n=J2;break;default:n=Lu}n=_C(n,yC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yC(t,e){if(fu=-1,pu=0,J&6)throw Error(A(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=Ou(t,t===Be?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=J;J|=2;var i=wC();(Be!==t||Ge!==e)&&(Ln=null,Li=Re()+500,ms(t,e));do try{E5();break}catch(a){vC(t,a)}while(1);jm(),Qu.current=i,J=s,Le!==null?e=0:(Be=null,Ge=0,e=$e)}if(e!==0){if(e===2&&(s=Lf(t),s!==0&&(r=s,e=ap(t,s))),e===1)throw n=va,ms(t,0),hr(t,r),Tt(t,Re()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!v5(s)&&(e=Ju(t,r),e===2&&(i=Lf(t),i!==0&&(r=i,e=ap(t,i))),e===1))throw n=va,ms(t,0),hr(t,r),Tt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:rs(t,vt,Ln);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=Zm+500-Re(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Vf(rs.bind(null,t,vt,Ln),e);break}rs(t,vt,Ln);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*y5(r/1960))-r,10<r){t.timeoutHandle=Vf(rs.bind(null,t,vt,Ln),r);break}rs(t,vt,Ln);break;case 5:rs(t,vt,Ln);break;default:throw Error(A(329))}}}return Tt(t,Re()),t.callbackNode===n?yC.bind(null,t):null}function ap(t,e){var n=zo;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=vt,vt=n,e!==null&&lp(e)),t}function lp(t){vt===null?vt=t:vt.push.apply(vt,t)}function v5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~Jm,e&=~Wc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function fy(t){if(J&6)throw Error(A(327));wi();var e=Ou(t,0);if(!(e&1))return Tt(t,Re()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=Lf(t);r!==0&&(e=r,n=ap(t,r))}if(n===1)throw n=va,ms(t,0),hr(t,e),Tt(t,Re()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,vt,Ln),Tt(t,Re()),null}function eg(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Li=Re()+500,Vc&&Wr())}}function _s(t){yr!==null&&yr.tag===0&&!(J&6)&&wi();var e=J;J|=1;var n=Ht.transition,r=te;try{if(Ht.transition=null,te=1,t)return t()}finally{te=r,Ht.transition=n,J=e,!(J&6)&&Wr()}}function tg(){kt=ai.current,le(ai)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GI(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(Mm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fu();break;case 3:Ni(),le(Ct),le(at),Hm();break;case 5:zm(r);break;case 4:Ni();break;case 13:le(me);break;case 19:le(me);break;case 10:Fm(r.type._context);break;case 22:case 23:tg()}n=n.return}if(Be=t,Le=t=kr(t.current,null),Ge=kt=e,$e=0,va=null,Jm=Wc=Ts=0,vt=zo=null,ls!==null){for(e=0;e<ls.length;e++)if(n=ls[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ls=null}return t}function vC(t,e){do{var n=Le;try{if(jm(),cu.current=Gu,qu){for(var r=ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qu=!1}if(Ss=0,Ve=Oe=ye=null,Vo=!1,ma=0,Xm.current=null,n===null||n.return===null){$e=1,va=e,Le=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ge,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ey(o);if(f!==null){f.flags&=-257,ty(f,o,a,i,e),f.mode&1&&Z0(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(l),e.updateQueue=w}else g.add(l);break e}else{if(!(e&1)){Z0(i,u,e),ng();break e}l=Error(A(426))}}else if(ce&&a.mode&1){var S=ey(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),ty(S,o,a,i,e),bm(Di(l,a));break e}}i=l=Di(l,a),$e!==4&&($e=2),zo===null?zo=[i]:zo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=tC(i,l,e);K0(i,v);break e;case 1:a=l;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(xr===null||!xr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=nC(i,a,e);K0(i,C);break e}}i=i.return}while(i!==null)}CC(n)}catch(T){e=T,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(1)}function wC(){var t=Qu.current;return Qu.current=Gu,t===null?Gu:t}function ng(){($e===0||$e===3||$e===2)&&($e=4),Be===null||!(Ts&268435455)&&!(Wc&268435455)||hr(Be,Ge)}function Ju(t,e){var n=J;J|=2;var r=wC();(Be!==t||Ge!==e)&&(Ln=null,ms(t,e));do try{w5();break}catch(s){vC(t,s)}while(1);if(jm(),J=n,Qu.current=r,Le!==null)throw Error(A(261));return Be=null,Ge=0,$e}function w5(){for(;Le!==null;)EC(Le)}function E5(){for(;Le!==null&&!W3();)EC(Le)}function EC(t){var e=TC(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?CC(t):Le=e,Xm.current=null}function CC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=f5(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Le=null;return}}else if(n=d5(n,e,kt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);$e===0&&($e=5)}function rs(t,e,n){var r=te,s=Ht.transition;try{Ht.transition=null,te=1,C5(t,e,n,r)}finally{Ht.transition=s,te=r}return null}function C5(t,e,n,r){do wi();while(yr!==null);if(J&6)throw Error(A(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(tI(t,i),t===Be&&(Le=Be=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vl||(Vl=!0,_C(Lu,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var o=te;te=1;var a=J;J|=4,Xm.current=null,m5(t,n),mC(n,t),VI(Ff),Mu=!!jf,Ff=jf=null,t.current=n,g5(n),K3(),J=a,te=o,Ht.transition=i}else t.current=n;if(Vl&&(Vl=!1,yr=t,Xu=s),i=t.pendingLanes,i===0&&(xr=null),Q3(n.stateNode),Tt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yu)throw Yu=!1,t=ip,ip=null,t;return Xu&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===op?Ho++:(Ho=0,op=t):Ho=0,Wr(),null}function wi(){if(yr!==null){var t=eE(Xu),e=Ht.transition,n=te;try{if(Ht.transition=null,te=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,Xu=0,J&6)throw Error(A(331));var s=J;for(J|=4,L=t.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(L=u;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:Bo(8,c,i)}var h=c.child;if(h!==null)h.return=c,L=h;else for(;L!==null;){c=L;var d=c.sibling,f=c.return;if(dC(c),c===u){L=null;break}if(d!==null){d.return=f,L=d;break}L=f}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bo(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,L=v;break e}L=i.return}}var m=t.current;for(L=m;L!==null;){o=L;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,L=y;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hc(9,a)}}catch(T){Ee(a,a.return,T)}if(a===o){L=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,L=C;break e}L=a.return}}if(J=s,Wr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(bc,t)}catch{}r=!0}return r}finally{te=n,Ht.transition=e}}return!1}function py(t,e,n){e=Di(n,e),e=tC(t,e,1),t=_r(t,e,1),e=pt(),t!==null&&(Ka(t,1,e),Tt(t,e))}function Ee(t,e,n){if(t.tag===3)py(t,t,n);else for(;e!==null;){if(e.tag===3){py(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){t=Di(n,t),t=nC(e,t,1),e=_r(e,t,1),t=pt(),e!==null&&(Ka(e,1,t),Tt(e,t));break}}e=e.return}}function S5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(Ge&n)===n&&($e===4||$e===3&&(Ge&130023424)===Ge&&500>Re()-Zm?ms(t,0):Jm|=n),Tt(t,e)}function SC(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=pt();t=Gn(t,e),t!==null&&(Ka(t,e,n),Tt(t,n))}function T5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SC(t,n)}function _5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),SC(t,n)}var TC;TC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,h5(t,e,n);Et=!!(t.flags&131072)}else Et=!1,ce&&e.flags&1048576&&IE(e,Bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;du(t,e),t=e.pendingProps;var s=Ri(e,at.current);vi(e,n),s=Km(null,e,r,t,s,n);var i=qm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(i=!0,Uu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vm(e),s.updater=Bc,e.stateNode=s,s._reactInternals=e,Gf(e,r,t,n),e=Xf(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&Om(e),dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(du(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=I5(r),t=Xt(r,t),s){case 0:e=Yf(null,e,r,t,n);break e;case 1:e=sy(null,e,r,t,n);break e;case 11:e=ny(null,e,r,t,n);break e;case 14:e=ry(null,e,r,Xt(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Yf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),sy(t,e,r,s,n);case 3:e:{if(oC(e),t===null)throw Error(A(387));r=e.pendingProps,i=e.memoizedState,s=i.element,PE(t,e),Wu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Di(Error(A(423)),e),e=iy(t,e,r,n,s);break e}else if(r!==s){s=Di(Error(A(424)),e),e=iy(t,e,r,n,s);break e}else for(Rt=Tr(e.stateNode.containerInfo.firstChild),Nt=e,ce=!0,Zt=null,n=OE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ai(),r===s){e=Qn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return ME(e),t===null&&Wf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Uf(r,s)?o=null:i!==null&&Uf(r,i)&&(e.flags|=32),iC(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&Wf(e),null;case 13:return aC(t,e,n);case 4:return Bm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ny(t,e,r,s,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,re(zu,r._currentValue),r._currentValue=o,i!==null)if(rn(i.value,o)){if(i.children===s.children&&!Ct.current){e=Qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Bn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Kf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vi(e,n),s=Kt(s),r=r(s),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),ry(t,e,r,s,n);case 15:return rC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),du(t,e),e.tag=1,St(r)?(t=!0,Uu(e)):t=!1,vi(e,n),DE(e,r,s),Gf(e,r,s,n),Xf(null,e,r,!0,t,n);case 19:return lC(t,e,n);case 22:return sC(t,e,n)}throw Error(A(156,e.tag))};function _C(t,e){return Y2(t,e)}function x5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,r){return new x5(t,e,n,r)}function rg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function I5(t){if(typeof t=="function")return rg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sm)return 11;if(t===Tm)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xs:return gs(n.children,s,i,e);case Cm:o=8,s|=8;break;case vf:return t=zt(12,n,e,s|2),t.elementType=vf,t.lanes=i,t;case wf:return t=zt(13,n,e,s),t.elementType=wf,t.lanes=i,t;case Ef:return t=zt(19,n,e,s),t.elementType=Ef,t.lanes=i,t;case L2:return Kc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N2:o=10;break e;case D2:o=9;break e;case Sm:o=11;break e;case Tm:o=14;break e;case ar:o=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=zt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gs(t,e,n,r){return t=zt(7,t,r,e),t.lanes=n,t}function Kc(t,e,n,r){return t=zt(22,t,r,e),t.elementType=L2,t.lanes=n,t.stateNode={isHidden:!1},t}function _d(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function xd(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function k5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sg(t,e,n,r,s,i,o,a,l){return t=new k5(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vm(i),t}function R5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ys,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xC(t){if(!t)return br;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(St(n))return _E(t,n,e)}return e}function IC(t,e,n,r,s,i,o,a,l){return t=sg(n,r,!0,t,s,i,o,a,l),t.context=xC(null),n=t.current,r=pt(),s=Ir(n),i=Bn(r,s),i.callback=e??null,_r(n,i,s),t.current.lanes=s,Ka(t,s,r),Tt(t,r),t}function qc(t,e,n,r){var s=e.current,i=pt(),o=Ir(s);return n=xC(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_r(s,e,o),t!==null&&(nn(t,s,o,i),uu(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function my(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ig(t,e){my(t,e),(t=t.alternate)&&my(t,e)}function A5(){return null}var kC=typeof reportError=="function"?reportError:function(t){console.error(t)};function og(t){this._internalRoot=t}Gc.prototype.render=og.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));qc(t,e,null,null)};Gc.prototype.unmount=og.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_s(function(){qc(null,t,null,null)}),e[qn]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=rE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&iE(t)}};function ag(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gy(){}function P5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Zu(o);i.call(u)}}var o=IC(e,r,t,0,null,!1,!1,"",gy);return t._reactRootContainer=o,t[qn]=o.current,ca(t.nodeType===8?t.parentNode:t),_s(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Zu(l);a.call(u)}}var l=sg(t,0,!1,null,null,!1,!1,"",gy);return t._reactRootContainer=l,t[qn]=l.current,ca(t.nodeType===8?t.parentNode:t),_s(function(){qc(e,l,n,r)}),l}function Yc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zu(o);a.call(l)}}qc(e,o,t,s)}else o=P5(n,e,t,s,r);return Zu(o)}tE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Io(e.pendingLanes);n!==0&&(Im(e,n|1),Tt(e,Re()),!(J&6)&&(Li=Re()+500,Wr()))}break;case 13:_s(function(){var r=Gn(t,1);if(r!==null){var s=pt();nn(r,t,1,s)}}),ig(t,1)}};km=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=pt();nn(e,t,134217728,n)}ig(t,134217728)}};nE=function(t){if(t.tag===13){var e=Ir(t),n=Gn(t,e);if(n!==null){var r=pt();nn(n,t,e,r)}ig(t,e)}};rE=function(){return te};sE=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Pf=function(t,e,n){switch(e){case"input":if(Tf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Uc(r);if(!s)throw Error(A(90));M2(r),Tf(r,s)}}}break;case"textarea":$2(t,n);break;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}};H2=eg;W2=_s;var N5={usingClientEntryPoint:!1,Events:[Ga,ti,Uc,B2,z2,eg]},yo={findFiberByHostInstance:as,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},D5={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=G2(t),t===null?null:t.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||A5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{bc=Bl.inject(D5),yn=Bl}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N5;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ag(e))throw Error(A(200));return R5(t,e,null,n)};Mt.createRoot=function(t,e){if(!ag(t))throw Error(A(299));var n=!1,r="",s=kC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sg(t,1,!1,null,null,n,!1,r,s),t[qn]=e.current,ca(t.nodeType===8?t.parentNode:t),new og(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=G2(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return _s(t)};Mt.hydrate=function(t,e,n){if(!Qc(e))throw Error(A(200));return Yc(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!ag(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IC(e,null,t,1,n??null,s,!1,i,o),t[qn]=e.current,ca(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gc(e)};Mt.render=function(t,e,n){if(!Qc(e))throw Error(A(200));return Yc(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!Qc(t))throw Error(A(40));return t._reactRootContainer?(_s(function(){Yc(null,null,t,!1,function(){t._reactRootContainer=null,t[qn]=null})}),!0):!1};Mt.unstable_batchedUpdates=eg;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qc(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Yc(t,e,n,!1,r)};Mt.version="18.2.0-next-9e3b772b8-20220608";function RC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RC)}catch(t){console.error(t)}}RC(),I2.exports=Mt;var L5=I2.exports,yy=L5;gf.createRoot=yy.createRoot,gf.hydrateRoot=yy.hydrateRoot;/**
 * @remix-run/router v1.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wa.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const vy="popstate";function O5(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return up("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ec(s)}return b5(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M5(){return Math.random().toString(36).substr(2,8)}function wy(t,e){return{usr:t.state,key:t.key,idx:e}}function up(t,e,n,r){return n===void 0&&(n=null),wa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yi(e):e,{state:n,key:e&&e.key||r||M5()})}function ec(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function b5(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=vr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(wa({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=vr.Pop;let S=c(),v=S==null?null:S-u;u=S,l&&l({action:a,location:w.location,delta:v})}function d(S,v){a=vr.Push;let m=up(w.location,S,v);n&&n(m,S),u=c()+1;let y=wy(m,u),C=w.createHref(m);try{o.pushState(y,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(C)}i&&l&&l({action:a,location:w.location,delta:1})}function f(S,v){a=vr.Replace;let m=up(w.location,S,v);n&&n(m,S),u=c();let y=wy(m,u),C=w.createHref(m);o.replaceState(y,"",C),i&&l&&l({action:a,location:w.location,delta:0})}function g(S){let v=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof S=="string"?S:ec(S);return Ae(v,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,v)}let w={get action(){return a},get location(){return t(s,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(vy,h),l=S,()=>{s.removeEventListener(vy,h),l=null}},createHref(S){return e(s,S)},createURL:g,encodeLocation(S){let v=g(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(S){return o.go(S)}};return w}var Ey;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ey||(Ey={}));function $5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Yi(e):e,s=ug(r.pathname||"/",n);if(s==null)return null;let i=AC(t);j5(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=q5(i[a],Y5(s));return o}function AC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ae(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Rr([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Ae(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),AC(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:W5(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of PC(i.path))s(i,o,l)}),e}function PC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=PC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function j5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:K5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const F5=/^:\w+$/,U5=3,V5=2,B5=1,z5=10,H5=-2,Cy=t=>t==="*";function W5(t,e){let n=t.split("/"),r=n.length;return n.some(Cy)&&(r+=H5),e&&(r+=V5),n.filter(s=>!Cy(s)).reduce((s,i)=>s+(F5.test(i)?U5:i===""?B5:z5),r)}function K5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function q5(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",c=G5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;i.push({params:r,pathname:Rr([s,c.pathname]),pathnameBase:ek(Rr([s,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(s=Rr([s,c.pathnameBase]))}return i}function G5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Q5(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let d=a[h]||"";o=i.slice(0,i.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=X5(a[h]||"",c),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Q5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Y5(t){try{return decodeURI(t)}catch(e){return lg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function X5(t,e){try{return decodeURIComponent(t)}catch(n){return lg(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function ug(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function J5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Yi(t):t;return{pathname:n?n.startsWith("/")?n:Z5(n,e):e,search:tk(r),hash:nk(s)}}function Z5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Id(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cg(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Yi(t):(s=wa({},t),Ae(!s.pathname||!s.pathname.includes("?"),Id("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),Id("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),Id("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=J5(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Rr=t=>t.join("/").replace(/\/\/+/g,"/"),ek=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const NC=["post","put","patch","delete"];new Set(NC);const sk=["get",...NC];new Set(sk);/**
 * React Router v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tc.apply(this,arguments)}const dg=E.createContext(null),ik=E.createContext(null),Xi=E.createContext(null),Xc=E.createContext(null),An=E.createContext({outlet:null,matches:[],isDataRoute:!1}),DC=E.createContext(null);function ok(t,e){let{relative:n}=e===void 0?{}:e;Ji()||Ae(!1);let{basename:r,navigator:s}=E.useContext(Xi),{hash:i,pathname:o,search:a}=MC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Rr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ji(){return E.useContext(Xc)!=null}function Ms(){return Ji()||Ae(!1),E.useContext(Xc).location}function LC(t){E.useContext(Xi).static||E.useLayoutEffect(t)}function Jc(){let{isDataRoute:t}=E.useContext(An);return t?Ck():ak()}function ak(){Ji()||Ae(!1);let t=E.useContext(dg),{basename:e,navigator:n}=E.useContext(Xi),{matches:r}=E.useContext(An),{pathname:s}=Ms(),i=JSON.stringify(cg(r).map(l=>l.pathnameBase)),o=E.useRef(!1);return LC(()=>{o.current=!0}),E.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=hg(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Rr([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,i,s,t])}const lk=E.createContext(null);function uk(t){let e=E.useContext(An).outlet;return e&&E.createElement(lk.Provider,{value:t},e)}function OC(){let{matches:t}=E.useContext(An),e=t[t.length-1];return e?e.params:{}}function MC(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=E.useContext(An),{pathname:s}=Ms(),i=JSON.stringify(cg(r).map(o=>o.pathnameBase));return E.useMemo(()=>hg(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function ck(t,e){return hk(t,e)}function hk(t,e,n){Ji()||Ae(!1);let{navigator:r}=E.useContext(Xi),{matches:s}=E.useContext(An),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Ms(),u;if(e){var c;let w=typeof e=="string"?Yi(e):e;a==="/"||(c=w.pathname)!=null&&c.startsWith(a)||Ae(!1),u=w}else u=l;let h=u.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=$5(t,{pathname:d}),g=gk(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Rr([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Rr([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n);return e&&g?E.createElement(Xc.Provider,{value:{location:tc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:vr.Pop}},g):g}function dk(){let t=Ek(),e=rk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,i)}const fk=E.createElement(dk,null);class pk extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?E.createElement(An.Provider,{value:this.props.routeContext},E.createElement(DC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mk(t){let{routeContext:e,match:n,children:r}=t,s=E.useContext(dg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(An.Provider,{value:e},r)}function gk(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ae(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||fk);let d=e.concat(i.slice(0,u+1)),f=()=>{let g;return c?g=h:l.route.Component?g=E.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,E.createElement(mk,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?E.createElement(pk,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:f(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):f()},null)}var cp;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(cp||(cp={}));var Ea;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ea||(Ea={}));function yk(t){let e=E.useContext(dg);return e||Ae(!1),e}function vk(t){let e=E.useContext(ik);return e||Ae(!1),e}function wk(t){let e=E.useContext(An);return e||Ae(!1),e}function bC(t){let e=wk(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function Ek(){var t;let e=E.useContext(DC),n=vk(Ea.UseRouteError),r=bC(Ea.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Ck(){let{router:t}=yk(cp.UseNavigateStable),e=bC(Ea.UseNavigateStable),n=E.useRef(!1);return LC(()=>{n.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,tc({fromRouteId:e},i)))},[t,e])}function Sy(t){let{to:e,replace:n,state:r,relative:s}=t;Ji()||Ae(!1);let{matches:i}=E.useContext(An),{pathname:o}=Ms(),a=Jc(),l=hg(e,cg(i).map(c=>c.pathnameBase),o,s==="path"),u=JSON.stringify(l);return E.useEffect(()=>a(JSON.parse(u),{replace:n,state:r,relative:s}),[a,u,s,n,r]),null}function Sk(t){return uk(t.context)}function Dn(t){Ae(!1)}function Tk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vr.Pop,navigator:i,static:o=!1}=t;Ji()&&Ae(!1);let a=e.replace(/^\/*/,"/"),l=E.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Yi(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=r,g=E.useMemo(()=>{let w=ug(u,a);return w==null?null:{location:{pathname:w,search:c,hash:h,state:d,key:f},navigationType:s}},[a,u,c,h,d,f,s]);return g==null?null:E.createElement(Xi.Provider,{value:l},E.createElement(Xc.Provider,{children:n,value:g}))}function _k(t){let{children:e,location:n}=t;return ck(hp(e),n)}var Ty;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Ty||(Ty={}));new Promise(()=>{});function hp(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let i=[...e,s];if(r.type===E.Fragment){n.push.apply(n,hp(r.props.children,i));return}r.type!==Dn&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function xk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ik(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kk(t,e){return t.button===0&&(!e||e==="_self")&&!Ik(t)}const Rk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_y="startTransition";function Ak(t){let{basename:e,children:n,window:r}=t,s=E.useRef();s.current==null&&(s.current=O5({window:r,v5Compat:!0}));let i=s.current,[o,a]=E.useState({action:i.action,location:i.location}),l=E.useCallback(u=>{_y in h0?h0[_y](()=>a(u)):a(u)},[a]);return E.useLayoutEffect(()=>i.listen(l),[i,l]),E.createElement(Tk,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i})}const Pk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fg=E.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,h=xk(e,Rk),{basename:d}=E.useContext(Xi),f,g=!1;if(typeof u=="string"&&Nk.test(u)&&(f=u,Pk))try{let m=new URL(window.location.href),y=u.startsWith("//")?new URL(m.protocol+u):new URL(u),C=ug(y.pathname,d);y.origin===m.origin&&C!=null?u=C+y.search+y.hash:g=!0}catch{}let w=ok(u,{relative:s}),S=Dk(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s});function v(m){r&&r(m),m.defaultPrevented||S(m)}return E.createElement("a",dp({},h,{href:f||w,onClick:g||i?r:v,ref:n,target:l}))});var xy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(xy||(xy={}));var Iy;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Iy||(Iy={}));function Dk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Jc(),l=Ms(),u=MC(t,{relative:o});return E.useCallback(c=>{if(kk(c,n)){c.preventDefault();let h=r!==void 0?r:ec(l)===ec(u);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,u,r,s,n,t,i,o])}const Lk=(t,e)=>{switch(e.type){case"SET_LANG":return{...t,lang:e.payload,page:1};case"SET_MEDIA_TYPE":return{...t,mediaType:e.payload,page:1,filterGenre:"all",filterList:"top_rated"};case"SET_FILTER_LIST":return{...t,filterList:e.payload,page:1};case"SET_FILTER_GENRE":return{...t,filterGenre:e.payload,page:1};case"INCREASE_PAGE":return{...t,page:e.payload};case"INITIAL_LOAD_MOVIES":return{...t,moviesList:[...e.payload[0]],uniqueIds:[...e.payload[1]],totalPages:e.payload[2]};case"APPEND_MOVIES":{const n=[],r=e.payload[0].filter(s=>t.uniqueIds.includes(s.id)?!1:(n.push(s.id),!0));return{...t,moviesList:[...t.moviesList,...r],uniqueIds:[...t.uniqueIds,...n]}}case"SET_SEARCH_MODE":return{...t,page:1,filterList:"top_rated",filterGenre:"all",moviesListMode:"search",searchQuery:e.payload};case"SET_HOME_MODE":return{...t,page:1,filterList:"top_rated",filterGenre:"all",moviesListMode:"home"};default:return t}};function $C(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ok}=Object.prototype,{getPrototypeOf:pg}=Object,Zc=(t=>e=>{const n=Ok.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pn=t=>(t=t.toLowerCase(),e=>Zc(e)===t),eh=t=>e=>typeof e===t,{isArray:Zi}=Array,Ca=eh("undefined");function Mk(t){return t!==null&&!Ca(t)&&t.constructor!==null&&!Ca(t.constructor)&&Wt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jC=Pn("ArrayBuffer");function bk(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jC(t.buffer),e}const $k=eh("string"),Wt=eh("function"),FC=eh("number"),th=t=>t!==null&&typeof t=="object",jk=t=>t===!0||t===!1,gu=t=>{if(Zc(t)!=="object")return!1;const e=pg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fk=Pn("Date"),Uk=Pn("File"),Vk=Pn("Blob"),Bk=Pn("FileList"),zk=t=>th(t)&&Wt(t.pipe),Hk=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Wt(t.append)&&((e=Zc(t))==="formdata"||e==="object"&&Wt(t.toString)&&t.toString()==="[object FormData]"))},Wk=Pn("URLSearchParams"),Kk=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ya(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Zi(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function UC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const VC=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),BC=t=>!Ca(t)&&t!==VC;function fp(){const{caseless:t}=BC(this)&&this||{},e={},n=(r,s)=>{const i=t&&UC(e,s)||s;gu(e[i])&&gu(r)?e[i]=fp(e[i],r):gu(r)?e[i]=fp({},r):Zi(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ya(arguments[r],n);return e}const qk=(t,e,n,{allOwnKeys:r}={})=>(Ya(e,(s,i)=>{n&&Wt(s)?t[i]=$C(s,n):t[i]=s},{allOwnKeys:r}),t),Gk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Qk=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Yk=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&pg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Xk=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Jk=t=>{if(!t)return null;if(Zi(t))return t;let e=t.length;if(!FC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Zk=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pg(Uint8Array)),e9=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},t9=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},n9=Pn("HTMLFormElement"),r9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),ky=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),s9=Pn("RegExp"),zC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ya(n,(s,i)=>{e(s,i,t)!==!1&&(r[i]=s)}),Object.defineProperties(t,r)},i9=t=>{zC(t,(e,n)=>{if(Wt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Wt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},o9=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Zi(t)?r(t):r(String(t).split(e)),n},a9=()=>{},l9=(t,e)=>(t=+t,Number.isFinite(t)?t:e),kd="abcdefghijklmnopqrstuvwxyz",Ry="0123456789",HC={DIGIT:Ry,ALPHA:kd,ALPHA_DIGIT:kd+kd.toUpperCase()+Ry},u9=(t=16,e=HC.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function c9(t){return!!(t&&Wt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const h9=t=>{const e=new Array(10),n=(r,s)=>{if(th(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Zi(r)?[]:{};return Ya(r,(o,a)=>{const l=n(o,s+1);!Ca(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},d9=Pn("AsyncFunction"),f9=t=>t&&(th(t)||Wt(t))&&Wt(t.then)&&Wt(t.catch),_={isArray:Zi,isArrayBuffer:jC,isBuffer:Mk,isFormData:Hk,isArrayBufferView:bk,isString:$k,isNumber:FC,isBoolean:jk,isObject:th,isPlainObject:gu,isUndefined:Ca,isDate:Fk,isFile:Uk,isBlob:Vk,isRegExp:s9,isFunction:Wt,isStream:zk,isURLSearchParams:Wk,isTypedArray:Zk,isFileList:Bk,forEach:Ya,merge:fp,extend:qk,trim:Kk,stripBOM:Gk,inherits:Qk,toFlatObject:Yk,kindOf:Zc,kindOfTest:Pn,endsWith:Xk,toArray:Jk,forEachEntry:e9,matchAll:t9,isHTMLForm:n9,hasOwnProperty:ky,hasOwnProp:ky,reduceDescriptors:zC,freezeMethods:i9,toObjectSet:o9,toCamelCase:r9,noop:a9,toFiniteNumber:l9,findKey:UC,global:VC,isContextDefined:BC,ALPHABET:HC,generateString:u9,isSpecCompliantForm:c9,toJSONObject:h9,isAsyncFn:d9,isThenable:f9};function X(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}_.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const WC=X.prototype,KC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{KC[t]={value:t}});Object.defineProperties(X,KC);Object.defineProperty(WC,"isAxiosError",{value:!0});X.from=(t,e,n,r,s,i)=>{const o=Object.create(WC);return _.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),X.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const p9=null;function pp(t){return _.isPlainObject(t)||_.isArray(t)}function qC(t){return _.endsWith(t,"[]")?t.slice(0,-2):t}function Ay(t,e,n){return t?t.concat(e).map(function(s,i){return s=qC(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function m9(t){return _.isArray(t)&&!t.some(pp)}const g9=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function nh(t,e,n){if(!_.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!_.isUndefined(S[w])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(_.isDate(g))return g.toISOString();if(!l&&_.isBlob(g))throw new X("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(g)||_.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,w,S){let v=g;if(g&&!S&&typeof g=="object"){if(_.endsWith(w,"{}"))w=r?w:w.slice(0,-2),g=JSON.stringify(g);else if(_.isArray(g)&&m9(g)||(_.isFileList(g)||_.endsWith(w,"[]"))&&(v=_.toArray(g)))return w=qC(w),v.forEach(function(y,C){!(_.isUndefined(y)||y===null)&&e.append(o===!0?Ay([w],C,i):o===null?w:w+"[]",u(y))}),!1}return pp(g)?!0:(e.append(Ay(S,w,i),u(g)),!1)}const h=[],d=Object.assign(g9,{defaultVisitor:c,convertValue:u,isVisitable:pp});function f(g,w){if(!_.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(g),_.forEach(g,function(v,m){(!(_.isUndefined(v)||v===null)&&s.call(e,v,_.isString(m)?m.trim():m,w,d))===!0&&f(v,w?w.concat(m):[m])}),h.pop()}}if(!_.isObject(t))throw new TypeError("data must be an object");return f(t),e}function Py(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function mg(t,e){this._pairs=[],t&&nh(t,this,e)}const GC=mg.prototype;GC.append=function(e,n){this._pairs.push([e,n])};GC.toString=function(e){const n=e?function(r){return e.call(this,r,Py)}:Py;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function y9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QC(t,e,n){if(!e)return t;const r=n&&n.encode||y9,s=n&&n.serialize;let i;if(s?i=s(e,n):i=_.isURLSearchParams(e)?e.toString():new mg(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class v9{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ny=v9,YC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},w9=typeof URLSearchParams<"u"?URLSearchParams:mg,E9=typeof FormData<"u"?FormData:null,C9=typeof Blob<"u"?Blob:null,S9=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),T9=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),fn={isBrowser:!0,classes:{URLSearchParams:w9,FormData:E9,Blob:C9},isStandardBrowserEnv:S9,isStandardBrowserWebWorkerEnv:T9,protocols:["http","https","file","blob","url","data"]};function _9(t,e){return nh(t,new fn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return fn.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function x9(t){return _.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function I9(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function XC(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&_.isArray(s)?s.length:o,l?(_.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!_.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&_.isArray(s[o])&&(s[o]=I9(s[o])),!a)}if(_.isFormData(t)&&_.isFunction(t.entries)){const n={};return _.forEachEntry(t,(r,s)=>{e(x9(r),s,n,0)}),n}return null}const k9={"Content-Type":void 0};function R9(t,e,n){if(_.isString(t))try{return(e||JSON.parse)(t),_.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const rh={transitional:YC,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=_.isObject(e);if(i&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return s&&s?JSON.stringify(XC(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _9(e,this.formSerializer).toString();if((a=_.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return nh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),R9(e)):e}],transformResponse:[function(e){const n=this.transitional||rh.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&_.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?X.from(a,X.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_.forEach(["delete","get","head"],function(e){rh.headers[e]={}});_.forEach(["post","put","patch"],function(e){rh.headers[e]=_.merge(k9)});const gg=rh,A9=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P9=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&A9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Dy=Symbol("internals");function vo(t){return t&&String(t).trim().toLowerCase()}function yu(t){return t===!1||t==null?t:_.isArray(t)?t.map(yu):String(t)}function N9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const D9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rd(t,e,n,r,s){if(_.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!_.isString(e)){if(_.isString(r))return e.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(e)}}function L9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function O9(t,e){const n=_.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class sh{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,u){const c=vo(l);if(!c)throw new Error("header name must be a non-empty string");const h=_.findKey(s,c);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=yu(a))}const o=(a,l)=>_.forEach(a,(u,c)=>i(u,c,l));return _.isPlainObject(e)||e instanceof this.constructor?o(e,n):_.isString(e)&&(e=e.trim())&&!D9(e)?o(P9(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=vo(e),e){const r=_.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return N9(s);if(_.isFunction(n))return n.call(this,s,r);if(_.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=vo(e),e){const r=_.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Rd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=vo(o),o){const a=_.findKey(r,o);a&&(!n||Rd(r,r[a],a,n))&&(delete r[a],s=!0)}}return _.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Rd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return _.forEach(this,(s,i)=>{const o=_.findKey(r,i);if(o){n[o]=yu(s),delete n[i];return}const a=e?L9(i):String(i).trim();a!==i&&delete n[i],n[a]=yu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return _.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Dy]=this[Dy]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=vo(o);r[a]||(O9(s,o),r[a]=!0)}return _.isArray(e)?e.forEach(i):i(e),this}}sh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.freezeMethods(sh.prototype);_.freezeMethods(sh);const zn=sh;function Ad(t,e){const n=this||gg,r=e||n,s=zn.from(r.headers);let i=r.data;return _.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function JC(t){return!!(t&&t.__CANCEL__)}function Xa(t,e,n){X.call(this,t??"canceled",X.ERR_CANCELED,e,n),this.name="CanceledError"}_.inherits(Xa,X,{__CANCEL__:!0});function M9(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new X("Request failed with status code "+n.status,[X.ERR_BAD_REQUEST,X.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const b9=fn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),_.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),_.isString(i)&&l.push("path="+i),_.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function j9(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ZC(t,e){return t&&!$9(e)?j9(t,e):e}const F9=fn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=_.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function U9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function V9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[i];o||(o=u),n[s]=l,r[s]=u;let h=i,d=0;for(;h!==s;)d+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function Ly(t,e){let n=0;const r=V9(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),u=i<=o;n=i;const c={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-i)/l:void 0,event:s};c[e?"download":"upload"]=!0,t(c)}}const B9=typeof XMLHttpRequest<"u",z9=B9&&function(t){return new Promise(function(n,r){let s=t.data;const i=zn.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}_.isFormData(s)&&(fn.isStandardBrowserEnv||fn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const f=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(f+":"+g))}const c=ZC(t.baseURL,t.url);u.open(t.method.toUpperCase(),QC(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const f=zn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:f,config:t,request:u};M9(function(v){n(v),l()},function(v){r(v),l()},w),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(r(new X("Request aborted",X.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new X("Network Error",X.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const w=t.transitional||YC;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new X(g,w.clarifyTimeoutError?X.ETIMEDOUT:X.ECONNABORTED,t,u)),u=null},fn.isStandardBrowserEnv){const f=(t.withCredentials||F9(c))&&t.xsrfCookieName&&b9.read(t.xsrfCookieName);f&&i.set(t.xsrfHeaderName,f)}s===void 0&&i.setContentType(null),"setRequestHeader"in u&&_.forEach(i.toJSON(),function(g,w){u.setRequestHeader(w,g)}),_.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Ly(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Ly(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=f=>{u&&(r(!f||f.type?new Xa(null,t,u):f),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=U9(c);if(d&&fn.protocols.indexOf(d)===-1){r(new X("Unsupported protocol "+d+":",X.ERR_BAD_REQUEST,t));return}u.send(s||null)})},vu={http:p9,xhr:z9};_.forEach(vu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const H9={getAdapter:t=>{t=_.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let s=0;s<e&&(n=t[s],!(r=_.isString(n)?vu[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new X(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(_.hasOwnProp(vu,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!_.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:vu};function Pd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xa(null,t)}function Oy(t){return Pd(t),t.headers=zn.from(t.headers),t.data=Ad.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),H9.getAdapter(t.adapter||gg.adapter)(t).then(function(r){return Pd(t),r.data=Ad.call(t,t.transformResponse,r),r.headers=zn.from(r.headers),r},function(r){return JC(r)||(Pd(t),r&&r.response&&(r.response.data=Ad.call(t,t.transformResponse,r.response),r.response.headers=zn.from(r.response.headers))),Promise.reject(r)})}const My=t=>t instanceof zn?t.toJSON():t;function Oi(t,e){e=e||{};const n={};function r(u,c,h){return _.isPlainObject(u)&&_.isPlainObject(c)?_.merge.call({caseless:h},u,c):_.isPlainObject(c)?_.merge({},c):_.isArray(c)?c.slice():c}function s(u,c,h){if(_.isUndefined(c)){if(!_.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function i(u,c){if(!_.isUndefined(c))return r(void 0,c)}function o(u,c){if(_.isUndefined(c)){if(!_.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,h){if(h in e)return r(u,c);if(h in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>s(My(u),My(c),!0)};return _.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=l[c]||s,d=h(t[c],e[c],c);_.isUndefined(d)&&h!==a||(n[c]=d)}),n}const eS="1.4.0",yg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{yg[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const by={};yg.transitional=function(e,n,r){function s(i,o){return"[Axios v"+eS+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new X(s(o," has been removed"+(n?" in "+n:"")),X.ERR_DEPRECATED);return n&&!by[o]&&(by[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function W9(t,e,n){if(typeof t!="object")throw new X("options must be an object",X.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new X("option "+i+" must be "+l,X.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new X("Unknown option "+i,X.ERR_BAD_OPTION)}}const mp={assertOptions:W9,validators:yg},sr=mp.validators;class nc{constructor(e){this.defaults=e,this.interceptors={request:new Ny,response:new Ny}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Oi(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&mp.assertOptions(r,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),s!=null&&(_.isFunction(s)?n.paramsSerializer={serialize:s}:mp.assertOptions(s,{encode:sr.function,serialize:sr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=i&&_.merge(i.common,i[n.method]),o&&_.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=zn.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let c,h=0,d;if(!l){const g=[Oy.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,u),d=g.length,c=Promise.resolve(n);h<d;)c=c.then(g[h++],g[h++]);return c}d=a.length;let f=n;for(h=0;h<d;){const g=a[h++],w=a[h++];try{f=g(f)}catch(S){w.call(this,S);break}}try{c=Oy.call(this,f)}catch(g){return Promise.reject(g)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Oi(this.defaults,e);const n=ZC(e.baseURL,e.url);return QC(n,e.params,e.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(e){nc.prototype[e]=function(n,r){return this.request(Oi(r||{},{method:e,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Oi(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}nc.prototype[e]=n(),nc.prototype[e+"Form"]=n(!0)});const wu=nc;class vg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Xa(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new vg(function(s){e=s}),cancel:e}}}const K9=vg;function q9(t){return function(n){return t.apply(null,n)}}function G9(t){return _.isObject(t)&&t.isAxiosError===!0}const gp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gp).forEach(([t,e])=>{gp[e]=t});const Q9=gp;function tS(t){const e=new wu(t),n=$C(wu.prototype.request,e);return _.extend(n,wu.prototype,e,{allOwnKeys:!0}),_.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return tS(Oi(t,s))},n}const Fe=tS(gg);Fe.Axios=wu;Fe.CanceledError=Xa;Fe.CancelToken=K9;Fe.isCancel=JC;Fe.VERSION=eS;Fe.toFormData=nh;Fe.AxiosError=X;Fe.Cancel=Fe.CanceledError;Fe.all=function(e){return Promise.all(e)};Fe.spread=q9;Fe.isAxiosError=G9;Fe.mergeConfig=Oi;Fe.AxiosHeaders=zn;Fe.formToJSON=t=>XC(_.isHTMLForm(t)?new FormData(t):t);Fe.HttpStatusCode=Q9;Fe.default=Fe;const Ar=Fe;class wg{constructor(e,n,r){this.posterUrl=n.poster_path?e+n.poster_path:"/projects/films_base/assets/images/no-poster.jpg",this.title=n.title?n.title:n.name,this.id=n.id,this.mediaType=r}}const $y="https://api.themoviedb.org/3",jy="api_key=582f9e2d6f3a1dc803b350bf76f168f2",Y9="https://image.tmdb.org/t/p/w300",X9=(t,e,n,r,s,i,o,a)=>{const[l,u]=E.useState(!0),[c,h]=E.useState({show:!1,message:""}),d=E.useCallback(async(f,g,w,S,v,m)=>{u(!0),h({show:!1,message:""});try{let y;if(o==="home"?y=await Ar(`${$y}/${f}/${w}?${jy}&page=${v}&language=${g}&with_genres=${S}`):o==="search"&&(y=await Ar(`${$y}/search/${f}?${jy}&query=${m}&page=${v}&language=${g}`)),y.data.total_results===0)throw new Error(g==="ru"?"Нет результатов, удовлетворяющих заданным условиям":"No matching results");const C=[],T=[];if(y.data.results.forEach(k=>{C.push(new wg(Y9,k,f)),v===1&&T.push(k.id)}),v===1){const k=y.data.total_pages>500?500:y.data.total_pages;a({type:"INITIAL_LOAD_MOVIES",payload:[C,T,k]})}else a({type:"APPEND_MOVIES",payload:[C,T]});u(!1)}catch(y){h({show:!0,message:y.message}),u(!1)}},[a,o]);return E.useEffect(()=>{d(t,e,n,r,s,i)},[t,e,n,r,s,d,i]),{isLoading:l,error:c}},J9=()=>{const t=localStorage.getItem("FBlang");return t||(navigator.language.split("-")[0]==="ru"?"ru":"en")},Z9={lang:J9(),mediaType:"movie",filterList:"top_rated",filterGenre:"all",page:1,totalPages:0,moviesList:[],uniqueIds:[],moviesListMode:"home",searchQuery:""},nS=E.createContext(),eR=({children:t})=>{const e="/projects/films_base/",[n,r]=E.useState(""),[s,i]=E.useReducer(Lk,Z9),{isLoading:o,error:a}=X9(s.mediaType,s.lang,s.filterList,s.filterGenre,s.page,s.searchQuery,s.moviesListMode,i),{lang:l,mediaType:u,filterList:c,filterGenre:h,page:d,moviesList:f,totalPages:g,searchQuery:w,moviesListMode:S}=s;return p.jsx(nS.Provider,{value:{baseName:e,lang:l,moviesFetchError:a,moviesFetchLoading:o,mediaType:u,filterList:c,filterGenre:h,page:d,totalPages:g,searchQuery:w,moviesListMode:S,dispatch:i,moviesList:f,currentTitle:n,setCurrentTitle:r},children:t})},ie=()=>E.useContext(nS);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},tR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new nR;const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rR=function(t){const e=rS(t);return sS.encodeByteArray(e,!0)},rc=function(t){return rR(t).replace(/\./g,"")},iS=function(t){try{return sS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=()=>sR().__FIREBASE_DEFAULTS__,oR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},ih=()=>{try{return iR()||oR()||aR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oS=t=>{var e,n;return(n=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aS=t=>{const e=oS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lS=()=>{var t;return(t=ih())===null||t===void 0?void 0:t.config},uS=t=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[rc(JSON.stringify(n)),rc(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function cR(){var t;const e=(t=ih())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fR(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pR(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="FirebaseError";class Nn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gR,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ja.prototype.create)}}class Ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Nn(s,a,r)}}function yR(t,e){return t.replace(vR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vR=/\{\$([^}]+)}/g;function wR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Fy(i)&&Fy(o)){if(!sc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Fy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ER(t,e){const n=new CR(t,e);return n.subscribe.bind(n)}class CR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nd),s.error===void 0&&(s.error=Nd),s.complete===void 0&&(s.complete=Nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xR(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_R(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _R(t){return t===ss?void 0:t}function xR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const kR={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},RR=Z.INFO,AR={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},PR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eg{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=PR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const NR=(t,e)=>e.some(n=>t instanceof n);let Uy,Vy;function DR(){return Uy||(Uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LR(){return Vy||(Vy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hS=new WeakMap,yp=new WeakMap,dS=new WeakMap,Dd=new WeakMap,Cg=new WeakMap;function OR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hS.set(n,t)}).catch(()=>{}),Cg.set(e,t),e}function MR(t){if(yp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});yp.set(t,e)}let vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bR(t){vp=t(vp)}function $R(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ld(this),e,...n);return dS.set(r,e.sort?e.sort():[e]),Pr(r)}:LR().includes(t)?function(...e){return t.apply(Ld(this),e),Pr(hS.get(this))}:function(...e){return Pr(t.apply(Ld(this),e))}}function jR(t){return typeof t=="function"?$R(t):(t instanceof IDBTransaction&&MR(t),NR(t,DR())?new Proxy(t,vp):t)}function Pr(t){if(t instanceof IDBRequest)return OR(t);if(Dd.has(t))return Dd.get(t);const e=jR(t);return e!==t&&(Dd.set(t,e),Cg.set(e,t)),e}const Ld=t=>Cg.get(t);function FR(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Pr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Pr(o.result),l.oldVersion,l.newVersion,Pr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const UR=["get","getKey","getAll","getAllKeys","count"],VR=["put","add","delete","clear"],Od=new Map;function By(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Od.get(e))return Od.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||UR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Od.set(e,i),i}bR(t=>({...t,get:(e,n,r)=>By(e,n)||t.get(e,n,r),has:(e,n)=>!!By(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",zy="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Eg("@firebase/app"),HR="@firebase/app-compat",WR="@firebase/analytics-compat",KR="@firebase/analytics",qR="@firebase/app-check-compat",GR="@firebase/app-check",QR="@firebase/auth",YR="@firebase/auth-compat",XR="@firebase/database",JR="@firebase/database-compat",ZR="@firebase/functions",e6="@firebase/functions-compat",t6="@firebase/installations",n6="@firebase/installations-compat",r6="@firebase/messaging",s6="@firebase/messaging-compat",i6="@firebase/performance",o6="@firebase/performance-compat",a6="@firebase/remote-config",l6="@firebase/remote-config-compat",u6="@firebase/storage",c6="@firebase/storage-compat",h6="@firebase/firestore",d6="@firebase/firestore-compat",f6="firebase",p6="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",m6={[wp]:"fire-core",[HR]:"fire-core-compat",[KR]:"fire-analytics",[WR]:"fire-analytics-compat",[GR]:"fire-app-check",[qR]:"fire-app-check-compat",[QR]:"fire-auth",[YR]:"fire-auth-compat",[XR]:"fire-rtdb",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[e6]:"fire-fn-compat",[t6]:"fire-iid",[n6]:"fire-iid-compat",[r6]:"fire-fcm",[s6]:"fire-fcm-compat",[i6]:"fire-perf",[o6]:"fire-perf-compat",[a6]:"fire-rc",[l6]:"fire-rc-compat",[u6]:"fire-gcs",[c6]:"fire-gcs-compat",[h6]:"fire-fst",[d6]:"fire-fst-compat","fire-js":"fire-js",[f6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,Cp=new Map;function g6(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Is(t){const e=t.name;if(Cp.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,t);for(const n of ic.values())g6(n,t);return!0}function oh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Nr=new Ja("app","Firebase",y6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=p6;function fS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ep,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=lS()),!n)throw Nr.create("no-options");const i=ic.get(s);if(i){if(sc(n,i.options)&&sc(r,i.config))return i;throw Nr.create("duplicate-app",{appName:s})}const o=new IR(s);for(const l of Cp.values())o.addComponent(l);const a=new v6(n,r,o);return ic.set(s,a),a}function Sg(t=Ep){const e=ic.get(t);if(!e&&t===Ep&&lS())return fS();if(!e)throw Nr.create("no-app",{appName:t});return e}function wn(t,e,n){var r;let s=(r=m6[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(a.join(" "));return}Is(new $r(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="firebase-heartbeat-database",E6=1,Sa="firebase-heartbeat-store";let Md=null;function pS(){return Md||(Md=FR(w6,E6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Sa)}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),Md}async function C6(t){try{return await(await pS()).transaction(Sa).objectStore(Sa).get(mS(t))}catch(e){if(e instanceof Nn)xs.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(n.message)}}}async function Hy(t,e){try{const r=(await pS()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,mS(t)),await r.done}catch(n){if(n instanceof Nn)xs.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xs.warn(r.message)}}}function mS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=1024,T6=30*24*60*60*1e3;class _6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wy();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=T6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wy(),{heartbeatsToSend:n,unsentEntries:r}=x6(this._heartbeatsCache.heartbeats),s=rc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Wy(){return new Date().toISOString().substring(0,10)}function x6(t,e=S6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ky(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ky(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class I6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pR()?mR().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await C6(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ky(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t){Is(new $r("platform-logger",e=>new BR(e),"PRIVATE")),Is(new $r("heartbeat",e=>new _6(e),"PRIVATE")),wn(wp,zy,t),wn(wp,zy,"esm2017"),wn("fire-js","")}k6("");var R6="firebase",A6="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(R6,A6,"app");function Tg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P6=gS,yS=new Ja("auth","Firebase",gS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Eg("@firebase/auth");function N6(t,...e){oc.logLevel<=Z.WARN&&oc.warn(`Auth (${bs}): ${t}`,...e)}function Eu(t,...e){oc.logLevel<=Z.ERROR&&oc.error(`Auth (${bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,...e){throw _g(t,...e)}function En(t,...e){return _g(t,...e)}function vS(t,e,n){const r=Object.assign(Object.assign({},P6()),{[e]:n});return new Ja("auth","Firebase",r).create(e,{appName:t.name})}function D6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gt(t,"argument-error"),vS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _g(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yS.create(t,...e)}function U(t,e,...n){if(!t)throw _g(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Eu(e),new Error(e)}function Yn(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function L6(){return qy()==="http:"||qy()==="https:"}function qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L6()||hR()||"connection"in navigator)?navigator.onLine:!0}function M6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=uR()||dR()}get(){return O6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=new el(3e4,6e4);function eo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $s(t,e,n,r,s={}){return ES(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Za(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),wS.fetch()(CS(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function ES(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},b6),e);try{const s=new j6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw zl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw zl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vS(t,c,u);Gt(t,c)}}catch(s){if(s instanceof Nn)throw s;Gt(t,"network-request-failed",{message:String(s)})}}async function tl(t,e,n,r,s={}){const i=await $s(t,e,n,r,s);return"mfaPendingCredential"in i&&Gt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function CS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?xg(t.config,s):`${t.config.apiScheme}://${s}`}class j6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),$6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=En(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(t,e){return $s(t,"POST","/v1/accounts:delete",e)}async function U6(t,e){return $s(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V6(t,e=!1){const n=Se(t),r=await n.getIdToken(e),s=Ig(r);U(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Wo(bd(s.auth_time)),issuedAtTime:Wo(bd(s.iat)),expirationTime:Wo(bd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bd(t){return Number(t)*1e3}function Ig(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Eu("JWT malformed, contained fewer than 3 sections"),null;try{const s=iS(n);return s?JSON.parse(s):(Eu("Failed to decode base64 JWT payload"),null)}catch(s){return Eu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function B6(t){const e=Ig(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nn&&z6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function z6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wo(this.lastLoginAt),this.creationTime=Wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Mi(t,U6(n,{idToken:r}));U(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?q6(i.providerUserInfo):[],a=K6(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new SS(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function W6(t){const e=Se(t);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function q6(t){return t.map(e=>{var{providerId:n}=e,r=Tg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e){const n=await ES(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=CS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B6(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return U(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await G6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ta;return r&&(U(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(U(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(U(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ta,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Tg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new SS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Mi(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V6(this,e)}reload(){return W6(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ac(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Mi(this,F6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:C,isAnonymous:T,providerData:k,stsTokenManager:I}=n;U(y&&I,e,"internal-error");const x=Ta.fromJSON(this.name,I);U(typeof y=="string",e,"internal-error"),ir(h,e.name),ir(d,e.name),U(typeof C=="boolean",e,"internal-error"),U(typeof T=="boolean",e,"internal-error"),ir(f,e.name),ir(g,e.name),ir(w,e.name),ir(S,e.name),ir(v,e.name),ir(m,e.name);const M=new ys({uid:y,auth:e,email:d,emailVerified:C,displayName:h,isAnonymous:T,photoURL:g,phoneNumber:f,tenantId:w,stsTokenManager:x,createdAt:v,lastLoginAt:m});return k&&Array.isArray(k)&&(M.providerData=k.map($=>Object.assign({},$))),S&&(M._redirectEventId=S),M}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ta;s.updateFromServerResponse(n);const i=new ys({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ac(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;function Fn(t){Yn(t instanceof Function,"Expected a class definition");let e=Gy.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TS.type="NONE";const Qy=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Cu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Cu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ei(Fn(Qy),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Fn(Qy);const o=Cu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=ys._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ei(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(AS(e))return"Webos";if(kg(e))return"Safari";if((e.includes("chrome/")||xS(e))&&!e.includes("edge/"))return"Chrome";if(kS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _S(t=lt()){return/firefox\//i.test(t)}function kg(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xS(t=lt()){return/crios\//i.test(t)}function IS(t=lt()){return/iemobile/i.test(t)}function kS(t=lt()){return/android/i.test(t)}function RS(t=lt()){return/blackberry/i.test(t)}function AS(t=lt()){return/webos/i.test(t)}function ah(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q6(t=lt()){var e;return ah(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y6(){return fR()&&document.documentMode===10}function PS(t=lt()){return ah(t)||kS(t)||AS(t)||RS(t)||/windows phone/i.test(t)||IS(t)}function X6(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e=[]){let n;switch(t){case"Browser":n=Yy(lt());break;case"Worker":n=`${Yy(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bs}/${r}`}async function DS(t,e){return $s(t,"GET","/v2/recaptchaConfig",eo(t,e))}function Xy(t){return t!==void 0&&t.enterprise!==void 0}class LS{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function OS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=En("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",J6().appendChild(r)})}function Z6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const eA="https://www.google.com/recaptcha/enterprise.js?render=",tA="recaptcha-enterprise",nA="NO_RECAPTCHA";class MS{constructor(e){this.type=tA,this.auth=js(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{DS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new LS(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Xy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(nA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Xy(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}OS(eA+a).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function lc(t,e,n,r=!1){const s=new MS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jy(this),this.idTokenSubscription=new Jy(this),this.beforeStateQueue=new rA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ei.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Se(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}async initializeRecaptchaConfig(){const e=await DS(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new LS(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new MS(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=await Ei.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return U(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&N6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function js(t){return Se(t)}class Jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=ER(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e){const n=oh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(sc(i,e??{}))return s;Gt(s,"already-initialized")}return n.initialize({options:e})}function oA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aA(t,e,n){const r=js(t);U(r._canInitEmulator,r,"emulator-config-failed"),U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=bS(e),{host:o,port:a}=lA(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||uA()}function bS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lA(t){const e=bS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Zy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Zy(o)}}}function Zy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function cA(t,e){return $s(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t,e){return tl(t,"POST","/v1/accounts:signInWithPassword",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e){return tl(t,"POST","/v1/accounts:signInWithEmailLink",eo(t,e))}async function dA(t,e){return tl(t,"POST","/v1/accounts:signInWithEmailLink",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Rg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new _a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await lc(e,r,"signInWithPassword");return $d(e,s)}else return $d(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const i=await lc(e,r,"signInWithPassword");return $d(e,i)}else return Promise.reject(s)});case"emailLink":return hA(e,{email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return cA(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return dA(e,{idToken:n,email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(t,e){return tl(t,"POST","/v1/accounts:signInWithIdp",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="http://localhost";class ks extends Rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Tg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ks(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ci(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ci(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ci(e,n)}buildRequest(){const e={requestUri:fA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mA(t){const e=Ro(Ao(t)).link,n=e?Ro(Ao(e)).deep_link_id:null,r=Ro(Ao(t)).deep_link_id;return(r?Ro(Ao(r)).link:null)||r||n||e||t}class Ag{constructor(e){var n,r,s,i,o,a;const l=Ro(Ao(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=pA((s=l.mode)!==null&&s!==void 0?s:null);U(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=mA(e);try{return new Ag(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.providerId=to.PROVIDER_ID}static credential(e,n){return _a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ag.parseLink(n);return U(r,"argument-error"),_a._fromEmailAndCode(e,r.code,r.tenantId)}}to.PROVIDER_ID="password";to.EMAIL_PASSWORD_SIGN_IN_METHOD="password";to.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends Pg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends nl{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mn.credential(n,r)}catch{return null}}}Mn.GOOGLE_SIGN_IN_METHOD="google.com";Mn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends nl{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends nl{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t,e){return tl(t,"POST","/v1/accounts:signUp",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ys._fromIdTokenResponse(e,r,s),o=ev(r);return new Rs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ev(r);return new Rs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ev(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Nn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new uc(e,n,r,s)}}function $S(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(t,i,e,r):i})}async function gA(t,e,n=!1){const r=await Mi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Mi(t,$S(r,s,e,t),n);U(i.idToken,r,"internal-error");const o=Ig(i.idToken);U(o,r,"internal-error");const{sub:a}=o;return U(t.uid===a,r,"user-mismatch"),Rs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e,n=!1){const r="signIn",s=await $S(t,r,e),i=await Rs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function vA(t,e){return jS(js(t),e)}async function wA(t,e,n){var r;const s=js(t),i={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await lc(s,i,"signUpPassword");o=jd(s,u)}else o=jd(s,i).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await lc(s,i,"signUpPassword");return jd(s,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await Rs._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function EA(t,e,n){return vA(Se(t),to.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e){return $s(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ng(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Se(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Mi(r,CA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function SA(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function TA(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function _A(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function xA(t){return Se(t).signOut()}const cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){const t=lt();return kg(t)||ah(t)}const kA=1e3,RA=10;class US extends FS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=IA()&&X6(),this.fallbackToPolling=PS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Y6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}US.type="LOCAL";const AA=US;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends FS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VS.type="SESSION";const BS=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await PA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Dg("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function DA(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function LA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MA(){return zS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebaseLocalStorageDb",bA=1,hc="firebaseLocalStorage",WS="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uh(t,e){return t.transaction([hc],e?"readwrite":"readonly").objectStore(hc)}function $A(){const t=indexedDB.deleteDatabase(HS);return new rl(t).toPromise()}function Tp(){const t=indexedDB.open(HS,bA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hc,{keyPath:WS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hc)?e(r):(r.close(),await $A(),e(await Tp()))})})}async function tv(t,e,n){const r=uh(t,!0).put({[WS]:e,value:n});return new rl(r).toPromise()}async function jA(t,e){const n=uh(t,!1).get(e),r=await new rl(n).toPromise();return r===void 0?null:r.value}function nv(t,e){const n=uh(t,!0).delete(e);return new rl(n).toPromise()}const FA=800,UA=3;class KS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(MA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await LA(),!this.activeServiceWorker)return;this.sender=new NA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tp();return await tv(e,cc,"1"),await nv(e,cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=uh(s,!1).getAll();return new rl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KS.type="LOCAL";const VA=KS;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){return e?Fn(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BA(t){return jS(t.auth,new Lg(t),t.bypassAuthState)}function zA(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),yA(n,new Lg(t),t.bypassAuthState)}async function HA(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),gA(n,new Lg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BA;case"linkViaPopup":case"linkViaRedirect":return HA;case"reauthViaPopup":case"reauthViaRedirect":return zA;default:Gt(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new el(2e3,1e4);async function KA(t,e,n){const r=js(t);D6(t,e,Pg);const s=qS(r,n);return new cs(r,"signInViaPopup",e,s).executeNotNull()}class cs extends GS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return U(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WA.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="pendingRedirect",Su=new Map;class GA extends GS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Su.get(this.auth._key());if(!e){try{const r=await QA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Su.set(this.auth._key(),e)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QA(t,e){const n=JA(e),r=XA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function YA(t,e){Su.set(t._key(),e)}function XA(t){return Fn(t._redirectPersistence)}function JA(t){return Cu(qA,t.config.apiKey,t.name)}async function ZA(t,e,n=!1){const r=js(t),s=qS(r,e),o=await new GA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=10*60*1e3;class tP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eP&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(e))}saveEventToCache(e){this.cachedEventUids.add(rv(e)),this.lastProcessedEventTime=Date.now()}}function rv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e={}){return $s(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iP=/^https?/;async function oP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rP(t);for(const n of e)try{if(aP(n))return}catch{}Gt(t,"unauthorized-domain")}function aP(t){const e=Sp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iP.test(n))return!1;if(sP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new el(3e4,6e4);function sv(){const t=Cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uP(t){return new Promise((e,n)=>{var r,s,i;function o(){sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sv(),n(En(t,"network-request-failed"))},timeout:lP.get()})}if(!((s=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Cn().gapi)===null||i===void 0)&&i.load)o();else{const a=Z6("iframefcb");return Cn()[a]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},OS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Tu=null,e})}let Tu=null;function cP(t){return Tu=Tu||uP(t),Tu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new el(5e3,15e3),dP="__/auth/iframe",fP="emulator/auth/iframe",pP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gP(t){const e=t.config;U(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xg(e,fP):`https://${t.config.authDomain}/${dP}`,r={apiKey:e.apiKey,appName:t.name,v:bs},s=mP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Za(r).slice(1)}`}async function yP(t){const e=await cP(t),n=Cn().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:gP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),a=Cn().setTimeout(()=>{i(o)},hP.get());function l(){Cn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wP=500,EP=600,CP="_blank",SP="http://localhost";class iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TP(t,e,n,r=wP,s=EP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vP),{width:r.toString(),height:s.toString(),top:i,left:o}),u=lt().toLowerCase();n&&(a=xS(u)?CP:n),_S(u)&&(e=e||SP,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(Q6(u)&&a!=="_self")return _P(e||"",a),new iv(null);const h=window.open(e||"",a,c);U(h,t,"popup-blocked");try{h.focus()}catch{}return new iv(h)}function _P(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="__/auth/handler",IP="emulator/auth/handler",kP=encodeURIComponent("fac");async function ov(t,e,n,r,s,i){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bs,eventId:s};if(e instanceof Pg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(i||{}))o[c]=h}if(e instanceof nl){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${kP}=${encodeURIComponent(l)}`:"";return`${RP(t)}?${Za(a).slice(1)}${u}`}function RP({config:t}){return t.emulator?xg(t,IP):`https://${t.authDomain}/${xP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="webStorageSupport";class AP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BS,this._completeRedirectFn=ZA,this._overrideRedirectResult=YA}async _openPopup(e,n,r,s){var i;Yn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ov(e,n,r,Sp(),s);return TP(e,o,Dg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ov(e,n,r,Sp(),s);return DA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yP(e),r=new tP(e);return n.register("authEvent",s=>(U(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fd,{type:Fd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Fd];o!==void 0&&n(!!o),Gt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PS()||kg()||ah()}}const PP=AP;var av="@firebase/auth",lv="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function LP(t){Is(new $r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;U(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NS(t)},u=new sA(r,s,i,l);return oA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Is(new $r("auth-internal",e=>{const n=js(e.getProvider("auth").getImmediate());return(r=>new NP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(av,lv,DP(t)),wn(av,lv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=5*60,MP=uS("authIdTokenMaxAge")||OP;let uv=null;const bP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MP)return;const s=n==null?void 0:n.token;uv!==s&&(uv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $P(t=Sg()){const e=oh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iA(t,{popupRedirectResolver:PP,persistence:[VA,AA,BS]}),r=uS("authTokenSyncURL");if(r){const i=bP(r);TA(n,i,()=>i(n.currentUser)),SA(n,o=>i(o))}const s=oS("auth");return s&&aA(n,`http://${s}`),n}LP("Browser");var jP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,Og=Og||{},B=jP||self;function ch(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function sl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function FP(t){return Object.prototype.hasOwnProperty.call(t,Ud)&&t[Ud]||(t[Ud]=++UP)}var Ud="closure_uid_"+(1e9*Math.random()>>>0),UP=0;function VP(t,e,n){return t.call.apply(t.bind,arguments)}function BP(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function st(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?st=VP:st=BP,st.apply(null,arguments)}function Hl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function He(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Kr(){this.s=this.s,this.o=this.o}var zP=0;Kr.prototype.s=!1;Kr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),zP!=0)&&FP(this)};Kr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Mg(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function cv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ch(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function it(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var HP=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{B.addEventListener("test",()=>{},e),B.removeEventListener("test",()=>{},e)}catch{}return t}();function xa(t){return/^[\s\xa0]*$/.test(t)}function hh(){var t=B.navigator;return t&&(t=t.userAgent)?t:""}function dn(t){return hh().indexOf(t)!=-1}function bg(t){return bg[" "](t),t}bg[" "]=function(){};function WP(t,e){var n=$N;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var KP=dn("Opera"),bi=dn("Trident")||dn("MSIE"),XS=dn("Edge"),_p=XS||bi,JS=dn("Gecko")&&!(hh().toLowerCase().indexOf("webkit")!=-1&&!dn("Edge"))&&!(dn("Trident")||dn("MSIE"))&&!dn("Edge"),qP=hh().toLowerCase().indexOf("webkit")!=-1&&!dn("Edge");function ZS(){var t=B.document;return t?t.documentMode:void 0}var xp;e:{var Vd="",Bd=function(){var t=hh();if(JS)return/rv:([^\);]+)(\)|;)/.exec(t);if(XS)return/Edge\/([\d\.]+)/.exec(t);if(bi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qP)return/WebKit\/(\S+)/.exec(t);if(KP)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Bd&&(Vd=Bd?Bd[1]:""),bi){var zd=ZS();if(zd!=null&&zd>parseFloat(Vd)){xp=String(zd);break e}}xp=Vd}var Ip;if(B.document&&bi){var hv=ZS();Ip=hv||parseInt(xp,10)||void 0}else Ip=void 0;var GP=Ip;function Ia(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(JS){e:{try{bg(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:QP[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ia.$.h.call(this)}}He(Ia,it);var QP={2:"touch",3:"pen",4:"mouse"};Ia.prototype.h=function(){Ia.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var il="closure_listenable_"+(1e6*Math.random()|0),YP=0;function XP(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++YP,this.fa=this.ia=!1}function dh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $g(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function JP(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function eT(t){const e={};for(const n in t)e[n]=t[n];return e}const dv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tT(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<dv.length;i++)n=dv[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function fh(t){this.src=t,this.g={},this.h=0}fh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Rp(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new XP(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function kp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=YS(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(dh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Rp(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var jg="closure_lm_"+(1e6*Math.random()|0),Hd={};function nT(t,e,n,r,s){if(r&&r.once)return sT(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)nT(t,e[i],n,r,s);return null}return n=Vg(n),t&&t[il]?t.O(e,n,sl(r)?!!r.capture:!!r,s):rT(t,e,n,!1,r,s)}function rT(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=sl(s)?!!s.capture:!!s,a=Ug(t);if(a||(t[jg]=a=new fh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=ZP(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)HP||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(oT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ZP(){function t(n){return e.call(t.src,t.listener,n)}const e=eN;return t}function sT(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)sT(t,e[i],n,r,s);return null}return n=Vg(n),t&&t[il]?t.P(e,n,sl(r)?!!r.capture:!!r,s):rT(t,e,n,!0,r,s)}function iT(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)iT(t,e[i],n,r,s);else r=sl(r)?!!r.capture:!!r,n=Vg(n),t&&t[il]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Rp(i,n,r,s),-1<n&&(dh(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ug(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Rp(e,n,r,s)),(n=-1<t?e[t]:null)&&Fg(n))}function Fg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[il])kp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(oT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ug(e))?(kp(n,t),n.h==0&&(n.src=null,e[jg]=null)):dh(t)}}}function oT(t){return t in Hd?Hd[t]:Hd[t]="on"+t}function eN(t,e){if(t.fa)t=!0;else{e=new Ia(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Fg(t),t=n.call(r,e)}return t}function Ug(t){return t=t[jg],t instanceof fh?t:null}var Wd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(t){return typeof t=="function"?t:(t[Wd]||(t[Wd]=function(e){return t.handleEvent(e)}),t[Wd])}function ze(){Kr.call(this),this.i=new fh(this),this.S=this,this.J=null}He(ze,Kr);ze.prototype[il]=!0;ze.prototype.removeEventListener=function(t,e,n,r){iT(this,t,e,n,r)};function Qe(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var s=e;e=new it(r,t),tT(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Wl(o,r,!0,e)&&s}if(o=e.g=t,s=Wl(o,r,!0,e)&&s,s=Wl(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Wl(o,r,!1,e)&&s}ze.prototype.N=function(){if(ze.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)dh(n[r]);delete t.g[e],t.h--}}this.J=null};ze.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ze.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Wl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&kp(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Bg=B.JSON.stringify;class tN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function nN(){var t=zg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class rN{constructor(){this.h=this.g=null}add(e,n){const r=aT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var aT=new tN(()=>new sN,t=>t.reset());class sN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function iN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function oN(t){B.setTimeout(()=>{throw t},0)}let ka,Ra=!1,zg=new rN,lT=()=>{const t=B.Promise.resolve(void 0);ka=()=>{t.then(aN)}};var aN=()=>{for(var t;t=nN();){try{t.h.call(t.g)}catch(n){oN(n)}var e=aT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ra=!1};function ph(t,e){ze.call(this),this.h=t||1,this.g=e||B,this.j=st(this.qb,this),this.l=Date.now()}He(ph,ze);N=ph.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Qe(this,"tick"),this.ga&&(Hg(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Hg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){ph.$.N.call(this),Hg(this),delete this.g};function Wg(t,e,n){if(typeof t=="function")n&&(t=st(t,n));else if(t&&typeof t.handleEvent=="function")t=st(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:B.setTimeout(t,e||0)}function uT(t){t.g=Wg(()=>{t.g=null,t.i&&(t.i=!1,uT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class lN extends Kr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uT(this)}N(){super.N(),this.g&&(B.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(t){Kr.call(this),this.h=t,this.g={}}He(Aa,Kr);var fv=[];function cT(t,e,n,r){Array.isArray(n)||(n&&(fv[0]=n.toString()),n=fv);for(var s=0;s<n.length;s++){var i=nT(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function hT(t){$g(t.g,function(e,n){this.g.hasOwnProperty(n)&&Fg(e)},t),t.g={}}Aa.prototype.N=function(){Aa.$.N.call(this),hT(this)};Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function mh(){this.g=!0}mh.prototype.Ea=function(){this.g=!1};function uN(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function cN(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function li(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+dN(t,n)+(r?" "+r:"")})}function hN(t,e){t.info(function(){return"TIMEOUT: "+e})}mh.prototype.info=function(){};function dN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Bg(n)}catch{return e}}var Fs={},pv=null;function gh(){return pv=pv||new ze}Fs.Ta="serverreachability";function dT(t){it.call(this,Fs.Ta,t)}He(dT,it);function Pa(t){const e=gh();Qe(e,new dT(e))}Fs.STAT_EVENT="statevent";function fT(t,e){it.call(this,Fs.STAT_EVENT,t),this.stat=e}He(fT,it);function ft(t){const e=gh();Qe(e,new fT(e,t))}Fs.Ua="timingevent";function pT(t,e){it.call(this,Fs.Ua,t),this.size=e}He(pT,it);function ol(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){t()},e)}var yh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Kg(){}Kg.prototype.h=null;function mv(t){return t.h||(t.h=t.i())}function gT(){}var al={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qg(){it.call(this,"d")}He(qg,it);function Gg(){it.call(this,"c")}He(Gg,it);var Ap;function vh(){}He(vh,Kg);vh.prototype.g=function(){return new XMLHttpRequest};vh.prototype.i=function(){return{}};Ap=new vh;function ll(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Aa(this),this.P=fN,t=_p?125:void 0,this.V=new ph(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yT}function yT(){this.i=null,this.g="",this.h=!1}var fN=45e3,Pp={},dc={};N=ll.prototype;N.setTimeout=function(t){this.P=t};function Np(t,e,n){t.L=1,t.v=Eh(Xn(e)),t.s=n,t.S=!0,vT(t,null)}function vT(t,e){t.G=Date.now(),ul(t),t.A=Xn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),IT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new yT,t.g=qT(t.l,n?e:null,!t.s),0<t.O&&(t.M=new lN(st(t.Pa,t,t.g),t.O)),cT(t.U,t.g,"readystatechange",t.nb),e=t.I?eT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Pa(),uN(t.j,t.u,t.A,t.m,t.W,t.s)}N.nb=function(t){t=t.target;const e=this.M;e&&pn(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{const c=pn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||_p||this.g&&(this.h.h||this.g.ja()||wv(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Pa(3):Pa(2)),wh(this);var n=this.g.da();this.ca=n;t:if(wT(this)){var r=wv(this.g);t="";var s=r.length,i=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),Ko(this);var o="";break t}this.h.i=new B.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,cN(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xa(a)){var u=a;break t}}u=null}if(n=u)li(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dp(this,n);else{this.i=!1,this.o=3,ft(12),hs(this),Ko(this);break e}}this.S?(ET(this,c,o),_p&&this.i&&c==3&&(cT(this.U,this.V,"tick",this.mb),this.V.start())):(li(this.j,this.m,o,null),Dp(this,o)),c==4&&hs(this),this.i&&!this.J&&(c==4?zT(this.l,this):(this.i=!1,ul(this)))}else ON(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,ft(12)):(this.o=0,ft(13)),hs(this),Ko(this)}}}catch{}finally{}};function wT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function ET(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=pN(t,n),s==dc){e==4&&(t.o=4,ft(14),r=!1),li(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Pp){t.o=4,ft(15),li(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else li(t.j,t.m,s,null),Dp(t,s);wT(t)&&s!=dc&&s!=Pp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,ft(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),e1(e),e.M=!0,ft(11))):(li(t.j,t.m,n,"[Invalid Chunked Response]"),hs(t),Ko(t))}N.mb=function(){if(this.g){var t=pn(this.g),e=this.g.ja();this.C<e.length&&(wh(this),ET(this,t,e),this.i&&t!=4&&ul(this))}};function pN(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?dc:(n=Number(e.substring(n,r)),isNaN(n)?Pp:(r+=1,r+n>e.length?dc:(e=e.slice(r,r+n),t.C=r+n,e)))}N.cancel=function(){this.J=!0,hs(this)};function ul(t){t.Y=Date.now()+t.P,CT(t,t.P)}function CT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ol(st(t.lb,t),e)}function wh(t){t.B&&(B.clearTimeout(t.B),t.B=null)}N.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(hN(this.j,this.A),this.L!=2&&(Pa(),ft(17)),hs(this),this.o=2,Ko(this)):CT(this,this.Y-t)};function Ko(t){t.l.H==0||t.J||zT(t.l,t)}function hs(t){wh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Hg(t.V),hT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Dp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Lp(n.i,t))){if(!t.K&&Lp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)mc(n),Th(n);else break e;Zg(n),ft(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ol(st(n.ib,n),6e3));if(1>=AT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ds(n,11)}else if((t.K||n.g==t)&&mc(n),!xa(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Qg(i,i.h),i.h=null))}if(r.F){const w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,ae(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=KT(r,r.J?r.pa:null,r.Y),o.K){PT(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(wh(a),ul(a)),r.g=o}else VT(r);0<n.j.length&&_h(n)}else u[0]!="stop"&&u[0]!="close"||ds(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ds(n,7):Jg(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Pa(4)}catch{}}function mN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ch(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function gN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ch(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function ST(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ch(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=gN(t),r=mN(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var TT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function vs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof vs){this.h=t.h,fc(this,t.j),this.s=t.s,this.g=t.g,pc(this,t.m),this.l=t.l;var e=t.i,n=new Na;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),gv(this,n),this.o=t.o}else t&&(e=String(t).match(TT))?(this.h=!1,fc(this,e[1]||"",!0),this.s=Po(e[2]||""),this.g=Po(e[3]||"",!0),pc(this,e[4]),this.l=Po(e[5]||"",!0),gv(this,e[6]||"",!0),this.o=Po(e[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}vs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(No(e,yv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(No(e,yv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(No(n,n.charAt(0)=="/"?EN:wN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",No(n,SN)),t.join("")};function Xn(t){return new vs(t)}function fc(t,e,n){t.j=n?Po(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function pc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gv(t,e,n){e instanceof Na?(t.i=e,TN(t.i,t.h)):(n||(e=No(e,CN)),t.i=new Na(e,t.h))}function ae(t,e,n){t.i.set(e,n)}function Eh(t){return ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Po(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function No(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,vN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var yv=/[#\/\?@]/g,wN=/[#\?:]/g,EN=/[#\?]/g,CN=/[#\?@]/g,SN=/#/g;function Na(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qr(t){t.g||(t.g=new Map,t.h=0,t.i&&yN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Na.prototype;N.add=function(t,e){qr(this),this.i=null,t=no(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function _T(t,e){qr(t),e=no(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function xT(t,e){return qr(t),e=no(t,e),t.g.has(e)}N.forEach=function(t,e){qr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};N.ta=function(){qr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};N.Z=function(t){qr(this);let e=[];if(typeof t=="string")xT(this,t)&&(e=e.concat(this.g.get(no(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return qr(this),this.i=null,t=no(this,t),xT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function IT(t,e,n){_T(t,e),0<n.length&&(t.i=null,t.g.set(no(t,e),Mg(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function no(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function TN(t,e){e&&!t.j&&(qr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(_T(this,r),IT(this,s,n))},t)),t.j=e}var _N=class{constructor(t,e){this.g=t,this.map=e}};function kT(t){this.l=t||xN,B.PerformanceNavigationTiming?(t=B.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(B.g&&B.g.Ka&&B.g.Ka()&&B.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xN=10;function RT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function AT(t){return t.h?1:t.g?t.g.size:0}function Lp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Qg(t,e){t.g?t.g.add(e):t.h=e}function PT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}kT.prototype.cancel=function(){if(this.i=NT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function NT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Mg(t.i)}var IN=class{stringify(t){return B.JSON.stringify(t,void 0)}parse(t){return B.JSON.parse(t,void 0)}};function kN(){this.g=new IN}function RN(t,e,n){const r=n||"";try{ST(t,function(s,i){let o=s;sl(s)&&(o=Bg(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function AN(t,e){const n=new mh;if(B.Image){const r=new Image;r.onload=Hl(Kl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Hl(Kl,n,r,"TestLoadImage: error",!1,e),r.onabort=Hl(Kl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hl(Kl,n,r,"TestLoadImage: timeout",!1,e),B.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Kl(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function cl(t){this.l=t.fc||null,this.j=t.ob||!1}He(cl,Kg);cl.prototype.g=function(){return new Ch(this.l,this.j)};cl.prototype.i=function(t){return function(){return t}}({});function Ch(t,e){ze.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Yg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He(Ch,ze);var Yg=0;N=Ch.prototype;N.open=function(t,e){if(this.readyState!=Yg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Da(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||B).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hl(this)),this.readyState=Yg};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof B.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function DT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?hl(this):Da(this),this.readyState==3&&DT(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,hl(this))};N.Ya=function(t){this.g&&(this.response=t,hl(this))};N.ka=function(){this.g&&hl(this)};function hl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Da(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Da(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ch.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var PN=B.JSON.parse;function Te(t){ze.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LT,this.L=this.M=!1}He(Te,ze);var LT="",NN=/^https?$/i,DN=["POST","PUT"];N=Te.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ap.g(),this.C=this.u?mv(this.u):mv(Ap),this.g.onreadystatechange=st(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){vv(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=B.FormData&&t instanceof B.FormData,!(0<=YS(DN,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bT(this),0<this.B&&((this.L=LN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=st(this.ua,this)):this.A=Wg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){vv(this,i)}};function LN(t){return bi&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof Og<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qe(this,"timeout"),this.abort(8))};function vv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,OT(t),Sh(t)}function OT(t){t.F||(t.F=!0,Qe(t,"complete"),Qe(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Qe(this,"complete"),Qe(this,"abort"),Sh(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sh(this,!0)),Te.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?MT(this):this.kb())};N.kb=function(){MT(this)};function MT(t){if(t.h&&typeof Og<"u"&&(!t.C[1]||pn(t)!=4||t.da()!=2)){if(t.v&&pn(t)==4)Wg(t.La,0,t);else if(Qe(t,"readystatechange"),pn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(TT)[1]||null;!s&&B.self&&B.self.location&&(s=B.self.location.protocol.slice(0,-1)),r=!NN.test(s?s.toLowerCase():"")}n=r}if(n)Qe(t,"complete"),Qe(t,"success");else{t.m=6;try{var i=2<pn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",OT(t)}}finally{Sh(t)}}}}function Sh(t,e){if(t.g){bT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Qe(t,"ready");try{n.onreadystatechange=r}catch{}}}function bT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(B.clearTimeout(t.A),t.A=null)}N.isActive=function(){return!!this.g};function pn(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),PN(e)}};function wv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case LT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ON(t){const e={};t=(t.g&&2<=pn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(xa(t[r]))continue;var n=iN(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}JP(e,function(r){return r.join(", ")})}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function $T(t){let e="";return $g(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Xg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$T(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ae(t,e,n))}function wo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jT(t){this.Ga=0,this.j=[],this.l=new mh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wo("baseRetryDelayMs",5e3,t),this.hb=wo("retryDelaySeedMs",1e4,t),this.eb=wo("forwardChannelMaxRetries",2,t),this.xa=wo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new kT(t&&t.concurrentRequestLimit),this.Ja=new kN,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}N=jT.prototype;N.ra=8;N.H=1;function Jg(t){if(FT(t),t.H==3){var e=t.W++,n=Xn(t.I);if(ae(n,"SID",t.K),ae(n,"RID",e),ae(n,"TYPE","terminate"),dl(t,n),e=new ll(t,t.l,e),e.L=2,e.v=Eh(Xn(n)),n=!1,B.navigator&&B.navigator.sendBeacon)try{n=B.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&B.Image&&(new Image().src=e.v,n=!0),n||(e.g=qT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ul(e)}WT(t)}function Th(t){t.g&&(e1(t),t.g.cancel(),t.g=null)}function FT(t){Th(t),t.u&&(B.clearTimeout(t.u),t.u=null),mc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&B.clearTimeout(t.m),t.m=null)}function _h(t){if(!RT(t.i)&&!t.m){t.m=!0;var e=t.Na;ka||lT(),Ra||(ka(),Ra=!0),zg.add(e,t),t.C=0}}function MN(t,e){return AT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ol(st(t.Na,t,e),HT(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ll(this,this.l,t);let i=this.s;if(this.U&&(i?(i=eT(i),tT(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=UT(this,s,e),n=Xn(this.I),ae(n,"RID",t),ae(n,"CVER",22),this.F&&ae(n,"X-HTTP-Session-Id",this.F),dl(this,n),i&&(this.O?e="headers="+encodeURIComponent(String($T(i)))+"&"+e:this.o&&Xg(n,this.o,i)),Qg(this.i,s),this.bb&&ae(n,"TYPE","init"),this.P?(ae(n,"$req",e),ae(n,"SID","null"),s.aa=!0,Np(s,n,null)):Np(s,n,e),this.H=2}}else this.H==3&&(t?Ev(this,t):this.j.length==0||RT(this.i)||Ev(this))};function Ev(t,e){var n;e?n=e.m:n=t.W++;const r=Xn(t.I);ae(r,"SID",t.K),ae(r,"RID",n),ae(r,"AID",t.V),dl(t,r),t.o&&t.s&&Xg(r,t.o,t.s),n=new ll(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=UT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Qg(t.i,n),Np(n,r,e)}function dl(t,e){t.na&&$g(t.na,function(n,r){ae(e,r,n)}),t.h&&ST({},function(n,r){ae(e,r,n)})}function UT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?st(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].g;const c=s[l].map;if(u-=i,0>u)i=Math.max(0,s[l].g-100),a=!1;else try{RN(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function VT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ka||lT(),Ra||(ka(),Ra=!0),zg.add(e,t),t.A=0}}function Zg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ol(st(t.Ma,t),HT(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,BT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ol(st(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ft(10),Th(this),BT(this))};function e1(t){t.B!=null&&(B.clearTimeout(t.B),t.B=null)}function BT(t){t.g=new ll(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Xn(t.wa);ae(e,"RID","rpc"),ae(e,"SID",t.K),ae(e,"AID",t.V),ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ae(e,"TO",t.qa),ae(e,"TYPE","xmlhttp"),dl(t,e),t.o&&t.s&&Xg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Eh(Xn(e)),n.s=null,n.S=!0,vT(n,t)}N.ib=function(){this.v!=null&&(this.v=null,Th(this),Zg(this),ft(19))};function mc(t){t.v!=null&&(B.clearTimeout(t.v),t.v=null)}function zT(t,e){var n=null;if(t.g==e){mc(t),e1(t),t.g=null;var r=2}else if(Lp(t.i,e))n=e.F,PT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=gh(),Qe(r,new pT(r,n)),_h(t)}else VT(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&MN(t,e)||r==2&&Zg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ds(t,5);break;case 4:ds(t,10);break;case 3:ds(t,6);break;default:ds(t,2)}}}function HT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ds(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=st(t.pb,t);n||(n=new vs("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||fc(n,"https"),Eh(n)),AN(n.toString(),r)}else ft(2);t.H=0,t.h&&t.h.za(e),WT(t),FT(t)}N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ft(2)):(this.l.info("Failed to ping google.com"),ft(1))};function WT(t){if(t.H=0,t.ma=[],t.h){const e=NT(t.i);(e.length!=0||t.j.length!=0)&&(cv(t.ma,e),cv(t.ma,t.j),t.i.i.length=0,Mg(t.j),t.j.length=0),t.h.ya()}}function KT(t,e,n){var r=n instanceof vs?Xn(n):new vs(n);if(r.g!="")e&&(r.g=e+"."+r.g),pc(r,r.m);else{var s=B.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new vs(null);r&&fc(i,r),e&&(i.g=e),s&&pc(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&ae(r,n,e),ae(r,"VER",t.ra),dl(t,r),r}function qT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Te(new cl({ob:!0})):new Te(t.va),e.Oa(t.J),e}N.isActive=function(){return!!this.h&&this.h.isActive(this)};function GT(){}N=GT.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.isActive=function(){return!0};N.Va=function(){};function gc(){if(bi&&!(10<=Number(GP)))throw Error("Environmental error: no available transport.")}gc.prototype.g=function(t,e){return new Lt(t,e)};function Lt(t,e){ze.call(this),this.g=new jT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!xa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ro(this)}He(Lt,ze);Lt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ft(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=KT(t,null,t.Y),_h(t)};Lt.prototype.close=function(){Jg(this.g)};Lt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Bg(t),t=n);e.j.push(new _N(e.fb++,t)),e.H==3&&_h(e)};Lt.prototype.N=function(){this.g.h=null,delete this.j,Jg(this.g),delete this.g,Lt.$.N.call(this)};function QT(t){qg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}He(QT,qg);function YT(){Gg.call(this),this.status=1}He(YT,Gg);function ro(t){this.g=t}He(ro,GT);ro.prototype.Ba=function(){Qe(this.g,"a")};ro.prototype.Aa=function(t){Qe(this.g,new QT(t))};ro.prototype.za=function(t){Qe(this.g,new YT)};ro.prototype.ya=function(){Qe(this.g,"b")};function bN(){this.blockSize=-1}function sn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}He(sn,bN);sn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Kd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}sn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Kd(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Kd(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Kd(this,r),s=0;break}}this.h=s,this.i+=e};sn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ne(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var $N={};function t1(t){return-128<=t&&128>t?WP(t,function(e){return new ne([e|0],0>e?-1:0)}):new ne([t|0],0>t?-1:0)}function mn(t){if(isNaN(t)||!isFinite(t))return Si;if(0>t)return qe(mn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Op;return new ne(e,0)}function XT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return qe(XT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=mn(Math.pow(e,8)),r=Si,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=mn(Math.pow(e,i)),r=r.R(i).add(mn(o))):(r=r.R(n),r=r.add(mn(o)))}return r}var Op=4294967296,Si=t1(0),Mp=t1(1),Cv=t1(16777216);N=ne.prototype;N.ea=function(){if(Bt(this))return-qe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Op+r)*e,e*=Op}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Un(this))return"0";if(Bt(this))return"-"+qe(this).toString(t);for(var e=mn(Math.pow(t,6)),n=this,r="";;){var s=vc(n,e).g;n=yc(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Un(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Un(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Bt(t){return t.h==-1}N.X=function(t){return t=yc(this,t),Bt(t)?-1:Un(t)?0:1};function qe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ne(n,~t.h).add(Mp)}N.abs=function(){return Bt(this)?qe(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ne(n,n[n.length-1]&-2147483648?-1:0)};function yc(t,e){return t.add(qe(e))}N.R=function(t){if(Un(this)||Un(t))return Si;if(Bt(this))return Bt(t)?qe(this).R(qe(t)):qe(qe(this).R(t));if(Bt(t))return qe(this.R(qe(t)));if(0>this.X(Cv)&&0>t.X(Cv))return mn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,ql(n,2*r+2*s),n[2*r+2*s+1]+=i*l,ql(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,ql(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,ql(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ne(n,0)};function ql(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Eo(t,e){this.g=t,this.h=e}function vc(t,e){if(Un(e))throw Error("division by zero");if(Un(t))return new Eo(Si,Si);if(Bt(t))return e=vc(qe(t),e),new Eo(qe(e.g),qe(e.h));if(Bt(e))return e=vc(t,qe(e)),new Eo(qe(e.g),e.h);if(30<t.g.length){if(Bt(t)||Bt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Mp,r=e;0>=r.X(t);)n=Sv(n),r=Sv(r);var s=Ks(n,1),i=Ks(r,1);for(r=Ks(r,2),n=Ks(n,2);!Un(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Ks(r,1),n=Ks(n,1)}return e=yc(t,s.R(e)),new Eo(s,e)}for(s=Si;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=mn(n),o=i.R(e);Bt(o)||0<o.X(t);)n-=r,i=mn(n),o=i.R(e);Un(i)&&(i=Mp),s=s.add(i),t=yc(t,o)}return new Eo(s,t)}N.gb=function(t){return vc(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ne(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ne(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ne(n,this.h^t.h)};function Sv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ne(n,t.h)}function Ks(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ne(s,t.h)}gc.prototype.createWebChannel=gc.prototype.g;Lt.prototype.send=Lt.prototype.u;Lt.prototype.open=Lt.prototype.m;Lt.prototype.close=Lt.prototype.close;yh.NO_ERROR=0;yh.TIMEOUT=8;yh.HTTP_ERROR=6;mT.COMPLETE="complete";gT.EventType=al;al.OPEN="a";al.CLOSE="b";al.ERROR="c";al.MESSAGE="d";ze.prototype.listen=ze.prototype.O;Te.prototype.listenOnce=Te.prototype.P;Te.prototype.getLastError=Te.prototype.Sa;Te.prototype.getLastErrorCode=Te.prototype.Ia;Te.prototype.getStatus=Te.prototype.da;Te.prototype.getResponseJson=Te.prototype.Wa;Te.prototype.getResponseText=Te.prototype.ja;Te.prototype.send=Te.prototype.ha;Te.prototype.setWithCredentials=Te.prototype.Oa;sn.prototype.digest=sn.prototype.l;sn.prototype.reset=sn.prototype.reset;sn.prototype.update=sn.prototype.j;ne.prototype.add=ne.prototype.add;ne.prototype.multiply=ne.prototype.R;ne.prototype.modulo=ne.prototype.gb;ne.prototype.compare=ne.prototype.X;ne.prototype.toNumber=ne.prototype.ea;ne.prototype.toString=ne.prototype.toString;ne.prototype.getBits=ne.prototype.D;ne.fromNumber=mn;ne.fromString=XT;var jN=function(){return new gc},FN=function(){return gh()},qd=yh,UN=mT,VN=Fs,Tv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},BN=cl,Gl=gT,zN=Te,HN=sn,Ti=ne;const _v="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Eg("@firebase/firestore");function xv(){return As.logLevel}function O(t,...e){if(As.logLevel<=Z.DEBUG){const n=e.map(n1);As.debug(`Firestore (${so}): ${t}`,...n)}}function Jn(t,...e){if(As.logLevel<=Z.ERROR){const n=e.map(n1);As.error(`Firestore (${so}): ${t}`,...n)}}function $i(t,...e){if(As.logLevel<=Z.WARN){const n=e.map(n1);As.warn(`Firestore (${so}): ${t}`,...n)}}function n1(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t="Unexpected state"){const e=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: `+t;throw Jn(e),new Error(e)}function ue(t,e){t||V()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends Nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class KN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qN{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new JT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new et(e)}}class GN{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class QN{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new GN(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XN{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.T=n.token,new YN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=JN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.timestamp=e}static fromTimestamp(e){return new W(e)}static min(){return new W(new je(0,0))}static max(){return new W(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r){n===void 0?n=0:n>e.length&&V(),r===void 0?r=e.length-n:r>e.length-n&&V(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return La.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends La{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const ZN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends La{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return ZN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new b(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new b(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new b(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new b(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(Ce.fromString(e))}static fromName(e){return new j(Ce.fromString(e).popFirst(5))}static empty(){return new j(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new Ce(e.slice()))}}function eD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=W.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new jr(s,j.empty(),e)}function tD(t){return new jr(t.readTime,t.key,-1)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(W.min(),j.empty(),-1)}static max(){return new jr(W.max(),j.empty(),-1)}}function nD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==rD)throw t;O("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(s=>s?P.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new P((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new P((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}r1.ct=-1;function xh(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function iD(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new we(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();const e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Ke(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new At([])}unionWith(e){let n=new ot(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new t_("Invalid base64 string: "+s):s}}(e);return new ut(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const oD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(ue(!!t),typeof t=="string"){let e=0;const n=oD.exec(t);if(ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function i1(t){const e=t.mapValue.fields.__previous_value__;return s1(e)?i1(e):e}function Oa(t){const e=Fr(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ma{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s1(t)?4:lD(t)?9007199254740991:10:V()}function In(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Fr(r.timestampValue),o=Fr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ps(r.bytesValue).isEqual(Ps(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return De(r.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(r.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return De(r.integerValue)===De(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=De(r.doubleValue),o=De(s.doubleValue);return i===o?wc(i)===wc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Iv(i)!==Iv(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!In(i[a],o[a])))return!1;return!0}(t,e);default:return V()}}function ba(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function Fi(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=De(s.integerValue||s.doubleValue),a=De(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Rv(t.timestampValue,e.timestampValue);case 4:return Rv(Oa(t),Oa(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Ps(s),a=Ps(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=ee(o[l],a[l]);if(u!==0)return u}return ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=ee(De(s.latitude),De(i.latitude));return o!==0?o:ee(De(s.longitude),De(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Fi(o[l],a[l]);if(u)return u}return ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Yl.mapValue&&i===Yl.mapValue)return 0;if(s===Yl.mapValue)return 1;if(i===Yl.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=ee(a[c],u[c]);if(h!==0)return h;const d=Fi(o[a[c]],l[u[c]]);if(d!==0)return d}return ee(a.length,u.length)}(t.mapValue,e.mapValue);default:throw V()}}function Rv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Fr(t),r=Fr(e),s=ee(n.seconds,r.seconds);return s!==0?s:ee(n.nanos,r.nanos)}function Ui(t){return bp(t)}function bp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Fr(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ps(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,j.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=bp(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${bp(r.fields[a])}`;return i+"}"}(t.mapValue):V();var e,n}function $p(t){return!!t&&"integerValue"in t}function o1(t){return!!t&&"arrayValue"in t}function Av(t){return!!t&&"nullValue"in t}function Pv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _u(t){return!!t&&"mapValue"in t}function qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.value=e}static empty(){return new wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=qo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_u(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Us(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wt(qo(this.value))}}function n_(t){const e=[];return Us(t.fields,(n,r)=>{const s=new rt([n]);if(_u(r)){const i=n_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nt(e,0,W.min(),W.min(),W.min(),wt.empty(),0)}static newFoundDocument(e,n,r,s){return new nt(e,1,n,W.min(),r,s,0)}static newNoDocument(e,n){return new nt(e,2,n,W.min(),W.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,W.min(),W.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.position=e,this.inclusive=n}}function Nv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=Fi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n="asc"){this.field=e,this.dir=n}}function uD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{}class Me extends r_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hD(e,n,r):n==="array-contains"?new pD(e,r):n==="in"?new mD(e,r):n==="not-in"?new gD(e,r):n==="array-contains-any"?new yD(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dD(e,r):new fD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fi(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class kn extends r_{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new kn(e,n)}matches(e){return s_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function s_(t){return t.op==="and"}function i_(t){return cD(t)&&s_(t)}function cD(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function jp(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Ui(t.value);if(i_(t))return t.filters.map(e=>jp(e)).join(",");{const e=t.filters.map(n=>jp(n)).join(",");return`${t.op}(${e})`}}function o_(t,e){return t instanceof Me?function(n,r){return r instanceof Me&&n.op===r.op&&n.field.isEqual(r.field)&&In(n.value,r.value)}(t,e):t instanceof kn?function(n,r){return r instanceof kn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&o_(i,r.filters[o]),!0):!1}(t,e):void V()}function a_(t){return t instanceof Me?function(e){return`${e.field.canonicalString()} ${e.op} ${Ui(e.value)}`}(t):t instanceof kn?function(e){return e.op.toString()+" {"+e.getFilters().map(a_).join(" ,")+"}"}(t):"Filter"}class hD extends Me{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class dD extends Me{constructor(e,n){super(e,"in",n),this.keys=l_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fD extends Me{constructor(e,n){super(e,"not-in",n),this.keys=l_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function l_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class pD extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return o1(n)&&ba(n.arrayValue,this.value)}}class mD extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ba(this.value.arrayValue,n)}}class gD extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ba(this.value.arrayValue,n)}}class yD extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!o1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ba(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function Lv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new vD(t,e,n,r,s,i,o)}function a1(t){const e=K(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ui(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ui(r)).join(",")),e.dt=n}return e.dt}function l1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dv(t.startAt,e.startAt)&&Dv(t.endAt,e.endAt)}function Fp(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function wD(t,e,n,r,s,i,o,a){return new Ih(t,e,n,r,s,i,o,a)}function kh(t){return new Ih(t)}function Ov(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ED(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function CD(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function SD(t){return t.collectionGroup!==null}function _i(t){const e=K(t);if(e.wt===null){e.wt=[];const n=CD(e),r=ED(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Go(n)),e.wt.push(new Go(rt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Go(rt.keyField(),i))}}}return e.wt}function Zn(t){const e=K(t);if(!e._t)if(e.limitType==="F")e._t=Lv(e.path,e.collectionGroup,_i(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of _i(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Go(i.field,o))}const r=e.endAt?new Ec(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ec(e.startAt.position,e.startAt.inclusive):null;e._t=Lv(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function Up(t,e,n){return new Ih(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rh(t,e){return l1(Zn(t),Zn(e))&&t.limitType===e.limitType}function u_(t){return`${a1(Zn(t))}|lt:${t.limitType}`}function Vp(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>a_(r)).join(", ")}]`),xh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ui(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ui(r)).join(",")),`Target(${n})`}(Zn(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):j.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of _i(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=Nv(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,_i(n),r)||n.endAt&&!function(s,i,o){const a=Nv(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,_i(n),r))}(t,e)}function TD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c_(t){return(e,n)=>{let r=!1;for(const s of _i(t)){const i=_D(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _D(t,e,n){const r=t.field.isKeyField()?j.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Fi(a,l):V()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return V()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return e_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new we(j.comparator);function er(){return xD}const h_=new we(j.comparator);function Do(...t){let e=h_;for(const n of t)e=e.insert(n.key,n);return e}function d_(t){let e=h_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fs(){return Qo()}function f_(){return Qo()}function Qo(){return new io(t=>t.toString(),(t,e)=>t.isEqual(e))}const ID=new we(j.comparator),kD=new ot(j.comparator);function G(...t){let e=kD;for(const n of t)e=e.add(n);return e}const RD=new ot(ee);function AD(){return RD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function m_(t){return{integerValue:""+t}}function PD(t,e){return iD(e)?m_(e):p_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function ND(t,e,n){return t instanceof Cc?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&s1(s)&&(s=i1(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Vi?y_(t,e):t instanceof $a?v_(t,e):function(r,s){const i=g_(r,s),o=Mv(i)+Mv(r.gt);return $p(i)&&$p(r.gt)?m_(o):p_(r.serializer,o)}(t,e)}function DD(t,e,n){return t instanceof Vi?y_(t,e):t instanceof $a?v_(t,e):n}function g_(t,e){return t instanceof Sc?$p(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Cc extends Ph{}class Vi extends Ph{constructor(e){super(),this.elements=e}}function y_(t,e){const n=w_(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class $a extends Ph{constructor(e){super(),this.elements=e}}function v_(t,e){let n=w_(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class Sc extends Ph{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Mv(t){return De(t.integerValue||t.doubleValue)}function w_(t){return o1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.field=e,this.transform=n}}function OD(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Vi&&r instanceof Vi||n instanceof $a&&r instanceof $a?ji(n.elements,r.elements,In):n instanceof Sc&&r instanceof Sc?In(n.gt,r.gt):n instanceof Cc&&r instanceof Cc}(t.transform,e.transform)}class MD{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function E_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new S_(t.key,Sn.none()):new ml(t.key,t.data,Sn.none());{const n=t.data,r=wt.empty();let s=new ot(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gr(t.key,r,new At(s.toArray()),Sn.none())}}function bD(t,e,n){t instanceof ml?function(r,s,i){const o=r.value.clone(),a=$v(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(r,s,i){if(!xu(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=$v(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(C_(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Yo(t,e,n,r){return t instanceof ml?function(s,i,o,a){if(!xu(s.precondition,i))return o;const l=s.value.clone(),u=jv(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gr?function(s,i,o,a){if(!xu(s.precondition,i))return o;const l=jv(s.fieldTransforms,a,i),u=i.data;return u.setAll(C_(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return xu(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function $D(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=g_(r.transform,s||null);i!=null&&(n===null&&(n=wt.empty()),n.set(r.field,i))}return n||null}function bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ji(n,r,(s,i)=>OD(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ml extends Nh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gr extends Nh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $v(t,e,n){const r=new Map;ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,DD(o,a,n[s]))}return r}function jv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ND(i,o,e))}return r}class S_ extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jD extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&bD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=f_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=E_(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>bv(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>bv(n,r))}}class u1{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ue(e.mutations.length===r.length);let s=ID;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new u1(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,Y;function BD(t){switch(t){default:return V();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function T_(t){if(t===void 0)return Jn("GRPC error has no .code"),R.UNKNOWN;switch(t){case Pe.OK:return R.OK;case Pe.CANCELLED:return R.CANCELLED;case Pe.UNKNOWN:return R.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return R.INTERNAL;case Pe.UNAVAILABLE:return R.UNAVAILABLE;case Pe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Pe.NOT_FOUND:return R.NOT_FOUND;case Pe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Pe.ABORTED:return R.ABORTED;case Pe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Pe.DATA_LOSS:return R.DATA_LOSS;default:return V()}}(Y=Pe||(Pe={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Xl}static getOrCreateInstance(){return Xl===null&&(Xl=new c1),Xl}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Xl=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new Ti([4294967295,4294967295],0);function Fv(t){const e=zD().encode(t),n=new HN;return n.update(e),new Uint8Array(n.digest())}function Uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([s,i],0)]}class h1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lo(`Invalid padding: ${n}`);if(r<0)throw new Lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lo(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Ti.fromNumber(this.It)}Et(e,n,r){let s=e.add(n.multiply(Ti.fromNumber(r)));return s.compare(HD)===1&&(s=new Ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Fv(e),[r,s]=Uv(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);if(!this.At(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new h1(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Fv(e),[r,s]=Uv(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dh(W.min(),s,new we(ee),er(),G())}}class gl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gl(r,n,G(),G(),G())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r,s){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=s}}class __{constructor(e,n){this.targetId=e,this.Vt=n}}class x_{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vv{constructor(){this.St=0,this.Dt=zv(),this.Ct=ut.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=G(),n=G(),r=G();return this.Dt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:V()}}),new gl(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=zv()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class WD{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=er(),this.zt=Bv(),this.Wt=new we(ee)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,s)=>{this.te(s)&&n(s)})}ne(e){var n;const r=e.targetId,s=e.Vt.count,i=this.se(r);if(i){const o=i.target;if(Fp(o))if(s===0){const a=new j(o.path);this.Yt(r,a,nt.newNoDocument(a,W.min()))}else ue(s===1);else{const a=this.ie(r);if(a!==s){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=c1.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,h){var d,f,g,w,S,v;const m={localCacheCount:c,existenceFilterCount:h.count},y=h.unchangedNames;return y&&(m.bloomFilter={applied:u===0,hashCount:(d=y==null?void 0:y.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(w=(g=(f=y==null?void 0:y.bits)===null||f===void 0?void 0:f.bitmap)===null||g===void 0?void 0:g.length)!==null&&w!==void 0?w:0,padding:(v=(S=y==null?void 0:y.bits)===null||S===void 0?void 0:S.padding)!==null&&v!==void 0?v:0}),m}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Ps(i).toUint8Array()}catch(c){if(c instanceof t_)return $i("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new h1(l,o,a)}catch(c){return $i(c instanceof Lo?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:s!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.vt(a)||(this.Yt(e,i,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((i,o)=>{const a=this.se(o);if(a){if(i.current&&Fp(a.target)){const l=new j(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,nt.newNoDocument(l,e))}i.Mt&&(n.set(o,i.Ot()),i.Ft())}});let r=G();this.zt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.jt.forEach((i,o)=>o.setReadTime(e));const s=new Dh(e,n,this.Wt,this.jt,r);return this.jt=er(),this.zt=Bv(),this.Wt=new we(ee),s}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Vv,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new ot(ee),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Vv),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Bv(){return new we(j.comparator)}function zv(){return new we(j.comparator)}const KD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),qD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),GD=(()=>({and:"AND",or:"OR"}))();class QD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bp(t,e){return t.useProto3Json||xh(e)?e:{value:e}}function Tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YD(t,e){return Tc(t,e.toTimestamp())}function Tn(t){return ue(!!t),W.fromTimestamp(function(e){const n=Fr(e);return new je(n.seconds,n.nanos)}(t))}function d1(t,e){return function(n){return new Ce(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function k_(t){const e=Ce.fromString(t);return ue(N_(e)),e}function zp(t,e){return d1(t.databaseId,e.path)}function Gd(t,e){const n=k_(e);if(n.get(1)!==t.databaseId.projectId)throw new b(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(R_(n))}function Hp(t,e){return d1(t.databaseId,e)}function XD(t){const e=k_(t);return e.length===4?Ce.emptyPath():R_(e)}function Wp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R_(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hv(t,e,n){return{name:zp(t,e),fields:n.value.mapValue.fields}}function JD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(ue(u===void 0||typeof u=="string"),ut.fromBase64String(u||"")):(ue(u===void 0||u instanceof Uint8Array),ut.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?R.UNKNOWN:T_(l.code);return new b(u,l.message||"")}(o);n=new x_(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gd(t,r.document.name),i=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):W.min(),a=new wt({mapValue:{fields:r.document.fields}}),l=nt.newFoundDocument(s,i,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Iu(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gd(t,r.document),i=r.readTime?Tn(r.readTime):W.min(),o=nt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gd(t,r.document),i=r.removedTargetIds||[];n=new Iu([],i,s,null)}else{if(!("filter"in e))return V();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new VD(s,i),a=r.targetId;n=new __(a,o)}}return n}function ZD(t,e){let n;if(e instanceof ml)n={update:Hv(t,e.key,e.value)};else if(e instanceof S_)n={delete:zp(t,e.key)};else if(e instanceof Gr)n={update:Hv(t,e.key,e.data),updateMask:lL(e.fieldMask)};else{if(!(e instanceof jD))return V();n={verify:zp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Cc)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Vi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof $a)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Sc)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw V()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:YD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:V()}(t,e.precondition)),n}function eL(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Tn(r.updateTime):Tn(s);return i.isEqual(W.min())&&(i=Tn(s)),new MD(i,r.transformResults||[])}(n,e))):[]}function tL(t,e){return{documents:[Hp(t,e.path)]}}function nL(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Hp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return P_(kn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:qs(c.field),direction:iL(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Bp(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function rL(t){let e=XD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ue(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(c){const h=A_(c);return h instanceof kn&&i_(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Go(Gs(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,xh(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new Ec(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new Ec(d,h)}(n.endAt)),wD(e,s,o,i,a,"F",l,u)}function sL(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A_(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Gs(e.unaryFilter.field);return Me.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Gs(e.unaryFilter.field);return Me.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gs(e.unaryFilter.field);return Me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gs(e.unaryFilter.field);return Me.create(i,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(e){return Me.create(Gs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return kn.create(e.compositeFilter.filters.map(n=>A_(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return V()}}(e.compositeFilter.op))}(t):V()}function iL(t){return KD[t]}function oL(t){return qD[t]}function aL(t){return GD[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Gs(t){return rt.fromServerFormat(t.fieldPath)}function P_(t){return t instanceof Me?function(e){if(e.op==="=="){if(Pv(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NAN"}};if(Av(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Pv(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NOT_NAN"}};if(Av(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(e.field),op:oL(e.op),value:e.value}}}(t):t instanceof kn?function(e){const n=e.getFilters().map(r=>P_(r));return n.length===1?n[0]:{compositeFilter:{op:aL(e.op),filters:n}}}(t):V()}function lL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function N_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=W.min(),o=W.min(),a=ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.fe=e}}function cL(t){const e=rL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Up(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.rn=new dL}addToCollectionParentIndex(e,n){return this.rn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(jr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class dL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ot(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ot(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Bi(0)}static Mn(){return new Bi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.changes=new io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Yo(r.mutation,s,At.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){const s=fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Do();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=er();const o=Qo(),a=Qo();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Gr)?i=i.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Yo(c.mutation,u,c.mutation.getFieldMask(),je.now())):o.set(u.key,At.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new pL(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Qo();let s=new we((o,a)=>o-a),i=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||At.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||G()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=f_();c.forEach(d=>{if(!i.has(d)){const f=E_(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):P.resolve(fs());let a=-1,l=i;return o.next(u=>P.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?P.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,G())).next(c=>({batchId:a,changes:d_(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let s=Do();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Do();return this.indexManager.getCollectionParents(e,s).next(o=>P.forEach(o,a=>{const l=function(u,c){return new Ih(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,nt.newInvalidDocument(u)))});let o=Do();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&Yo(u.mutation,l,At.empty(),je.now()),Ah(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return P.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Tn(r.createTime)}),P.resolve()}getNamedQuery(e,n){return P.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:cL(r.bundledQuery),readTime:Tn(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.overlays=new we(j.comparator),this.ls=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fs();return P.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.we(e,n,i)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ls.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const s=fs(),i=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return P.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new we((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=fs(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=fs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return P.resolve(a)}we(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UD(n,r));let i=this.ls.get(n);i===void 0&&(i=G(),this.ls.set(n,i)),this.ls.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.fs=new ot(Ue.ds),this.ws=new ot(Ue._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new Ue(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new j(new Ce([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.ws.forEachInRange([r,s],o=>{this.ys(o),i.push(o.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new j(new Ce([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=G();return this.ws.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return j.comparator(e.key,n.key)||ee(e.As,n.As)}static _s(e,n){return ee(e.As,n.As)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new ot(Ue.ds)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new Ue(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.bs(r),i=s<0?0:s;return P.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.Ps(o.As);i.push(a)}),P.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ee);return n.forEach(s=>{const i=new Ue(s,0),o=new Ue(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.As)})}),P.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;j.isDocumentKey(i)||(i=i.child(""));const o=new Ue(new j(i),0);let a=new ot(ee);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.As)),!0)},o),P.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ue(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return P.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new Ue(n,0),s=this.Rs.firstAfterOrEqual(r);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.Ds=e,this.docs=new we(j.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nt.newInvalidDocument(s))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=er();const o=n.path,a=new j(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||nD(tD(c),r)<=0||(s.has(c.key)||Ah(n,c))&&(i=i.insert(c.key,c.mutableCopy()))}return P.resolve(i)}getAllFromCollectionGroup(e,n,r,s){V()}Cs(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EL(this)}getSize(e){return P.resolve(this.size)}}class EL extends fL{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.persistence=e,this.xs=new io(n=>a1(n),l1),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Ns=0,this.ks=new f1,this.targetCount=0,this.Ms=Bi.kn()}forEachTarget(e,n){return this.xs.forEach((r,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),P.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Bi(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Fn(n),P.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),P.waitFor(i).next(()=>s)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),P.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.$s={},this.overlays={},this.Os=new r1(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new CL(this),this.indexManager=new hL,this.remoteDocumentCache=function(r){return new wL(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new uL(n),this.qs=new gL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new vL(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);const s=new TL(this.Os.next());return this.referenceDelegate.Us(),r(s).next(i=>this.referenceDelegate.Ks(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gs(e,n){return P.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class TL extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class p1{constructor(e){this.persistence=e,this.Qs=new f1,this.js=null}static zs(e){return new p1(e)}get Ws(){if(this.js)return this.js;throw V()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),P.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ws.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Ws,r=>{const s=j.fromPath(r);return this.Hs(e,s).next(i=>{i||n.removeEntry(s,W.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return P.or([()=>P.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=s}static Li(e,n){let r=G(),s=G();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new m1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ki(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.Qi(e,n))}Ki(e,n){if(Ov(n))return P.resolve(null);let r=Zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Up(n,null,"F"),r=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=G(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,Up(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,s){return Ov(n)||s.isEqual(W.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.zi(n,o,r,s)?this.Qi(e,n):(xv()<=Z.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vp(n)),this.Wi(e,o,n,eD(s,-1)))})}ji(e,n){let r=new ot(c_(e));return n.forEach((s,i)=>{Ah(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Qi(e,n){return xv()<=Z.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Vp(n)),this.Ui.getDocumentsMatchingQuery(e,n,jr.min())}Wi(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new we(ee),this.Yi=new io(i=>a1(i),l1),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mL(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function IL(t,e,n,r){return new xL(t,e,n,r)}async function D_(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=G();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function kL(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=P.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(g=>{const w=l.docVersions.get(f);ue(w!==null),g.version.compareTo(w)<0&&(c.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=G();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function L_(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function RL(t,e){const n=K(t),r=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(ut.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(g,w,S){return g.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(d,f,c)&&a.push(n.Bs.updateTargetData(i,f))});let l=er(),u=G();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(AL(i,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(W.min())){const c=n.Bs.getLastRemoteSnapshotVersion(i).next(h=>n.Bs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return P.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ji=s,i))}function AL(t,e,n){let r=G(),s=G();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=er();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(W.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:s}})}function PL(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NL(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Bs.getTargetData(r,e).next(i=>i?(s=i,P.resolve(s)):n.Bs.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Kp(t,e,n){const r=K(t),s=r.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pl(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function Wv(t,e,n){const r=K(t);let s=W.min(),i=G();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=K(a),h=c.Yi.get(u);return h!==void 0?P.resolve(c.Ji.get(h)):c.Bs.getTargetData(l,u)}(r,o,Zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?s:W.min(),n?i:G())).next(a=>(DL(r,TD(e),a),{documents:a,ir:i})))}function DL(t,e,n){let r=t.Xi.get(e)||W.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Xi.set(e,r)}class Kv{constructor(){this.activeTargetIds=AD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LL{constructor(){this.Hr=new Kv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Kv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function Qd(){return Jl===null?Jl=268435456+Math.round(2147483648*Math.random()):Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class $L extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,s,i){const o=Qd(),a=this.To(e,n);O("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,s,i),this.Ao(e,a,l,r).then(u=>(O("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw $i("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,s,i,o){return this.Io(e,n,r,s,i)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+so,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}To(e,n){const r=ML[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,s){const i=Qd();return new Promise((o,a)=>{const l=new zN;l.setWithCredentials(!0),l.listenOnce(UN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qd.NO_ERROR:const c=l.getResponseJson();O(Ze,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case qd.TIMEOUT:O(Ze,`RPC '${e}' ${i} timed out`),a(new b(R.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const h=l.getStatus();if(O(Ze,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(S)>=0?S:R.UNKNOWN}(f.status);a(new b(g,f.message))}else a(new b(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new b(R.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{O(Ze,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);O(Ze,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const s=Qd(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jN(),a=FN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new BN({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=i.join("");O(Ze,`Creating RPC '${e}' stream ${s}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,f=!1;const g=new bL({ro:S=>{f?O(Ze,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(d||(O(Ze,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),O(Ze,`RPC '${e}' stream ${s} sending:`,S),h.send(S))},oo:()=>h.close()}),w=(S,v,m)=>{S.listen(v,y=>{try{m(y)}catch(C){setTimeout(()=>{throw C},0)}})};return w(h,Gl.EventType.OPEN,()=>{f||O(Ze,`RPC '${e}' stream ${s} transport opened.`)}),w(h,Gl.EventType.CLOSE,()=>{f||(f=!0,O(Ze,`RPC '${e}' stream ${s} transport closed`),g.wo())}),w(h,Gl.EventType.ERROR,S=>{f||(f=!0,$i(Ze,`RPC '${e}' stream ${s} transport errored:`,S),g.wo(new b(R.UNAVAILABLE,"The operation could not be completed")))}),w(h,Gl.EventType.MESSAGE,S=>{var v;if(!f){const m=S.data[0];ue(!!m);const y=m,C=y.error||((v=y[0])===null||v===void 0?void 0:v.error);if(C){O(Ze,`RPC '${e}' stream ${s} received error:`,C);const T=C.status;let k=function(x){const M=Pe[x];if(M!==void 0)return T_(M)}(T),I=C.message;k===void 0&&(k=R.INTERNAL,I="Unknown error status: "+T+" with message "+C.message),f=!0,g.wo(new b(k,I)),h.close()}else O(Ze,`RPC '${e}' stream ${s} received:`,m),g._o(m)}}),w(a,VN.STAT_EVENT,S=>{S.stat===Tv.PROXY?O(Ze,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Tv.NOPROXY&&O(Ze,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new QD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=s,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&O("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,r,s,i,o,a,l){this.ii=e,this.$o=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new O_(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===n&&this.Zo(r,s)},r=>{e(()=>{const s=new b(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jL extends M_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=JD(this.serializer,e),r=function(s){if(!("targetChange"in s))return W.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?W.min():i.readTime?Tn(i.readTime):W.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Wp(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=Fp(a)?{documents:tL(s,a)}:{query:nL(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=I_(s,i.resumeToken);const l=Bp(s,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(W.min())>0){o.readTime=Tc(s,i.snapshotVersion.toTimestamp());const l=Bp(s,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=sL(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Wp(this.serializer),n.removeTarget=e,this.Wo(n)}}class FL extends M_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=eL(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.cu(r,n)}return ue(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Wp(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZD(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new b(R.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Io(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(R.UNKNOWN,s.toString())})}vo(e,n,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.vo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new b(R.UNKNOWN,i.toString())})}terminate(){this.lu=!0}}class VL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Jn(n),this.mu=!1):O("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{Vs(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=K(a);l.vu.add(4),await yl(l),l.bu.set("Unknown"),l.vu.delete(4),await Oh(l)}(this))})}),this.bu=new VL(r,s)}}async function Oh(t){if(Vs(t))for(const e of t.Ru)await e(!0)}async function yl(t){for(const e of t.Ru)await e(!1)}function b_(t,e){const n=K(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),v1(n)?y1(n):oo(n).Ko()&&g1(n,e))}function $_(t,e){const n=K(t),r=oo(n);n.Au.delete(e),r.Ko()&&j_(n,e),n.Au.size===0&&(r.Ko()?r.jo():Vs(n)&&n.bu.set("Unknown"))}function g1(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oo(t).su(e)}function j_(t,e){t.Vu.qt(e),oo(t).iu(e)}function y1(t){t.Vu=new WD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),oo(t).start(),t.bu.gu()}function v1(t){return Vs(t)&&!oo(t).Uo()&&t.Au.size>0}function Vs(t){return K(t).vu.size===0}function F_(t){t.Vu=void 0}async function zL(t){t.Au.forEach((e,n)=>{g1(t,e)})}async function HL(t,e){F_(t),v1(t)?(t.bu.Iu(e),y1(t)):t.bu.set("Unknown")}async function WL(t,e,n){if(t.bu.set("Online"),e instanceof x_&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _c(t,r)}else if(e instanceof Iu?t.Vu.Ht(e):e instanceof __?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(W.min()))try{const r=await L_(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Vu.ce(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.Au.get(l);u&&s.Au.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=s.Au.get(a);if(!u)return;s.Au.set(a,u.withResumeToken(ut.EMPTY_BYTE_STRING,u.snapshotVersion)),j_(s,a);const c=new wr(u.target,a,l,u.sequenceNumber);g1(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){O("RemoteStore","Failed to raise snapshot:",r),await _c(t,r)}}async function _c(t,e,n){if(!pl(e))throw e;t.vu.add(1),await yl(t),t.bu.set("Offline"),n||(n=()=>L_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Oh(t)})}function U_(t,e){return e().catch(n=>_c(t,n,e))}async function Mh(t){const e=K(t),n=Ur(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;KL(e);)try{const s=await PL(e.localStore,r);if(s===null){e.Eu.length===0&&n.jo();break}r=s.batchId,qL(e,s)}catch(s){await _c(e,s)}V_(e)&&B_(e)}function KL(t){return Vs(t)&&t.Eu.length<10}function qL(t,e){t.Eu.push(e);const n=Ur(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function V_(t){return Vs(t)&&!Ur(t).Uo()&&t.Eu.length>0}function B_(t){Ur(t).start()}async function GL(t){Ur(t).hu()}async function QL(t){const e=Ur(t);for(const n of t.Eu)e.uu(n.mutations)}async function YL(t,e,n){const r=t.Eu.shift(),s=u1.from(r,e,n);await U_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mh(t)}async function XL(t,e){e&&Ur(t).ou&&await async function(n,r){if(s=r.code,BD(s)&&s!==R.ABORTED){const i=n.Eu.shift();Ur(n).Qo(),await U_(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Mh(n)}var s}(t,e),V_(t)&&B_(t)}async function Gv(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const r=Vs(n);n.vu.add(3),await yl(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Oh(n)}async function JL(t,e){const n=K(t);e?(n.vu.delete(2),await Oh(n)):e||(n.vu.add(2),await yl(n),n.bu.set("Unknown"))}function oo(t){return t.Su||(t.Su=function(e,n,r){const s=K(e);return s.fu(),new jL(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:zL.bind(null,t),ao:HL.bind(null,t),nu:WL.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),v1(t)?y1(t):t.bu.set("Unknown")):(await t.Su.stop(),F_(t))})),t.Su}function Ur(t){return t.Du||(t.Du=function(e,n,r){const s=K(e);return s.fu(),new FL(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:GL.bind(null,t),ao:XL.bind(null,t),au:QL.bind(null,t),cu:YL.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Mh(t)):(await t.Du.stop(),t.Eu.length>0&&(O("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new w1(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new b(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E1(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),pl(t))return new b(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=Do(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new xi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.Cu=new we(j.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):V():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class zi{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zi(e,n,xi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(){this.Nu=void 0,this.listeners=[]}}class e8{constructor(){this.queries=new io(e=>u_(e),Rh),this.onlineState="Unknown",this.ku=new Set}}async function z_(t,e){const n=K(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new ZL),s)try{i.Nu=await n.onListen(r)}catch(o){const a=E1(o,`Initialization of query '${Vp(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&C1(n)}async function H_(t,e){const n=K(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function t8(t,e){const n=K(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.$u(s)&&(r=!0);o.Nu=s}}r&&C1(n)}function n8(t,e,n){const r=K(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function C1(t){t.ku.forEach(e=>{e.next()})}class W_{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.key=e}}class q_{constructor(e){this.key=e}}class r8{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=G(),this.mutatedKeys=G(),this.tc=c_(e),this.ec=new xi(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Qv,s=n?n.ec:this.ec;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=Ah(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let S=!1;d&&f?d.data.isEqual(f.data)?g!==w&&(r.track({type:3,doc:f}),S=!0):this.rc(d,f)||(r.track({type:2,doc:f}),S=!0,(l&&this.tc(f,l)>0||u&&this.tc(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),S=!0):d&&!f&&(r.track({type:1,doc:d}),S=!0,(l||u)&&(a=!0)),S&&(f?(o=o.add(f),i=w?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:i}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((u,c)=>function(h,d){const f=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return f(h)-f(d)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,i.length!==0||l?{snapshot:new zi(this.query,e.ec,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Qv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=G(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new q_(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new K_(r))}),n}hc(e){this.Yu=e.ir,this.Zu=G();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return zi.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class s8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class i8{constructor(e){this.key=e,this.fc=!1}}class o8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new io(a=>u_(a),Rh),this._c=new Map,this.mc=new Set,this.gc=new we(j.comparator),this.yc=new Map,this.Ic=new f1,this.Tc={},this.Ec=new Map,this.Ac=Bi.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function a8(t,e){const n=y8(t);let r,s;const i=n.wc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const o=await NL(n.localStore,Zn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await l8(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&b_(n.remoteStore,o)}return s}async function l8(t,e,n,r,s){t.Rc=(h,d,f)=>async function(g,w,S,v){let m=w.view.sc(S);m.zi&&(m=await Wv(g.localStore,w.query,!1).then(({documents:T})=>w.view.sc(T,m)));const y=v&&v.targetChanges.get(w.targetId),C=w.view.applyChanges(m,g.isPrimaryClient,y);return Xv(g,w.targetId,C.cc),C.snapshot}(t,h,d,f);const i=await Wv(t.localStore,e,!0),o=new r8(e,i.ir),a=o.sc(i.documents),l=gl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Xv(t,n,u.cc);const c=new s8(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function u8(t,e){const n=K(t),r=n.wc.get(e),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(i=>!Rh(i,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Kp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),$_(n.remoteStore,r.targetId),qp(n,r.targetId)}).catch(fl)):(qp(n,r.targetId),await Kp(n.localStore,r.targetId,!0))}async function c8(t,e,n){const r=v8(t);try{const s=await function(i,o){const a=K(i),l=je.now(),u=o.reduce((d,f)=>d.add(f.key),G());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=er(),g=G();return a.Zi.getEntries(d,u).next(w=>{f=w,f.forEach((S,v)=>{v.isValidDocument()||(g=g.add(S))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(w=>{c=w;const S=[];for(const v of o){const m=$D(v,c.get(v.key).overlayedDocument);m!=null&&S.push(new Gr(v.key,m,n_(m.value.mapValue),Sn.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,S,o)}).next(w=>{h=w;const S=w.applyToLocalDocumentSet(c,g);return a.documentOverlayCache.saveOverlays(d,w.batchId,S)})}).then(()=>({batchId:h.batchId,changes:d_(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.Tc[i.currentUser.toKey()];l||(l=new we(ee)),l=l.insert(o,a),i.Tc[i.currentUser.toKey()]=l}(r,s.batchId,n),await vl(r,s.changes),await Mh(r.remoteStore)}catch(s){const i=E1(s,"Failed to persist write");n.reject(i)}}async function G_(t,e){const n=K(t);try{const r=await RL(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.yc.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?ue(o.fc):s.removedDocuments.size>0&&(ue(o.fc),o.fc=!1))}),await vl(n,r,e)}catch(r){await fl(r)}}function Yv(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wc.forEach((i,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=K(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Mu(o)&&(l=!0)}),l&&C1(a)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h8(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.yc.get(e),i=s&&s.key;if(i){let o=new we(j.comparator);o=o.insert(i,nt.newNoDocument(i,W.min()));const a=G().add(i),l=new Dh(W.min(),new Map,new we(ee),o,a);await G_(r,l),r.gc=r.gc.remove(i),r.yc.delete(e),S1(r)}else await Kp(r.localStore,e,!1).then(()=>qp(r,e,n)).catch(fl)}async function d8(t,e){const n=K(t),r=e.batch.batchId;try{const s=await kL(n.localStore,e);Y_(n,r,null),Q_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vl(n,s)}catch(s){await fl(s)}}async function f8(t,e,n){const r=K(t);try{const s=await function(i,o){const a=K(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ue(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);Y_(r,e,n),Q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vl(r,s)}catch(s){await fl(s)}}function Q_(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function Y_(t,e,n){const r=K(t);let s=r.Tc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||X_(t,r)})}function X_(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&($_(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),S1(t))}function Xv(t,e,n){for(const r of n)r instanceof K_?(t.Ic.addReference(r.key,e),p8(t,r)):r instanceof q_?(O("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||X_(t,r.key)):V()}function p8(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(O("SyncEngine","New document in limbo: "+n),t.mc.add(r),S1(t))}function S1(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new j(Ce.fromString(e)),r=t.Ac.next();t.yc.set(r,new i8(n)),t.gc=t.gc.insert(n,r),b_(t.remoteStore,new wr(Zn(kh(n.path)),r,"TargetPurposeLimboResolution",r1.ct))}}async function vl(t,e,n){const r=K(t),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const c=m1.Li(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.dc.nu(s),await async function(a,l){const u=K(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>P.forEach(l,h=>P.forEach(h.Fi,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>P.forEach(h.Bi,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!pl(c))throw c;O("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ji.get(h),f=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(h,g)}}}(r.localStore,i))}async function m8(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const r=await D_(n.localStore,e);n.currentUser=e,function(s,i){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new b(R.CANCELLED,i))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vl(n,r.er)}}function g8(t,e){const n=K(t),r=n.yc.get(e);if(r&&r.fc)return G().add(r.key);{let s=G();const i=n._c.get(e);if(!i)return s;for(const o of i){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function y8(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h8.bind(null,e),e.dc.nu=t8.bind(null,e.eventManager),e.dc.Pc=n8.bind(null,e.eventManager),e}function v8(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f8.bind(null,e),e}class Jv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return IL(this.persistence,new _L,e.initialUser,this.serializer)}createPersistence(e){return new SL(p1.zs,this.serializer)}createSharedClientState(e){return new LL}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class w8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m8.bind(null,this.syncEngine),await JL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new e8}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new $L(s));var s;return function(i,o,a,l){return new UL(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>Yv(this.syncEngine,a,0),o=qv.D()?new qv:new OL,new BL(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new o8(r,s,i,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=K(e);O("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await yl(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=et.UNAUTHENTICATED,this.clientId=ZT.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{O("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(O("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=E1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xd(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await D_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S8(t);O("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Gv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Gv(e.remoteStore,i)),t._onlineComponents=e}function C8(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function S8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!C8(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await Xd(t,new Jv)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await Xd(t,new Jv);return t._offlineComponents}async function Z_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await Zv(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await Zv(t,new w8))),t._onlineComponents}function T8(t){return Z_(t).then(e=>e.syncEngine)}async function Gp(t){const e=await Z_(t),n=e.eventManager;return n.onListen=a8.bind(null,e.syncEngine),n.onUnlisten=u8.bind(null,e.syncEngine),n}function _8(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new J_({next:h=>{i.enqueueAndForget(()=>H_(s,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new b(R.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new b(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new W_(kh(o.path),u,{includeMetadataChanges:!0,Ku:!0});return z_(s,c)}(await Gp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t,e,n){if(!n)throw new b(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function I8(t,e,n,r){if(e===!0&&r===!0)throw new b(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tw(t){if(!j.isDocumentKey(t))throw new b(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=T1(t);throw new b(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new b(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ex((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new b(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class _1{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new b(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new WN;switch(n.type){case"firstParty":return new QN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new b(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=ew.get(e);n&&(O("ComponentProvider","Removing Datastore"),ew.delete(e),n.terminate())}(this),Promise.resolve()}}function k8(t,e,n,r={}){var s;const i=(t=_n(t,_1))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=et.MOCK_USER;else{a=cS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new b(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new et(u)}t._authCredentials=new KN(new JT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}}class bh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bh(this.firestore,e,this._query)}}class ja extends bh{constructor(e,n,r){super(e,n,kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new j(e))}withConverter(e){return new ja(this.firestore,e,this._path)}}function Qr(t,e,...n){if(t=Se(t),arguments.length===1&&(e=ZT.A()),x8("doc","path",e),t instanceof _1){const r=Ce.fromString(e,...n);return tw(r),new _t(t,null,new j(r))}{if(!(t instanceof _t||t instanceof ja))throw new b(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return tw(r),new _t(t.firestore,t instanceof ja?t.converter:null,new j(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new O_(this,"async_queue_retry"),this.Xc=()=>{const n=Yd();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Yd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Dr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!pl(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Jn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=w1.createAndSchedule(this,e,n,r,i=>this.na(i));return this.zc.push(s),s}Zc(){this.Wc&&V()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function rw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}let Hi=class extends _1{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new R8,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tx(this),this._firestoreClient.terminate()}};function A8(t,e){const n=typeof t=="object"?t:Sg(),r=typeof t=="string"?t:e||"(default)",s=oh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=aS("firestore");i&&k8(s,...i)}return s}function x1(t){return t._firestoreClient||tx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tx(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,l,u){return new aD(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ex(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new E8(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wi(ut.fromBase64String(e))}catch(n){throw new b(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wi(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new b(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=/^__.*__$/;class N8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ml(e,this.data,n,this.fieldTransforms)}}class nx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}class Fh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Fh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return xc(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(rx(this.ca)&&P8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class D8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}ya(e,n,r,s=!1){return new Fh({ca:e,methodName:n,ga:r,path:rt.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sx(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new D8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L8(t,e,n,r,s,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,s);k1("Data must be an object, but it was:",o,r);const a=ix(r,o);let l,u;if(i.merge)l=new At(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=Qp(e,h,n);if(!o.contains(d))throw new b(R.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);ax(c,d)||c.push(d)}l=new At(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new N8(new wt(a),l,u)}class Uh extends jh{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}function O8(t,e,n){return new Fh({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class M8 extends jh{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=O8(this,e,!0),r=this.pa.map(i=>wl(i,n)),s=new Vi(r);return new LD(e.path,s)}isEqual(e){return this===e}}function b8(t,e,n,r){const s=t.ya(1,e,n);k1("Data must be an object, but it was:",s,r);const i=[],o=wt.empty();Us(r,(l,u)=>{const c=R1(e,l,n);u=Se(u);const h=s.da(c);if(u instanceof Uh)i.push(c);else{const d=wl(u,h);d!=null&&(i.push(c),o.set(c,d))}});const a=new At(i);return new nx(o,a,s.fieldTransforms)}function $8(t,e,n,r,s,i){const o=t.ya(1,e,n),a=[Qp(e,r,n)],l=[s];if(i.length%2!=0)throw new b(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(Qp(e,i[d])),l.push(i[d+1]);const u=[],c=wt.empty();for(let d=a.length-1;d>=0;--d)if(!ax(u,a[d])){const f=a[d];let g=l[d];g=Se(g);const w=o.da(f);if(g instanceof Uh)u.push(f);else{const S=wl(g,w);S!=null&&(u.push(f),c.set(f,S))}}const h=new At(u);return new nx(c,h,o.fieldTransforms)}function wl(t,e){if(ox(t=Se(t)))return k1("Unsupported field value:",e,t),ix(t,e);if(t instanceof jh)return function(n,r){if(!rx(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=wl(o,r.wa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Se(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return PD(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=je.fromDate(n);return{timestampValue:Tc(r.serializer,s)}}if(n instanceof je){const s=new je(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Tc(r.serializer,s)}}if(n instanceof I1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Wi)return{bytesValue:I_(r.serializer,n._byteString)};if(n instanceof _t){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:d1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${T1(n)}`)}(t,e)}function ix(t,e){const n={};return e_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(t,(r,s)=>{const i=wl(s,e.ha(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ox(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof I1||t instanceof Wi||t instanceof _t||t instanceof jh)}function k1(t,e,n){if(!ox(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=T1(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function Qp(t,e,n){if((e=Se(e))instanceof $h)return e._internalPath;if(typeof e=="string")return R1(t,e);throw xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const j8=new RegExp("[~\\*/\\[\\]]");function R1(t,e,n){if(e.search(j8)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $h(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new b(R.INVALID_ARGUMENT,a+t+l)}function ax(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ux("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F8 extends lx{data(){return super.data()}}function ux(t,e){return typeof e=="string"?R1(t,e):e instanceof $h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new b(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V8{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Us(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new I1(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=i1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);ue(N_(r));const s=new Ma(r.get(1),r.get(3)),i=new j(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cx extends lx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ux("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ku extends cx{data(e={}){return super.data(e)}}class z8{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ku(this._firestore,this._userDataWriter,r.key,r,new Oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new ku(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Oo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new ku(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Oo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:H8(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function H8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){t=_n(t,_t);const e=_n(t.firestore,Hi);return _8(x1(e),t._key).then(n=>px(e,t,n))}class hx extends V8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function El(t,e,n){t=_n(t,_t);const r=_n(t.firestore,Hi),s=B8(t.converter,e,n);return fx(r,[L8(sx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Sn.none())])}function W8(t,e,n,...r){t=_n(t,_t);const s=_n(t.firestore,Hi),i=sx(s);let o;return o=typeof(e=Se(e))=="string"||e instanceof $h?$8(i,"updateDoc",t._key,e,n,r):b8(i,"updateDoc",t._key,e),fx(s,[o.toMutation(t._key,Sn.exists(!0))])}function dx(t,...e){var n,r,s;t=Se(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||rw(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(rw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,c;if(t instanceof _t)u=_n(t.firestore,Hi),c=kh(t._key.path),l={next:h=>{e[o]&&e[o](px(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=_n(t,bh);u=_n(h.firestore,Hi),c=h._query;const d=new hx(u);l={next:f=>{e[o]&&e[o](new z8(u,d,h,f))},error:e[o+1],complete:e[o+2]},U8(t._query)}return function(h,d,f,g){const w=new J_(g),S=new W_(d,w,f);return h.asyncQueue.enqueueAndForget(async()=>z_(await Gp(h),S)),()=>{w.Dc(),h.asyncQueue.enqueueAndForget(async()=>H_(await Gp(h),S))}}(x1(u),c,a,l)}function fx(t,e){return function(n,r){const s=new Dr;return n.asyncQueue.enqueueAndForget(async()=>c8(await T8(n),r,s)),s.promise}(x1(t),e)}function px(t,e,n){const r=n.docs.get(e._key),s=new hx(t);return new cx(t,s,e._key,r,new Oo(n.hasPendingWrites,n.fromCache),e.converter)}function K8(...t){return new M8("arrayUnion",t)}(function(t,e=!0){(function(n){so=n})(bs),Is(new $r("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Hi(new qN(n.getProvider("auth-internal")),new XN(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new b(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),wn(_v,"3.13.0",t),wn(_v,"3.13.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="firebasestorage.googleapis.com",gx="storageBucket",q8=2*60*1e3,G8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe extends Nn{constructor(e,n,r=0){super(Jd(e),`Firebase Storage: ${n} (${Jd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _e;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_e||(_e={}));function Jd(t){return"storage/"+t}function A1(){const t="An unknown error occurred, please check the error payload for server response.";return new xe(_e.UNKNOWN,t)}function Q8(t){return new xe(_e.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Y8(t){return new xe(_e.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function X8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xe(_e.UNAUTHENTICATED,t)}function J8(){return new xe(_e.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Z8(t){return new xe(_e.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function e7(){return new xe(_e.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t7(){return new xe(_e.CANCELED,"User canceled the upload/download.")}function n7(t){return new xe(_e.INVALID_URL,"Invalid URL '"+t+"'.")}function r7(t){return new xe(_e.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function s7(){return new xe(_e.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gx+"' property when initializing the app?")}function i7(){return new xe(_e.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function o7(){return new xe(_e.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function a7(t){return new xe(_e.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yp(t){return new xe(_e.INVALID_ARGUMENT,t)}function yx(){return new xe(_e.APP_DELETED,"The Firebase app was deleted.")}function l7(t){return new xe(_e.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xo(t,e){return new xe(_e.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Co(t){throw new xe(_e.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pt.makeFromUrl(e,n)}catch{return new Pt(e,"")}if(r.path==="")return r;throw r7(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${s}/o${d}`,"i"),g={bucket:1,path:3},w=n===mx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",v=new RegExp(`^https?://${w}/${s}/${S}`,"i"),y=[{regex:a,indices:l,postModify:i},{regex:f,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<y.length;C++){const T=y[C],k=T.regex.exec(e);if(k){const I=k[T.indices.bucket];let x=k[T.indices.path];x||(x=""),r=new Pt(I,x),T.postModify(r);break}}if(r==null)throw n7(e);return r}}class u7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...S){u||(u=!0,e.apply(null,S))}function h(S){s=setTimeout(()=>{s=null,t(f,l())},S)}function d(){i&&clearTimeout(i)}function f(S,...v){if(u){d();return}if(S){d(),c.call(null,S,...v);return}if(l()||o){d(),c.call(null,S,...v);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,h(y)}let g=!1;function w(S){g||(g=!0,d(),!u&&(s!==null?(S||(a=2),clearTimeout(s),h(0)):S||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function h7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t){return t!==void 0}function f7(t){return typeof t=="object"&&!Array.isArray(t)}function P1(t){return typeof t=="string"||t instanceof String}function sw(t){return N1()&&t instanceof Blob}function N1(){return typeof Blob<"u"&&!cR()}function iw(t,e,n,r){if(r<e)throw Yp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Yp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function vx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ws||(ws={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n,r,s,i,o,a,l,u,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Zl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ws.NO_ERROR,l=i.getStatus();if(!a||p7(l,this.additionalRetryCodes_)&&this.retry){const c=i.getErrorCode()===ws.ABORT;r(!1,new Zl(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Zl(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());d7(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=A1();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?yx():t7();o(l)}else{const l=e7();o(l)}};this.canceled_?n(!1,new Zl(!1,null,!0)):this.backoffId_=c7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function g7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function y7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function v7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function w7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function E7(t,e,n,r,s,i,o=!0){const a=vx(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return v7(u,e),g7(u,n),y7(u,i),w7(u,r),new m7(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S7(...t){const e=C7();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(N1())return new Blob(t);throw new xe(_e.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function T7(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){if(typeof atob>"u")throw a7("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zd{constructor(e,n){this.data=e,this.contentType=n||null}}function wx(t,e){switch(t){case en.RAW:return new Zd(Ex(e));case en.BASE64:case en.BASE64URL:return new Zd(Cx(t,e));case en.DATA_URL:return new Zd(I7(e),k7(e))}throw A1()}function Ex(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function x7(t){let e;try{e=decodeURIComponent(t)}catch{throw Xo(en.DATA_URL,"Malformed data URL.")}return Ex(e)}function Cx(t,e){switch(t){case en.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Xo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case en.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Xo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_7(e)}catch(s){throw s.message.includes("polyfill")?s:Xo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Sx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xo(en.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=R7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function I7(t){const e=new Sx(t);return e.base64?Cx(en.BASE64,e.rest):x7(e.rest)}function k7(t){return new Sx(t).contentType}function R7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){let r=0,s="";sw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(sw(this.data_)){const r=this.data_,s=T7(r,e,n);return s===null?null:new mr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mr(r,!0)}}static getBlob(...e){if(N1()){const n=e.map(r=>r instanceof mr?r.data_:r);return new mr(S7.apply(null,n))}else{const n=e.map(o=>P1(o)?wx(en.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new mr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){let e;try{e=JSON.parse(t)}catch{return null}return f7(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function P7(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _x(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t,e){return e}class ct{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||N7}}let eu=null;function D7(t){return!P1(t)||t.length<2?t:_x(t)}function xx(){if(eu)return eu;const t=[];t.push(new ct("bucket")),t.push(new ct("generation")),t.push(new ct("metageneration")),t.push(new ct("name","fullPath",!0));function e(i,o){return D7(o)}const n=new ct("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ct("size");return s.xform=r,t.push(s),t.push(new ct("timeCreated")),t.push(new ct("updated")),t.push(new ct("md5Hash",null,!0)),t.push(new ct("cacheControl",null,!0)),t.push(new ct("contentDisposition",null,!0)),t.push(new ct("contentEncoding",null,!0)),t.push(new ct("contentLanguage",null,!0)),t.push(new ct("contentType",null,!0)),t.push(new ct("metadata","customMetadata",!0)),eu=t,eu}function L7(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Pt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function O7(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return L7(r,t),r}function Ix(t,e,n){const r=Tx(e);return r===null?null:O7(t,r,n)}function M7(t,e,n,r){const s=Tx(e);if(s===null||!P1(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=D1(d,n,r),g=vx({alt:"media",token:u});return f+g})[0]}function b7(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class kx{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){if(!t)throw A1()}function $7(t,e){function n(r,s){const i=Ix(t,s,e);return Rx(i!==null),i}return n}function j7(t,e){function n(r,s){const i=Ix(t,s,e);return Rx(i!==null),M7(i,s,t.host,t._protocol)}return n}function Ax(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=J8():s=X8():n.getStatus()===402?s=Y8(t.bucket):n.getStatus()===403?s=Z8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function F7(t){const e=Ax(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=Q8(t.path)),i.serverResponse=s.serverResponse,i}return n}function U7(t,e,n){const r=e.fullServerUrl(),s=D1(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new kx(s,i,j7(t,n),o);return a.errorHandler=F7(e),a}function V7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function B7(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=V7(null,e)),r}function z7(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let C=0;C<2;C++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=B7(e,r,s),c=b7(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=mr.getBlob(h,r,d);if(f===null)throw i7();const g={name:u.fullPath},w=D1(i,t.host,t._protocol),S="POST",v=t.maxUploadRetryTime,m=new kx(w,S,$7(t,n),v);return m.urlParams=g,m.headers=o,m.body=f.uploadData(),m.errorHandler=Ax(e),m}class H7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ws.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ws.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ws.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Co("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Co("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Co("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Co("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Co("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class W7 extends H7{initXhr(){this.xhr_.responseType="text"}}function Px(){return new W7}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this._service=e,n instanceof Pt?this._location=n:this._location=Pt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ds(e,n)}get root(){const e=new Pt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _x(this._location.path)}get storage(){return this._service}get parent(){const e=A7(this._location.path);if(e===null)return null;const n=new Pt(this._location.bucket,e);return new Ds(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw l7(e)}}function K7(t,e,n){t._throwIfRoot("uploadBytes");const r=z7(t.storage,t._location,xx(),new mr(e,!0),n);return t.storage.makeRequestWithTokens(r,Px).then(s=>({metadata:s,ref:t}))}function q7(t,e,n=en.RAW,r){t._throwIfRoot("uploadString");const s=wx(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),K7(t,s.data,i)}function G7(t){t._throwIfRoot("getDownloadURL");const e=U7(t.storage,t._location,xx());return t.storage.makeRequestWithTokens(e,Px).then(n=>{if(n===null)throw o7();return n})}function Q7(t,e){const n=P7(t._location.path,e),r=new Pt(t._location.bucket,n);return new Ds(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t){return/^[A-Za-z]+:\/\//.test(t)}function X7(t,e){return new Ds(t,e)}function Nx(t,e){if(t instanceof L1){const n=t;if(n._bucket==null)throw s7();const r=new Ds(n,n._bucket);return e!=null?Nx(r,e):r}else return e!==void 0?Q7(t,e):t}function J7(t,e){if(e&&Y7(e)){if(t instanceof L1)return X7(t,e);throw Yp("To use ref(service, url), the first argument must be a Storage instance.")}else return Nx(t,e)}function ow(t,e){const n=e==null?void 0:e[gx];return n==null?null:Pt.makeFromBucketSpec(n,t)}function Z7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:cS(s,t.app.options.projectId))}class L1{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=mx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q8,this._maxUploadRetryTime=G8,this._requests=new Set,s!=null?this._bucket=Pt.makeFromBucketSpec(s,this._host):this._bucket=ow(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pt.makeFromBucketSpec(this._url,e):this._bucket=ow(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ds(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new u7(yx());{const o=E7(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const aw="@firebase/storage",lw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="storage";function eO(t,e,n,r){return t=Se(t),q7(t,e,n,r)}function tO(t){return t=Se(t),G7(t)}function nO(t,e){return t=Se(t),J7(t,e)}function rO(t=Sg(),e){t=Se(t);const r=oh(t,Dx).getImmediate({identifier:e}),s=aS("storage");return s&&sO(r,...s),r}function sO(t,e,n,r={}){Z7(t,e,n,r)}function iO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new L1(n,r,s,e,bs)}function oO(){Is(new $r(Dx,iO,"PUBLIC").setMultipleInstances(!0)),wn(aw,lw,""),wn(aw,lw,"esm2017")}oO();const aO=async(t,e,n)=>await new Promise(s=>{let i=new Image;i.src=t,i.onload=()=>{let o=i.width,a=i.height;o<=e&&a<=n&&s(t);let l=document.createElement("canvas");o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),l.width=o,l.height=a,l.getContext("2d").drawImage(i,0,0,o,a),s(l.toDataURL("image/jpeg"))}}),lO={apiKey:"AIzaSyAzprVs3tA3oUsLUjr0k__RWuf5uGWt8nM",authDomain:"filmsbase-bea7b.firebaseapp.com",projectId:"filmsbase-bea7b",storageBucket:"filmsbase-bea7b.appspot.com",messagingSenderId:"350143607848",appId:"1:350143607848:web:8a1a9944e08d52a0cab11d",measurementId:"G-B08QMRKV1W"},uO=fS(lO),Yr=A8(),cO=rO(uO),Lx=new Mn;Lx.setCustomParameters({prompt:"select_account"});const Qt=$P(),hO=()=>KA(Qt,Lx),dO=async(t,e)=>await EA(Qt,t,e),fO=async(t,e)=>await wA(Qt,t,e),O1=async(t,e)=>{if(!t)return;const n=Qr(Yr,"users",t.uid);if(!(await ao(n)).exists())try{e&&await Ng(t,{displayName:e}),await El(n,{userLists:[{title:"Посмотреть позже...",data:[]}]})}catch(s){console.log("createUserDocumentFromAuth error:"),console.log(s)}return n},pO=async()=>await xA(Qt),mO=async t=>{const e=new Date().getTime()+t.name,n=nO(cO,e),r=new FileReader;r.readAsDataURL(t),r.onload=s=>{aO(s.target.result,500,500).then(o=>{eO(n,o.slice(23),"base64").then(l=>{tO(l.ref).then(u=>{Ng(Qt.currentUser,{photoURL:u})})})})}},gO=async t=>{Ng(Qt.currentUser,{displayName:t})},yO=t=>_A(Qt,t),vO=async t=>{const e={title:t,data:[]},n=Qr(Yr,"users",Qt.currentUser.uid);(await ao(n)).data().userLists.find(s=>s.title===e.title)||await W8(n,{userLists:K8(e)})},wO=async t=>{const e=Qr(Yr,"users",Qt.currentUser.uid),n=(await ao(e)).data().userLists;await El(e,{userLists:n.toSpliced(t,1)})},EO=async(t,e)=>{const n=Qr(Yr,"users",Qt.currentUser.uid),r=(await ao(n)).data().userLists,s={...r[t],title:e};await El(n,{userLists:r.toSpliced(t,1,s)})},CO=async(t,e,n)=>{const r=Qr(Yr,"users",Qt.currentUser.uid),s=(await ao(r)).data().userLists;s[t].data.push({mediaType:n,id:e}),await El(r,{userLists:s})},Ox=async(t,e,n)=>{console.log(t,e,n);const r=Qr(Yr,"users",Qt.currentUser.uid),s=(await ao(r)).data().userLists;s[t].data=s[t].data.filter(i=>!(i.mediaType===n&&i.id===`${e}`)),console.log(s),await El(r,{userLists:s})},SO=(t,e)=>{switch(e.type){case"LOGIN":return{currentUser:e.payload};case"LOGOUT":return{currentUser:null};default:return t}},TO={currentUser:null},Mx=E.createContext(),_O=({children:t})=>{const[e,n]=E.useReducer(SO,TO),{currentUser:r}=e;return E.useEffect(()=>yO(i=>{i&&O1(i),n({type:"LOGIN",payload:i})}),[]),p.jsx(Mx.Provider,{value:{currentUser:r,dispatch:n},children:t})},lo=()=>E.useContext(Mx),xO=()=>{const{baseName:t}=ie();return p.jsx("div",{className:"logo-container",children:p.jsxs(fg,{to:t,children:[p.jsx("img",{src:`${t}assets/images/logo.svg`,alt:"FilmsBase"}),p.jsxs("h3",{children:["FILMS",p.jsx("span",{className:"logo-accent",children:"BASE"})]})]})})},IO=()=>{const{lang:t,mediaType:e,dispatch:n}=ie();return p.jsxs("div",{className:"media-type-links",children:[p.jsx("button",{className:e==="movie"?"active":"",onClick:()=>{n({type:"SET_MEDIA_TYPE",payload:"movie"})},children:t==="en"?"Movies":"Фильмы"}),p.jsx("button",{className:e==="tv"?"active":"",onClick:()=>{n({type:"SET_MEDIA_TYPE",payload:"tv"})},children:t==="en"?"TV Shows":"Сериалы"})]})},kO=()=>p.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2C5.13401 2 2 5.13401 2 9C2 12.866 5.13401 16 9 16C12.866 16 16 12.866 16 9C16 5.13401 12.866 2 9 2ZM0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 13.9706 13.9706 18 9 18C4.02944 18 0 13.9706 0 9Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.9428 13.9428C14.3333 13.5523 14.9665 13.5523 15.357 13.9428L19.707 18.2928C20.0975 18.6833 20.0975 19.3165 19.707 19.707C19.3165 20.0975 18.6833 20.0975 18.2928 19.707L13.9428 15.357C13.5523 14.9665 13.5523 14.3333 13.9428 13.9428Z",fill:"var(--primary-color)"})]}),RO=()=>{const{mediaType:t,lang:e,baseName:n}=ie(),r=e==="en"?["Find","movie...","tv show..."]:["Найти","фильм...","сериал..."],s=Jc(),[i,o]=E.useState(""),a=()=>{i&&(s(`${n}search/${i}`),o(""))};return p.jsx("div",{className:"search-box-container",children:p.jsxs("form",{className:"search-box-form",onSubmit:l=>{l.preventDefault(),a()},children:[p.jsx("button",{className:"search-button",children:p.jsx(kO,{})}),p.jsx("input",{type:"text",className:"search-box-input",placeholder:`${r[0]} ${t==="movie"?r[1]:r[2]}`,value:i,onChange:l=>o(l.target.value)})]})})},AO=()=>localStorage.getItem("theme")||"dark",bx=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Vh=E.createContext({}),Bh=E.createContext(null),zh=typeof document<"u",Fa=zh?E.useLayoutEffect:E.useEffect,$x=E.createContext({strict:!1});function PO(t,e,n,r){const{visualElement:s}=E.useContext(Vh),i=E.useContext($x),o=E.useContext(Bh),a=E.useContext(bx).reducedMotion,l=E.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;return E.useInsertionEffect(()=>{u&&u.update(n,o)}),Fa(()=>{u&&u.render()}),E.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?Fa:E.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}function ui(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NO(t,e,n){return E.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ui(n)&&(n.current=r))},[e])}function Ua(t){return typeof t=="string"||Array.isArray(t)}function Hh(t){return typeof t=="object"&&typeof t.start=="function"}const M1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],b1=["initial",...M1];function Wh(t){return Hh(t.animate)||b1.some(e=>Ua(t[e]))}function jx(t){return!!(Wh(t)||t.variants)}function DO(t,e){if(Wh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ua(n)?n:void 0,animate:Ua(r)?r:void 0}}return t.inherit!==!1?e:{}}function LO(t){const{initial:e,animate:n}=DO(t,E.useContext(Vh));return E.useMemo(()=>({initial:e,animate:n}),[uw(e),uw(n)])}function uw(t){return Array.isArray(t)?t.join(" "):t}const cw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Va={};for(const t in cw)Va[t]={isEnabled:e=>cw[t].some(n=>!!e[n])};function OO(t){for(const e in t)Va[e]={...Va[e],...t[e]}}const $1=E.createContext({}),Fx=E.createContext({}),MO=Symbol.for("motionComponentSymbol");function bO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&OO(t);function i(a,l){let u;const c={...E.useContext(bx),...a,layoutId:$O(a)},{isStatic:h}=c,d=LO(a),f=r(a,h);if(!h&&zh){d.visualElement=PO(s,f,c,e);const g=E.useContext(Fx),w=E.useContext($x).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,w,t,g))}return E.createElement(Vh.Provider,{value:d},u&&d.visualElement?E.createElement(u,{visualElement:d.visualElement,...c}):null,n(s,a,NO(f,d.visualElement,l),f,h,d.visualElement))}const o=E.forwardRef(i);return o[MO]=s,o}function $O({layoutId:t}){const e=E.useContext($1).id;return e&&t!==void 0?e+"-"+t:t}function jO(t){function e(r,s={}){return bO(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const FO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function j1(t){return typeof t!="string"||t.includes("-")?!1:!!(FO.indexOf(t)>-1||/[A-Z]/.test(t))}const Ic={};function UO(t){Object.assign(Ic,t)}const Cl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bs=new Set(Cl);function Ux(t,{layout:e,layoutId:n}){return Bs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ic[t]||t==="opacity")}const xt=t=>!!(t&&t.getVelocity),VO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BO=Cl.length;function zO(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<BO;o++){const a=Cl[o];if(t[a]!==void 0){const l=VO[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const Vx=t=>e=>typeof e=="string"&&e.startsWith(t),Bx=Vx("--"),Xp=Vx("var(--"),HO=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,WO=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vr=(t,e,n)=>Math.min(Math.max(n,t),e),zs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jo={...zs,transform:t=>Vr(0,1,t)},tu={...zs,default:1},Zo=t=>Math.round(t*1e5)/1e5,Kh=/(-)?([\d]*\.?[\d])+/g,zx=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,KO=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Sl(t){return typeof t=="string"}const Tl=t=>({test:e=>Sl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),or=Tl("deg"),xn=Tl("%"),F=Tl("px"),qO=Tl("vh"),GO=Tl("vw"),hw={...xn,parse:t=>xn.parse(t)/100,transform:t=>xn.transform(t*100)},dw={...zs,transform:Math.round},Hx={borderWidth:F,borderTopWidth:F,borderRightWidth:F,borderBottomWidth:F,borderLeftWidth:F,borderRadius:F,radius:F,borderTopLeftRadius:F,borderTopRightRadius:F,borderBottomRightRadius:F,borderBottomLeftRadius:F,width:F,maxWidth:F,height:F,maxHeight:F,size:F,top:F,right:F,bottom:F,left:F,padding:F,paddingTop:F,paddingRight:F,paddingBottom:F,paddingLeft:F,margin:F,marginTop:F,marginRight:F,marginBottom:F,marginLeft:F,rotate:or,rotateX:or,rotateY:or,rotateZ:or,scale:tu,scaleX:tu,scaleY:tu,scaleZ:tu,skew:or,skewX:or,skewY:or,distance:F,translateX:F,translateY:F,translateZ:F,x:F,y:F,z:F,perspective:F,transformPerspective:F,opacity:Jo,originX:hw,originY:hw,originZ:F,zIndex:dw,fillOpacity:Jo,strokeOpacity:Jo,numOctaves:dw};function F1(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,u=!1,c=!0;for(const h in e){const d=e[h];if(Bx(h)){i[h]=d;continue}const f=Hx[h],g=WO(d,f);if(Bs.has(h)){if(l=!0,o[h]=g,!c)continue;d!==(f.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,a[h]=g):s[h]=g}if(e.transform||(l||r?s.transform=zO(t.transform,n,c,r):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:d="50%",originZ:f=0}=a;s.transformOrigin=`${h} ${d} ${f}`}}const U1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Wx(t,e,n){for(const r in e)!xt(e[r])&&!Ux(r,n)&&(t[r]=e[r])}function QO({transformTemplate:t},e,n){return E.useMemo(()=>{const r=U1();return F1(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function YO(t,e,n){const r=t.style||{},s={};return Wx(s,r,t),Object.assign(s,QO(t,e,n)),t.transformValues?t.transformValues(s):s}function XO(t,e,n){const r={},s=YO(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const JO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function kc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||JO.has(t)}let Kx=t=>!kc(t);function ZO(t){t&&(Kx=e=>e.startsWith("on")?!kc(e):t(e))}try{ZO(require("@emotion/is-prop-valid").default)}catch{}function eM(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Kx(s)||n===!0&&kc(s)||!e&&!kc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function fw(t,e,n){return typeof t=="string"?t:F.transform(e+n*t)}function tM(t,e,n){const r=fw(e,t.x,t.width),s=fw(n,t.y,t.height);return`${r} ${s}`}const nM={offset:"stroke-dashoffset",array:"stroke-dasharray"},rM={offset:"strokeDashoffset",array:"strokeDasharray"};function sM(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?nM:rM;t[i.offset]=F.transform(-r);const o=F.transform(e),a=F.transform(n);t[i.array]=`${o} ${a}`}function V1(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h,d){if(F1(t,u,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:w}=t;f.transform&&(w&&(g.transform=f.transform),delete f.transform),w&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=tM(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&sM(f,o,a,l,!1)}const qx=()=>({...U1(),attrs:{}}),B1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iM(t,e,n,r){const s=E.useMemo(()=>{const i=qx();return V1(i,e,{enableHardwareAcceleration:!1},B1(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Wx(i,t.style,t),s.style={...i,...s.style}}return s}function oM(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(j1(n)?iM:XO)(r,i,o,n),c={...eM(r,typeof n=="string",t),...l,ref:s},{children:h}=r,d=E.useMemo(()=>xt(h)?h.get():h,[h]);return E.createElement(n,{...c,children:d})}}const z1=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function Gx(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Qx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Yx(t,e,n,r){Gx(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Qx.has(s)?s:z1(s),e.attrs[s])}function H1(t,e){const{style:n}=t,r={};for(const s in n)(xt(n[s])||e.style&&xt(e.style[s])||Ux(s,t))&&(r[s]=n[s]);return r}function Xx(t,e){const n=H1(t,e);for(const r in t)if(xt(t[r])||xt(e[r])){const s=Cl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function W1(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function K1(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rc=t=>Array.isArray(t),aM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lM=t=>Rc(t)?t[t.length-1]||0:t;function Ru(t){const e=xt(t)?t.get():t;return aM(e)?e.toValue():e}function uM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:cM(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Jx=t=>(e,n)=>{const r=E.useContext(Vh),s=E.useContext(Bh),i=()=>uM(t,e,r,s);return n?i():K1(i)};function cM(t,e,n,r){const s={},i=r(t,{});for(const d in i)s[d]=Ru(i[d]);let{initial:o,animate:a}=t;const l=Wh(t),u=jx(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;return h&&typeof h!="boolean"&&!Hh(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const g=W1(t,f);if(!g)return;const{transitionEnd:w,transition:S,...v}=g;for(const m in v){let y=v[m];if(Array.isArray(y)){const C=c?y.length-1:0;y=y[C]}y!==null&&(s[m]=y)}for(const m in w)s[m]=w[m]}),s}const hM={useVisualState:Jx({scrapeMotionValuesFromProps:Xx,createRenderState:qx,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}V1(n,r,{enableHardwareAcceleration:!1},B1(e.tagName),t.transformTemplate),Yx(e,n)}})},dM={useVisualState:Jx({scrapeMotionValuesFromProps:H1,createRenderState:U1})};function fM(t,{forwardMotionProps:e=!1},n,r){return{...j1(t)?hM:dM,preloadedFeatures:n,useRender:oM(e),createVisualElement:r,Component:t}}function Vn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Zx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function qh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const pM=t=>e=>Zx(e)&&t(e,qh(e));function Hn(t,e,n,r){return Vn(t,e,pM(n),r)}const mM=(t,e)=>n=>e(t(n)),Lr=(...t)=>t.reduce(mM);function e4(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const pw=e4("dragHorizontal"),mw=e4("dragVertical");function t4(t){let e=!1;if(t==="y")e=mw();else if(t==="x")e=pw();else{const n=pw(),r=mw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function n4(){const t=t4(!0);return t?(t(),!1):!0}class Xr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gM(t){let e=[],n=[],r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const h=c&&s,d=h?e:n;return u&&o.add(l),d.indexOf(l)===-1&&(d.push(l),h&&s&&(r=e.length)),l},cancel:l=>{const u=n.indexOf(l);u!==-1&&n.splice(u,1),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let u=0;u<r;u++){const c=e[u];c(l),o.has(c)&&(a.schedule(c),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const pe={delta:0,timestamp:0,isProcessing:!1},yM=40;let Jp=!0,Ba=!1;const Gh=["read","update","preRender","render","postRender"],Ii=Gh.reduce((t,e)=>(t[e]=gM(()=>Ba=!0),t),{}),vM=t=>Ii[t].process(pe),r4=t=>{Ba=!1,pe.delta=Jp?1e3/60:Math.max(Math.min(t-pe.timestamp,yM),1),pe.timestamp=t,pe.isProcessing=!0,Gh.forEach(vM),pe.isProcessing=!1,Ba&&(Jp=!1,requestAnimationFrame(r4))},wM=()=>{Ba=!0,Jp=!0,pe.isProcessing||requestAnimationFrame(r4)},he=Gh.reduce((t,e)=>{const n=Ii[e];return t[e]=(r,s=!1,i=!1)=>(Ba||wM(),n.schedule(r,s,i)),t},{});function tr(t){Gh.forEach(e=>Ii[e].cancel(t))}function gw(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.type==="touch"||n4())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&he.update(()=>a[r](i,o))};return Hn(t.current,n,s,{passive:!t.getProps()[r]})}class EM extends Xr{mount(){this.unmount=Lr(gw(this.node,!0),gw(this.node,!1))}unmount(){}}class CM extends Xr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lr(Vn(this.node.current,"focus",()=>this.onFocus()),Vn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const s4=(t,e)=>e?t===e?!0:s4(t,e.parentElement):!1,be=t=>t;function ef(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,qh(n))}class SM extends Xr{constructor(){super(...arguments),this.removeStartListeners=be,this.removeEndListeners=be,this.removeAccessibleListeners=be,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),i=Hn(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c}=this.node.getProps();he.update(()=>{s4(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Hn(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Lr(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ef("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&he.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Vn(this.node.current,"keyup",o),ef("down",(a,l)=>{this.startPress(a,l)})},n=Vn(this.node.current,"keydown",e),r=()=>{this.isPressing&&ef("cancel",(i,o)=>this.cancelPress(i,o))},s=Vn(this.node.current,"blur",r);this.removeAccessibleListeners=Lr(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&he.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!n4()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&he.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Hn(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Vn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Lr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Zp=new WeakMap,tf=new WeakMap,TM=t=>{const e=Zp.get(t.target);e&&e(t)},_M=t=>{t.forEach(TM)};function xM({root:t,...e}){const n=t||document;tf.has(n)||tf.set(n,{});const r=tf.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(_M,{root:t,...e})),r[s]}function IM(t,e,n){const r=xM(e);return Zp.set(t,n),r.observe(t),()=>{Zp.delete(t),r.unobserve(t)}}const kM={some:0,all:1};class RM extends Xr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:kM[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return IM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AM(e,n))&&this.startObserver()}unmount(){}}function AM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const PM={inView:{Feature:RM},tap:{Feature:SM},focus:{Feature:CM},hover:{Feature:EM}};function i4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function NM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function DM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Qh(t,e,n){const r=t.getProps();return W1(r,e,n!==void 0?n:r.custom,NM(t),DM(t))}const LM="framerAppearId",OM="data-"+z1(LM);let MM=be,q1=be;const Or=t=>t*1e3,Wn=t=>t/1e3,bM={current:!1},o4=t=>Array.isArray(t)&&typeof t[0]=="number";function a4(t){return!!(!t||typeof t=="string"&&l4[t]||o4(t)||Array.isArray(t)&&t.every(a4))}const Mo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,l4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mo([0,.65,.55,1]),circOut:Mo([.55,0,1,.45]),backIn:Mo([.31,.01,.66,-.59]),backOut:Mo([.33,1.53,.69,.99])};function u4(t){if(t)return o4(t)?Mo(t):Array.isArray(t)?t.map(u4):l4[t]}function $M(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=u4(a);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const yw={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},nf={},c4={};for(const t in yw)c4[t]=()=>(nf[t]===void 0&&(nf[t]=yw[t]()),nf[t]);function jM(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const h4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,FM=1e-7,UM=12;function VM(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=h4(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>FM&&++a<UM);return o}function _l(t,e,n,r){if(t===e&&n===r)return be;const s=i=>VM(i,0,1,t,n);return i=>i===0||i===1?i:h4(s(i),e,r)}const BM=_l(.42,0,1,1),zM=_l(0,0,.58,1),d4=_l(.42,0,.58,1),HM=t=>Array.isArray(t)&&typeof t[0]!="number",f4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,p4=t=>e=>1-t(1-e),m4=t=>1-Math.sin(Math.acos(t)),G1=p4(m4),WM=f4(G1),g4=_l(.33,1.53,.69,.99),Q1=p4(g4),KM=f4(Q1),qM=t=>(t*=2)<1?.5*Q1(t):.5*(2-Math.pow(2,-10*(t-1))),GM={linear:be,easeIn:BM,easeInOut:d4,easeOut:zM,circIn:m4,circInOut:WM,circOut:G1,backIn:Q1,backInOut:KM,backOut:g4,anticipate:qM},vw=t=>{if(Array.isArray(t)){q1(t.length===4);const[e,n,r,s]=t;return _l(e,n,r,s)}else if(typeof t=="string")return GM[t];return t},Y1=(t,e)=>n=>!!(Sl(n)&&KO.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),y4=(t,e,n)=>r=>{if(!Sl(r))return r;const[s,i,o,a]=r.match(Kh);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},QM=t=>Vr(0,255,t),rf={...zs,transform:t=>Math.round(QM(t))},ps={test:Y1("rgb","red"),parse:y4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+rf.transform(t)+", "+rf.transform(e)+", "+rf.transform(n)+", "+Zo(Jo.transform(r))+")"};function YM(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const em={test:Y1("#"),parse:YM,transform:ps.transform},ci={test:Y1("hsl","hue"),parse:y4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+xn.transform(Zo(e))+", "+xn.transform(Zo(n))+", "+Zo(Jo.transform(r))+")"},ht={test:t=>ps.test(t)||em.test(t)||ci.test(t),parse:t=>ps.test(t)?ps.parse(t):ci.test(t)?ci.parse(t):em.parse(t),transform:t=>Sl(t)?t:t.hasOwnProperty("red")?ps.transform(t):ci.transform(t)},ge=(t,e,n)=>-n*t+n*e+t;function sf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function XM({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=sf(l,a,t+1/3),i=sf(l,a,t),o=sf(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const of=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},JM=[em,ps,ci],ZM=t=>JM.find(e=>e.test(t));function ww(t){const e=ZM(t);let n=e.parse(t);return e===ci&&(n=XM(n)),n}const v4=(t,e)=>{const n=ww(t),r=ww(e),s={...n};return i=>(s.red=of(n.red,r.red,i),s.green=of(n.green,r.green,i),s.blue=of(n.blue,r.blue,i),s.alpha=ge(n.alpha,r.alpha,i),ps.transform(s))};function eb(t){var e,n;return isNaN(t)&&Sl(t)&&(((e=t.match(Kh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(zx))===null||n===void 0?void 0:n.length)||0)>0}const w4={regex:HO,countKey:"Vars",token:"${v}",parse:be},E4={regex:zx,countKey:"Colors",token:"${c}",parse:ht.parse},C4={regex:Kh,countKey:"Numbers",token:"${n}",parse:zs.parse};function af(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Ac(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&af(n,w4),af(n,E4),af(n,C4),n}function S4(t){return Ac(t).values}function T4(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Ac(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(w4.token,o[l]):l<r+n?a=a.replace(E4.token,ht.transform(o[l])):a=a.replace(C4.token,Zo(o[l]));return a}}const tb=t=>typeof t=="number"?0:t;function nb(t){const e=S4(t);return T4(t)(e.map(tb))}const Br={test:eb,parse:S4,createTransformer:T4,getAnimatableNone:nb},_4=(t,e)=>n=>`${n>0?e:t}`;function x4(t,e){return typeof t=="number"?n=>ge(t,e,n):ht.test(t)?v4(t,e):t.startsWith("var(")?_4(t,e):k4(t,e)}const I4=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>x4(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},rb=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=x4(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},k4=(t,e)=>{const n=Br.createTransformer(e),r=Ac(t),s=Ac(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Lr(I4(r.values,s.values),n):_4(t,e)},za=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ew=(t,e)=>n=>ge(t,e,n);function sb(t){return typeof t=="number"?Ew:typeof t=="string"?ht.test(t)?v4:k4:Array.isArray(t)?I4:typeof t=="object"?rb:Ew}function ib(t,e,n){const r=[],s=n||sb(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||be:e;a=Lr(l,a)}r.push(a)}return r}function R4(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(q1(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=ib(e,r,s),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const h=za(t[c],t[c+1],u);return o[c](h)};return n?u=>l(Vr(t[0],t[i-1],u)):l}function ob(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=za(0,e,r);t.push(ge(n,1,s))}}function ab(t){const e=[0];return ob(e,t.length-1),e}function lb(t,e){return t.map(n=>n*e)}function ub(t,e){return t.map(()=>e||d4).splice(0,t.length-1)}function Pc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=HM(r)?r.map(vw):vw(r),i={done:!1,value:e[0]},o=lb(n&&n.length===e.length?n:ab(e),t),a=R4(o,e,{ease:Array.isArray(s)?s:ub(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function A4(t,e){return e?t*(1e3/e):0}const cb=5;function P4(t,e,n){const r=Math.max(e-cb,0);return A4(n-t(r),e-r)}const lf=.001,hb=.01,Cw=10,db=.05,fb=1;function pb({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;MM(t<=Or(Cw));let o=1-e;o=Vr(db,fb,o),t=Vr(hb,Cw,Wn(t)),o<1?(s=u=>{const c=u*o,h=c*t,d=c-n,f=tm(u,o),g=Math.exp(-h);return lf-d/f*g},i=u=>{const h=u*o*t,d=h*n+n,f=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-h),w=tm(Math.pow(u,2),o);return(-s(u)+lf>0?-1:1)*((d-f)*g)/w}):(s=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-lf+c*h},i=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=gb(s,i,a);if(t=Or(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const mb=12;function gb(t,e,n){let r=n;for(let s=1;s<mb;s++)r=r-t(r)/e(r);return r}function tm(t,e){return t*Math.sqrt(1-e*e)}const yb=["duration","bounce"],vb=["stiffness","damping","mass"];function Sw(t,e){return e.some(n=>t[n]!==void 0)}function wb(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Sw(t,vb)&&Sw(t,yb)){const n=pb(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function N4({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,velocity:c,duration:h,isResolvedFromDuration:d}=wb(r),f=c?-Wn(c):0,g=l/(2*Math.sqrt(a*u)),w=i-s,S=Wn(Math.sqrt(a/u)),v=Math.abs(w)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let m;if(g<1){const y=tm(S,g);m=C=>{const T=Math.exp(-g*S*C);return i-T*((f+g*S*w)/y*Math.sin(y*C)+w*Math.cos(y*C))}}else if(g===1)m=y=>i-Math.exp(-S*y)*(w+(f+S*w)*y);else{const y=S*Math.sqrt(g*g-1);m=C=>{const T=Math.exp(-g*S*C),k=Math.min(y*C,300);return i-T*((f+g*S*w)*Math.sinh(k)+y*w*Math.cosh(k))/y}}return{calculatedDuration:d&&h||null,next:y=>{const C=m(y);if(d)o.done=y>=h;else{let T=f;y!==0&&(g<1?T=P4(m,y,C):T=0);const k=Math.abs(T)<=n,I=Math.abs(i-C)<=e;o.done=k&&I}return o.value=o.done?i:C,o}}}function Tw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],d={done:!1,value:h},f=x=>a!==void 0&&x<a||l!==void 0&&x>l,g=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let w=n*e;const S=h+w,v=o===void 0?S:o(S);v!==S&&(w=v-h);const m=x=>-w*Math.exp(-x/r),y=x=>v+m(x),C=x=>{const M=m(x),$=y(x);d.done=Math.abs(M)<=u,d.value=d.done?v:$};let T,k;const I=x=>{f(d.value)&&(T=x,k=N4({keyframes:[d.value,g(d.value)],velocity:P4(y,x,d.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return I(0),{calculatedDuration:null,next:x=>{let M=!1;return!k&&T===void 0&&(M=!0,C(x),I(x)),T!==void 0&&x>T?k.next(x-T):(!M&&C(x),d)}}}const Eb=t=>{const e=({timestamp:n})=>t(n);return{start:()=>he.update(e,!0),stop:()=>tr(e),now:()=>pe.isProcessing?pe.timestamp:performance.now()}},_w=2e4;function xw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<_w;)e+=n,r=t.next(e);return e>=_w?1/0:e}const Cb={decay:Tw,inertia:Tw,tween:Pc,keyframes:Pc,spring:N4};function Nc({autoplay:t=!0,delay:e=0,driver:n=Eb,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:h,...d}){let f=1,g=!1,w,S;const v=()=>{w&&w(),S=new Promise(H=>{w=H})};v();let m;const y=Cb[s]||Pc;let C;y!==Pc&&typeof r[0]!="number"&&(C=R4([0,100],r,{clamp:!1}),r=[0,100]);const T=y({...d,keyframes:r});let k;a==="mirror"&&(k=y({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let I="idle",x=null,M=null,$=null;T.calculatedDuration===null&&i&&(T.calculatedDuration=xw(T));const{calculatedDuration:de}=T;let yt=1/0,$t=1/0;de!==null&&(yt=de+o,$t=yt*(i+1)-o);let Ie=0;const ke=H=>{if(M===null)return;f>0&&(M=Math.min(M,H)),x!==null?Ie=x:Ie=(H-M)*f;const fe=Ie-e,Jr=fe<0;Ie=Math.max(fe,0),I==="finished"&&x===null&&(Ie=$t);let an=Ie,Hs=T;if(i){const Zh=Ie/yt;let xl=Math.floor(Zh),es=Zh%1;!es&&Zh>=1&&(es=1),es===1&&xl--,xl=Math.min(xl,i+1);const o0=!!(xl%2);o0&&(a==="reverse"?(es=1-es,o&&(es-=o/yt)):a==="mirror"&&(Hs=k));let a0=Vr(0,1,es);Ie>$t&&(a0=a==="reverse"&&o0?1:0),an=a0*yt}const It=Jr?{done:!1,value:r[0]}:Hs.next(an);C&&(It.value=C(It.value));let{done:Zr}=It;!Jr&&de!==null&&(Zr=Ie>=$t);const o3=x===null&&(I==="finished"||I==="running"&&Zr||f<0&&Ie<=0);return h&&h(It.value),o3&&D(),It},jt=()=>{m&&m.stop(),m=void 0},on=()=>{I="idle",jt(),v(),M=$=null},D=()=>{I="finished",c&&c(),jt(),v()},z=()=>{if(g)return;m||(m=n(ke));const H=m.now();l&&l(),x!==null?M=H-x:(!M||I==="finished")&&(M=H),$=M,x=null,I="running",m.start()};t&&z();const q={then(H,fe){return S.then(H,fe)},get time(){return Wn(Ie)},set time(H){H=Or(H),Ie=H,x!==null||!m||f===0?x=H:M=m.now()-H/f},get duration(){const H=T.calculatedDuration===null?xw(T):T.calculatedDuration;return Wn(H)},get speed(){return f},set speed(H){H===f||!m||(f=H,q.time=Wn(Ie))},get state(){return I},play:z,pause:()=>{I="paused",x=Ie},stop:()=>{g=!0,I!=="idle"&&(I="idle",u&&u(),on())},cancel:()=>{$!==null&&ke($),on()},complete:()=>{I="finished"},sample:H=>(M=0,ke(H))};return q}const Sb=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),nu=10,Tb=2e4,_b=(t,e)=>e.type==="spring"||t==="backgroundColor"||!a4(e.ease);function xb(t,e,{onUpdate:n,onComplete:r,...s}){if(!(c4.waapi()&&Sb.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l;const u=()=>{l=new Promise(v=>{a=v})};u();let{keyframes:c,duration:h=300,ease:d,times:f}=s;if(_b(e,s)){const v=Nc({...s,repeat:0,delay:0});let m={done:!1,value:c[0]};const y=[];let C=0;for(;!m.done&&C<Tb;)m=v.sample(C),y.push(m.value),C+=nu;f=void 0,c=y,h=C-nu,d="linear"}const g=$M(t.owner.current,e,c,{...s,duration:h,ease:d,times:f}),w=()=>g.cancel(),S=()=>{he.update(w),a(),u()};return g.onfinish=()=>{t.set(jM(c,s)),r&&r(),S()},{then(v,m){return l.then(v,m)},get time(){return Wn(g.currentTime||0)},set time(v){g.currentTime=Or(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return Wn(h)},play:()=>{o||(g.play(),tr(w))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const m=Nc({...s,autoplay:!1});t.setWithVelocity(m.sample(v-nu).value,m.sample(v).value,nu)}S()},complete:()=>g.finish(),cancel:S}}function Ib({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:be,pause:be,stop:be,then:i=>(i(),Promise.resolve()),cancel:be,complete:be});return e?Nc({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const kb={type:"spring",stiffness:500,damping:25,restSpeed:10},Rb=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ab={type:"keyframes",duration:.8},Pb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Nb=(t,{keyframes:e})=>e.length>2?Ab:Bs.has(t)?t.startsWith("scale")?Rb(e[1]):kb:Pb,nm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Br.test(e)||e==="0")&&!e.startsWith("url(")),Db=new Set(["brightness","contrast","saturate","opacity"]);function Lb(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Kh)||[];if(!r)return t;const s=n.replace(r,"");let i=Db.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Ob=/([a-z-]*)\(.*?\)/g,rm={...Br,getAnimatableNone:t=>{const e=t.match(Ob);return e?e.map(Lb).join(" "):t}},Mb={...Hx,color:ht,backgroundColor:ht,outlineColor:ht,fill:ht,stroke:ht,borderColor:ht,borderTopColor:ht,borderRightColor:ht,borderBottomColor:ht,borderLeftColor:ht,filter:rm,WebkitFilter:rm},X1=t=>Mb[t];function D4(t,e){let n=X1(t);return n!==rm&&(n=Br),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const L4=t=>/^0[^.\s]+$/.test(t);function bb(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||L4(t)}function $b(t,e,n,r){const s=nm(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),bb(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];i[c]=D4(e,a)}return i}function jb({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function O4(t,e){return t[e]||t.default||t}const J1=(t,e,n,r={})=>s=>{const i=O4(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Or(o);const l=$b(e,t,n,i),u=l[0],c=l[l.length-1],h=nm(t,u),d=nm(t,c);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{e.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(jb(i)||(f={...f,...Nb(t,f)}),f.duration&&(f.duration=Or(f.duration)),f.repeatDelay&&(f.repeatDelay=Or(f.repeatDelay)),!h||!d||bM.current||i.type===!1)return Ib(f);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=xb(e,t,f);if(g)return g}return Nc(f)};function Dc(t){return!!(xt(t)&&t.add)}const Fb=t=>/^\-?\d*\.?\d+$/.test(t);function Z1(t,e){t.indexOf(e)===-1&&t.push(e)}function e0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class t0{constructor(){this.subscriptions=[]}add(e){return Z1(this.subscriptions,e),()=>e0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ub=t=>!isNaN(parseFloat(t));class Vb{constructor(e,n={}){this.version="10.12.16",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=pe;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,he.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>he.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Ub(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new t0);const r=this.events[e].add(n);return e==="change"?()=>{r(),he.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?A4(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ki(t,e){return new Vb(t,e)}const M4=t=>e=>e.test(t),Bb={test:t=>t==="auto",parse:t=>t},b4=[zs,F,xn,or,GO,qO,Bb],So=t=>b4.find(M4(t)),zb=[...b4,ht,Br],Hb=t=>zb.find(M4(t));function Wb(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ki(n))}function n0(t,e){const n=Qh(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=lM(i[o]);Wb(t,o,a)}}function sm(t,e){[...e].reverse().forEach(r=>{const s=t.getVariant(r);s&&n0(t,s),t.variantChildren&&t.variantChildren.forEach(i=>{sm(i,e)})})}function Kb(t,e){if(Array.isArray(e))return sm(t,e);if(typeof e=="string")return sm(t,[e]);n0(t,e)}function qb(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),c!=null&&(typeof c=="string"&&(Fb(c)||L4(c))?c=parseFloat(c):!Hb(c)&&Br.test(u)&&(c=D4(l,u)),t.addValue(l,Ki(c,{owner:t})),n[l]===void 0&&(n[l]=c),c!==null&&t.setBaseTarget(l,c))}}function Gb(t,e){return e?(e[t]||e.default||e).from:void 0}function Qb(t,e,n){const r={};for(const s in t){const i=Gb(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Yb({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function $4(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const d=t.getValue(h),f=a[h];if(!d||f===void 0||c&&Yb(c,h))continue;const g={delay:n,elapsed:0,...i};if(window.HandoffAppearAnimations&&!d.hasAnimated){const S=t.getProps()[OM];S&&(g.elapsed=window.HandoffAppearAnimations(S,h,d,he))}d.start(J1(h,d,f,t.shouldReduceMotion&&Bs.has(h)?{type:!1}:g));const w=d.animation;Dc(l)&&(l.add(h),w.then(()=>l.remove(h))),u.push(w)}return o&&Promise.all(u).then(()=>{o&&n0(t,o)}),u}function im(t,e,n={}){const r=Qh(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all($4(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:h}=s;return Xb(t,e,u+l,c,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function Xb(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(Jb).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(im(u,e,{...i,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Jb(t,e){return t.sortNodePosition(e)}function j4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>im(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=im(t,e,n);else{const s=typeof e=="function"?Qh(t,e,n.custom):e;r=Promise.all($4(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const Zb=[...M1].reverse(),e$=M1.length;function t$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>j4(t,n,r)))}function n$(t){let e=t$(t);const n=s$();let r=!0;const s=(l,u)=>{const c=Qh(t,u);if(c){const{transition:h,transitionEnd:d,...f}=c;l={...l,...f,...d}}return l};function i(l){e=l(t)}function o(l,u){const c=t.getProps(),h=t.getVariantContext(!0)||{},d=[],f=new Set;let g={},w=1/0;for(let v=0;v<e$;v++){const m=Zb[v],y=n[m],C=c[m]!==void 0?c[m]:h[m],T=Ua(C),k=m===u?y.isActive:null;k===!1&&(w=v);let I=C===h[m]&&C!==c[m]&&T;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),y.protectedKeys={...g},!y.isActive&&k===null||!C&&!y.prevProp||Hh(C)||typeof C=="boolean")continue;const x=r$(y.prevProp,C);let M=x||m===u&&y.isActive&&!I&&T||v>w&&T;const $=Array.isArray(C)?C:[C];let de=$.reduce(s,{});k===!1&&(de={});const{prevResolvedValues:yt={}}=y,$t={...yt,...de},Ie=ke=>{M=!0,f.delete(ke),y.needsAnimating[ke]=!0};for(const ke in $t){const jt=de[ke],on=yt[ke];g.hasOwnProperty(ke)||(jt!==on?Rc(jt)&&Rc(on)?!i4(jt,on)||x?Ie(ke):y.protectedKeys[ke]=!0:jt!==void 0?Ie(ke):f.add(ke):jt!==void 0&&f.has(ke)?Ie(ke):y.protectedKeys[ke]=!0)}y.prevProp=C,y.prevResolvedValues=de,y.isActive&&(g={...g,...de}),r&&t.blockInitialAnimation&&(M=!1),M&&!I&&d.push(...$.map(ke=>({animation:ke,options:{type:m,...l}})))}if(f.size){const v={};f.forEach(m=>{const y=t.getBaseTarget(m);y!==void 0&&(v[m]=y)}),d.push({animation:v})}let S=!!d.length;return r&&c.initial===!1&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,u,c){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=o(c,l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function r$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!i4(e,t):!1}function ts(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s$(){return{animate:ts(!0),whileInView:ts(),whileHover:ts(),whileTap:ts(),whileDrag:ts(),whileFocus:ts(),exit:ts()}}class i$ extends Xr{constructor(e){super(e),e.animationState||(e.animationState=n$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Hh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let o$=0;class a$ extends Xr{constructor(){super(...arguments),this.id=o$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const l$={animation:{Feature:i$},exit:{Feature:a$}},Iw=(t,e)=>Math.abs(t-e);function u$(t,e){const n=Iw(t.x,e.x),r=Iw(t.y,e.y);return Math.sqrt(n**2+r**2)}class F4{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=cf(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,h=u$(u.offset,{x:0,y:0})>=3;if(!c&&!h)return;const{point:d}=u,{timestamp:f}=pe;this.history.push({...d,timestamp:f});const{onStart:g,onMove:w}=this.handlers;c||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,u)},this.handlePointerMove=(u,c)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=uf(c,this.transformPagePoint),he.update(this.updatePoint,!0)},this.handlePointerUp=(u,c)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:h,onSessionEnd:d}=this.handlers,f=cf(u.type==="pointercancel"?this.lastMoveEventInfo:uf(c,this.transformPagePoint),this.history);this.startEvent&&h&&h(u,f),d&&d(u,f)},!Zx(e))return;this.handlers=n,this.transformPagePoint=r;const s=qh(e),i=uf(s,this.transformPagePoint),{point:o}=i,{timestamp:a}=pe;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,cf(i,this.history)),this.removeListeners=Lr(Hn(window,"pointermove",this.handlePointerMove),Hn(window,"pointerup",this.handlePointerUp),Hn(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tr(this.updatePoint)}}function uf(t,e){return e?{point:e(t.point)}:t}function kw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function cf({point:t},e){return{point:t,delta:kw(t,U4(e)),offset:kw(t,c$(e)),velocity:h$(e,.1)}}function c$(t){return t[0]}function U4(t){return t[t.length-1]}function h$(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=U4(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Or(e)));)n--;if(!r)return{x:0,y:0};const i=Wn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ot(t){return t.max-t.min}function om(t,e=0,n=.01){return Math.abs(t-e)<=n}function Rw(t,e,n,r=.5){t.origin=r,t.originPoint=ge(e.min,e.max,t.origin),t.scale=Ot(n)/Ot(e),(om(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ge(n.min,n.max,t.origin)-t.originPoint,(om(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ea(t,e,n,r){Rw(t.x,e.x,n.x,r?r.originX:void 0),Rw(t.y,e.y,n.y,r?r.originY:void 0)}function Aw(t,e,n){t.min=n.min+e.min,t.max=t.min+Ot(e)}function d$(t,e,n){Aw(t.x,e.x,n.x),Aw(t.y,e.y,n.y)}function Pw(t,e,n){t.min=e.min-n.min,t.max=t.min+Ot(e)}function ta(t,e,n){Pw(t.x,e.x,n.x),Pw(t.y,e.y,n.y)}function f$(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ge(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ge(n,t,r.max):Math.min(t,n)),t}function Nw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function p$(t,{top:e,left:n,bottom:r,right:s}){return{x:Nw(t.x,n,s),y:Nw(t.y,e,r)}}function Dw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function m$(t,e){return{x:Dw(t.x,e.x),y:Dw(t.y,e.y)}}function g$(t,e){let n=.5;const r=Ot(t),s=Ot(e);return s>r?n=za(e.min,e.max-r,t.min):r>s&&(n=za(t.min,t.max-s,e.min)),Vr(0,1,n)}function y$(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const am=.35;function v$(t=am){return t===!1?t=0:t===!0&&(t=am),{x:Lw(t,"left","right"),y:Lw(t,"top","bottom")}}function Lw(t,e,n){return{min:Ow(t,e),max:Ow(t,n)}}function Ow(t,e){return typeof t=="number"?t:t[e]||0}const Mw=()=>({translate:0,scale:1,origin:0,originPoint:0}),hi=()=>({x:Mw(),y:Mw()}),bw=()=>({min:0,max:0}),Ne=()=>({x:bw(),y:bw()});function cn(t){return[t("x"),t("y")]}function V4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function w$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function E$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hf(t){return t===void 0||t===1}function lm({scale:t,scaleX:e,scaleY:n}){return!hf(t)||!hf(e)||!hf(n)}function is(t){return lm(t)||B4(t)||t.z||t.rotate||t.rotateX||t.rotateY}function B4(t){return $w(t.x)||$w(t.y)}function $w(t){return t&&t!=="0%"}function Lc(t,e,n){const r=t-n,s=e*r;return n+s}function jw(t,e,n,r,s){return s!==void 0&&(t=Lc(t,s,r)),Lc(t,n,r)+e}function um(t,e=0,n=1,r,s){t.min=jw(t.min,e,n,r,s),t.max=jw(t.max,e,n,r,s)}function z4(t,{x:e,y:n}){um(t.x,e.translate,e.scale,e.originPoint),um(t.y,n.translate,n.scale,n.originPoint)}function C$(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&di(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,z4(t,o)),r&&is(i.latestValues)&&di(t,i.latestValues))}e.x=Fw(e.x),e.y=Fw(e.y)}function Fw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ur(t,e){t.min=t.min+e,t.max=t.max+e}function Uw(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ge(t.min,t.max,i);um(t,e[n],e[r],o,e.scale)}const S$=["x","scaleX","originX"],T$=["y","scaleY","originY"];function di(t,e){Uw(t.x,e,S$),Uw(t.y,e,T$)}function H4(t,e){return V4(E$(t.getBoundingClientRect(),e))}function _$(t,e,n){const r=H4(t,n),{scroll:s}=e;return s&&(ur(r.x,s.offset.x),ur(r.y,s.offset.y)),r}const x$=new WeakMap;class I${constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ne(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=l=>{this.stopAnimation(),n&&this.snapToCursor(qh(l,"page").point)},i=(l,u)=>{const{drag:c,dragPropagation:h,onDragStart:d}=this.getProps();if(c&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=t4(c),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cn(g=>{let w=this.getAxisMotionValue(g).get()||0;if(xn.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const v=S.layout.layoutBox[g];v&&(w=Ot(v)*(parseFloat(w)/100))}}this.originPoint[g]=w}),d&&he.update(()=>d(l,u),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(l,u)=>{const{dragPropagation:c,dragDirectionLock:h,onDirectionLock:d,onDrag:f}=this.getProps();if(!c&&!this.openGlobalLock)return;const{offset:g}=u;if(h&&this.currentDirection===null){this.currentDirection=k$(g),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),f&&f(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new F4(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&he.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ru(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=f$(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},s=this.constraints;e&&ui(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=p$(r.layoutBox,e):this.constraints=!1,this.elastic=v$(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&cn(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=y$(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ui(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=_$(r,s.root,this.visualElement.getTransformPagePoint());let o=m$(s.layout.layoutBox,i);if(n){const a=n(w$(o));this.hasMutatedConstraints=!!a,a&&(o=V4(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=cn(c=>{if(!ru(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(J1(e,r,0,n))}stopAnimation(){cn(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){cn(n=>{const{drag:r}=this.getProps();if(!ru(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ge(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ui(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=g$({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),cn(o=>{if(!ru(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ge(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;x$.set(this.visualElement,this);const e=this.visualElement.current,n=Hn(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ui(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Vn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(cn(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=am,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ru(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function k$(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class R$ extends Xr{constructor(e){super(e),this.removeGroupControls=be,this.removeListeners=be,this.controls=new I$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||be}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vw=t=>(e,n)=>{t&&he.update(()=>t(e,n))};class A$ extends Xr{constructor(){super(...arguments),this.removePointerDownListener=be}onPointerDown(e){this.session=new F4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Vw(e),onStart:Vw(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&he.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Hn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function P$(){const t=E.useContext(Bh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=E.useId();return E.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Au={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const To={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(F.test(t))t=parseFloat(t);else return t;const n=Bw(t,e.target.x),r=Bw(t,e.target.y);return`${n}% ${r}%`}},N$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Br.parse(t);if(s.length>5)return r;const i=Br.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=ge(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class D$ extends Mc.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;UO(L$),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Au.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||he.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function W4(t){const[e,n]=P$(),r=E.useContext($1);return Mc.createElement(D$,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(Fx),isPresent:e,safeToRemove:n})}const L$={borderRadius:{...To,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:To,borderTopRightRadius:To,borderBottomLeftRadius:To,borderBottomRightRadius:To,boxShadow:N$},K4=["TopLeft","TopRight","BottomLeft","BottomRight"],O$=K4.length,zw=t=>typeof t=="string"?parseFloat(t):t,Hw=t=>typeof t=="number"||F.test(t);function M$(t,e,n,r,s,i){s?(t.opacity=ge(0,n.opacity!==void 0?n.opacity:1,b$(r)),t.opacityExit=ge(e.opacity!==void 0?e.opacity:1,0,$$(r))):i&&(t.opacity=ge(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<O$;o++){const a=`border${K4[o]}Radius`;let l=Ww(e,a),u=Ww(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Hw(l)===Hw(u)?(t[a]=Math.max(ge(zw(l),zw(u),r),0),(xn.test(u)||xn.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ge(e.rotate||0,n.rotate||0,r))}function Ww(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const b$=q4(0,.5,G1),$$=q4(.5,.95,be);function q4(t,e,n){return r=>r<t?0:r>e?1:n(za(t,e,r))}function Kw(t,e){t.min=e.min,t.max=e.max}function Ft(t,e){Kw(t.x,e.x),Kw(t.y,e.y)}function qw(t,e,n,r,s){return t-=e,t=Lc(t,1/n,r),s!==void 0&&(t=Lc(t,1/s,r)),t}function j$(t,e=0,n=1,r=.5,s,i=t,o=t){if(xn.test(e)&&(e=parseFloat(e),e=ge(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ge(i.min,i.max,r);t===i&&(a-=e),t.min=qw(t.min,e,n,a,s),t.max=qw(t.max,e,n,a,s)}function Gw(t,e,[n,r,s],i,o){j$(t,e[n],e[r],e[s],e.scale,i,o)}const F$=["x","scaleX","originX"],U$=["y","scaleY","originY"];function Qw(t,e,n,r){Gw(t.x,e,F$,n?n.x:void 0,r?r.x:void 0),Gw(t.y,e,U$,n?n.y:void 0,r?r.y:void 0)}function Yw(t){return t.translate===0&&t.scale===1}function G4(t){return Yw(t.x)&&Yw(t.y)}function cm(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Xw(t){return Ot(t.x)/Ot(t.y)}class V${constructor(){this.members=[]}add(e){Z1(this.members,e),e.scheduleRender()}remove(e){if(e0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jw(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const B$=(t,e)=>t.depth-e.depth;class z${constructor(){this.children=[],this.isDirty=!1}add(e){Z1(this.children,e),this.isDirty=!0}remove(e){e0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(B$),this.isDirty=!1,this.children.forEach(e)}}function H$(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(tr(r),t(i-e))};return he.read(r,!0),()=>tr(r)}function W$(t){window.MotionDebug&&window.MotionDebug.record(t)}function K$(t){return t instanceof SVGElement&&t.tagName!=="svg"}function q$(t,e,n){const r=xt(t)?t:Ki(t);return r.start(J1("",r,e,n)),r.animation}const Zw=["","X","Y","Z"],e2=1e3;let G$=0;const os={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Q4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=G$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{os.totalNodes=os.resolvedTargetDeltas=os.recalculatedProjection=0,this.nodes.forEach(X$),this.nodes.forEach(nj),this.nodes.forEach(rj),this.nodes.forEach(J$),W$(os)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z$)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new t0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=K$(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=H$(d,250),Au.hasAnimatedSinceResize&&(Au.hasAnimatedSinceResize=!1,this.nodes.forEach(n2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||c.getDefaultTransition()||lj,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=c.getProps(),m=!this.targetLayout||!cm(this.targetLayout,g)||f,y=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const C={...O4(w,"layout"),onPlay:S,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else d||n2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,tr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(t2);return}this.isUpdating||this.nodes.forEach(ej),this.isUpdating=!1,this.nodes.forEach(tj),this.nodes.forEach(Q$),this.nodes.forEach(Y$),this.clearAllSnapshots();const a=performance.now();pe.delta=Vr(0,1e3/60,a-pe.timestamp),pe.timestamp=a,pe.isProcessing=!0,Ii.update.process(pe),Ii.preRender.process(pe),Ii.render.process(pe),pe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Z$),this.sharedNodes.forEach(ij)}scheduleUpdateProjection(){he.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){he.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ne(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!G4(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||is(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),uj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ne();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ur(a.x,l.offset.x),ur(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ne();Ft(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:h}=u;if(u!==this.root&&c&&h.layoutScroll){if(c.isRoot){Ft(a,o);const{scroll:d}=this.root;d&&(ur(a.x,-d.offset.x),ur(a.y,-d.offset.y))}ur(a.x,c.offset.x),ur(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=Ne();Ft(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&di(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),is(c.latestValues)&&di(l,c.latestValues)}return is(this.latestValues)&&di(l,this.latestValues),l}removeTransform(o){const a=Ne();Ft(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!is(u.latestValues))continue;lm(u.latestValues)&&u.updateSnapshot();const c=Ne(),h=u.measurePageBox();Ft(c,h),Qw(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return is(this.latestValues)&&Qw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=pe.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),ta(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ne(),this.targetWithTransforms=Ne()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),d$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ft(this.target,this.layout.layoutBox),z4(this.target,this.targetDelta)):Ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),ta(this.relativeTargetOrigin,this.target,f.target),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}os.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lm(this.parent.latestValues)||B4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pe.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Ft(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;C$(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=hi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=hi(),this.projectionDeltaWithTransform=hi());const w=this.projectionTransform;ea(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Jw(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==d||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),os.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=hi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Ne(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,w=f!==g,S=this.getStack(),v=!S||S.members.length<=1,m=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(aj));this.animationProgress=0;let y;this.mixTargetDelta=C=>{const T=C/1e3;r2(h.x,o.x,T),r2(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ta(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oj(this.relativeTarget,this.relativeTargetOrigin,d,T),y&&cm(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Ne()),Ft(y,this.relativeTarget)),w&&(this.animationValues=c,M$(c,u,this.latestValues,T,m,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(tr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=he.update(()=>{Au.hasAnimatedSinceResize=!0,this.currentAnimation=q$(0,e2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(e2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Y4(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ne();const h=Ot(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=Ot(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Ft(a,l),di(a,c),ea(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new V$),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<Zw.length;c++){const h="rotate"+Zw[c];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ru(o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Ru(o.pointerEvents)||""),this.hasProjected&&!is(this.latestValues)&&(w.transform=c?c({},""):"none",this.hasProjected=!1),w}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Jw(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:f,y:g}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in Ic){if(d[w]===void 0)continue;const{correct:S,applyTo:v}=Ic[w],m=u.transform==="none"?d[w]:S(d[w],h);if(v){const y=v.length;for(let C=0;C<y;C++)u[v[C]]=m}else u[w]=m}return this.options.layoutId&&(u.pointerEvents=h===this?Ru(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(t2),this.root.sharedNodes.clear()}}}function Q$(t){t.updateLayout()}function Y$(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?cn(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=Ot(d);d.min=r[h].min,d.max=d.min+f}):Y4(i,n.layoutBox,r)&&cn(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=Ot(r[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const a=hi();ea(a,r,n.layoutBox);const l=hi();o?ea(l,t.applyTransform(s,!0),n.measuredBox):ea(l,r,n.layoutBox);const u=!G4(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const g=Ne();ta(g,n.layoutBox,d.layoutBox);const w=Ne();ta(w,r,f.layoutBox),cm(g,w)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function X$(t){os.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function J$(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Z$(t){t.clearSnapshot()}function t2(t){t.clearMeasurements()}function ej(t){t.isLayoutDirty=!1}function tj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function n2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function nj(t){t.resolveTargetDelta()}function rj(t){t.calcProjection()}function sj(t){t.resetRotation()}function ij(t){t.removeLeadSnapshot()}function r2(t,e,n){t.translate=ge(e.translate,0,n),t.scale=ge(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function s2(t,e,n,r){t.min=ge(e.min,n.min,r),t.max=ge(e.max,n.max,r)}function oj(t,e,n,r){s2(t.x,e.x,n.x,r),s2(t.y,e.y,n.y,r)}function aj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lj={duration:.45,ease:[.4,0,.1,1]};function i2(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function uj(t){i2(t.x),i2(t.y)}function Y4(t,e,n){return t==="position"||t==="preserve-aspect"&&!om(Xw(e),Xw(n),.2)}const cj=Q4({attachResizeListener:(t,e)=>Vn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),df={current:void 0},X4=Q4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!df.current){const t=new cj({});t.mount(window),t.setOptions({layoutScroll:!0}),df.current=t}return df.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hj={pan:{Feature:A$},drag:{Feature:R$,ProjectionNode:X4,MeasureLayout:W4}},dj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function fj(t){const e=dj.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function hm(t,e,n=1){const[r,s]=fj(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);return i?i.trim():Xp(s)?hm(s,e,n+1):s}function pj(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Xp(i))return;const o=hm(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Xp(i))continue;const o=hm(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const mj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),J4=t=>mj.has(t),gj=t=>Object.keys(t).some(J4),o2=t=>t===zs||t===F,a2=(t,e)=>parseFloat(t.split(", ")[e]),l2=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return a2(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?a2(i[1],t):0}},yj=new Set(["x","y","z"]),vj=Cl.filter(t=>!yj.has(t));function wj(t){const e=[];return vj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const u2={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:l2(4,13),y:l2(5,14)},Ej=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=u2[u](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const c=e.getValue(u);c&&c.jump(a[u]),t[u]=u2[u](l,i)}),t},Cj=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(J4);let i=[],o=!1;const a=[];if(s.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let c=n[l],h=So(c);const d=e[l];let f;if(Rc(d)){const g=d.length,w=d[0]===null?1:0;c=d[w],h=So(c);for(let S=w;S<g&&d[S]!==null;S++)f?q1(So(d[S])===f):f=So(d[S])}else f=So(d);if(h!==f)if(o2(h)&&o2(f)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof d=="string"?e[l]=parseFloat(d):Array.isArray(d)&&f===F&&(e[l]=d.map(parseFloat))}else h!=null&&h.transform&&(f!=null&&f.transform)&&(c===0||d===0)?c===0?u.set(f.transform(c)):e[l]=h.transform(d):(o||(i=wj(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Ej(e,t,a);return i.length&&i.forEach(([c,h])=>{t.getValue(c).set(h)}),t.render(),zh&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Sj(t,e,n,r){return gj(e)?Cj(t,e,n,r):{target:e,transitionEnd:r}}const Tj=(t,e,n,r)=>{const s=pj(t,e,r);return e=s.target,r=s.transitionEnd,Sj(t,e,n,r)},dm={current:null},Z4={current:!1};function _j(){if(Z4.current=!0,!!zh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>dm.current=t.matches;t.addListener(e),e()}else dm.current=!1}function xj(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(xt(i))t.addValue(s,i),Dc(r)&&r.add(s);else if(xt(o))t.addValue(s,Ki(i,{owner:t})),Dc(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Ki(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const c2=new WeakMap,e3=Object.keys(Va),Ij=e3.length,h2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kj=b1.length;class Rj{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>he.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Wh(n),this.isVariantNode=jx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const h in c){const d=c[h];a[h]!==void 0&&xt(d)&&(d.set(a[h],!1),Dc(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,c2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Z4.current||_j(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){c2.delete(this.current),this.projection&&this.projection.unmount(),tr(this.notifyUpdate),tr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Bs.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&he.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<Ij;l++){const u=e3[l],{isEnabled:c,Feature:h,ProjectionNode:d,MeasureLayout:f}=Va[u];d&&(o=d),c(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),f&&(a=f))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:f}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||h&&ui(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ne()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<h2.length;r++){const s=h2[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=xj(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<kj;r++){const s=b1[r],i=this.props[s];(Ua(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ki(n,{owner:this}),this.addValue(e,r)),r}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=W1(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!xt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new t0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class t3 extends Rj{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=Qb(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){qb(this,r,o);const a=Tj(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Aj(t){return window.getComputedStyle(t)}class Pj extends t3{readValueFromInstance(e,n){if(Bs.has(n)){const r=X1(n);return r&&r.default||0}else{const r=Aj(e),s=(Bx(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return H4(e,n)}build(e,n,r,s){F1(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return H1(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){Gx(e,n,r,s)}}class Nj extends t3{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bs.has(n)){const r=X1(n);return r&&r.default||0}return n=Qx.has(n)?n:z1(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ne()}scrapeMotionValuesFromProps(e,n){return Xx(e,n)}build(e,n,r,s){V1(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){Yx(e,n,r,s)}mount(e){this.isSVGTag=B1(e.tagName),super.mount(e)}}const Dj=(t,e)=>j1(t)?new Nj(e,{enableHardwareAcceleration:!1}):new Pj(e,{enableHardwareAcceleration:!0}),Lj={layout:{ProjectionNode:X4,MeasureLayout:W4}},Oj={...l$,...PM,...hj,...Lj},se=jO((t,e)=>fM(t,e,Oj,Dj));function n3(){const t=E.useRef(!1);return Fa(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Mj(){const t=n3(),[e,n]=E.useState(0),r=E.useCallback(()=>{t.current&&n(e+1)},[e]);return[E.useCallback(()=>he.postRender(r),[r]),e]}class bj extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $j({children:t,isPresent:e}){const n=E.useId(),r=E.useRef(null),s=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),E.createElement(bj,{isPresent:e,childRef:r,sizeRef:s},E.cloneElement(t,{ref:r}))}const ff=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=K1(jj),l=E.useId(),u=E.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c=>{a.set(c,!0);for(const h of a.values())if(!h)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),i?void 0:[n]);return E.useMemo(()=>{a.forEach((c,h)=>a.set(h,!1))},[n]),E.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=E.createElement($j,{isPresent:n},t)),E.createElement(Bh.Provider,{value:u},t)};function jj(){return new Map}function Fj(t){return E.useEffect(()=>()=>t(),[])}const Qs=t=>t.key||"";function Uj(t,e){t.forEach(n=>{const r=Qs(n);e.set(r,n)})}function Vj(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const Rn=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=E.useContext($1).forceRender||Mj()[0],l=n3(),u=Vj(t);let c=u;const h=E.useRef(new Map).current,d=E.useRef(c),f=E.useRef(new Map).current,g=E.useRef(!0);if(Fa(()=>{g.current=!1,Uj(u,f),d.current=c}),Fj(()=>{g.current=!0,f.clear(),h.clear()}),g.current)return E.createElement(E.Fragment,null,c.map(m=>E.createElement(ff,{key:Qs(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},m)));c=[...c];const w=d.current.map(Qs),S=u.map(Qs),v=w.length;for(let m=0;m<v;m++){const y=w[m];S.indexOf(y)===-1&&!h.has(y)&&h.set(y,void 0)}return o==="wait"&&h.size&&(c=[]),h.forEach((m,y)=>{if(S.indexOf(y)!==-1)return;const C=f.get(y);if(!C)return;const T=w.indexOf(y);let k=m;if(!k){const I=()=>{f.delete(y),h.delete(y);const x=d.current.findIndex(M=>M.key===y);if(d.current.splice(x,1),!h.size){if(d.current=u,l.current===!1)return;a(),r&&r()}};k=E.createElement(ff,{key:Qs(C),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:i,mode:o},C),h.set(y,k)}c.splice(T,0,k)}),c=c.map(m=>{const y=m.key;return h.has(y)?m:E.createElement(ff,{key:Qs(m),isPresent:!0,presenceAffectsLayout:i,mode:o},m)}),E.createElement(E.Fragment,null,h.size?c:c.map(m=>E.cloneElement(m)))};function Bj(t){t.values.forEach(e=>e.stop())}function zj(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const s=[];return t.forEach(i=>{s.push(j4(i,n,{transitionOverride:r}))}),Promise.all(s)},set(n){return t.forEach(r=>{Kb(r,n)})},stop(){t.forEach(n=>{Bj(n)})},mount(){return()=>{e.stop()}}};return e}function Hj(){const t=K1(zj);return Fa(t.mount,[]),t}const Yh=Hj,r3=()=>p.jsxs("svg",{width:"27",height:"27",viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M13.5 27.0003C17.2632 27.0003 20.6666 25.4606 23.1149 22.9768C22.2406 20.2265 19.9794 18.0061 17.058 16.9727C16.0535 17.8121 14.7613 18.3171 13.3505 18.3171C11.9398 18.3171 10.6476 17.8121 9.64308 16.9727C6.80379 17.9771 4.58814 20.1026 3.66321 22.7462C6.12556 25.365 9.62181 27.0003 13.5 27.0003Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 25C19.8513 25 25 19.8513 25 13.5C25 7.14872 19.8513 2 13.5 2C7.14872 2 2 7.14872 2 13.5C2 19.8513 7.14872 25 13.5 25ZM27 13.5C27 20.9558 20.9558 27 13.5 27C6.04415 27 0 20.9558 0 13.5C0 6.04415 6.04415 0 13.5 0C20.9558 0 27 6.04415 27 13.5Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M13.3505 15.9183C16.5449 15.9183 19.1346 13.3286 19.1346 10.1342C19.1346 6.93972 16.5449 4.3501 13.3505 4.3501C10.156 4.3501 7.56641 6.93972 7.56641 10.1342C7.56641 13.3286 10.156 15.9183 13.3505 15.9183Z",fill:"var(--accent-color)"})]}),d2=()=>p.jsxs("svg",{width:"27",height:"27",viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.45455C7.39976 2.45455 2.45455 7.39976 2.45455 13.5C2.45455 19.6002 7.39976 24.5455 13.5 24.5455C19.6002 24.5455 24.5455 19.6002 24.5455 13.5C24.5455 7.39976 19.6002 2.45455 13.5 2.45455ZM0 13.5C0 6.04416 6.04416 0 13.5 0C20.9558 0 27 6.04416 27 13.5C27 20.9558 20.9558 27 13.5 27C6.04416 27 0 20.9558 0 13.5Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6705 9.3295C18.1098 9.76884 18.1098 10.4812 17.6705 10.9205L10.9205 17.6705C10.4812 18.1098 9.76884 18.1098 9.3295 17.6705C8.89017 17.2312 8.89017 16.5188 9.3295 16.0795L16.0795 9.3295C16.5188 8.89017 17.2312 8.89017 17.6705 9.3295Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.3295 9.3295C9.76884 8.89017 10.4812 8.89017 10.9205 9.3295L17.6705 16.0795C18.1098 16.5188 18.1098 17.2312 17.6705 17.6705C17.2312 18.1098 16.5188 18.1098 16.0795 17.6705L9.3295 10.9205C8.89017 10.4812 8.89017 9.76884 9.3295 9.3295Z",fill:"var(--primary-color)"})]}),Xh=({children:t,mode:e,hideModal:n,modalState:r})=>{if(E.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[r]),e==="gallery")return p.jsx(se.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},className:"modal-container",children:t});if(e==="box")return p.jsx(se.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},className:"modal-container",children:p.jsxs("div",{className:"modal-box-container",children:[p.jsx("button",{className:"close-modal",onClick:n,children:p.jsx(d2,{})}),t]})});if(e==="overlay")return p.jsx(se.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},className:"modal-container",children:p.jsxs("div",{className:"modal-overlay-container",children:[p.jsx("button",{className:"close-modal",onClick:n,children:p.jsx(d2,{})}),t]})})};function Jh(t,e){E.useEffect(()=>{function n(r){t.current&&!t.current.contains(r.target)&&e()}return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[t,e])}const Wj=()=>p.jsx("svg",{width:"24",height:"18",viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.6095 0.405544C24.1302 0.94627 24.1302 1.82296 23.6095 2.36369L8.94281 17.5945C8.42211 18.1352 7.57789 18.1352 7.05719 17.5945L0.390524 10.6714C-0.130175 10.1307 -0.130175 9.25396 0.390524 8.71324C0.911223 8.17251 1.75544 8.17251 2.27614 8.71324L8 14.6572L21.7239 0.405544C22.2446 -0.135182 23.0888 -0.135182 23.6095 0.405544Z",fill:"var(--accent-color)"})}),Kj=()=>p.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6234 0.376577C18.1255 0.87868 18.1255 1.69275 17.6234 2.19485L2.19485 17.6234C1.69275 18.1255 0.87868 18.1255 0.376577 17.6234C-0.125526 17.1213 -0.125526 16.3073 0.376577 15.8051L15.8051 0.376577C16.3073 -0.125526 17.1213 -0.125526 17.6234 0.376577Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.376577 0.376577C0.87868 -0.125526 1.69275 -0.125526 2.19485 0.376577L17.6234 15.8051C18.1255 16.3073 18.1255 17.1213 17.6234 17.6234C17.1213 18.1255 16.3073 18.1255 15.8051 17.6234L0.376577 2.19485C-0.125526 1.69275 -0.125526 0.87868 0.376577 0.376577Z",fill:"var(--accent-color)"})]}),r0=({initialValue:t,submit:e,hideCustomInput:n,customClass:r,placeholder:s})=>{const[i,o]=E.useState(t),a=E.useRef(null);return Jh(a,n),p.jsx(se.div,{className:`custom-input-container ${r}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:p.jsxs("form",{onSubmit:l=>{l.preventDefault(),e(i)},ref:a,children:[p.jsx("input",{type:"text",value:i,onChange:l=>o(()=>l.target.value),placeholder:s&&s,autoFocus:!0}),p.jsxs("div",{className:"input-buttons-container",children:[p.jsx("button",{className:"submit-button",type:"submit",children:p.jsx(Wj,{})}),p.jsx("button",{className:"cancel-button",type:"button",onClick:n,children:p.jsx(Kj,{})})]})]})})},qj=({hideModal:t})=>{const{currentUser:e}=lo(),{baseName:n,lang:r}=ie(),s=Jc(),[i,o]=E.useState(!1),a=E.useRef(null),l=()=>{t(),s(`${n}profile`)},u=()=>{o(()=>!1)},c=f=>{f===""||f.length<3||f.length>100||(t(),gO(f))},h=f=>{mO(f),t()},d=()=>{t(),s(n),pO()};return Jh(a,t),p.jsxs("div",{className:"user-modal-inner",ref:a,children:[e!=null&&e.photoURL?p.jsx("div",{className:"profile-pic-container",children:p.jsx("img",{className:"profile-pic",src:e==null?void 0:e.photoURL})}):p.jsx(r3,{}),p.jsx(Rn,{children:p.jsx("div",{className:"user-name-container",children:i?p.jsx(r0,{initialValue:e==null?void 0:e.displayName,submit:c,hideCustomInput:u,customClass:"user-name-input"}):p.jsx(se.h3,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:e==null?void 0:e.displayName})})}),p.jsx("input",{type:"file",id:"file",onChange:f=>h(f.target.files[0]),hidden:!0}),p.jsxs("ul",{className:"profile-actions-container",children:[p.jsx("li",{children:p.jsx("button",{onClick:l,children:r==="en"?"Profile page":"Профиль"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>o(()=>!0),children:r==="en"?"Change username":"Изменить логин"})}),p.jsx("li",{children:p.jsx("label",{htmlFor:"file",children:r==="en"?"Change profile pic":"Изменить фото"})}),p.jsx("li",{children:p.jsx("button",{onClick:d,children:r==="en"?"Sign-Out":"Выйти"})})]})]})},Gj=()=>p.jsxs("svg",{width:"21",height:"24",viewBox:"0 0 21 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.68414 15.9341C2.76247 14.8558 4.225 14.25 5.75 14.25H15.25C16.775 14.25 18.2375 14.8558 19.3159 15.9341C20.3942 17.0125 21 18.475 21 20V22.375C21 22.9273 20.5523 23.375 20 23.375C19.4477 23.375 19 22.9273 19 22.375V20C19 19.0054 18.6049 18.0516 17.9016 17.3484C17.1984 16.6451 16.2446 16.25 15.25 16.25H5.75C4.75544 16.25 3.80161 16.6451 3.09835 17.3484C2.39509 18.0516 2 19.0054 2 20V22.375C2 22.9273 1.55228 23.375 1 23.375C0.447715 23.375 0 22.9273 0 22.375V20C0 18.475 0.605802 17.0125 1.68414 15.9341Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2C8.42893 2 6.75 3.67893 6.75 5.75C6.75 7.82107 8.42893 9.5 10.5 9.5C12.5711 9.5 14.25 7.82107 14.25 5.75C14.25 3.67893 12.5711 2 10.5 2ZM4.75 5.75C4.75 2.57436 7.32436 0 10.5 0C13.6756 0 16.25 2.57436 16.25 5.75C16.25 8.92564 13.6756 11.5 10.5 11.5C7.32436 11.5 4.75 8.92564 4.75 5.75Z",fill:"var(--primary-color)"})]}),Qj=()=>p.jsx(se.svg,{animate:{rotate:0,opacity:1},initial:{rotate:-180,opacity:0},exit:{rotate:180,opacity:0},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33316 2.02236C7.30655 0.703788 9.62663 0 12 0C12.6187 0 13.2275 0.0536869 13.7973 0.131392L16.2938 0.471819L14.2434 1.93603C13.2771 2.62602 12.555 3.60508 12.1812 4.73201C11.8074 5.85894 11.8011 7.07548 12.1634 8.20617C12.5257 9.33686 13.2378 10.3233 14.1969 11.0231C15.156 11.7229 16.3127 12.1 17.5 12.1L17.5023 12.1C18.3944 12.1021 19.2741 11.8904 20.0676 11.4828C20.8612 11.0752 21.5456 10.4835 22.0636 9.75715L23.5279 7.70391L23.8686 10.2027C23.9463 10.7725 24 11.3813 24 12C24 14.3734 23.2962 16.6934 21.9776 18.6668C20.6591 20.6402 18.7849 22.1783 16.5922 23.0865C14.3995 23.9948 11.9867 24.2324 9.65892 23.7694C7.33115 23.3064 5.19295 22.1635 3.51472 20.4853C1.83649 18.807 0.693605 16.6689 0.230582 14.3411C-0.232441 12.0133 0.00519931 9.60051 0.913451 7.4078C1.8217 5.21508 3.35977 3.34094 5.33316 2.02236ZM11.3527 2.02096C9.60259 2.13447 7.90887 2.70671 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17316C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8078C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.2932 16.0913 21.8654 14.3978 21.979 12.6478C21.6638 12.8772 21.3304 13.0826 20.9814 13.2619C19.9041 13.8152 18.71 14.1026 17.499 14.1C15.8883 14.0998 14.3192 13.5881 13.018 12.6387C11.7166 11.6891 10.7504 10.3507 10.2588 8.81643C9.76721 7.28218 9.77565 5.63144 10.2829 4.10231C10.5315 3.3528 10.8937 2.6515 11.3527 2.02096Z",fill:"#FAFAFA"})}),Yj=()=>p.jsx(se.svg,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",animate:{rotate:0,opacity:1},initial:{rotate:-180,opacity:0},exit:{rotate:180,opacity:0},xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M12 8.72727C13.8 8.72727 15.2727 10.2 15.2727 12C15.2727 13.8 13.8 15.2727 12 15.2727C10.2 15.2727 8.72727 13.8 8.72727 12C8.72727 10.2 10.2 8.72727 12 8.72727ZM12 6.54545C8.98909 6.54545 6.54545 8.98909 6.54545 12C6.54545 15.0109 8.98909 17.4545 12 17.4545C15.0109 17.4545 17.4545 15.0109 17.4545 12C17.4545 8.98909 15.0109 6.54545 12 6.54545ZM1.09091 13.0909H3.27273C3.87273 13.0909 4.36364 12.6 4.36364 12C4.36364 11.4 3.87273 10.9091 3.27273 10.9091H1.09091C0.490909 10.9091 0 11.4 0 12C0 12.6 0.490909 13.0909 1.09091 13.0909ZM20.7273 13.0909H22.9091C23.5091 13.0909 24 12.6 24 12C24 11.4 23.5091 10.9091 22.9091 10.9091H20.7273C20.1273 10.9091 19.6364 11.4 19.6364 12C19.6364 12.6 20.1273 13.0909 20.7273 13.0909ZM10.9091 1.09091V3.27273C10.9091 3.87273 11.4 4.36364 12 4.36364C12.6 4.36364 13.0909 3.87273 13.0909 3.27273V1.09091C13.0909 0.490909 12.6 0 12 0C11.4 0 10.9091 0.490909 10.9091 1.09091ZM10.9091 20.7273V22.9091C10.9091 23.5091 11.4 24 12 24C12.6 24 13.0909 23.5091 13.0909 22.9091V20.7273C13.0909 20.1273 12.6 19.6364 12 19.6364C11.4 19.6364 10.9091 20.1273 10.9091 20.7273ZM5.44364 3.90545C5.34271 3.80432 5.22283 3.72409 5.09086 3.66935C4.95889 3.6146 4.81742 3.58643 4.67455 3.58643C4.53167 3.58643 4.3902 3.6146 4.25823 3.66935C4.12626 3.72409 4.00638 3.80432 3.90545 3.90545C3.80432 4.00638 3.72409 4.12626 3.66935 4.25823C3.6146 4.3902 3.58643 4.53167 3.58643 4.67455C3.58643 4.81742 3.6146 4.95889 3.66935 5.09086C3.72409 5.22283 3.80432 5.34271 3.90545 5.44364L5.06182 6.6C5.48727 7.02545 6.18545 7.02545 6.6 6.6C7.01455 6.17455 7.02545 5.47636 6.6 5.06182L5.44364 3.90545ZM18.9382 17.4C18.8373 17.2989 18.7174 17.2186 18.5854 17.1639C18.4534 17.1091 18.312 17.081 18.1691 17.081C18.0262 17.081 17.8847 17.1091 17.7528 17.1639C17.6208 17.2186 17.5009 17.2989 17.4 17.4C17.2989 17.5009 17.2186 17.6208 17.1639 17.7528C17.1091 17.8847 17.081 18.0262 17.081 18.1691C17.081 18.312 17.1091 18.4534 17.1639 18.5854C17.2186 18.7174 17.2989 18.8373 17.4 18.9382L18.5564 20.0945C18.9818 20.52 19.68 20.52 20.0945 20.0945C20.1957 19.9936 20.2759 19.8737 20.3307 19.7418C20.3854 19.6098 20.4136 19.4683 20.4136 19.3255C20.4136 19.1826 20.3854 19.0411 20.3307 18.9091C20.2759 18.7772 20.1957 18.6573 20.0945 18.5564L18.9382 17.4ZM20.0945 5.44364C20.1957 5.34271 20.2759 5.22283 20.3307 5.09086C20.3854 4.95889 20.4136 4.81742 20.4136 4.67455C20.4136 4.53167 20.3854 4.3902 20.3307 4.25823C20.2759 4.12626 20.1957 4.00638 20.0945 3.90545C19.9936 3.80432 19.8737 3.72409 19.7418 3.66935C19.6098 3.6146 19.4683 3.58643 19.3255 3.58643C19.1826 3.58643 19.0411 3.6146 18.9091 3.66935C18.7772 3.72409 18.6573 3.80432 18.5564 3.90545L17.4 5.06182C16.9745 5.48727 16.9745 6.18545 17.4 6.6C17.8255 7.01455 18.5236 7.02545 18.9382 6.6L20.0945 5.44364ZM6.6 18.9382C6.70113 18.8373 6.78137 18.7174 6.83611 18.5854C6.89085 18.4534 6.91903 18.312 6.91903 18.1691C6.91903 18.0262 6.89085 17.8847 6.83611 17.7528C6.78137 17.6208 6.70113 17.5009 6.6 17.4C6.49908 17.2989 6.3792 17.2186 6.24723 17.1639C6.11526 17.1091 5.97378 17.081 5.83091 17.081C5.68803 17.081 5.54656 17.1091 5.41459 17.1639C5.28262 17.2186 5.16274 17.2989 5.06182 17.4L3.90545 18.5564C3.48 18.9818 3.48 19.68 3.90545 20.0945C4.33091 20.5091 5.02909 20.52 5.44364 20.0945L6.6 18.9382Z",fill:"#262626"})}),Xj=()=>p.jsxs("svg",{width:"47",height:"23",viewBox:"0 0 47 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4 2.2876C6.20852 2.2876 2 6.49612 2 11.6876C2 16.8791 6.20852 21.0876 11.4 21.0876C16.5915 21.0876 20.8 16.8791 20.8 11.6876C20.8 6.49612 16.5915 2.2876 11.4 2.2876ZM0 11.6876C0 5.39155 5.10395 0.287598 11.4 0.287598C17.696 0.287598 22.8 5.39155 22.8 11.6876C22.8 17.9836 17.696 23.0876 11.4 23.0876C5.10395 23.0876 0 17.9836 0 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11.6875C0 11.1352 0.447715 10.6875 1 10.6875H21.8C22.3523 10.6875 22.8 11.1352 22.8 11.6875C22.8 12.2398 22.3523 12.6875 21.8 12.6875H1C0.447715 12.6875 0 12.2398 0 11.6875Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4001 0.287598C11.681 0.287598 11.949 0.405758 12.1385 0.613175C14.9033 3.64004 16.4745 7.56813 16.5599 11.6668C16.5602 11.6807 16.5602 11.6945 16.5599 11.7084C16.4745 15.8071 14.9033 19.7352 12.1385 22.762C11.949 22.9694 11.681 23.0876 11.4001 23.0876C11.1192 23.0876 10.8512 22.9694 10.6618 22.762C7.89695 19.7352 6.32572 15.8071 6.24033 11.7084C6.24004 11.6945 6.24004 11.6807 6.24033 11.6668C6.32572 7.56813 7.89695 3.64004 10.6618 0.613175C10.8512 0.405758 11.1192 0.287598 11.4001 0.287598ZM8.24034 11.6876C8.31201 14.9116 9.42629 18.0149 11.4001 20.5399C13.3739 18.0149 14.4882 14.9116 14.5599 11.6876C14.4882 8.4636 13.3739 5.3603 11.4001 2.83534C9.42629 5.3603 8.31201 8.4636 8.24034 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M36.1119 12.6159C36.1119 12.6692 36.0959 12.9519 36.0639 13.4639H29.9839C30.1119 13.7946 30.3253 14.0506 30.6239 14.2319C30.9226 14.4026 31.2959 14.4879 31.7439 14.4879C32.1279 14.4879 32.4479 14.4399 32.7039 14.3439C32.9706 14.2479 33.2586 14.0826 33.5679 13.8479L35.4559 15.7519C34.6026 16.6906 33.3279 17.1599 31.6319 17.1599C30.5759 17.1599 29.6479 16.9679 28.8479 16.5839C28.0479 16.1892 27.4293 15.6452 26.9919 14.9519C26.5546 14.2586 26.3359 13.4799 26.3359 12.6159C26.3359 11.7412 26.5493 10.9626 26.9759 10.2799C27.4133 9.58656 28.0053 9.04789 28.7519 8.66389C29.5093 8.27989 30.3573 8.08789 31.2959 8.08789C32.1813 8.08789 32.9866 8.26389 33.7119 8.61589C34.4479 8.96789 35.0293 9.48522 35.4559 10.1679C35.8933 10.8506 36.1119 11.6666 36.1119 12.6159ZM31.3279 10.5519C30.9546 10.5519 30.6453 10.6532 30.3999 10.8559C30.1546 11.0586 29.9946 11.3466 29.9199 11.7199H32.7359C32.6613 11.3572 32.5013 11.0746 32.2559 10.8719C32.0106 10.6586 31.7013 10.5519 31.3279 10.5519Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M43.3331 8.08789C44.4104 8.08789 45.2744 8.41322 45.9251 9.06389C46.5864 9.71456 46.9171 10.6959 46.9171 12.0079V16.9999H43.3011V12.6319C43.3011 11.6292 42.9437 11.1279 42.2291 11.1279C41.8237 11.1279 41.4931 11.2719 41.2371 11.5599C40.9917 11.8372 40.8691 12.2799 40.8691 12.8879V16.9999H37.2531V8.24789H40.6931V9.11189C41.0344 8.77056 41.4291 8.51456 41.8771 8.34389C42.3251 8.17322 42.8104 8.08789 43.3331 8.08789Z",fill:"var(--primary-color)"})]}),Jj=()=>p.jsxs("svg",{width:"47",height:"23",viewBox:"0 0 47 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4 2.2876C6.20852 2.2876 2 6.49612 2 11.6876C2 16.8791 6.20852 21.0876 11.4 21.0876C16.5915 21.0876 20.8 16.8791 20.8 11.6876C20.8 6.49612 16.5915 2.2876 11.4 2.2876ZM0 11.6876C0 5.39155 5.10395 0.287598 11.4 0.287598C17.696 0.287598 22.8 5.39155 22.8 11.6876C22.8 17.9836 17.696 23.0876 11.4 23.0876C5.10395 23.0876 0 17.9836 0 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11.6875C0 11.1352 0.447715 10.6875 1 10.6875H21.8C22.3523 10.6875 22.8 11.1352 22.8 11.6875C22.8 12.2398 22.3523 12.6875 21.8 12.6875H1C0.447715 12.6875 0 12.2398 0 11.6875Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4001 0.287598C11.681 0.287598 11.949 0.405758 12.1385 0.613175C14.9033 3.64004 16.4745 7.56813 16.5599 11.6668C16.5602 11.6807 16.5602 11.6945 16.5599 11.7084C16.4745 15.8071 14.9033 19.7352 12.1385 22.762C11.949 22.9694 11.681 23.0876 11.4001 23.0876C11.1192 23.0876 10.8512 22.9694 10.6618 22.762C7.89695 19.7352 6.32572 15.8071 6.24033 11.7084C6.24004 11.6945 6.24004 11.6807 6.24033 11.6668C6.32572 7.56813 7.89695 3.64004 10.6618 0.613175C10.8512 0.405758 11.1192 0.287598 11.4001 0.287598ZM8.24034 11.6876C8.31201 14.9116 9.42629 18.0149 11.4001 20.5399C13.3739 18.0149 14.4882 14.9116 14.5599 11.6876C14.4882 8.4636 13.3739 5.3603 11.4001 2.83534C9.42629 5.3603 8.31201 8.4636 8.24034 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M32.24 9.19189C32.88 8.45589 33.824 8.08789 35.072 8.08789V11.2879C34.784 11.2452 34.5174 11.2239 34.272 11.2239C33.0347 11.2239 32.416 11.8532 32.416 13.1119V16.9999H28.8V8.24789H32.24V9.19189Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M45.6649 8.24789V16.9999H42.2249V16.1679C41.9049 16.4986 41.5316 16.7492 41.1049 16.9199C40.6783 17.0799 40.2249 17.1599 39.7449 17.1599C38.6356 17.1599 37.7449 16.8239 37.0729 16.1519C36.4009 15.4692 36.0649 14.4452 36.0649 13.0799V8.24789H39.6809V12.4559C39.6809 13.0532 39.7769 13.4799 39.9689 13.7359C40.1609 13.9919 40.4436 14.1199 40.8169 14.1199C41.1689 14.1199 41.4623 13.9812 41.6969 13.7039C41.9316 13.4159 42.0489 12.9679 42.0489 12.3599V8.24789H45.6649Z",fill:"var(--primary-color)"})]}),Zj=()=>{const{baseName:t,lang:e,dispatch:n}=ie(),{currentUser:r}=lo(),[s,i]=E.useState(!1),[o,a]=E.useState(()=>AO()),l=()=>{i(()=>!1)};E.useEffect(()=>{document.documentElement.setAttribute("data-theme",o),localStorage.setItem("theme",o)},[o]);const u=()=>{a(o==="dark"?()=>"light":"dark")},c=()=>{e==="ru"?(n({type:"SET_LANG",payload:"en"}),localStorage.setItem("FBlang","en")):(n({type:"SET_LANG",payload:"ru"}),localStorage.setItem("FBlang","ru"))};return p.jsxs(p.Fragment,{children:[p.jsx(Rn,{children:s&&p.jsx(Xh,{hideModal:l,mode:"box",modalState:s,children:p.jsx(qj,{hideModal:l})})}),p.jsxs("div",{className:"header-icons-container",children:[r?p.jsx("button",{onClick:()=>i(()=>!0),children:r.photoURL?p.jsx("div",{className:"profile-pic-container",children:p.jsx("img",{className:"profile-pic",src:r==null?void 0:r.photoURL})}):p.jsx(r3,{})}):p.jsx(fg,{to:"auth",children:p.jsx(Gj,{})}),p.jsx("a",{href:"#",onClick:u,className:"theme-icons-container",children:p.jsx(Rn,{children:o==="dark"?p.jsx(Qj,{},"dark-mode-icon"):p.jsx(Yj,{},"light-mode-icon")})}),p.jsx("button",{href:"#",onClick:c,children:e==="en"?p.jsx(Xj,{}):p.jsx(Jj,{})})]})]})},eF=()=>{const{currentTitle:t}=ie();return p.jsx("div",{className:"title-container",children:p.jsx("h2",{className:"title-heading",children:t})})},tF=()=>{const{baseName:t}=ie(),{pathname:e}=Ms();return p.jsxs("header",{className:"header-container",children:[p.jsx(xO,{}),e===t?p.jsx(IO,{}):p.jsx(eF,{}),p.jsx(RO,{}),p.jsx(Zj,{})]})},nF=()=>p.jsxs("div",{className:"page-wrapper",children:[p.jsx("div",{className:"bg-noise-container"}),p.jsx(tF,{}),p.jsx(Sk,{})]}),rF="https://api.themoviedb.org/3",sF="api_key=582f9e2d6f3a1dc803b350bf76f168f2",iF=(t,e)=>{const[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,a]=E.useState({show:!1,message:""}),l=E.useCallback(async(u,c)=>{i(!0);try{const{data:h}=await Ar(`${rF}/genre/${u}/list?${sF}&language=${c}`),d={id:"all",name:c==="ru"?"Все":"All"};r(()=>[d,...h.genres]),i(!1)}catch(h){a({show:!0,message:h.message}),i(!1)}},[]);return E.useEffect(()=>{l(t,e)},[t,e,l]),{isLoading:s,error:o,data:n}},gn=({errorMessage:t,componentMessage:e,showImage:n,fullHeight:r})=>{const{baseName:s}=ie();return p.jsxs("div",{className:`error-message-container ${r?"full-height":""}`,children:[n&&p.jsx(se.img,{animate:{y:[15,0,15]},transition:{repeat:"loop",duration:4},src:`${s}assets/images/void.png`,alt:"error"}),p.jsxs("h3",{children:[e&&`${e}:`," ",p.jsx("span",{children:t})]})]})},oF=()=>{const{filterGenre:t,lang:e,mediaType:n,dispatch:r}=ie(),{isLoading:s,error:i,data:o}=iF(n,e),[a,l]=E.useState(0),u=Yh(),c=E.useRef(null);E.useEffect(()=>{c.current&&l(()=>c.current.scrollWidth)},[o,a,u]);const h=(d,f)=>{r({type:"SET_FILTER_GENRE",payload:`${f}`}),u.start({x:a/2-d.offsetLeft-d.scrollWidth,transition:{stiffness:50,type:"spring"}})};return s?p.jsx("div",{className:"genres-list-container",children:p.jsx("h3",{children:e==="ru"?"Загрузка списка жанров":"Loading..."})}):i.show?p.jsx("div",{className:"genres-list-container",children:p.jsx(gn,{errorMessage:i.message,componentMessage:e==="en"?"Fail to load genres list":"Ошибка при загрузке списка жанров",showImage:!1})}):p.jsx("div",{className:"genres-list-container",children:p.jsx(se.ul,{ref:c,drag:"x",dragConstraints:{left:a/2*-1,right:a/2},animate:u,transition:{stiffness:100,type:"spring"},initial:{x:"50%"},children:o.map(d=>p.jsx("li",{onClick:f=>h(f.target,d.id),className:t===`${d.id}`?"active":"",children:`${d.name[0].toUpperCase()}${d.name.slice(1)}`},d.id))})})},aF={ru:[{upcoming:"Скоро"},{now_playing:"Сейчас в кинотеатрах"},{popular:"Популярные"},{top_rated:"По рейтингу"}],en:[{upcoming:"Upcoming"},{now_playing:"Now playing"},{popular:"Popular"},{top_rated:"Top rated"}]},lF={ru:[{on_the_air:"Сейчас в эфире"},{popular:"Популярные"},{top_rated:"По рейтингу"}],en:[{on_the_air:"Now playing"},{popular:"Popular"},{top_rated:"Top rated"}]},uF=()=>{const{mediaType:t,filterList:e,lang:n,dispatch:r}=ie(),s=t==="movie"?aF[n]:lF[n];return p.jsx("div",{className:"lists-container",children:p.jsx("ul",{children:s.map((i,o)=>{const a=Object.keys(i)[0],l=Object.values(i)[0];return p.jsx("li",{onClick:()=>r({type:"SET_FILTER_LIST",payload:a}),className:e===a?"active":"",children:l},o)})})})};function s3(){const[t,e]=E.useState(()=>n());function n(r){if(r)e(()=>r.target.innerWidth<=768?"mobile":"desktop");else return window.innerWidth<=768?"mobile":"desktop"}return E.useEffect(()=>(window.addEventListener("resize",n),()=>{document.removeEventListener("resize",n)}),[]),t}const cF=()=>p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11C20 6.02944 15.9706 2 11 2ZM0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11Z",fill:"#fafafa"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7069 7.29265C15.0974 7.68317 15.0974 8.31634 14.7069 8.70686L8.70686 14.7069C8.31634 15.0974 7.68317 15.0974 7.29265 14.7069C6.90212 14.3163 6.90212 13.6832 7.29265 13.2926L13.2926 7.29265C13.6832 6.90212 14.3163 6.90212 14.7069 7.29265Z",fill:"#fafafa"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29265 7.29265C7.68317 6.90212 8.31634 6.90212 8.70686 7.29265L14.7069 13.2926C15.0974 13.6832 15.0974 14.3163 14.7069 14.7069C14.3163 15.0974 13.6832 15.0974 13.2926 14.7069L7.29265 8.70686C6.90212 8.31634 6.90212 7.68317 7.29265 7.29265Z",fill:"#fafafa"})]}),s0=({title:t,poster:e,id:n,mediaType:r,isDrag:s,removeItemButton:i,listIndex:o})=>{const[a,l]=E.useState(!0),[u,c]=E.useState(!1),h=s3(),{baseName:d}=ie(),f=()=>{l(!1)};return p.jsxs(se.div,{layout:!0,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},whileHover:{scale:h==="desktop"?1.05:1,zIndex:999},onHoverStart:()=>i?c(()=>!0):null,onHoverEnd:()=>i?c(()=>!1):null,className:"movie-container",children:[p.jsxs(fg,{style:{pointerEvents:s?"none":""},to:`${d}${r}/${n}`,draggable:"false",children:[p.jsxs("div",{className:"movie-poster-container",children:[p.jsx(se.img,{initial:{opacity:0},animate:{opacity:a?0:1},transition:{opacity:{delay:.3,duration:.3}},onLoad:f,src:e,alt:t}),p.jsx(se.div,{initial:{opacity:.5},animate:{opacity:a?.5:0},transition:{opacity:{delay:.3,duration:.3}},className:"img-loading-container"})]}),p.jsx("div",{className:"movie-title-container",children:p.jsx("h3",{children:t})})]}),i&&!a&&(u||h==="mobile")&&p.jsx("button",{className:"remove-item-button",onClick:()=>{console.log(1),Ox(o,n,r)},children:p.jsx(cF,{})})]})},Ha=()=>p.jsx("div",{className:"loader-container",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[p.jsx("circle",{cx:"30",cy:"50",fill:"#ff6699",r:"20",children:p.jsx("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.5;1",values:"30;70;30",begin:"-0.5s"})}),p.jsx("circle",{cx:"70",cy:"50",style:{fill:"var(--primary-color)"},r:"20",children:p.jsx("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.5;1",values:"30;70;30",begin:"0s"})}),p.jsxs("circle",{cx:"30",cy:"50",fill:"#ff6699",r:"20",children:[p.jsx("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.5;1",values:"30;70;30",begin:"-0.5s"}),p.jsx("animate",{attributeName:"fill-opacity",values:"0;0;1;1",calcMode:"discrete",keyTimes:"0;0.499;0.5;1",dur:"1s",repeatCount:"indefinite"})]})]})}),i3=()=>{const{moviesFetchLoading:t,moviesFetchError:e,dispatch:n,moviesList:r,page:s,totalPages:i}=ie(),o=E.useCallback(()=>{if(s<i&&window.innerHeight+window.scrollY>=document.body.scrollHeight-100){const a=s+1;n({type:"INCREASE_PAGE",payload:a})}},[n,s,i]);return E.useEffect(()=>{if(!e.show)return i>1&&window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[e,i,o]),e.show?p.jsx(gn,{errorMessage:e.message,componentMessage:"Ошибка при загрузке списка",showImage:!0}):p.jsxs(p.Fragment,{children:[p.jsx(se.div,{layout:!0,layoutRoot:!0,className:"movies-list-container",children:r.map(({posterUrl:a,title:l,id:u,mediaType:c})=>(l.length>35&&(l=l.slice(0,35)+"..."),p.jsxs(Rn,{children:[p.jsx(s0,{poster:a,title:l,id:u,mediaType:c}),";"]},u)))}),t&&p.jsx(Ha,{})]})},hF=()=>{const{moviesListMode:t,searchQuery:e,dispatch:n,setCurrentTitle:r}=ie();return E.useEffect(()=>{t!=="home"&&n({type:"SET_HOME_MODE"}),r(()=>"")},[e,n,t,r]),p.jsxs("section",{className:"section-home",children:[p.jsx(uF,{}),p.jsx(oF,{}),p.jsx(i3,{})]})};class dF{constructor(e,n,r,s){this.fetchedData=e,this.lang=n,this.mediaType=s,this.title=this.fetchedData.title?this.fetchedData.title:this.fetchedData.name,this.poster=e.poster_path?`${r}${e.poster_path}`:"/projects/films_base/assets/images/no-poster.jpg",this.data=this.mediaType==="movie"?this.getMovieData():this.getTVSeriesData(),this.description=this.fetchedData.overview}getMovieData(){return[...this.fetchedData.release_date?[{[`${this.lang==="en"?"Release date":"Дата выхода"}`]:this.getReleaseDate(this.fetchedData.release_date,this.lang)}]:[],...this.fetchedData.genres.length>0?[{[`${this.lang==="en"?"Genres":"Жанр"}`]:this.getGenresList()}]:[],...this.fetchedData.production_countries.length>0?[{[`${this.lang==="en"?"Country":"Страна"}`]:this.getCountriesList()}]:[],...this.fetchedData.budget?[{[`${this.lang==="en"?"Budget":"Бюджет"}`]:this.getBudgetString(this.fetchedData.budget)}]:[],...this.fetchedData.revenue?[{[`${this.lang==="en"?"Revenue":"Сборы"}`]:this.getBudgetString(this.fetchedData.revenue)}]:[],...this.fetchedData.runtime?[{[`${this.lang==="en"?"Runtime":"Продолжительность"}`]:this.getRuntime(this.fetchedData.runtime)}]:[],...this.fetchedData.vote_average?[{[`${this.lang==="en"?"TMDB Rating":"Рейтинг TMDB"}`]:this.fetchedData.vote_average}]:[]]}getTVSeriesData(){return[...this.fetchedData.first_air_date?[{[`${this.lang==="en"?"Release date":"Дата выхода"}`]:this.getReleaseDate(this.fetchedData.first_air_date)}]:[],...this.fetchedData.genres.length>0?[{[`${this.lang==="en"?"Genres":"Жанр"}`]:this.getGenresList()}]:[],...this.fetchedData.production_countries.length>0?[{[`${this.lang==="en"?"Country":"Страна"}`]:this.getCountriesList()}]:[],...this.fetchedData.number_of_seasons?[{[`${this.lang==="en"?"Total Seasons":"Всего сезонов"}`]:this.fetchedData.number_of_seasons}]:[],...this.fetchedData.number_of_episodes?[{[`${this.lang==="en"?"Total episodes":"Серий"}`]:this.fetchedData.number_of_episodes}]:[],...this.fetchedData.vote_average?[{[`${this.lang==="en"?"TMDB Rating":"Рейтинг TMDB"}`]:this.fetchedData.vote_average}]:[]]}getCountriesList(){return this.fetchedData.production_countries.reduce((e,n,r)=>r===0?this.getCountryName(n.iso_3166_1,this.lang):`${e}, ${this.getCountryName(n.iso_3166_1,this.lang)}`,"")}getCountryName(e){return new Intl.DisplayNames([this.lang],{type:"region"}).of(e)}getReleaseDate(e){const n=new Date(e),r=n.getDay()+1;let s=this.getMonths(this.lang)[n.getMonth()];this.lang==="ru"&&(s=s[s.length-1]==="ь"||s[s.length-1]==="й"?s.slice(0,-1)+"я":s+"а");const i=n.getFullYear();return this.lang==="en"?`${s} ${r}, ${i}`:`${r} ${s} ${i} г.`}getMonths(){return Array.from({length:12},(e,n)=>new Intl.DateTimeFormat(this.lang,{month:"long"}).format(new Date(0,n)))}getGenresList(){return this.fetchedData.genres.reduce((e,n,r)=>r===0?n.name[0].toUpperCase()+n.name.slice(1):`${e}, ${n.name}`,"")}getBudgetString(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}getRuntime(e){const n=Math.floor(e/60),r=e%60;let s,i;if(this.lang==="ru"){const o=String(n),a=String(r);return o[o.length-1]==="1"?s="час":Number(o[o.length-1])>1&&Number(o[o.length-1])<5?s="часа":s="часов",a[a.length-1]==="1"?i="минута":Number(a[a.length-1])>1&&Number(a[a.length-1])<5?i="минуты":i="минут",(a==="11"||a==="12"||a==="13"||a==="14")&&(i="минут"),n===0?`${a} ${i}`:r===0?`${o} ${s}`:`${o} ${s} ${a} ${i}`}if(this.lang==="en")return n===1?s="hour":s="hours",r===1?i="minute":i="minutes",n===0?`${r} ${i}`:`${n} ${s} ${r} ${i}`}}const pf="https://api.themoviedb.org/3",mf="api_key=582f9e2d6f3a1dc803b350bf76f168f2",f2="https://image.tmdb.org/t/p/w1280",fF=(t,e,n)=>{const[r,s]=E.useState([]),[i,o]=E.useState(!0),[a,l]=E.useState({show:!1,message:""}),[u,c]=E.useState([]),[h,d]=E.useState({show:!1,message:""}),[f,g]=E.useState([]),[w,S]=E.useState({show:!1,message:""}),v=E.useCallback(async(m,y,C)=>{o(!0),g(()=>[]),s(()=>[]),c(()=>[]);try{const{data:T}=await Ar(`${pf}/${m}/${C}?${mf}&language=${y}`);s(()=>new dF(T,y,f2,m))}catch(T){l(()=>({show:!0,message:T.message}))}try{const{data:{backdrops:T}}=await Ar(`${pf}/${m}/${C}/images?${mf}`),k=[];T.length>20&&T.splice(20),T.forEach(I=>{k.push(f2+I.file_path)}),c(()=>k)}catch(T){d(()=>({show:!0,message:T.message}))}try{const{data:{results:T}}=await Ar(`${pf}/${m}/${C}/videos?${mf}&language=${y}`);if(T.length!==0){const k=[],I=T.filter(x=>x.type==="Trailer"&&x.site==="YouTube");I.length!==0&&I.forEach(x=>{k.push(x.key)}),g(()=>k)}}catch(T){S(()=>({show:!0,message:T.message}))}o(!1)},[]);return E.useEffect(()=>{v(t,e,n)},[t,e,n,v]),{isLoading:i,dataError:a,imagesError:h,videosError:w,data:r,images:u,videos:f}},pF=({openModal:t,imagesArray:e})=>{const[n,r]=E.useState([]),[s,i]=E.useState(0),[o,a]=E.useState(0),[l,u]=E.useState(!1),[c,h]=E.useState(!0),d=Yh(),f=E.useRef(null);E.useEffect(()=>{r(()=>e),e.length===0&&h(!1)},[e]),E.useEffect(()=>{s===n.length&&(a(()=>f.current.scrollWidth),o!==0&&(d.start({opacity:1,x:n.length>4?-Math.floor(o/n.length/2):0,transition:{duration:1}}),h(()=>!1)))},[s,n.length,d,o]);const g=w=>{s===n.length&&t(n,w)};return p.jsxs("div",{className:"gallery-container",children:[p.jsx(se.div,{ref:f,drag:"x",dragConstraints:{left:(o-o/n.length)*-1,right:0},onDrag:()=>u(()=>!0),onDragEnd:()=>u(()=>!1),className:"gallery-wrapper",animate:d,initial:{opacity:0},children:n.map((w,S)=>p.jsx("div",{className:"gallery-image-container",onClick:()=>g(S),style:{pointerEvents:l?"none":""},children:p.jsx("img",{src:w,alt:"img",onLoad:()=>{i(v=>v+1)}})},S))}),p.jsx(se.div,{initial:{opacity:1},animate:{opacity:c?1:0},transition:{opacity:{delay:.3,duration:.3}},className:"gallery-loading-container"})]})},mF=({image:t})=>{const[e,n]=E.useState(!0),r=()=>{n(!1)};return p.jsxs("div",{className:"movie-poster-container",children:[p.jsx(se.img,{animate:{opacity:e?0:1},initial:{opacity:0},transition:{opacity:{delay:.3,duration:.3}},onLoad:r,src:t,alt:"poster"}),p.jsx(se.div,{initial:{opacity:1},animate:{opacity:e?1:0},transition:{opacity:{delay:.3,duration:.3}},className:"img-loading-container"})]})},gF=({videoKey:t})=>{const[e,n]=E.useState(!0),r=()=>{n(()=>!1)};return p.jsxs("div",{className:"movie-video-container",children:[p.jsx(se.iframe,{animate:{opacity:e?0:1},initial:{opacity:0},src:`https://www.youtube.com/embed/${t}`,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",onLoad:()=>r(),allowFullScreen:!0}),p.jsx(se.div,{className:"video-loading-container",animate:{opacity:e?1:0},initial:{opacity:1}})]})},yF=({hideModal:t,changeModalImage:e,control:n,modal:r})=>p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"modal-index-controls",onClick:s=>t(s.target),children:[p.jsx("div",{className:"prev-btn",onClick:()=>{e("prev")},children:p.jsx("svg",{width:"30",height:"36",viewBox:"0 0 30 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M-8.74228e-07 18L30 0.679488L30 35.3205L-8.74228e-07 18Z",fill:"var(--primary-color)"})})}),p.jsx("div",{className:"next-btn",onClick:()=>{e("next")},children:p.jsx("svg",{width:"30",height:"36",viewBox:"0 0 30 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M30 18L4.45043e-07 35.3205L3.19526e-08 0.679491L30 18Z",fill:"var(--primary-color)"})})})]}),p.jsx(se.div,{className:"modal-images-wrapper",animate:n,initial:{x:`-${r.imageIndex*100}%`},transition:{stiffness:50,type:"spring"},children:r.imagesArray})]}),vF=()=>p.jsx("svg",{width:"18",height:"23",viewBox:"0 0 18 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.375 2.3C3.07663 2.3 2.79048 2.42116 2.5795 2.63683C2.36853 2.85249 2.25 3.145 2.25 3.45V19.6153L8.34611 15.1642C8.73727 14.8786 9.26273 14.8786 9.65389 15.1642L15.75 19.6153V3.45C15.75 3.145 15.6315 2.85249 15.4205 2.63683C15.2095 2.42116 14.9234 2.3 14.625 2.3H3.375ZM0.988515 1.01048C1.62145 0.363481 2.47989 0 3.375 0H14.625C15.5201 0 16.3785 0.363481 17.0115 1.01048C17.6444 1.65748 18 2.535 18 3.45V21.85C18 22.2808 17.7645 22.6754 17.3898 22.8725C17.0151 23.0697 16.564 23.0362 16.2211 22.7858L9 17.5132L1.77889 22.7858C1.43598 23.0362 0.984926 23.0697 0.610221 22.8725C0.235516 22.6754 0 22.2808 0 21.85V3.45C0 2.535 0.355579 1.65748 0.988515 1.01048Z",fill:"var(--primary-color)"})}),wF=()=>p.jsx("svg",{width:"19",height:"23",viewBox:"0 0 19 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M3.89995 0C2.98495 0 2.10743 0.363481 1.46043 1.01048C0.813432 1.65748 0.449951 2.535 0.449951 3.45V21.85C0.449951 22.2808 0.690701 22.6754 1.07373 22.8725C1.45676 23.0697 1.91784 23.0362 2.26838 22.7858L9.64995 17.5132L17.0315 22.7858C17.3821 23.0362 17.8431 23.0697 18.2262 22.8725C18.6092 22.6754 18.85 22.2808 18.85 21.85V3.45C18.85 2.535 18.4865 1.65748 17.8395 1.01048C17.1925 0.363481 16.3149 0 15.4 0H3.89995Z",fill:"var(--primary-color)"})}),EF=({hideModal:t,title:e,userLists:n,currentMovieData:r})=>{const{lang:s}=ie(),{id:i,mediaType:o}=r,a=E.useRef(null);return Jh(a,t),p.jsxs("div",{className:"user-lists-widget-inner",ref:a,children:[s==="en"?p.jsxs("h3",{children:["Add ",`«${e}»`," to list..."]}):p.jsxs("h3",{children:["Добавить ",`«${e}»`," в список..."]}),p.jsx("div",{className:"user-lists-widget-container",children:p.jsx("ul",{className:"user-lists-widget",children:n.map(({data:l,title:u},c)=>{const h=l.some(d=>d.id===i);return p.jsxs("li",{className:"user-list-item",children:[p.jsx("div",{className:"user-list-title",children:p.jsx("span",{children:u})}),h?p.jsx("button",{onClick:()=>Ox(c,i,o),children:p.jsx(wF,{})}):p.jsx("button",{onClick:()=>CO(c,i,o),children:p.jsx(vF,{})})]},c)})})})]})},i0=()=>p.jsxs("svg",{width:"20",height:"28",viewBox:"0 0 20 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M15 27.5V7.5C15 6.12125 13.8787 5 12.5 5H2.5C1.12125 5 0 6.12125 0 7.5V27.5L7.5 22.9987L15 27.5Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M13.2325 2.5H15C16.3787 2.5 17.5 3.62125 17.5 5V18.0537L20 21.165V2.5C20 1.12125 18.8787 0 17.5 0H7.5C6.12125 0 5 1.12125 5 2.5H13.2325Z",fill:"var(--primary-color)"})]}),CF=({id:t,mediaType:e,title:n})=>{const{currentUser:r}=lo(),{lang:s}=ie(),[i,o]=E.useState(!1),[a,l]=E.useState([]),u=()=>{o(()=>!1)};return E.useEffect(()=>dx(Qr(Yr,"users",r.uid),h=>{l(h.data().userLists)}),[r]),p.jsxs(p.Fragment,{children:[p.jsx(Rn,{children:i&&p.jsx(Xh,{mode:"box",hideModal:u,modalState:i,children:p.jsx(EF,{hideModal:u,title:n,userLists:a,currentMovieData:{id:t,mediaType:e}})})}),p.jsxs("div",{className:"add-to-user-list-container",onClick:()=>o(()=>!0),children:[p.jsx("h3",{children:s==="en"?"Add to list":"Добавить в список"}),p.jsx(i0,{})]})]})},SF="https://api.themoviedb.org/3",TF="api_key=582f9e2d6f3a1dc803b350bf76f168f2",_F="https://image.tmdb.org/t/p/w300",xF=(t,e,n)=>{const[r,s]=E.useState(!0),[i,o]=E.useState({show:!1,message:""}),[a,l]=E.useState([]),u=E.useCallback(async c=>{s(!0),o({show:!1,message:""});try{const h=await Ar(`${SF}/${n}/${e}/similar?${TF}&language=${c}`),d=[];h.data.results.forEach(f=>{d.push(new wg(_F,f,n))}),l(()=>d),s(!1)}catch(h){o({show:!0,message:h.message}),s(!1)}},[e,n]);return E.useEffect(()=>{u(t)},[u,t]),{data:a,isLoading:r,error:i}},IF=({itemID:t,itemMediaType:e})=>{const{lang:n}=ie(),[r,s]=E.useState(0),[i,o]=E.useState(!1),a=E.useRef(null),l=Yh(),{data:u,isLoading:c,error:h}=xF(n,t,e);return E.useEffect(()=>{a.current&&(s(()=>a.current.scrollWidth),l.start({x:0}))},[u,l,r]),h.show?p.jsx(gn,{errorMessage:h.message,componentMessage:"Ошибка при загрузке списка",showImage:!0}):c?p.jsx(Ha,{}):p.jsxs("div",{className:"similar-movies-list-wrapper",children:[u.length>0&&p.jsx("h2",{children:n==="en"?"Similar":"Похожие"}),p.jsx(se.div,{layout:!0,layoutRoot:!0,className:"movies-list-container similar",drag:"x",dragConstraints:{left:r/1.2*-1,right:r/1.2},animate:l,initial:{x:"50%"},ref:a,onDrag:()=>o(()=>!0),onDragEnd:()=>o(()=>!1),children:u.map(({posterUrl:d,title:f,id:g,mediaType:w})=>(f.length>35&&(f=f.slice(0,35)+"..."),p.jsx(s0,{poster:d,title:f,id:g,mediaType:w,isDrag:i},g)))})]})},p2=()=>{const{setCurrentTitle:t,lang:e}=ie(),{currentUser:n}=lo(),{id:r}=OC(),s=Ms(),i=s.pathname.split("/")[3],[o,a]=E.useState({show:!1,imagesArray:[],imageIndex:0}),l=Yh(),{data:u,images:c,videos:h,dataError:d,imagesError:f,videosError:g,isLoading:w}=fF(i,e,r),{data:S,description:v,title:m,poster:y}=u;E.useEffect(()=>{window.scrollTo(0,0)},[s.pathname]),E.useEffect(()=>{w?t(()=>""):d.show?t(d.message):t(m)},[m,t,w,e,d]),E.useEffect(()=>{l.start({x:`-${o.imageIndex*100}%`})},[o.imageIndex,l]);const C=(I,x)=>{a(()=>({show:!0,imagesArray:I.map(($,de)=>p.jsx("div",{className:"modal-image-container",children:p.jsx("img",{src:$,alt:"gallery-image"})},de)),imageIndex:x}))},T=I=>{I.classList.contains("modal-index-controls")&&a(x=>({...x,show:!1}))},k=I=>{let x;I==="next"?x=o.imageIndex===o.imagesArray.length-1?0:o.imageIndex+1:x=o.imageIndex===0?o.imagesArray.length-1:o.imageIndex-1,a(M=>({...M,imageIndex:x}))};return w?p.jsx(Ha,{}):p.jsxs("section",{className:"section-single-movie",children:[p.jsx(Rn,{children:o.show&&p.jsx(Xh,{mode:"gallery",children:p.jsx(yF,{hideModal:T,changeModalImage:k,control:l,modal:o})})}),p.jsxs("div",{className:"movie-wrapper",children:[p.jsxs("div",{className:"left-col",children:[d.show?p.jsx(gn,{errorMessage:d.message,componentMessage:"Ошибка при загрузке данных",showImage:!0}):p.jsx(mF,{image:y}),g.show?p.jsx(gn,{errorMessage:g.message,componentMessage:"Ошибка при загрузке видео",showImage:!0}):h.map((I,x)=>p.jsx(gF,{videoKey:I},x))]}),p.jsxs("div",{className:"right-col",children:[n&&p.jsx(CF,{id:r,mediaType:i,title:m}),p.jsx("div",{className:"data-container",children:d.show?p.jsx(gn,{errorMessage:d.message,componentMessage:"Ошибка при загрузке данных",showImage:!1}):S.map((I,x)=>{const[M,$]=Object.entries(I)[0];return p.jsxs("div",{className:"data-item",children:[p.jsx("span",{className:"label",children:M}),p.jsx("span",{className:"data-info",children:$})]},x)})}),p.jsx("div",{className:"description-container",children:p.jsx("p",{children:v})}),f.show?p.jsx(gn,{errorMessage:g.message,componentMessage:"Ошибка при загрузке галереи",showImage:!0}):p.jsx(pF,{openModal:C,imagesArray:c})]})]}),p.jsx(E.Suspense,{fallback:p.jsx(Ha,{}),children:p.jsx(IF,{itemID:r,itemMediaType:i})})]})},kF=()=>{const{setCurrentTitle:t,dispatch:e,moviesListMode:n}=ie(),{query:r}=OC();return E.useEffect(()=>{t(r),e({type:"SET_SEARCH_MODE",payload:r})},[r,t,e,n]),p.jsx("section",{className:"section-search-results",children:p.jsx(i3,{})})},RF=({activeMode:t,setActiveMode:e})=>{const{lang:n}=ie();return p.jsxs("div",{className:"auth-mode-container",children:[p.jsx("div",{className:`sign-in ${t==="sign-in"?"active":""}`,onClick:()=>e("sign-in"),children:p.jsx("h3",{children:n==="en"?"Sign-In":"Вход"})}),p.jsx("div",{className:"divider",children:p.jsx("h3",{children:"|"})}),p.jsx("div",{className:`sign-up ${t==="sign-up"?"active":""}`,onClick:()=>e("sign-up"),children:p.jsx("h3",{children:n==="en"?"Sign-Up":"Регистрация"})})]})},fi=({label:t,handleSignUpChanges:e,...n})=>{const[r,s]=E.useState(!1),i=o=>{e(o),o.target.value.length!==0?s(!0):r&&s(!1)};return p.jsxs("div",{className:"form-input-group",children:[p.jsx("input",{...n,onChange:i}),p.jsx("label",{className:r?"active":"",children:t})]})},fm=({type:t,onClick:e,imgPath:n,text:r})=>p.jsx("button",{type:t,onClick:()=>e?e():null,children:p.jsxs("span",{children:[r||null,n&&p.jsx("img",{src:n})]})}),AF={displayName:"",email:"",password:"",confirmPassword:""},PF=()=>{const{setCurrentTitle:t,lang:e}=ie(),[n,r]=E.useState(AF),{displayName:s,email:i,password:o,confirmPassword:a}=n,l=async c=>{if(c.preventDefault(),!(!i||!o)){if(o!==a){alert(e==="en"?"Passwords don't match!":"Пароли не совпадают!");return}try{const{user:h}=await fO(i,o);await O1(h,s),t(s)}catch(h){console.log("error from handleSignUpSubmit:"),console.log(h),h.code==="auth/email-already-in-use"&&alert(e==="en"?"Email already in use!":"Эта почта уже используется!")}}},u=c=>{const{name:h,value:d}=c.target;r({...n,[h]:d})};return p.jsxs(se.form,{animate:{x:0,opacity:1},initial:{x:-20,opacity:0},onSubmit:l,children:[p.jsx(fi,{type:"text",name:"displayName",handleSignUpChanges:u,label:e==="en"?"Username":"Логин",value:s,required:!0}),p.jsx(fi,{type:"email",required:!0,name:"email",handleSignUpChanges:u,value:i,label:e==="en"?"Email":"Почта"}),p.jsx(fi,{type:"password",required:!0,name:"password",handleSignUpChanges:u,value:o,label:e==="en"?"Password":"Пароль"}),p.jsx(fi,{type:"password",required:!0,name:"confirmPassword",handleSignUpChanges:u,value:a,label:e==="en"?"Confirm Password":"Подтвердите пароль"}),p.jsx("div",{className:"buttons-container",children:p.jsx(fm,{type:"submit",text:e==="en"?"Sign-Up":"Зарегистрироваться"})})]})},NF={email:"",password:""},DF=()=>{const{baseName:t,lang:e}=ie(),[n,r]=E.useState(NF),{email:s,password:i}=n,o=async u=>{if(u.preventDefault(),!(!s||!i))try{await dO(s,i)}catch(c){console.log("handleSignInSubmit error:"),console.log(c)}},a=async()=>{const{user:u}=await hO();await O1(u)},l=u=>{const{name:c,value:h}=u.target;r({...n,[c]:h})};return p.jsxs(se.form,{animate:{x:0,opacity:1},initial:{x:20,opacity:0},onSubmit:o,children:[p.jsx(fi,{type:"email",required:!0,name:"email",handleSignUpChanges:l,value:s,label:e==="en"?"Email":"Почта"}),p.jsx(fi,{type:"password",required:!0,name:"password",handleSignUpChanges:l,value:i,label:e==="en"?"Password":"Пароль"}),p.jsxs("div",{className:"buttons-container",children:[p.jsx(fm,{type:"submit",text:e==="en"?"Sign-In":"Войти"}),p.jsx(fm,{onClick:a,type:"button",imgPath:`${t}assets/images/icons/icon-google.svg`})]})]})},LF=()=>{const{setCurrentTitle:t,lang:e}=ie(),[n,r]=E.useState("sign-in");return E.useEffect(()=>{t(()=>e==="en"?"Account":"Авторизация")},[t,e]),p.jsxs("section",{className:"section-auth",children:[p.jsx(RF,{activeMode:n,setActiveMode:r}),p.jsx("div",{className:"form-container",children:n==="sign-up"?p.jsx(PF,{}):p.jsx(DF,{})})]})},OF=(t,e)=>{switch(e.type){case"LOAD_USER_LISTS":return{...t,userLists:e.payload};case"UPDATE_USER_LISTS":{const n=t.currentListIndex,r=t.userLists.length;let s;return e.payload.length>r||e.payload.length===r?s=n:n-1<=0?s=0:s=n-1,{currentListIndex:s,userLists:e.payload}}case"SET_CURRENT_LIST_INDEX":return{...t,currentListIndex:e.payload};default:return t}},MF=()=>p.jsxs("svg",{width:"24",height:"23",viewBox:"0 0 24 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4375 21.5334C10.4375 20.9812 10.8852 20.5334 11.4375 20.5334H22.4375C22.9898 20.5334 23.4375 20.9812 23.4375 21.5334C23.4375 22.0857 22.9898 22.5334 22.4375 22.5334H11.4375C10.8852 22.5334 10.4375 22.0857 10.4375 21.5334Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6775 2C18.3317 2 17.986 2.14591 17.7205 2.42908L3.8494 17.2249L3.16683 20.1372L5.77588 19.4415L19.6344 4.65905C19.7664 4.5183 19.8742 4.34776 19.9488 4.15565C20.0234 3.96347 20.0625 3.75548 20.0625 3.54407C20.0625 3.33266 20.0234 3.12466 19.9488 2.93248C19.8742 2.74037 19.7664 2.56983 19.6344 2.42908C19.5026 2.28846 19.3496 2.18062 19.186 2.10835C19.0227 2.03617 18.8501 2 18.6775 2ZM16.2614 1.0612C16.8905 0.390155 17.7581 0 18.6775 0C19.1313 0 19.579 0.0954399 19.9943 0.278958C20.4095 0.462391 20.7824 0.729338 21.0935 1.0612C21.4045 1.39293 21.648 1.7833 21.8132 2.2085C21.9782 2.63365 22.0625 3.08729 22.0625 3.54407C22.0625 4.00084 21.9782 4.45449 21.8132 4.87963C21.648 5.30484 21.4045 5.69521 21.0935 6.02693L7.03938 21.018C6.91155 21.1543 6.74808 21.2521 6.5675 21.3003L2.07018 22.4996C1.73063 22.5901 1.36847 22.4958 1.11624 22.2511C0.864003 22.0064 0.758715 21.6473 0.838905 21.3051L1.96323 16.508C2.00324 16.3373 2.08741 16.1801 2.20731 16.0523L16.2614 1.0612Z",fill:"var(--accent-color)"})]}),bF=()=>p.jsxs("svg",{width:"21",height:"24",viewBox:"0 0 21 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.875 6.11133C0.875 5.55904 1.32272 5.11133 1.875 5.11133H19.6875C20.2398 5.11133 20.6875 5.55904 20.6875 6.11133C20.6875 6.66361 20.2398 7.11133 19.6875 7.11133H1.875C1.32272 7.11133 0.875 6.66361 0.875 6.11133Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.80217 2.88892C8.56406 2.88892 8.32157 2.98922 8.13222 3.19119C7.94082 3.39534 7.823 3.68526 7.823 4.00003V6.11114C7.823 6.66342 7.37528 7.11114 6.823 7.11114C6.27071 7.11114 5.823 6.66342 5.823 6.11114V4.00003C5.823 3.19499 6.12221 2.41097 6.67315 1.8233C7.22613 1.23346 7.99045 0.888916 8.80217 0.888916H12.7605C13.5722 0.888916 14.3365 1.23346 14.8895 1.8233C15.4405 2.41097 15.7397 3.19499 15.7397 4.00003V6.11114C15.7397 6.66342 15.292 7.11114 14.7397 7.11114C14.1874 7.11114 13.7397 6.66342 13.7397 6.11114V4.00003C13.7397 3.68526 13.6218 3.39534 13.4304 3.19119C13.2411 2.98922 12.9986 2.88892 12.7605 2.88892H8.80217ZM3.85425 5.11114C4.40653 5.11114 4.85425 5.55885 4.85425 6.11114V20.8889C4.85425 21.2037 4.97207 21.4936 5.16347 21.6978C5.35282 21.8997 5.59531 22 5.83342 22H15.7292C15.9674 22 16.2098 21.8997 16.3992 21.6978C16.5906 21.4936 16.7084 21.2037 16.7084 20.8889V6.11114C16.7084 5.55885 17.1561 5.11114 17.7084 5.11114C18.2607 5.11114 18.7084 5.55885 18.7084 6.11114V20.8889C18.7084 21.694 18.4092 22.478 17.8583 23.0656C17.3053 23.6555 16.541 24 15.7292 24H5.83342C5.0217 24 4.25738 23.6555 3.7044 23.0656C3.15346 22.478 2.85425 21.694 2.85425 20.8889V6.11114C2.85425 5.55885 3.30196 5.11114 3.85425 5.11114Z",fill:"var(--accent-color)"})]}),$F=({title:t,active:e,dispatch:n,listIndex:r})=>{const[s,i]=E.useState(!1),o=E.useRef(null),a=()=>{i(()=>!1)};Jh(o,a);const l=u=>{u===""||u.length<3||u.length>100||u===t||(EO(r,u),a())};return p.jsx(p.Fragment,{children:s?p.jsx(r0,{initialValue:t,submit:l,hideCustomInput:a,customClass:"user-list-item-input"}):p.jsxs("div",{className:`user-list-container ${e&&"active"}`,onClick:()=>{n({type:"SET_CURRENT_LIST_INDEX",payload:r})},children:[p.jsx("div",{className:"user-list-title",children:p.jsx("h3",{children:t})}),p.jsx(Rn,{children:e&&p.jsxs(se.div,{initial:{y:"2rem",opacity:0},animate:{y:"-50%",opacity:1},className:"user-list-icons-container",children:[p.jsx("button",{className:"edit-list-icon",onClick:()=>i(()=>!0),children:p.jsx(MF,{})}),p.jsx("button",{className:"delete-list-icon",onClick:()=>wO(r),children:p.jsx(bF,{})})]})})]})})},jF=()=>p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11C20 6.02944 15.9706 2 11 2ZM0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11Z",fill:"var(--primary-color)"}),p.jsxs("g",{children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 6C11.5523 6 12 6.44772 12 7V15C12 15.5523 11.5523 16 11 16C10.4477 16 10 15.5523 10 15V7C10 6.44772 10.4477 6 11 6Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 11C6 10.4477 6.44772 10 7 10H15C15.5523 10 16 10.4477 16 11C16 11.5523 15.5523 12 15 12H7C6.44772 12 6 11.5523 6 11Z",fill:"var(--primary-color)"})]})]}),m2=({userLists:t,currentListIndex:e,dispatch:n})=>{const{lang:r}=ie(),[s,i]=E.useState(!1),o=()=>{i(()=>!0)},a=()=>{i(()=>!1)},l=u=>{u===""||u.length<3||u.length>100||(i(()=>!1),vO(u))};return p.jsxs("div",{className:"user-lists-container",children:[p.jsxs("div",{className:"user-lists-header",children:[p.jsx(i0,{}),p.jsx("h3",{children:"Мои списки"})]}),!t.length&&p.jsx(gn,{errorMessage:r==="en"?"No list found. Add new list 👇":"Не найдено ни одного списка. Добавить список 👇",showImage:!0}),p.jsx("div",{className:"user-lists",children:t.map(({title:u},c)=>p.jsx($F,{title:u,active:e===c,dispatch:n,listIndex:c},c))}),p.jsx(Rn,{children:s?p.jsx(r0,{initialValue:"",submit:l,hideCustomInput:a,customClass:"user-list-item-input",placeholder:r==="en"?"New list title...":"Название списка..."}):p.jsx("div",{className:"add-user-list-button",children:p.jsx(se.button,{onClick:o,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:p.jsx(jF,{active:s})})})})]})},FF="https://api.themoviedb.org/3",UF="api_key=582f9e2d6f3a1dc803b350bf76f168f2",VF="https://image.tmdb.org/t/p/w300",BF=(t,e)=>{const[n,r]=E.useState(!0),[s,i]=E.useState({show:!1,message:""}),[o,a]=E.useState([]),l=E.useCallback(async u=>{r(!0),i({show:!1,message:""});try{const c=[];for(let{id:h,mediaType:d}of e)try{const f=await Ar(`${FF}/${d}/${h}?${UF}&language=${u}`),{data:g}=f;c.push(new wg(VF,g,d))}catch(f){console.log(f)}if(c.length===0)throw new Error(`${u==="ru"?"Этот список пуст":"This list is empty"}`);a(()=>c),r(!1)}catch(c){i({show:!0,message:c.message}),r(!1)}},[e]);return E.useEffect(()=>{l(t)},[l,t]),{data:o,isLoading:n,error:s}},zF=({currentUserList:t,listIndex:e})=>{const{lang:n}=ie(),{data:r,isLoading:s,error:i}=BF(n,t);return i.show?p.jsx(gn,{errorMessage:i.message,showImage:!0}):s?p.jsx(Ha,{}):p.jsx(p.Fragment,{children:p.jsx(se.div,{layout:!0,layoutRoot:!0,className:"movies-list-container",children:r.map(({posterUrl:o,title:a,id:l,mediaType:u})=>(a.length>35&&(a=a.slice(0,35)+"..."),p.jsxs(Rn,{children:[p.jsx(s0,{poster:o,title:a,id:l,mediaType:u,removeItemButton:!0,listIndex:e}),";"]},l)))})})},HF={userLists:[],currentListIndex:0},WF=()=>{var h;const{currentUser:t}=lo(),{setCurrentTitle:e}=ie();E.useEffect(()=>{e(t.displayName)},[t,e]);const[n,r]=E.useReducer(OF,HF),[s,i]=E.useState(!1),o=s3(),{userLists:a,currentListIndex:l}=n,u=E.useRef(!1);E.useEffect(()=>dx(Qr(Yr,"users",t.uid),f=>{f.data()&&(u.current?r({type:"UPDATE_USER_LISTS",payload:f.data().userLists}):(r({type:"LOAD_USER_LISTS",payload:f.data().userLists}),u.current=!0))}),[t]);const c=()=>{i(()=>!1)};return p.jsxs("section",{className:"section-profile",children:[p.jsx("div",{className:"left-col",children:o==="desktop"?p.jsx(p.Fragment,{children:p.jsx(m2,{userLists:a,currentListIndex:l,dispatch:r})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"user-lists-modal-toggler",onClick:()=>i(()=>!0),children:[p.jsx(i0,{}),p.jsx("h3",{children:"Мои списки"})]}),p.jsx(Rn,{children:s&&p.jsx(Xh,{hideModal:c,mode:"overlay",modalState:s,children:p.jsx("div",{className:"user-lists-modal-inner",children:p.jsx(m2,{userLists:a,currentListIndex:l,dispatch:r,hideModal:c})})})})]})}),p.jsxs("div",{className:"right-col",children:[p.jsx("div",{className:"user-movies-list-title",children:a[l]&&p.jsx("h2",{children:(h=a[l])==null?void 0:h.title})}),a[l]&&p.jsx(zF,{currentUserList:a[l].data,listIndex:l})]})]})};function KF(){const{baseName:t,lang:e}=ie(),{currentUser:n}=lo(),r=({children:i})=>n?i:p.jsx(Sy,{to:`${t}auth`}),s=({children:i})=>n?p.jsx(Sy,{to:`${t}profile`}):i;return p.jsx(Ak,{children:p.jsx(_k,{children:p.jsxs(Dn,{path:t,element:p.jsx(nF,{}),children:[p.jsx(Dn,{index:!0,element:p.jsx(hF,{})}),p.jsx(Dn,{path:"movie/:id",element:p.jsx(p2,{})}),p.jsx(Dn,{path:"tv/:id",element:p.jsx(p2,{})}),p.jsx(Dn,{path:"search/:query",element:p.jsx(kF,{})}),p.jsx(Dn,{path:"auth",element:p.jsx(s,{children:p.jsx(LF,{})})}),p.jsx(Dn,{path:"profile",element:p.jsx(r,{children:p.jsx(WF,{})})}),p.jsx(Dn,{path:"*",element:p.jsx("section",{children:p.jsx(gn,{componentMessage:"404",errorMessage:e==="en"?"This page is not exist":"Такой страницы не существует!",showImage:!0,fullHeight:!0})})})]})})})}gf.createRoot(document.getElementById("root")).render(p.jsx(Mc.StrictMode,{children:p.jsx(eR,{children:p.jsx(_O,{children:p.jsx(KF,{})})})}));

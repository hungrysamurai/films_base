function x3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v2={exports:{}},$c={},w2={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=Symbol.for("react.element"),I3=Symbol.for("react.portal"),k3=Symbol.for("react.fragment"),R3=Symbol.for("react.strict_mode"),A3=Symbol.for("react.profiler"),P3=Symbol.for("react.provider"),N3=Symbol.for("react.context"),D3=Symbol.for("react.forward_ref"),L3=Symbol.for("react.suspense"),O3=Symbol.for("react.memo"),M3=Symbol.for("react.lazy"),c0=Symbol.iterator;function b3(t){return t===null||typeof t!="object"?null:(t=c0&&t[c0]||t["@@iterator"],typeof t=="function"?t:null)}var E2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C2=Object.assign,S2={};function Gi(t,e,n){this.props=t,this.context=e,this.refs=S2,this.updater=n||E2}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function T2(){}T2.prototype=Gi.prototype;function vm(t,e,n){this.props=t,this.context=e,this.refs=S2,this.updater=n||E2}var wm=vm.prototype=new T2;wm.constructor=vm;C2(wm,Gi.prototype);wm.isPureReactComponent=!0;var h0=Array.isArray,_2=Object.prototype.hasOwnProperty,Em={current:null},x2={key:!0,ref:!0,__self:!0,__source:!0};function I2(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)_2.call(e,r)&&!x2.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ka,type:t,key:i,ref:o,props:s,_owner:Em.current}}function $3(t,e){return{$$typeof:Ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ka}function j3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var d0=/\/+/g;function sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?j3(""+t.key):e.toString(36)}function ou(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ka:case I3:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sd(o,0):r,h0(s)?(n="",t!=null&&(n=t.replace(d0,"$&/")+"/"),ou(s,e,n,"",function(u){return u})):s!=null&&(Cm(s)&&(s=$3(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(d0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",h0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+sd(i,a);o+=ou(i,e,n,l,s)}else if(l=b3(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+sd(i,a++),o+=ou(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rl(t,e,n){if(t==null)return t;var r=[],s=0;return ou(t,r,"","",function(i){return e.call(n,i,s++)}),r}function F3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},au={transition:null},U3={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:au,ReactCurrentOwner:Em};Y.Children={map:Rl,forEach:function(t,e,n){Rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rl(t,function(){e++}),e},toArray:function(t){return Rl(t,function(e){return e})||[]},only:function(t){if(!Cm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Gi;Y.Fragment=k3;Y.Profiler=A3;Y.PureComponent=vm;Y.StrictMode=R3;Y.Suspense=L3;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U3;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=C2({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Em.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_2.call(e,l)&&!x2.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ka,type:t.type,key:s,ref:i,props:r,_owner:o}};Y.createContext=function(t){return t={$$typeof:N3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:P3,_context:t},t.Consumer=t};Y.createElement=I2;Y.createFactory=function(t){var e=I2.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:D3,render:t}};Y.isValidElement=Cm;Y.lazy=function(t){return{$$typeof:M3,_payload:{_status:-1,_result:t},_init:F3}};Y.memo=function(t,e){return{$$typeof:O3,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};Y.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Y.useCallback=function(t,e){return gt.current.useCallback(t,e)};Y.useContext=function(t){return gt.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};Y.useEffect=function(t,e){return gt.current.useEffect(t,e)};Y.useId=function(){return gt.current.useId()};Y.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return gt.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};Y.useRef=function(t){return gt.current.useRef(t)};Y.useState=function(t){return gt.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return gt.current.useTransition()};Y.version="18.2.0";w2.exports=Y;var E=w2.exports;const jc=y2(E),f0=x3({__proto__:null,default:jc},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3=E,B3=Symbol.for("react.element"),z3=Symbol.for("react.fragment"),H3=Object.prototype.hasOwnProperty,W3=V3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K3={key:!0,ref:!0,__self:!0,__source:!0};function k2(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)H3.call(e,r)&&!K3.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:B3,type:t,key:i,ref:o,props:s,_owner:W3.current}}$c.Fragment=z3;$c.jsx=k2;$c.jsxs=k2;v2.exports=$c;var p=v2.exports,Ef={},R2={exports:{}},bt={},A2={exports:{}},P2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,H){var G=D.length;D.push(H);e:for(;0<G;){var W=G-1>>>1,pe=D[W];if(0<s(pe,H))D[W]=H,D[G]=pe,G=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var H=D[0],G=D.pop();if(G!==H){D[0]=G;e:for(var W=0,pe=D.length,Zr=pe>>>1;W<Zr;){var un=2*(W+1)-1,Ks=D[un],kt=un+1,es=D[kt];if(0>s(Ks,G))kt<pe&&0>s(es,Ks)?(D[W]=es,D[kt]=G,W=kt):(D[W]=Ks,D[un]=G,W=un);else if(kt<pe&&0>s(es,G))D[W]=es,D[kt]=G,W=kt;else break e}}return H}function s(D,H){var G=D.sortIndex-H.sortIndex;return G!==0?G:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,g=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=D)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function C(D){if(w=!1,y(D),!g)if(n(l)!==null)g=!0,Ft(T);else{var H=n(u);H!==null&&ln(C,H.startTime-D)}}function T(D,H){g=!1,w&&(w=!1,v(x),x=-1),f=!0;var G=d;try{for(y(H),h=n(l);h!==null&&(!(h.expirationTime>H)||D&&!fe());){var W=h.callback;if(typeof W=="function"){h.callback=null,d=h.priorityLevel;var pe=W(h.expirationTime<=H);H=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(l)&&r(l),y(H)}else r(l);h=n(l)}if(h!==null)var Zr=!0;else{var un=n(u);un!==null&&ln(C,un.startTime-H),Zr=!1}return Zr}finally{h=null,d=G,f=!1}}var k=!1,I=null,x=-1,M=5,j=-1;function fe(){return!(t.unstable_now()-j<M)}function vt(){if(I!==null){var D=t.unstable_now();j=D;var H=!0;try{H=I(!0,D)}finally{H?jt():(k=!1,I=null)}}else k=!1}var jt;if(typeof m=="function")jt=function(){m(vt)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Re=ke.port2;ke.port1.onmessage=vt,jt=function(){Re.postMessage(null)}}else jt=function(){S(vt,0)};function Ft(D){I=D,k||(k=!0,jt())}function ln(D,H){x=S(function(){D(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,Ft(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var G=d;d=H;try{return D()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=d;d=D;try{return H()}finally{d=G}},t.unstable_scheduleCallback=function(D,H,G){var W=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?W+G:W):G=W,D){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=G+pe,D={id:c++,callback:H,priorityLevel:D,startTime:G,expirationTime:pe,sortIndex:-1},G>W?(D.sortIndex=G,e(u,D),n(l)===null&&D===n(u)&&(w?(v(x),x=-1):w=!0,ln(C,G-W))):(D.sortIndex=pe,e(l,D),g||f||(g=!0,Ft(T))),D},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(D){var H=d;return function(){var G=d;d=H;try{return D.apply(this,arguments)}finally{d=G}}}})(P2);A2.exports=P2;var q3=A2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2=E,Lt=q3;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D2=new Set,ra={};function Ms(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(ra[t]=e,t=0;t<e.length;t++)D2.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cf=Object.prototype.hasOwnProperty,G3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p0={},m0={};function Q3(t){return Cf.call(m0,t)?!0:Cf.call(p0,t)?!1:G3.test(t)?m0[t]=!0:(p0[t]=!0,!1)}function Y3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X3(t,e,n,r){if(e===null||typeof e>"u"||Y3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sm=/[\-:]([a-z])/g;function Tm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sm,Tm);Xe[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sm,Tm);Xe[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sm,Tm);Xe[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _m(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(X3(e,n,s,r)&&(n=null),r||s===null?Q3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rr=N2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),L2=Symbol.for("react.provider"),O2=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),km=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),M2=Symbol.for("react.offscreen"),g0=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=g0&&t[g0]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,id;function xo(t){if(id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function J3(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case Js:return"Portal";case Sf:return"Profiler";case xm:return"StrictMode";case Tf:return"Suspense";case _f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O2:return(t.displayName||"Context")+".Consumer";case L2:return(t._context.displayName||"Context")+".Provider";case Im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case km:return e=t.displayName||null,e!==null?e:xf(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return xf(t(e))}catch{}}return null}function Z3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xf(e);case 8:return e===xm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eI(t){var e=b2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pl(t){t._valueTracker||(t._valueTracker=eI(t))}function $2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=b2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function If(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function y0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j2(t,e){e=e.checked,e!=null&&_m(t,"checked",e,!1)}function kf(t,e){j2(t,e);var n=br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rf(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rf(t,e,n){(e!=="number"||Du(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Io=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(A(92));if(Io(n)){if(1<n.length)throw Error(A(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function F2(t,e){var n=br(e.value),r=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function E0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function U2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?U2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nl,V2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tI=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(t){tI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$o[e]=$o[t]})});function B2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$o.hasOwnProperty(t)&&$o[t]?(""+e).trim():e+"px"}function z2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=B2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var nI=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(nI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lf=null;function Rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Of=null,gi=null,yi=null;function C0(t){if(t=Qa(t)){if(typeof Of!="function")throw Error(A(280));var e=t.stateNode;e&&(e=zc(e),Of(t.stateNode,t.type,e))}}function H2(t){gi?yi?yi.push(t):yi=[t]:gi=t}function W2(){if(gi){var t=gi,e=yi;if(yi=gi=null,C0(t),e)for(t=0;t<e.length;t++)C0(e[t])}}function K2(t,e){return t(e)}function q2(){}var ld=!1;function G2(t,e,n){if(ld)return t(e,n);ld=!0;try{return K2(t,e,n)}finally{ld=!1,(gi!==null||yi!==null)&&(q2(),W2())}}function ia(t,e){var n=t.stateNode;if(n===null)return null;var r=zc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(A(231,e,typeof n));return n}var Mf=!1;if(qn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Mf=!1}function rI(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var jo=!1,Lu=null,Ou=!1,bf=null,sI={onError:function(t){jo=!0,Lu=t}};function iI(t,e,n,r,s,i,o,a,l){jo=!1,Lu=null,rI.apply(sI,arguments)}function oI(t,e,n,r,s,i,o,a,l){if(iI.apply(this,arguments),jo){if(jo){var u=Lu;jo=!1,Lu=null}else throw Error(A(198));Ou||(Ou=!0,bf=u)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Q2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S0(t){if(bs(t)!==t)throw Error(A(188))}function aI(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(A(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return S0(s),t;if(i===r)return S0(s),e;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?t:e}function Y2(t){return t=aI(t),t!==null?X2(t):null}function X2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=X2(t);if(e!==null)return e;t=t.sibling}return null}var J2=Lt.unstable_scheduleCallback,T0=Lt.unstable_cancelCallback,lI=Lt.unstable_shouldYield,uI=Lt.unstable_requestPaint,Ae=Lt.unstable_now,cI=Lt.unstable_getCurrentPriorityLevel,Am=Lt.unstable_ImmediatePriority,Z2=Lt.unstable_UserBlockingPriority,Mu=Lt.unstable_NormalPriority,hI=Lt.unstable_LowPriority,eE=Lt.unstable_IdlePriority,Fc=null,vn=null;function dI(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:mI,fI=Math.log,pI=Math.LN2;function mI(t){return t>>>=0,t===0?32:31-(fI(t)/pI|0)|0}var Dl=64,Ll=4194304;function ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ko(a):(i&=o,i!==0&&(r=ko(i)))}else o=n&~s,o!==0?r=ko(o):i!==0&&(r=ko(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function gI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=gI(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function $f(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tE(){var t=Dl;return Dl<<=1,!(Dl&4194240)&&(Dl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function vI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ne=0;function nE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rE,Nm,sE,iE,oE,jf=!1,Ol=[],Cr=null,Sr=null,Tr=null,oa=new Map,aa=new Map,hr=[],wI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _0(t,e){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qa(e),e!==null&&Nm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function EI(t,e,n,r,s){switch(e){case"focusin":return Cr=fo(Cr,t,e,n,r,s),!0;case"dragenter":return Sr=fo(Sr,t,e,n,r,s),!0;case"mouseover":return Tr=fo(Tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return oa.set(i,fo(oa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,aa.set(i,fo(aa.get(i)||null,t,e,n,r,s)),!0}return!1}function aE(t){var e=ls(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=Q2(n),e!==null){t.blockedOn=e,oE(t.priority,function(){sE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ff(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lf=r,n.target.dispatchEvent(r),Lf=null}else return e=Qa(n),e!==null&&Nm(e),t.blockedOn=n,!1;e.shift()}return!0}function x0(t,e,n){lu(t)&&n.delete(e)}function CI(){jf=!1,Cr!==null&&lu(Cr)&&(Cr=null),Sr!==null&&lu(Sr)&&(Sr=null),Tr!==null&&lu(Tr)&&(Tr=null),oa.forEach(x0),aa.forEach(x0)}function po(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,CI)))}function la(t){function e(s){return po(s,t)}if(0<Ol.length){po(Ol[0],t);for(var n=1;n<Ol.length;n++){var r=Ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cr!==null&&po(Cr,t),Sr!==null&&po(Sr,t),Tr!==null&&po(Tr,t),oa.forEach(e),aa.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)aE(n),n.blockedOn===null&&hr.shift()}var vi=rr.ReactCurrentBatchConfig,$u=!0;function SI(t,e,n,r){var s=ne,i=vi.transition;vi.transition=null;try{ne=1,Dm(t,e,n,r)}finally{ne=s,vi.transition=i}}function TI(t,e,n,r){var s=ne,i=vi.transition;vi.transition=null;try{ne=4,Dm(t,e,n,r)}finally{ne=s,vi.transition=i}}function Dm(t,e,n,r){if($u){var s=Ff(t,e,n,r);if(s===null)wd(t,e,r,ju,n),_0(t,r);else if(EI(s,t,e,n,r))r.stopPropagation();else if(_0(t,r),e&4&&-1<wI.indexOf(t)){for(;s!==null;){var i=Qa(s);if(i!==null&&rE(i),i=Ff(t,e,n,r),i===null&&wd(t,e,r,ju,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wd(t,e,r,null,n)}}var ju=null;function Ff(t,e,n,r){if(ju=null,t=Rm(r),t=ls(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Q2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ju=t,null}function lE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cI()){case Am:return 1;case Z2:return 4;case Mu:case hI:return 16;case eE:return 536870912;default:return 16}default:return 16}}var yr=null,Lm=null,uu=null;function uE(){if(uu)return uu;var t,e=Lm,n=e.length,r,s="value"in yr?yr.value:yr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uu=s.slice(t,1<r?1-r:void 0)}function cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function I0(){return!1}function $t(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ml:I0,this.isPropagationStopped=I0,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Om=$t(Qi),Ga=we({},Qi,{view:0,detail:0}),_I=$t(Ga),cd,hd,mo,Uc=we({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mo&&(mo&&t.type==="mousemove"?(cd=t.screenX-mo.screenX,hd=t.screenY-mo.screenY):hd=cd=0,mo=t),cd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),k0=$t(Uc),xI=we({},Uc,{dataTransfer:0}),II=$t(xI),kI=we({},Ga,{relatedTarget:0}),dd=$t(kI),RI=we({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=$t(RI),PI=we({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NI=$t(PI),DI=we({},Qi,{data:0}),R0=$t(DI),LI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MI[t])?!!e[t]:!1}function Mm(){return bI}var $I=we({},Ga,{key:function(t){if(t.key){var e=LI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mm,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jI=$t($I),FI=we({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A0=$t(FI),UI=we({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mm}),VI=$t(UI),BI=we({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zI=$t(BI),HI=we({},Uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WI=$t(HI),KI=[9,13,27,32],bm=qn&&"CompositionEvent"in window,Fo=null;qn&&"documentMode"in document&&(Fo=document.documentMode);var qI=qn&&"TextEvent"in window&&!Fo,cE=qn&&(!bm||Fo&&8<Fo&&11>=Fo),P0=String.fromCharCode(32),N0=!1;function hE(t,e){switch(t){case"keyup":return KI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ei=!1;function GI(t,e){switch(t){case"compositionend":return dE(e);case"keypress":return e.which!==32?null:(N0=!0,P0);case"textInput":return t=e.data,t===P0&&N0?null:t;default:return null}}function QI(t,e){if(ei)return t==="compositionend"||!bm&&hE(t,e)?(t=uE(),uu=Lm=yr=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cE&&e.locale!=="ko"?null:e.data;default:return null}}var YI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YI[t.type]:e==="textarea"}function fE(t,e,n,r){H2(r),e=Fu(e,"onChange"),0<e.length&&(n=new Om("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uo=null,ua=null;function XI(t){_E(t,0)}function Vc(t){var e=ri(t);if($2(e))return t}function JI(t,e){if(t==="change")return e}var pE=!1;if(qn){var fd;if(qn){var pd="oninput"in document;if(!pd){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),pd=typeof L0.oninput=="function"}fd=pd}else fd=!1;pE=fd&&(!document.documentMode||9<document.documentMode)}function O0(){Uo&&(Uo.detachEvent("onpropertychange",mE),ua=Uo=null)}function mE(t){if(t.propertyName==="value"&&Vc(ua)){var e=[];fE(e,ua,t,Rm(t)),G2(XI,e)}}function ZI(t,e,n){t==="focusin"?(O0(),Uo=e,ua=n,Uo.attachEvent("onpropertychange",mE)):t==="focusout"&&O0()}function e5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vc(ua)}function t5(t,e){if(t==="click")return Vc(e)}function n5(t,e){if(t==="input"||t==="change")return Vc(e)}function r5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:r5;function ca(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cf.call(e,s)||!on(t[s],e[s]))return!1}return!0}function M0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b0(t,e){var n=M0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=M0(n)}}function gE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yE(){for(var t=window,e=Du();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Du(t.document)}return e}function $m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s5(t){var e=yE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gE(n.ownerDocument.documentElement,n)){if(r!==null&&$m(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=b0(n,i);var o=b0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i5=qn&&"documentMode"in document&&11>=document.documentMode,ti=null,Uf=null,Vo=null,Vf=!1;function $0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vf||ti==null||ti!==Du(r)||(r=ti,"selectionStart"in r&&$m(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&ca(Vo,r)||(Vo=r,r=Fu(Uf,"onSelect"),0<r.length&&(e=new Om("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ti)))}function bl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ni={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},md={},vE={};qn&&(vE=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Bc(t){if(md[t])return md[t];if(!ni[t])return t;var e=ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vE)return md[t]=e[n];return t}var wE=Bc("animationend"),EE=Bc("animationiteration"),CE=Bc("animationstart"),SE=Bc("transitionend"),TE=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){TE.set(t,e),Ms(e,[t])}for(var gd=0;gd<j0.length;gd++){var yd=j0[gd],o5=yd.toLowerCase(),a5=yd[0].toUpperCase()+yd.slice(1);Hr(o5,"on"+a5)}Hr(wE,"onAnimationEnd");Hr(EE,"onAnimationIteration");Hr(CE,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(SE,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function F0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oI(r,e,void 0,t),t.currentTarget=null}function _E(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;F0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;F0(s,a,u),i=l}}}if(Ou)throw t=bf,Ou=!1,bf=null,t}function ae(t,e){var n=e[Kf];n===void 0&&(n=e[Kf]=new Set);var r=t+"__bubble";n.has(r)||(xE(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),xE(n,t,r,e)}var $l="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[$l]){t[$l]=!0,D2.forEach(function(n){n!=="selectionchange"&&(l5.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$l]||(e[$l]=!0,vd("selectionchange",!1,e))}}function xE(t,e,n,r){switch(lE(e)){case 1:var s=SI;break;case 4:s=TI;break;default:s=Dm}n=s.bind(null,e,n,t),s=void 0,!Mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ls(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}G2(function(){var u=i,c=Rm(n),h=[];e:{var d=TE.get(t);if(d!==void 0){var f=Om,g=t;switch(t){case"keypress":if(cu(n)===0)break e;case"keydown":case"keyup":f=jI;break;case"focusin":g="focus",f=dd;break;case"focusout":g="blur",f=dd;break;case"beforeblur":case"afterblur":f=dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=k0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=VI;break;case wE:case EE:case CE:f=AI;break;case SE:f=zI;break;case"scroll":f=_I;break;case"wheel":f=WI;break;case"copy":case"cut":case"paste":f=NI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=A0}var w=(e&4)!==0,S=!w&&t==="scroll",v=w?d!==null?d+"Capture":null:d;w=[];for(var m=u,y;m!==null;){y=m;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,v!==null&&(C=ia(m,v),C!=null&&w.push(da(m,C,y)))),S)break;m=m.return}0<w.length&&(d=new f(d,g,null,n,c),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Lf&&(g=n.relatedTarget||n.fromElement)&&(ls(g)||g[Gn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?ls(g):null,g!==null&&(S=bs(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(w=k0,C="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=A0,C="onPointerLeave",v="onPointerEnter",m="pointer"),S=f==null?d:ri(f),y=g==null?d:ri(g),d=new w(C,m+"leave",f,n,c),d.target=S,d.relatedTarget=y,C=null,ls(c)===u&&(w=new w(v,m+"enter",g,n,c),w.target=y,w.relatedTarget=S,C=w),S=C,f&&g)t:{for(w=f,v=g,m=0,y=w;y;y=qs(y))m++;for(y=0,C=v;C;C=qs(C))y++;for(;0<m-y;)w=qs(w),m--;for(;0<y-m;)v=qs(v),y--;for(;m--;){if(w===v||v!==null&&w===v.alternate)break t;w=qs(w),v=qs(v)}w=null}else w=null;f!==null&&U0(h,d,f,w,!1),g!==null&&S!==null&&U0(h,S,g,w,!0)}}e:{if(d=u?ri(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var T=JI;else if(D0(d))if(pE)T=n5;else{T=e5;var k=ZI}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=t5);if(T&&(T=T(t,u))){fE(h,T,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Rf(d,"number",d.value)}switch(k=u?ri(u):window,t){case"focusin":(D0(k)||k.contentEditable==="true")&&(ti=k,Uf=u,Vo=null);break;case"focusout":Vo=Uf=ti=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,$0(h,n,c);break;case"selectionchange":if(i5)break;case"keydown":case"keyup":$0(h,n,c)}var I;if(bm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ei?hE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(cE&&n.locale!=="ko"&&(ei||x!=="onCompositionStart"?x==="onCompositionEnd"&&ei&&(I=uE()):(yr=c,Lm="value"in yr?yr.value:yr.textContent,ei=!0)),k=Fu(u,x),0<k.length&&(x=new R0(x,t,null,n,c),h.push({event:x,listeners:k}),I?x.data=I:(I=dE(n),I!==null&&(x.data=I)))),(I=qI?GI(t,n):QI(t,n))&&(u=Fu(u,"onBeforeInput"),0<u.length&&(c=new R0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=I))}_E(h,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ia(t,n),i!=null&&r.unshift(da(t,i,s)),i=ia(t,e),i!=null&&r.push(da(t,i,s))),t=t.return}return r}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ia(n,i),l!=null&&o.unshift(da(n,l,a))):s||(l=ia(n,i),l!=null&&o.push(da(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var u5=/\r\n?/g,c5=/\u0000|\uFFFD/g;function V0(t){return(typeof t=="string"?t:""+t).replace(u5,`
`).replace(c5,"")}function jl(t,e,n){if(e=V0(e),V0(t)!==e&&n)throw Error(A(425))}function Uu(){}var Bf=null,zf=null;function Hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,h5=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,d5=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(t){return B0.resolve(null).then(t).catch(f5)}:Wf;function f5(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),la(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);la(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function z0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),fn="__reactFiber$"+Yi,fa="__reactProps$"+Yi,Gn="__reactContainer$"+Yi,Kf="__reactEvents$"+Yi,p5="__reactListeners$"+Yi,m5="__reactHandles$"+Yi;function ls(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=z0(t);t!==null;){if(n=t[fn])return n;t=z0(t)}return e}t=n,n=t.parentNode}return null}function Qa(t){return t=t[fn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function zc(t){return t[fa]||null}var qf=[],si=-1;function Wr(t){return{current:t}}function ue(t){0>si||(t.current=qf[si],qf[si]=null,si--)}function se(t,e){si++,qf[si]=t.current,t.current=e}var $r={},lt=Wr($r),St=Wr(!1),Ss=$r;function Ai(t,e){var n=t.type.contextTypes;if(!n)return $r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tt(t){return t=t.childContextTypes,t!=null}function Vu(){ue(St),ue(lt)}function H0(t,e,n){if(lt.current!==$r)throw Error(A(168));se(lt,e),se(St,n)}function IE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(A(108,Z3(t)||"Unknown",s));return we({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,Ss=lt.current,se(lt,t),se(St,St.current),!0}function W0(t,e,n){var r=t.stateNode;if(!r)throw Error(A(169));n?(t=IE(t,e,Ss),r.__reactInternalMemoizedMergedChildContext=t,ue(St),ue(lt),se(lt,t)):ue(St),se(St,n)}var Mn=null,Hc=!1,Cd=!1;function kE(t){Mn===null?Mn=[t]:Mn.push(t)}function g5(t){Hc=!0,kE(t)}function Kr(){if(!Cd&&Mn!==null){Cd=!0;var t=0,e=ne;try{var n=Mn;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mn=null,Hc=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(t+1)),J2(Am,Kr),s}finally{ne=e,Cd=!1}}return null}var ii=[],oi=0,zu=null,Hu=0,Vt=[],Bt=0,Ts=null,$n=1,jn="";function rs(t,e){ii[oi++]=Hu,ii[oi++]=zu,zu=t,Hu=e}function RE(t,e,n){Vt[Bt++]=$n,Vt[Bt++]=jn,Vt[Bt++]=Ts,Ts=t;var r=$n;t=jn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$n=1<<32-rn(e)+s|n<<s|r,jn=i+t}else $n=1<<i|n<<s|r,jn=t}function jm(t){t.return!==null&&(rs(t,1),RE(t,1,0))}function Fm(t){for(;t===zu;)zu=ii[--oi],ii[oi]=null,Hu=ii[--oi],ii[oi]=null;for(;t===Ts;)Ts=Vt[--Bt],Vt[Bt]=null,jn=Vt[--Bt],Vt[Bt]=null,$n=Vt[--Bt],Vt[Bt]=null}var Dt=null,At=null,he=!1,en=null;function AE(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function K0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,At=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ts!==null?{id:$n,overflow:jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,At=null,!0):!1;default:return!1}}function Gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qf(t){if(he){var e=At;if(e){var n=e;if(!K0(t,e)){if(Gf(t))throw Error(A(418));e=_r(n.nextSibling);var r=Dt;e&&K0(t,e)?AE(r,n):(t.flags=t.flags&-4097|2,he=!1,Dt=t)}}else{if(Gf(t))throw Error(A(418));t.flags=t.flags&-4097|2,he=!1,Dt=t}}}function q0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function Fl(t){if(t!==Dt)return!1;if(!he)return q0(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hf(t.type,t.memoizedProps)),e&&(e=At)){if(Gf(t))throw PE(),Error(A(418));for(;e;)AE(t,e),e=_r(e.nextSibling)}if(q0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){At=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}At=null}}else At=Dt?_r(t.stateNode.nextSibling):null;return!0}function PE(){for(var t=At;t;)t=_r(t.nextSibling)}function Pi(){At=Dt=null,he=!1}function Um(t){en===null?en=[t]:en.push(t)}var y5=rr.ReactCurrentBatchConfig;function Jt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Wu=Wr(null),Ku=null,ai=null,Vm=null;function Bm(){Vm=ai=Ku=null}function zm(t){var e=Wu.current;ue(Wu),t._currentValue=e}function Yf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){Ku=t,Vm=ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Vm!==t)if(t={context:t,memoizedValue:e,next:null},ai===null){if(Ku===null)throw Error(A(308));ai=t,Ku.dependencies={lanes:0,firstContext:t}}else ai=ai.next=t;return e}var us=null;function Hm(t){us===null?us=[t]:us.push(t)}function NE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function Wm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Z&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,Hm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pm(t,n)}}function G0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qu(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,w=a;switch(d=e,f=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=we({},h,d);break e;case 2:ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xs|=o,t.lanes=o,t.memoizedState=h}}function Q0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var LE=new N2.Component().refs;function Xf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wc={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=kr(t),i=zn(r,s);i.payload=e,n!=null&&(i.callback=n),e=xr(t,i,s),e!==null&&(sn(e,t,s,r),hu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=kr(t),i=zn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=xr(t,i,s),e!==null&&(sn(e,t,s,r),hu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=kr(t),s=zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=xr(t,s,r),e!==null&&(sn(e,t,r,n),hu(e,t,r))}};function Y0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ca(n,r)||!ca(s,i):!0}function OE(t,e,n){var r=!1,s=$r,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=Tt(e)?Ss:lt.current,r=e.contextTypes,i=(r=r!=null)?Ai(t,s):$r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function X0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function Jf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=LE,Wm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=Tt(e)?Ss:lt.current,s.context=Ai(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wc.enqueueReplaceState(s,s.state,null),qu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===LE&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,t))}return t}function Ul(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function J0(t){var e=t._init;return e(t._payload)}function ME(t){function e(v,m){if(t){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=Rr(v,m),v.index=0,v.sibling=null,v}function i(v,m,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,m,y,C){return m===null||m.tag!==6?(m=Rd(y,v.mode,C),m.return=v,m):(m=s(m,y),m.return=v,m)}function l(v,m,y,C){var T=y.type;return T===Zs?c(v,m,y.props.children,C,y.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===lr&&J0(T)===m.type)?(C=s(m,y.props),C.ref=go(v,m,y),C.return=v,C):(C=yu(y.type,y.key,y.props,null,v.mode,C),C.ref=go(v,m,y),C.return=v,C)}function u(v,m,y,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ad(y,v.mode,C),m.return=v,m):(m=s(m,y.children||[]),m.return=v,m)}function c(v,m,y,C,T){return m===null||m.tag!==7?(m=vs(y,v.mode,C,T),m.return=v,m):(m=s(m,y),m.return=v,m)}function h(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Rd(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Al:return y=yu(m.type,m.key,m.props,null,v.mode,y),y.ref=go(v,null,m),y.return=v,y;case Js:return m=Ad(m,v.mode,y),m.return=v,m;case lr:var C=m._init;return h(v,C(m._payload),y)}if(Io(m)||co(m))return m=vs(m,v.mode,y,null),m.return=v,m;Ul(v,m)}return null}function d(v,m,y,C){var T=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(v,m,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Al:return y.key===T?l(v,m,y,C):null;case Js:return y.key===T?u(v,m,y,C):null;case lr:return T=y._init,d(v,m,T(y._payload),C)}if(Io(y)||co(y))return T!==null?null:c(v,m,y,C,null);Ul(v,y)}return null}function f(v,m,y,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(y)||null,a(m,v,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Al:return v=v.get(C.key===null?y:C.key)||null,l(m,v,C,T);case Js:return v=v.get(C.key===null?y:C.key)||null,u(m,v,C,T);case lr:var k=C._init;return f(v,m,y,k(C._payload),T)}if(Io(C)||co(C))return v=v.get(y)||null,c(m,v,C,T,null);Ul(m,C)}return null}function g(v,m,y,C){for(var T=null,k=null,I=m,x=m=0,M=null;I!==null&&x<y.length;x++){I.index>x?(M=I,I=null):M=I.sibling;var j=d(v,I,y[x],C);if(j===null){I===null&&(I=M);break}t&&I&&j.alternate===null&&e(v,I),m=i(j,m,x),k===null?T=j:k.sibling=j,k=j,I=M}if(x===y.length)return n(v,I),he&&rs(v,x),T;if(I===null){for(;x<y.length;x++)I=h(v,y[x],C),I!==null&&(m=i(I,m,x),k===null?T=I:k.sibling=I,k=I);return he&&rs(v,x),T}for(I=r(v,I);x<y.length;x++)M=f(I,v,x,y[x],C),M!==null&&(t&&M.alternate!==null&&I.delete(M.key===null?x:M.key),m=i(M,m,x),k===null?T=M:k.sibling=M,k=M);return t&&I.forEach(function(fe){return e(v,fe)}),he&&rs(v,x),T}function w(v,m,y,C){var T=co(y);if(typeof T!="function")throw Error(A(150));if(y=T.call(y),y==null)throw Error(A(151));for(var k=T=null,I=m,x=m=0,M=null,j=y.next();I!==null&&!j.done;x++,j=y.next()){I.index>x?(M=I,I=null):M=I.sibling;var fe=d(v,I,j.value,C);if(fe===null){I===null&&(I=M);break}t&&I&&fe.alternate===null&&e(v,I),m=i(fe,m,x),k===null?T=fe:k.sibling=fe,k=fe,I=M}if(j.done)return n(v,I),he&&rs(v,x),T;if(I===null){for(;!j.done;x++,j=y.next())j=h(v,j.value,C),j!==null&&(m=i(j,m,x),k===null?T=j:k.sibling=j,k=j);return he&&rs(v,x),T}for(I=r(v,I);!j.done;x++,j=y.next())j=f(I,v,x,j.value,C),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?x:j.key),m=i(j,m,x),k===null?T=j:k.sibling=j,k=j);return t&&I.forEach(function(vt){return e(v,vt)}),he&&rs(v,x),T}function S(v,m,y,C){if(typeof y=="object"&&y!==null&&y.type===Zs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Al:e:{for(var T=y.key,k=m;k!==null;){if(k.key===T){if(T=y.type,T===Zs){if(k.tag===7){n(v,k.sibling),m=s(k,y.props.children),m.return=v,v=m;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===lr&&J0(T)===k.type){n(v,k.sibling),m=s(k,y.props),m.ref=go(v,k,y),m.return=v,v=m;break e}n(v,k);break}else e(v,k);k=k.sibling}y.type===Zs?(m=vs(y.props.children,v.mode,C,y.key),m.return=v,v=m):(C=yu(y.type,y.key,y.props,null,v.mode,C),C.ref=go(v,m,y),C.return=v,v=C)}return o(v);case Js:e:{for(k=y.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=s(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=Ad(y,v.mode,C),m.return=v,v=m}return o(v);case lr:return k=y._init,S(v,m,k(y._payload),C)}if(Io(y))return g(v,m,y,C);if(co(y))return w(v,m,y,C);Ul(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=s(m,y),m.return=v,v=m):(n(v,m),m=Rd(y,v.mode,C),m.return=v,v=m),o(v)):n(v,m)}return S}var Ni=ME(!0),bE=ME(!1),Ya={},wn=Wr(Ya),pa=Wr(Ya),ma=Wr(Ya);function cs(t){if(t===Ya)throw Error(A(174));return t}function Km(t,e){switch(se(ma,e),se(pa,t),se(wn,Ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pf(e,t)}ue(wn),se(wn,e)}function Di(){ue(wn),ue(pa),ue(ma)}function $E(t){cs(ma.current);var e=cs(wn.current),n=Pf(e,t.type);e!==n&&(se(pa,t),se(wn,n))}function qm(t){pa.current===t&&(ue(wn),ue(pa))}var ge=Wr(0);function Gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function Gm(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var du=rr.ReactCurrentDispatcher,Td=rr.ReactCurrentBatchConfig,_s=0,ve=null,Me=null,Be=null,Qu=!1,Bo=!1,ga=0,v5=0;function Je(){throw Error(A(321))}function Qm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Ym(t,e,n,r,s,i){if(_s=i,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?S5:T5,t=n(r,s),Bo){i=0;do{if(Bo=!1,ga=0,25<=i)throw Error(A(301));i+=1,Be=Me=null,e.updateQueue=null,du.current=_5,t=n(r,s)}while(Bo)}if(du.current=Yu,e=Me!==null&&Me.next!==null,_s=0,Be=Me=ve=null,Qu=!1,e)throw Error(A(300));return t}function Xm(){var t=ga!==0;return ga=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?ve.memoizedState=Be=t:Be=Be.next=t,Be}function Gt(){if(Me===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Be===null?ve.memoizedState:Be.next;if(e!==null)Be=e,Me=t;else{if(t===null)throw Error(A(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Be===null?ve.memoizedState=Be=t:Be=Be.next=t}return Be}function ya(t,e){return typeof e=="function"?e(t):e}function _d(t){var e=Gt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=Me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((_s&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ve.lanes|=c,xs|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,on(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ve.lanes|=i,xs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xd(t){var e=Gt(),n=e.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jE(){}function FE(t,e){var n=ve,r=Gt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,Jm(BE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,va(9,VE.bind(null,n,r,s,e),void 0,null),ze===null)throw Error(A(349));_s&30||UE(n,e,s)}return s}function UE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function VE(t,e,n,r){e.value=n,e.getSnapshot=r,zE(e)&&HE(t)}function BE(t,e,n){return n(function(){zE(e)&&HE(t)})}function zE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function HE(t){var e=Qn(t,1);e!==null&&sn(e,t,1,-1)}function Z0(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},e.queue=t,t=t.dispatch=C5.bind(null,ve,t),[e.memoizedState,t]}function va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function WE(){return Gt().memoizedState}function fu(t,e,n,r){var s=hn();ve.flags|=t,s.memoizedState=va(1|e,n,void 0,r===void 0?null:r)}function Kc(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Me!==null){var o=Me.memoizedState;if(i=o.destroy,r!==null&&Qm(r,o.deps)){s.memoizedState=va(e,n,i,r);return}}ve.flags|=t,s.memoizedState=va(1|e,n,i,r)}function ey(t,e){return fu(8390656,8,t,e)}function Jm(t,e){return Kc(2048,8,t,e)}function KE(t,e){return Kc(4,2,t,e)}function qE(t,e){return Kc(4,4,t,e)}function GE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function QE(t,e,n){return n=n!=null?n.concat([t]):null,Kc(4,4,GE.bind(null,e,t),n)}function Zm(){}function YE(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function XE(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function JE(t,e,n){return _s&21?(on(n,e)||(n=tE(),ve.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function w5(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=Td.transition;Td.transition={};try{t(!1),e()}finally{ne=n,Td.transition=r}}function ZE(){return Gt().memoizedState}function E5(t,e,n){var r=kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eC(t))tC(e,n);else if(n=NE(t,e,n,r),n!==null){var s=mt();sn(n,t,r,s),nC(n,e,r)}}function C5(t,e,n){var r=kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eC(t))tC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,on(a,o)){var l=e.interleaved;l===null?(s.next=s,Hm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=NE(t,e,s,r),n!==null&&(s=mt(),sn(n,t,r,s),nC(n,e,r))}}function eC(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function tC(t,e){Bo=Qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pm(t,n)}}var Yu={readContext:qt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},S5={readContext:qt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:ey,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,GE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=E5.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:Z0,useDebugValue:Zm,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=Z0(!1),e=t[0];return t=w5.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,s=hn();if(he){if(n===void 0)throw Error(A(407));n=n()}else{if(n=e(),ze===null)throw Error(A(349));_s&30||UE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ey(BE.bind(null,r,i,t),[t]),r.flags|=2048,va(9,VE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=ze.identifierPrefix;if(he){var n=jn,r=$n;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},T5={readContext:qt,useCallback:YE,useContext:qt,useEffect:Jm,useImperativeHandle:QE,useInsertionEffect:KE,useLayoutEffect:qE,useMemo:XE,useReducer:_d,useRef:WE,useState:function(){return _d(ya)},useDebugValue:Zm,useDeferredValue:function(t){var e=Gt();return JE(e,Me.memoizedState,t)},useTransition:function(){var t=_d(ya)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:jE,useSyncExternalStore:FE,useId:ZE,unstable_isNewReconciler:!1},_5={readContext:qt,useCallback:YE,useContext:qt,useEffect:Jm,useImperativeHandle:QE,useInsertionEffect:KE,useLayoutEffect:qE,useMemo:XE,useReducer:xd,useRef:WE,useState:function(){return xd(ya)},useDebugValue:Zm,useDeferredValue:function(t){var e=Gt();return Me===null?e.memoizedState=t:JE(e,Me.memoizedState,t)},useTransition:function(){var t=xd(ya)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:jE,useSyncExternalStore:FE,useId:ZE,unstable_isNewReconciler:!1};function Li(t,e){try{var n="",r=e;do n+=J3(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Id(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var x5=typeof WeakMap=="function"?WeakMap:Map;function rC(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ju||(Ju=!0,up=r),Zf(t,e)},n}function sC(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zf(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ty(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new x5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=F5.bind(null,t,e,n),e.then(t,t))}function ny(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ry(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,xr(n,e,1))),n.lanes|=1),t)}var I5=rr.ReactCurrentOwner,Ct=!1;function ft(t,e,n,r){e.child=t===null?bE(e,null,n,r):Ni(e,t.child,n,r)}function sy(t,e,n,r,s){n=n.render;var i=e.ref;return wi(e,s),r=Ym(t,e,n,r,i,s),n=Xm(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(he&&n&&jm(e),e.flags|=1,ft(t,e,r,s),e.child)}function iy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ag(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iC(t,e,i,r,s)):(t=yu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ca,n(o,r)&&t.ref===e.ref)return Yn(t,e,s)}return e.flags|=1,t=Rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function iC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ca(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Yn(t,e,s)}return ep(t,e,n,r,s)}function oC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(ui,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(ui,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se(ui,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,se(ui,Rt),Rt|=r;return ft(t,e,s,n),e.child}function aC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ep(t,e,n,r,s){var i=Tt(n)?Ss:lt.current;return i=Ai(e,i),wi(e,s),n=Ym(t,e,n,r,i,s),r=Xm(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(he&&r&&jm(e),e.flags|=1,ft(t,e,n,s),e.child)}function oy(t,e,n,r,s){if(Tt(n)){var i=!0;Bu(e)}else i=!1;if(wi(e,s),e.stateNode===null)pu(t,e),OE(e,n,r),Jf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qt(u):(u=Tt(n)?Ss:lt.current,u=Ai(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&X0(e,o,r,u),ur=!1;var d=e.memoizedState;o.state=d,qu(e,r,o,s),l=e.memoizedState,a!==r||d!==l||St.current||ur?(typeof c=="function"&&(Xf(e,n,c,r),l=e.memoizedState),(a=ur||Y0(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,DE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Jt(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qt(l):(l=Tt(n)?Ss:lt.current,l=Ai(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&X0(e,o,r,l),ur=!1,d=e.memoizedState,o.state=d,qu(e,r,o,s);var g=e.memoizedState;a!==h||d!==g||St.current||ur?(typeof f=="function"&&(Xf(e,n,f,r),g=e.memoizedState),(u=ur||Y0(e,n,u,r,d,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return tp(t,e,n,r,i,s)}function tp(t,e,n,r,s,i){aC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&W0(e,n,!1),Yn(t,e,i);r=e.stateNode,I5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ni(e,t.child,null,i),e.child=Ni(e,null,a,i)):ft(t,e,a,i),e.memoizedState=r.state,s&&W0(e,n,!0),e.child}function lC(t){var e=t.stateNode;e.pendingContext?H0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H0(t,e.context,!1),Km(t,e.containerInfo)}function ay(t,e,n,r,s){return Pi(),Um(s),e.flags|=256,ft(t,e,n,r),e.child}var np={dehydrated:null,treeContext:null,retryLane:0};function rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function uC(t,e,n){var r=e.pendingProps,s=ge.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),se(ge,s&1),t===null)return Qf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qc(o,r,0,null),t=vs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rp(n),e.memoizedState=np,t):eg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return k5(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rr(a,i):(i=vs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?rp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=np,r}return i=t.child,t=i.sibling,r=Rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function eg(t,e){return e=Qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Um(r),Ni(e,t.child,null,n),t=eg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k5(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Id(Error(A(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qc({mode:"visible",children:r.children},s,0,null),i=vs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ni(e,t.child,null,o),e.child.memoizedState=rp(o),e.memoizedState=np,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(A(419)),r=Id(i,r,void 0),Vl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),sn(r,t,s,-1))}return og(),r=Id(Error(A(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=U5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,At=_r(s.nextSibling),Dt=e,he=!0,en=null,t!==null&&(Vt[Bt++]=$n,Vt[Bt++]=jn,Vt[Bt++]=Ts,$n=t.id,jn=t.overflow,Ts=e),e=eg(e,r.children),e.flags|=4096,e)}function ly(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yf(t.return,e,n)}function kd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ly(t,n,e);else if(t.tag===19)ly(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(ge,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kd(e,!0,n,null,i);break;case"together":kd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function R5(t,e,n){switch(e.tag){case 3:lC(e),Pi();break;case 5:$E(e);break;case 1:Tt(e.type)&&Bu(e);break;case 4:Km(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;se(Wu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?uC(t,e,n):(se(ge,ge.current&1),t=Yn(t,e,n),t!==null?t.sibling:null);se(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),se(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,oC(t,e,n)}return Yn(t,e,n)}var hC,sp,dC,fC;hC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sp=function(){};dC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,cs(wn.current);var i=null;switch(n){case"input":s=If(t,s),r=If(t,r),i=[];break;case"select":s=we({},s,{value:void 0}),r=we({},r,{value:void 0}),i=[];break;case"textarea":s=Af(t,s),r=Af(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uu)}Nf(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ra.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ra.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ae("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};fC=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function A5(t,e,n){var r=e.pendingProps;switch(Fm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return Tt(e.type)&&Vu(),Ze(e),null;case 3:return r=e.stateNode,Di(),ue(St),ue(lt),Gm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(dp(en),en=null))),sp(t,e),Ze(e),null;case 5:qm(e);var s=cs(ma.current);if(n=e.type,t!==null&&e.stateNode!=null)dC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(A(166));return Ze(e),null}if(t=cs(wn.current),Fl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[fa]=i,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(s=0;s<Ro.length;s++)ae(Ro[s],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":y0(r,i),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ae("invalid",r);break;case"textarea":w0(r,i),ae("invalid",r)}Nf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jl(r.textContent,a,t),s=["children",""+a]):ra.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ae("scroll",r)}switch(n){case"input":Pl(r),v0(r,i,!0);break;case"textarea":Pl(r),E0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[fa]=r,hC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Df(n,r),n){case"dialog":ae("cancel",t),ae("close",t),s=r;break;case"iframe":case"object":case"embed":ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ro.length;s++)ae(Ro[s],t);s=r;break;case"source":ae("error",t),s=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),s=r;break;case"details":ae("toggle",t),s=r;break;case"input":y0(t,r),s=If(t,r),ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=we({},r,{value:void 0}),ae("invalid",t);break;case"textarea":w0(t,r),s=Af(t,r),ae("invalid",t);break;default:s=r}Nf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?z2(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&V2(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sa(t,l):typeof l=="number"&&sa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ra.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ae("scroll",t):l!=null&&_m(t,i,l,o))}switch(n){case"input":Pl(t),v0(t,r,!1);break;case"textarea":Pl(t),E0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+br(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?mi(t,!!r.multiple,i,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)fC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(A(166));if(n=cs(ma.current),cs(wn.current),Fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:jl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return Ze(e),null;case 13:if(ue(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&At!==null&&e.mode&1&&!(e.flags&128))PE(),Pi(),e.flags|=98560,i=!1;else if(i=Fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(A(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[fn]=e}else Pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else en!==null&&(dp(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?je===0&&(je=3):og())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return Di(),sp(t,e),t===null&&ha(e.stateNode.containerInfo),Ze(e),null;case 10:return zm(e.type._context),Ze(e),null;case 17:return Tt(e.type)&&Vu(),Ze(e),null;case 19:if(ue(ge),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yo(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gu(t),o!==null){for(e.flags|=128,yo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(ge,ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Oi&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!he)return Ze(e),null}else 2*Ae()-i.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=ge.current,se(ge,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function P5(t,e){switch(Fm(e),e.tag){case 1:return Tt(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Di(),ue(St),ue(lt),Gm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qm(e),null;case 13:if(ue(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(ge),null;case 4:return Di(),null;case 10:return zm(e.type._context),null;case 22:case 23:return ig(),null;case 24:return null;default:return null}}var Bl=!1,nt=!1,N5=typeof WeakSet=="function"?WeakSet:Set,L=null;function li(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function ip(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var uy=!1;function D5(t,e){if(Bf=$u,t=yE(),$m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zf={focusedElem:t,selectionRange:n},$u=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,S=g.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Jt(e.type,w),S);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(C){Ce(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return g=uy,uy=!1,g}function zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ip(e,n,i)}s=s.next}while(s!==r)}}function qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function op(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pC(t){var e=t.alternate;e!==null&&(t.alternate=null,pC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[fa],delete e[Kf],delete e[p5],delete e[m5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mC(t){return t.tag===5||t.tag===3||t.tag===4}function cy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uu));else if(r!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}function lp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}var Ke=null,Zt=!1;function sr(t,e,n){for(n=n.child;n!==null;)gC(t,e,n),n=n.sibling}function gC(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Fc,n)}catch{}switch(n.tag){case 5:nt||li(n,e);case 6:var r=Ke,s=Zt;Ke=null,sr(t,e,n),Ke=r,Zt=s,Ke!==null&&(Zt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Zt?(t=Ke,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),la(t)):Ed(Ke,n.stateNode));break;case 4:r=Ke,s=Zt,Ke=n.stateNode.containerInfo,Zt=!0,sr(t,e,n),Ke=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ip(n,e,o),s=s.next}while(s!==r)}sr(t,e,n);break;case 1:if(!nt&&(li(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,e,a)}sr(t,e,n);break;case 21:sr(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,sr(t,e,n),nt=r):sr(t,e,n);break;default:sr(t,e,n)}}function hy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new N5),e.forEach(function(r){var s=V5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ke=a.stateNode,Zt=!1;break e;case 3:Ke=a.stateNode.containerInfo,Zt=!0;break e;case 4:Ke=a.stateNode.containerInfo,Zt=!0;break e}a=a.return}if(Ke===null)throw Error(A(160));gC(i,o,s),Ke=null,Zt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ce(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yC(e,t),e=e.sibling}function yC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),cn(t),r&4){try{zo(3,t,t.return),qc(3,t)}catch(w){Ce(t,t.return,w)}try{zo(5,t,t.return)}catch(w){Ce(t,t.return,w)}}break;case 1:Xt(e,t),cn(t),r&512&&n!==null&&li(n,n.return);break;case 5:if(Xt(e,t),cn(t),r&512&&n!==null&&li(n,n.return),t.flags&32){var s=t.stateNode;try{sa(s,"")}catch(w){Ce(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&j2(s,i),Df(a,o);var u=Df(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?z2(s,h):c==="dangerouslySetInnerHTML"?V2(s,h):c==="children"?sa(s,h):_m(s,c,h,u)}switch(a){case"input":kf(s,i);break;case"textarea":F2(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?mi(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?mi(s,!!i.multiple,i.defaultValue,!0):mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[fa]=i}catch(w){Ce(t,t.return,w)}}break;case 6:if(Xt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(A(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Ce(t,t.return,w)}}break;case 3:if(Xt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{la(e.containerInfo)}catch(w){Ce(t,t.return,w)}break;case 4:Xt(e,t),cn(t);break;case 13:Xt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rg=Ae())),r&4&&hy(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(u=nt)||c,Xt(e,t),nt=u):Xt(e,t),cn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(L=t,c=t.child;c!==null;){for(h=L=c;L!==null;){switch(d=L,f=d.child,d.tag){case 0:case 11:case 14:case 15:zo(4,d,d.return);break;case 1:li(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){Ce(r,n,w)}}break;case 5:li(d,d.return);break;case 22:if(d.memoizedState!==null){fy(h);continue}}f!==null?(f.return=d,L=f):fy(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=B2("display",o))}catch(w){Ce(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Ce(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xt(e,t),cn(t),r&4&&hy(t);break;case 21:break;default:Xt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mC(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sa(s,""),r.flags&=-33);var i=cy(t);lp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cy(t);ap(t,a,o);break;default:throw Error(A(161))}}catch(l){Ce(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function L5(t,e,n){L=t,vC(t)}function vC(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Bl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||nt;a=Bl;var u=nt;if(Bl=o,(nt=l)&&!u)for(L=s;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?py(s):l!==null?(l.return=o,L=l):py(s);for(;i!==null;)L=i,vC(i),i=i.sibling;L=s,Bl=a,nt=u}dy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):dy(t)}}function dy(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Q0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Q0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&la(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}nt||e.flags&512&&op(e)}catch(d){Ce(e,e.return,d)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function fy(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function py(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qc(4,e)}catch(l){Ce(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ce(e,s,l)}}var i=e.return;try{op(e)}catch(l){Ce(e,i,l)}break;case 5:var o=e.return;try{op(e)}catch(l){Ce(e,o,l)}}}catch(l){Ce(e,e.return,l)}if(e===t){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var O5=Math.ceil,Xu=rr.ReactCurrentDispatcher,tg=rr.ReactCurrentOwner,Wt=rr.ReactCurrentBatchConfig,Z=0,ze=null,Oe=null,Qe=0,Rt=0,ui=Wr(0),je=0,wa=null,xs=0,Gc=0,ng=0,Ho=null,wt=null,rg=0,Oi=1/0,On=null,Ju=!1,up=null,Ir=null,zl=!1,vr=null,Zu=0,Wo=0,cp=null,mu=-1,gu=0;function mt(){return Z&6?Ae():mu!==-1?mu:mu=Ae()}function kr(t){return t.mode&1?Z&2&&Qe!==0?Qe&-Qe:y5.transition!==null?(gu===0&&(gu=tE()),gu):(t=ne,t!==0||(t=window.event,t=t===void 0?16:lE(t.type)),t):1}function sn(t,e,n,r){if(50<Wo)throw Wo=0,cp=null,Error(A(185));qa(t,n,r),(!(Z&2)||t!==ze)&&(t===ze&&(!(Z&2)&&(Gc|=n),je===4&&dr(t,Qe)),_t(t,r),n===1&&Z===0&&!(e.mode&1)&&(Oi=Ae()+500,Hc&&Kr()))}function _t(t,e){var n=t.callbackNode;yI(t,e);var r=bu(t,t===ze?Qe:0);if(r===0)n!==null&&T0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&T0(n),e===1)t.tag===0?g5(my.bind(null,t)):kE(my.bind(null,t)),d5(function(){!(Z&6)&&Kr()}),n=null;else{switch(nE(r)){case 1:n=Am;break;case 4:n=Z2;break;case 16:n=Mu;break;case 536870912:n=eE;break;default:n=Mu}n=IC(n,wC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wC(t,e){if(mu=-1,gu=0,Z&6)throw Error(A(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=bu(t,t===ze?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ec(t,r);else{e=r;var s=Z;Z|=2;var i=CC();(ze!==t||Qe!==e)&&(On=null,Oi=Ae()+500,ys(t,e));do try{$5();break}catch(a){EC(t,a)}while(1);Bm(),Xu.current=i,Z=s,Oe!==null?e=0:(ze=null,Qe=0,e=je)}if(e!==0){if(e===2&&(s=$f(t),s!==0&&(r=s,e=hp(t,s))),e===1)throw n=wa,ys(t,0),dr(t,r),_t(t,Ae()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!M5(s)&&(e=ec(t,r),e===2&&(i=$f(t),i!==0&&(r=i,e=hp(t,i))),e===1))throw n=wa,ys(t,0),dr(t,r),_t(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(A(345));case 2:ss(t,wt,On);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=rg+500-Ae(),10<e)){if(bu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wf(ss.bind(null,t,wt,On),e);break}ss(t,wt,On);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O5(r/1960))-r,10<r){t.timeoutHandle=Wf(ss.bind(null,t,wt,On),r);break}ss(t,wt,On);break;case 5:ss(t,wt,On);break;default:throw Error(A(329))}}}return _t(t,Ae()),t.callbackNode===n?wC.bind(null,t):null}function hp(t,e){var n=Ho;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=ec(t,e),t!==2&&(e=wt,wt=n,e!==null&&dp(e)),t}function dp(t){wt===null?wt=t:wt.push.apply(wt,t)}function M5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~ng,e&=~Gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function my(t){if(Z&6)throw Error(A(327));Ei();var e=bu(t,0);if(!(e&1))return _t(t,Ae()),null;var n=ec(t,e);if(t.tag!==0&&n===2){var r=$f(t);r!==0&&(e=r,n=hp(t,r))}if(n===1)throw n=wa,ys(t,0),dr(t,e),_t(t,Ae()),n;if(n===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ss(t,wt,On),_t(t,Ae()),null}function sg(t,e){var n=Z;Z|=1;try{return t(e)}finally{Z=n,Z===0&&(Oi=Ae()+500,Hc&&Kr())}}function Is(t){vr!==null&&vr.tag===0&&!(Z&6)&&Ei();var e=Z;Z|=1;var n=Wt.transition,r=ne;try{if(Wt.transition=null,ne=1,t)return t()}finally{ne=r,Wt.transition=n,Z=e,!(Z&6)&&Kr()}}function ig(){Rt=ui.current,ue(ui)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,h5(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Fm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:Di(),ue(St),ue(lt),Gm();break;case 5:qm(r);break;case 4:Di();break;case 13:ue(ge);break;case 19:ue(ge);break;case 10:zm(r.type._context);break;case 22:case 23:ig()}n=n.return}if(ze=t,Oe=t=Rr(t.current,null),Qe=Rt=e,je=0,wa=null,ng=Gc=xs=0,wt=Ho=null,us!==null){for(e=0;e<us.length;e++)if(n=us[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}us=null}return t}function EC(t,e){do{var n=Oe;try{if(Bm(),du.current=Yu,Qu){for(var r=ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qu=!1}if(_s=0,Be=Me=ve=null,Bo=!1,ga=0,tg.current=null,n===null||n.return===null){je=1,wa=e,Oe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ny(o);if(f!==null){f.flags&=-257,ry(f,o,a,i,e),f.mode&1&&ty(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(l),e.updateQueue=w}else g.add(l);break e}else{if(!(e&1)){ty(i,u,e),og();break e}l=Error(A(426))}}else if(he&&a.mode&1){var S=ny(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),ry(S,o,a,i,e),Um(Li(l,a));break e}}i=l=Li(l,a),je!==4&&(je=2),Ho===null?Ho=[i]:Ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=rC(i,l,e);G0(i,v);break e;case 1:a=l;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ir===null||!Ir.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=sC(i,a,e);G0(i,C);break e}}i=i.return}while(i!==null)}TC(n)}catch(T){e=T,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(1)}function CC(){var t=Xu.current;return Xu.current=Yu,t===null?Yu:t}function og(){(je===0||je===3||je===2)&&(je=4),ze===null||!(xs&268435455)&&!(Gc&268435455)||dr(ze,Qe)}function ec(t,e){var n=Z;Z|=2;var r=CC();(ze!==t||Qe!==e)&&(On=null,ys(t,e));do try{b5();break}catch(s){EC(t,s)}while(1);if(Bm(),Z=n,Xu.current=r,Oe!==null)throw Error(A(261));return ze=null,Qe=0,je}function b5(){for(;Oe!==null;)SC(Oe)}function $5(){for(;Oe!==null&&!lI();)SC(Oe)}function SC(t){var e=xC(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?TC(t):Oe=e,tg.current=null}function TC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=P5(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Oe=null;return}}else if(n=A5(n,e,Rt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);je===0&&(je=5)}function ss(t,e,n){var r=ne,s=Wt.transition;try{Wt.transition=null,ne=1,j5(t,e,n,r)}finally{Wt.transition=s,ne=r}return null}function j5(t,e,n,r){do Ei();while(vr!==null);if(Z&6)throw Error(A(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(vI(t,i),t===ze&&(Oe=ze=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,IC(Mu,function(){return Ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=ne;ne=1;var a=Z;Z|=4,tg.current=null,D5(t,n),yC(n,t),s5(zf),$u=!!Bf,zf=Bf=null,t.current=n,L5(n),uI(),Z=a,ne=o,Wt.transition=i}else t.current=n;if(zl&&(zl=!1,vr=t,Zu=s),i=t.pendingLanes,i===0&&(Ir=null),dI(n.stateNode),_t(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ju)throw Ju=!1,t=up,up=null,t;return Zu&1&&t.tag!==0&&Ei(),i=t.pendingLanes,i&1?t===cp?Wo++:(Wo=0,cp=t):Wo=0,Kr(),null}function Ei(){if(vr!==null){var t=nE(Zu),e=Wt.transition,n=ne;try{if(Wt.transition=null,ne=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,Zu=0,Z&6)throw Error(A(331));var s=Z;for(Z|=4,L=t.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(L=u;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:zo(8,c,i)}var h=c.child;if(h!==null)h.return=c,L=h;else for(;L!==null;){c=L;var d=c.sibling,f=c.return;if(pC(c),c===u){L=null;break}if(d!==null){d.return=f,L=d;break}L=f}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zo(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,L=v;break e}L=i.return}}var m=t.current;for(L=m;L!==null;){o=L;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,L=y;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qc(9,a)}}catch(T){Ce(a,a.return,T)}if(a===o){L=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,L=C;break e}L=a.return}}if(Z=s,Kr(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Fc,t)}catch{}r=!0}return r}finally{ne=n,Wt.transition=e}}return!1}function gy(t,e,n){e=Li(n,e),e=rC(t,e,1),t=xr(t,e,1),e=mt(),t!==null&&(qa(t,1,e),_t(t,e))}function Ce(t,e,n){if(t.tag===3)gy(t,t,n);else for(;e!==null;){if(e.tag===3){gy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=Li(n,t),t=sC(e,t,1),e=xr(e,t,1),t=mt(),e!==null&&(qa(e,1,t),_t(e,t));break}}e=e.return}}function F5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Qe&n)===n&&(je===4||je===3&&(Qe&130023424)===Qe&&500>Ae()-rg?ys(t,0):ng|=n),_t(t,e)}function _C(t,e){e===0&&(t.mode&1?(e=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):e=1);var n=mt();t=Qn(t,e),t!==null&&(qa(t,e,n),_t(t,n))}function U5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_C(t,n)}function V5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(e),_C(t,n)}var xC;xC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,R5(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,he&&e.flags&1048576&&RE(e,Hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var s=Ai(e,lt.current);wi(e,n),s=Ym(null,e,r,t,s,n);var i=Xm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(i=!0,Bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wm(e),s.updater=Wc,e.stateNode=s,s._reactInternals=e,Jf(e,r,t,n),e=tp(null,e,r,!0,i,n)):(e.tag=0,he&&i&&jm(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=z5(r),t=Jt(r,t),s){case 0:e=ep(null,e,r,t,n);break e;case 1:e=oy(null,e,r,t,n);break e;case 11:e=sy(null,e,r,t,n);break e;case 14:e=iy(null,e,r,Jt(r.type,t),n);break e}throw Error(A(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),ep(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),oy(t,e,r,s,n);case 3:e:{if(lC(e),t===null)throw Error(A(387));r=e.pendingProps,i=e.memoizedState,s=i.element,DE(t,e),qu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Li(Error(A(423)),e),e=ay(t,e,r,n,s);break e}else if(r!==s){s=Li(Error(A(424)),e),e=ay(t,e,r,n,s);break e}else for(At=_r(e.stateNode.containerInfo.firstChild),Dt=e,he=!0,en=null,n=bE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),r===s){e=Yn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return $E(e),t===null&&Qf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Hf(r,s)?o=null:i!==null&&Hf(r,i)&&(e.flags|=32),aC(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Qf(e),null;case 13:return uC(t,e,n);case 4:return Km(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ni(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),sy(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,se(Wu,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!St.current){e=Yn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=zn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Yf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Yf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wi(e,n),s=qt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=Jt(r,e.pendingProps),s=Jt(r.type,s),iy(t,e,r,s,n);case 15:return iC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),pu(t,e),e.tag=1,Tt(r)?(t=!0,Bu(e)):t=!1,wi(e,n),OE(e,r,s),Jf(e,r,s,n),tp(null,e,r,!0,t,n);case 19:return cC(t,e,n);case 22:return oC(t,e,n)}throw Error(A(156,e.tag))};function IC(t,e){return J2(t,e)}function B5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new B5(t,e,n,r)}function ag(t){return t=t.prototype,!(!t||!t.isReactComponent)}function z5(t){if(typeof t=="function")return ag(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Im)return 11;if(t===km)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ag(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zs:return vs(n.children,s,i,e);case xm:o=8,s|=8;break;case Sf:return t=Ht(12,n,e,s|2),t.elementType=Sf,t.lanes=i,t;case Tf:return t=Ht(13,n,e,s),t.elementType=Tf,t.lanes=i,t;case _f:return t=Ht(19,n,e,s),t.elementType=_f,t.lanes=i,t;case M2:return Qc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L2:o=10;break e;case O2:o=9;break e;case Im:o=11;break e;case km:o=14;break e;case lr:o=16,r=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=Ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vs(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function Qc(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=M2,t.lanes=n,t.stateNode={isHidden:!1},t}function Rd(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function Ad(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function H5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lg(t,e,n,r,s,i,o,a,l){return t=new H5(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wm(i),t}function W5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function kC(t){if(!t)return $r;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var n=t.type;if(Tt(n))return IE(t,n,e)}return e}function RC(t,e,n,r,s,i,o,a,l){return t=lg(n,r,!0,t,s,i,o,a,l),t.context=kC(null),n=t.current,r=mt(),s=kr(n),i=zn(r,s),i.callback=e??null,xr(n,i,s),t.current.lanes=s,qa(t,s,r),_t(t,r),t}function Yc(t,e,n,r){var s=e.current,i=mt(),o=kr(s);return n=kC(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xr(s,e,o),t!==null&&(sn(t,s,o,i),hu(t,s,o)),o}function tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ug(t,e){yy(t,e),(t=t.alternate)&&yy(t,e)}function K5(){return null}var AC=typeof reportError=="function"?reportError:function(t){console.error(t)};function cg(t){this._internalRoot=t}Xc.prototype.render=cg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Yc(t,e,null,null)};Xc.prototype.unmount=cg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){Yc(null,t,null,null)}),e[Gn]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=iE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&aE(t)}};function hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vy(){}function q5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=tc(o);i.call(u)}}var o=RC(e,r,t,0,null,!1,!1,"",vy);return t._reactRootContainer=o,t[Gn]=o.current,ha(t.nodeType===8?t.parentNode:t),Is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=tc(l);a.call(u)}}var l=lg(t,0,!1,null,null,!1,!1,"",vy);return t._reactRootContainer=l,t[Gn]=l.current,ha(t.nodeType===8?t.parentNode:t),Is(function(){Yc(e,l,n,r)}),l}function Zc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=tc(o);a.call(l)}}Yc(e,o,t,s)}else o=q5(n,e,t,s,r);return tc(o)}rE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ko(e.pendingLanes);n!==0&&(Pm(e,n|1),_t(e,Ae()),!(Z&6)&&(Oi=Ae()+500,Kr()))}break;case 13:Is(function(){var r=Qn(t,1);if(r!==null){var s=mt();sn(r,t,1,s)}}),ug(t,1)}};Nm=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=mt();sn(e,t,134217728,n)}ug(t,134217728)}};sE=function(t){if(t.tag===13){var e=kr(t),n=Qn(t,e);if(n!==null){var r=mt();sn(n,t,e,r)}ug(t,e)}};iE=function(){return ne};oE=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};Of=function(t,e,n){switch(e){case"input":if(kf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=zc(r);if(!s)throw Error(A(90));$2(r),kf(r,s)}}}break;case"textarea":F2(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};K2=sg;q2=Is;var G5={usingClientEntryPoint:!1,Events:[Qa,ri,zc,H2,W2,sg]},vo={findFiberByHostInstance:ls,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Q5={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y2(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||K5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{Fc=Hl.inject(Q5),vn=Hl}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G5;bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hg(e))throw Error(A(200));return W5(t,e,null,n)};bt.createRoot=function(t,e){if(!hg(t))throw Error(A(299));var n=!1,r="",s=AC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lg(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,ha(t.nodeType===8?t.parentNode:t),new cg(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=Y2(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return Is(t)};bt.hydrate=function(t,e,n){if(!Jc(e))throw Error(A(200));return Zc(null,t,e,!0,n)};bt.hydrateRoot=function(t,e,n){if(!hg(t))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=AC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=RC(e,null,t,1,n??null,s,!1,i,o),t[Gn]=e.current,ha(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xc(e)};bt.render=function(t,e,n){if(!Jc(e))throw Error(A(200));return Zc(null,t,e,!1,n)};bt.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(A(40));return t._reactRootContainer?(Is(function(){Zc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};bt.unstable_batchedUpdates=sg;bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Zc(t,e,n,!1,r)};bt.version="18.2.0-next-9e3b772b8-20220608";function PC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PC)}catch(t){console.error(t)}}PC(),R2.exports=bt;var Y5=R2.exports,wy=Y5;Ef.createRoot=wy.createRoot,Ef.hydrateRoot=wy.hydrateRoot;/**
 * @remix-run/router v1.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ea.apply(this,arguments)}var wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wr||(wr={}));const Ey="popstate";function X5(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return fp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nc(s)}return Z5(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J5(){return Math.random().toString(36).substr(2,8)}function Cy(t,e){return{usr:t.state,key:t.key,idx:e}}function fp(t,e,n,r){return n===void 0&&(n=null),Ea({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||J5()})}function nc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Z5(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=wr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Ea({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=wr.Pop;let S=c(),v=S==null?null:S-u;u=S,l&&l({action:a,location:w.location,delta:v})}function d(S,v){a=wr.Push;let m=fp(w.location,S,v);n&&n(m,S),u=c()+1;let y=Cy(m,u),C=w.createHref(m);try{o.pushState(y,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(C)}i&&l&&l({action:a,location:w.location,delta:1})}function f(S,v){a=wr.Replace;let m=fp(w.location,S,v);n&&n(m,S),u=c();let y=Cy(m,u),C=w.createHref(m);o.replaceState(y,"",C),i&&l&&l({action:a,location:w.location,delta:0})}function g(S){let v=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof S=="string"?S:nc(S);return Pe(v,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,v)}let w={get action(){return a},get location(){return t(s,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ey,h),l=S,()=>{s.removeEventListener(Ey,h),l=null}},createHref(S){return e(s,S)},createURL:g,encodeLocation(S){let v=g(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(S){return o.go(S)}};return w}var Sy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sy||(Sy={}));function ek(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xi(e):e,s=fg(r.pathname||"/",n);if(s==null)return null;let i=NC(t);tk(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=ck(i[a],fk(s));return o}function NC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Pe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ar([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),NC(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:lk(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of DC(i.path))s(i,o,l)}),e}function DC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=DC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function tk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nk=/^:\w+$/,rk=3,sk=2,ik=1,ok=10,ak=-2,Ty=t=>t==="*";function lk(t,e){let n=t.split("/"),r=n.length;return n.some(Ty)&&(r+=ak),e&&(r+=sk),n.filter(s=>!Ty(s)).reduce((s,i)=>s+(nk.test(i)?rk:i===""?ik:ok),r)}function uk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ck(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",c=hk({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;i.push({params:r,pathname:Ar([s,c.pathname]),pathnameBase:yk(Ar([s,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(s=Ar([s,c.pathnameBase]))}return i}function hk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let d=a[h]||"";o=i.slice(0,i.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=pk(a[h]||"",c),u},{}),pathname:i,pathnameBase:o,pattern:t}}function dk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function fk(t){try{return decodeURI(t)}catch(e){return dg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pk(t,e){try{return decodeURIComponent(t)}catch(n){return dg(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function fg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:gk(n,e):e,search:vk(r),hash:wk(s)}}function gk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pg(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xi(t):(s=Ea({},t),Pe(!s.pathname||!s.pathname.includes("?"),Pd("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),Pd("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),Pd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=mk(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ar=t=>t.join("/").replace(/\/\/+/g,"/"),yk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ek(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const LC=["post","put","patch","delete"];new Set(LC);const Ck=["get",...LC];new Set(Ck);/**
 * React Router v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rc.apply(this,arguments)}const gg=E.createContext(null),Sk=E.createContext(null),Ji=E.createContext(null),eh=E.createContext(null),Pn=E.createContext({outlet:null,matches:[],isDataRoute:!1}),OC=E.createContext(null);function Tk(t,e){let{relative:n}=e===void 0?{}:e;Zi()||Pe(!1);let{basename:r,navigator:s}=E.useContext(Ji),{hash:i,pathname:o,search:a}=$C(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ar([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Zi(){return E.useContext(eh)!=null}function $s(){return Zi()||Pe(!1),E.useContext(eh).location}function MC(t){E.useContext(Ji).static||E.useLayoutEffect(t)}function th(){let{isDataRoute:t}=E.useContext(Pn);return t?jk():_k()}function _k(){Zi()||Pe(!1);let t=E.useContext(gg),{basename:e,navigator:n}=E.useContext(Ji),{matches:r}=E.useContext(Pn),{pathname:s}=$s(),i=JSON.stringify(pg(r).map(l=>l.pathnameBase)),o=E.useRef(!1);return MC(()=>{o.current=!0}),E.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=mg(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Ar([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,i,s,t])}const xk=E.createContext(null);function Ik(t){let e=E.useContext(Pn).outlet;return e&&E.createElement(xk.Provider,{value:t},e)}function bC(){let{matches:t}=E.useContext(Pn),e=t[t.length-1];return e?e.params:{}}function $C(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=E.useContext(Pn),{pathname:s}=$s(),i=JSON.stringify(pg(r).map(o=>o.pathnameBase));return E.useMemo(()=>mg(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function kk(t,e){return Rk(t,e)}function Rk(t,e,n){Zi()||Pe(!1);let{navigator:r}=E.useContext(Ji),{matches:s}=E.useContext(Pn),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=$s(),u;if(e){var c;let w=typeof e=="string"?Xi(e):e;a==="/"||(c=w.pathname)!=null&&c.startsWith(a)||Pe(!1),u=w}else u=l;let h=u.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=ek(t,{pathname:d}),g=Lk(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Ar([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Ar([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n);return e&&g?E.createElement(eh.Provider,{value:{location:rc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wr.Pop}},g):g}function Ak(){let t=$k(),e=Ek(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,i)}const Pk=E.createElement(Ak,null);class Nk extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?E.createElement(Pn.Provider,{value:this.props.routeContext},E.createElement(OC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dk(t){let{routeContext:e,match:n,children:r}=t,s=E.useContext(gg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Pn.Provider,{value:e},r)}function Lk(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Pe(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||Pk);let d=e.concat(i.slice(0,u+1)),f=()=>{let g;return c?g=h:l.route.Component?g=E.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,E.createElement(Dk,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?E.createElement(Nk,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:f(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):f()},null)}var pp;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(pp||(pp={}));var Ca;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ca||(Ca={}));function Ok(t){let e=E.useContext(gg);return e||Pe(!1),e}function Mk(t){let e=E.useContext(Sk);return e||Pe(!1),e}function bk(t){let e=E.useContext(Pn);return e||Pe(!1),e}function jC(t){let e=bk(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function $k(){var t;let e=E.useContext(OC),n=Mk(Ca.UseRouteError),r=jC(Ca.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function jk(){let{router:t}=Ok(pp.UseNavigateStable),e=jC(Ca.UseNavigateStable),n=E.useRef(!1);return MC(()=>{n.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,rc({fromRouteId:e},i)))},[t,e])}function _y(t){let{to:e,replace:n,state:r,relative:s}=t;Zi()||Pe(!1);let{matches:i}=E.useContext(Pn),{pathname:o}=$s(),a=th(),l=mg(e,pg(i).map(c=>c.pathnameBase),o,s==="path"),u=JSON.stringify(l);return E.useEffect(()=>a(JSON.parse(u),{replace:n,state:r,relative:s}),[a,u,s,n,r]),null}function Fk(t){return Ik(t.context)}function Ln(t){Pe(!1)}function Uk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=wr.Pop,navigator:i,static:o=!1}=t;Zi()&&Pe(!1);let a=e.replace(/^\/*/,"/"),l=E.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Xi(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=r,g=E.useMemo(()=>{let w=fg(u,a);return w==null?null:{location:{pathname:w,search:c,hash:h,state:d,key:f},navigationType:s}},[a,u,c,h,d,f,s]);return g==null?null:E.createElement(Ji.Provider,{value:l},E.createElement(eh.Provider,{children:n,value:g}))}function Vk(t){let{children:e,location:n}=t;return kk(mp(e),n)}var xy;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(xy||(xy={}));new Promise(()=>{});function mp(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let i=[...e,s];if(r.type===E.Fragment){n.push.apply(n,mp(r.props.children,i));return}r.type!==Ln&&Pe(!1),!r.props.index||!r.props.children||Pe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.12.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gp.apply(this,arguments)}function Bk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hk(t,e){return t.button===0&&(!e||e==="_self")&&!zk(t)}const Wk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Iy="startTransition";function Kk(t){let{basename:e,children:n,window:r}=t,s=E.useRef();s.current==null&&(s.current=X5({window:r,v5Compat:!0}));let i=s.current,[o,a]=E.useState({action:i.action,location:i.location}),l=E.useCallback(u=>{Iy in f0?f0[Iy](()=>a(u)):a(u)},[a]);return E.useLayoutEffect(()=>i.listen(l),[i,l]),E.createElement(Uk,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i})}const qk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yg=E.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,h=Bk(e,Wk),{basename:d}=E.useContext(Ji),f,g=!1;if(typeof u=="string"&&Gk.test(u)&&(f=u,qk))try{let m=new URL(window.location.href),y=u.startsWith("//")?new URL(m.protocol+u):new URL(u),C=fg(y.pathname,d);y.origin===m.origin&&C!=null?u=C+y.search+y.hash:g=!0}catch{}let w=Tk(u,{relative:s}),S=Qk(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s});function v(m){r&&r(m),m.defaultPrevented||S(m)}return E.createElement("a",gp({},h,{href:f||w,onClick:g||i?r:v,ref:n,target:l}))});var ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(ky||(ky={}));var Ry;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ry||(Ry={}));function Qk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=th(),l=$s(),u=$C(t,{relative:o});return E.useCallback(c=>{if(Hk(c,n)){c.preventDefault();let h=r!==void 0?r:nc(l)===nc(u);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,u,r,s,n,t,i,o])}var FC={exports:{}},Yk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xk=Yk,Jk=Xk;function UC(){}function VC(){}VC.resetWarningCache=UC;var Zk=function(){function t(r,s,i,o,a,l){if(l!==Jk){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:VC,resetWarningCache:UC};return n.PropTypes=n,n};FC.exports=Zk();var e9=FC.exports;const b=y2(e9),t9=(t,e)=>{switch(e.type){case"SET_LANG":return{...t,lang:e.payload,page:1};case"SET_MEDIA_TYPE":return{...t,mediaType:e.payload,page:1,filterGenre:"all",filterList:"top_rated"};case"SET_FILTER_LIST":return{...t,filterList:e.payload,page:1};case"SET_FILTER_GENRE":return{...t,filterGenre:e.payload,page:1};case"INCREASE_PAGE":return{...t,page:e.payload};case"INITIAL_LOAD_MOVIES":return{...t,moviesList:[...e.payload[0]],uniqueIds:[...e.payload[1]],totalPages:e.payload[2]};case"APPEND_MOVIES":{const n=[],r=e.payload[0].filter(s=>t.uniqueIds.includes(s.id)?!1:(n.push(s.id),!0));return{...t,moviesList:[...t.moviesList,...r],uniqueIds:[...t.uniqueIds,...n]}}case"SET_SEARCH_MODE":return{...t,page:1,filterList:"top_rated",filterGenre:"all",moviesListMode:"search",searchQuery:e.payload};case"SET_HOME_MODE":return{...t,page:1,filterList:"top_rated",filterGenre:"all",moviesListMode:"home"};default:return t}},n9=()=>{const t=localStorage.getItem("FBlang");return t||(navigator.language.split("-")[0]==="ru"?"ru":"en")};function BC(t,e){return function(){return t.apply(e,arguments)}}const{toString:r9}=Object.prototype,{getPrototypeOf:vg}=Object,nh=(t=>e=>{const n=r9.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Nn=t=>(t=t.toLowerCase(),e=>nh(e)===t),rh=t=>e=>typeof e===t,{isArray:eo}=Array,Sa=rh("undefined");function s9(t){return t!==null&&!Sa(t)&&t.constructor!==null&&!Sa(t.constructor)&&Kt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const zC=Nn("ArrayBuffer");function i9(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&zC(t.buffer),e}const o9=rh("string"),Kt=rh("function"),HC=rh("number"),sh=t=>t!==null&&typeof t=="object",a9=t=>t===!0||t===!1,vu=t=>{if(nh(t)!=="object")return!1;const e=vg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},l9=Nn("Date"),u9=Nn("File"),c9=Nn("Blob"),h9=Nn("FileList"),d9=t=>sh(t)&&Kt(t.pipe),f9=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Kt(t.append)&&((e=nh(t))==="formdata"||e==="object"&&Kt(t.toString)&&t.toString()==="[object FormData]"))},p9=Nn("URLSearchParams"),m9=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xa(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),eo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function WC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const KC=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),qC=t=>!Sa(t)&&t!==KC;function yp(){const{caseless:t}=qC(this)&&this||{},e={},n=(r,s)=>{const i=t&&WC(e,s)||s;vu(e[i])&&vu(r)?e[i]=yp(e[i],r):vu(r)?e[i]=yp({},r):eo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Xa(arguments[r],n);return e}const g9=(t,e,n,{allOwnKeys:r}={})=>(Xa(e,(s,i)=>{n&&Kt(s)?t[i]=BC(s,n):t[i]=s},{allOwnKeys:r}),t),y9=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),v9=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},w9=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&vg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},E9=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},C9=t=>{if(!t)return null;if(eo(t))return t;let e=t.length;if(!HC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},S9=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&vg(Uint8Array)),T9=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},_9=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},x9=Nn("HTMLFormElement"),I9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Ay=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),k9=Nn("RegExp"),GC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Xa(n,(s,i)=>{e(s,i,t)!==!1&&(r[i]=s)}),Object.defineProperties(t,r)},R9=t=>{GC(t,(e,n)=>{if(Kt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Kt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},A9=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return eo(t)?r(t):r(String(t).split(e)),n},P9=()=>{},N9=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Nd="abcdefghijklmnopqrstuvwxyz",Py="0123456789",QC={DIGIT:Py,ALPHA:Nd,ALPHA_DIGIT:Nd+Nd.toUpperCase()+Py},D9=(t=16,e=QC.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function L9(t){return!!(t&&Kt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const O9=t=>{const e=new Array(10),n=(r,s)=>{if(sh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=eo(r)?[]:{};return Xa(r,(o,a)=>{const l=n(o,s+1);!Sa(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},M9=Nn("AsyncFunction"),b9=t=>t&&(sh(t)||Kt(t))&&Kt(t.then)&&Kt(t.catch),_={isArray:eo,isArrayBuffer:zC,isBuffer:s9,isFormData:f9,isArrayBufferView:i9,isString:o9,isNumber:HC,isBoolean:a9,isObject:sh,isPlainObject:vu,isUndefined:Sa,isDate:l9,isFile:u9,isBlob:c9,isRegExp:k9,isFunction:Kt,isStream:d9,isURLSearchParams:p9,isTypedArray:S9,isFileList:h9,forEach:Xa,merge:yp,extend:g9,trim:m9,stripBOM:y9,inherits:v9,toFlatObject:w9,kindOf:nh,kindOfTest:Nn,endsWith:E9,toArray:C9,forEachEntry:T9,matchAll:_9,isHTMLForm:x9,hasOwnProperty:Ay,hasOwnProp:Ay,reduceDescriptors:GC,freezeMethods:R9,toObjectSet:A9,toCamelCase:I9,noop:P9,toFiniteNumber:N9,findKey:WC,global:KC,isContextDefined:qC,ALPHABET:QC,generateString:D9,isSpecCompliantForm:L9,toJSONObject:O9,isAsyncFn:M9,isThenable:b9};function J(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}_.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const YC=J.prototype,XC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{XC[t]={value:t}});Object.defineProperties(J,XC);Object.defineProperty(YC,"isAxiosError",{value:!0});J.from=(t,e,n,r,s,i)=>{const o=Object.create(YC);return _.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),J.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const $9=null;function vp(t){return _.isPlainObject(t)||_.isArray(t)}function JC(t){return _.endsWith(t,"[]")?t.slice(0,-2):t}function Ny(t,e,n){return t?t.concat(e).map(function(s,i){return s=JC(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function j9(t){return _.isArray(t)&&!t.some(vp)}const F9=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function ih(t,e,n){if(!_.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!_.isUndefined(S[w])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(_.isDate(g))return g.toISOString();if(!l&&_.isBlob(g))throw new J("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(g)||_.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,w,S){let v=g;if(g&&!S&&typeof g=="object"){if(_.endsWith(w,"{}"))w=r?w:w.slice(0,-2),g=JSON.stringify(g);else if(_.isArray(g)&&j9(g)||(_.isFileList(g)||_.endsWith(w,"[]"))&&(v=_.toArray(g)))return w=JC(w),v.forEach(function(y,C){!(_.isUndefined(y)||y===null)&&e.append(o===!0?Ny([w],C,i):o===null?w:w+"[]",u(y))}),!1}return vp(g)?!0:(e.append(Ny(S,w,i),u(g)),!1)}const h=[],d=Object.assign(F9,{defaultVisitor:c,convertValue:u,isVisitable:vp});function f(g,w){if(!_.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(g),_.forEach(g,function(v,m){(!(_.isUndefined(v)||v===null)&&s.call(e,v,_.isString(m)?m.trim():m,w,d))===!0&&f(v,w?w.concat(m):[m])}),h.pop()}}if(!_.isObject(t))throw new TypeError("data must be an object");return f(t),e}function Dy(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function wg(t,e){this._pairs=[],t&&ih(t,this,e)}const ZC=wg.prototype;ZC.append=function(e,n){this._pairs.push([e,n])};ZC.toString=function(e){const n=e?function(r){return e.call(this,r,Dy)}:Dy;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function U9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eS(t,e,n){if(!e)return t;const r=n&&n.encode||U9,s=n&&n.serialize;let i;if(s?i=s(e,n):i=_.isURLSearchParams(e)?e.toString():new wg(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class V9{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ly=V9,tS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B9=typeof URLSearchParams<"u"?URLSearchParams:wg,z9=typeof FormData<"u"?FormData:null,H9=typeof Blob<"u"?Blob:null,W9=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),K9=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),mn={isBrowser:!0,classes:{URLSearchParams:B9,FormData:z9,Blob:H9},isStandardBrowserEnv:W9,isStandardBrowserWebWorkerEnv:K9,protocols:["http","https","file","blob","url","data"]};function q9(t,e){return ih(t,new mn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return mn.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function G9(t){return _.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Q9(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function nS(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&_.isArray(s)?s.length:o,l?(_.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!_.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&_.isArray(s[o])&&(s[o]=Q9(s[o])),!a)}if(_.isFormData(t)&&_.isFunction(t.entries)){const n={};return _.forEachEntry(t,(r,s)=>{e(G9(r),s,n,0)}),n}return null}const Y9={"Content-Type":void 0};function X9(t,e,n){if(_.isString(t))try{return(e||JSON.parse)(t),_.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const oh={transitional:tS,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=_.isObject(e);if(i&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return s&&s?JSON.stringify(nS(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return q9(e,this.formSerializer).toString();if((a=_.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ih(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),X9(e)):e}],transformResponse:[function(e){const n=this.transitional||oh.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&_.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?J.from(a,J.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_.forEach(["delete","get","head"],function(e){oh.headers[e]={}});_.forEach(["post","put","patch"],function(e){oh.headers[e]=_.merge(Y9)});const Eg=oh,J9=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Z9=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&J9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Oy=Symbol("internals");function wo(t){return t&&String(t).trim().toLowerCase()}function wu(t){return t===!1||t==null?t:_.isArray(t)?t.map(wu):String(t)}function eR(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const tR=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Dd(t,e,n,r,s){if(_.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!_.isString(e)){if(_.isString(r))return e.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(e)}}function nR(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function rR(t,e){const n=_.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class ah{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,u){const c=wo(l);if(!c)throw new Error("header name must be a non-empty string");const h=_.findKey(s,c);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=wu(a))}const o=(a,l)=>_.forEach(a,(u,c)=>i(u,c,l));return _.isPlainObject(e)||e instanceof this.constructor?o(e,n):_.isString(e)&&(e=e.trim())&&!tR(e)?o(Z9(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=wo(e),e){const r=_.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return eR(s);if(_.isFunction(n))return n.call(this,s,r);if(_.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=wo(e),e){const r=_.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Dd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=wo(o),o){const a=_.findKey(r,o);a&&(!n||Dd(r,r[a],a,n))&&(delete r[a],s=!0)}}return _.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Dd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return _.forEach(this,(s,i)=>{const o=_.findKey(r,i);if(o){n[o]=wu(s),delete n[i];return}const a=e?nR(i):String(i).trim();a!==i&&delete n[i],n[a]=wu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return _.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Oy]=this[Oy]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=wo(o);r[a]||(rR(s,o),r[a]=!0)}return _.isArray(e)?e.forEach(i):i(e),this}}ah.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.freezeMethods(ah.prototype);_.freezeMethods(ah);const Hn=ah;function Ld(t,e){const n=this||Eg,r=e||n,s=Hn.from(r.headers);let i=r.data;return _.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function rS(t){return!!(t&&t.__CANCEL__)}function Ja(t,e,n){J.call(this,t??"canceled",J.ERR_CANCELED,e,n),this.name="CanceledError"}_.inherits(Ja,J,{__CANCEL__:!0});function sR(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const iR=mn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),_.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),_.isString(i)&&l.push("path="+i),_.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function oR(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function aR(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function sS(t,e){return t&&!oR(e)?aR(t,e):e}const lR=mn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=_.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function uR(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cR(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[i];o||(o=u),n[s]=l,r[s]=u;let h=i,d=0;for(;h!==s;)d+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function My(t,e){let n=0;const r=cR(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),u=i<=o;n=i;const c={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-i)/l:void 0,event:s};c[e?"download":"upload"]=!0,t(c)}}const hR=typeof XMLHttpRequest<"u",dR=hR&&function(t){return new Promise(function(n,r){let s=t.data;const i=Hn.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}_.isFormData(s)&&(mn.isStandardBrowserEnv||mn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const f=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(f+":"+g))}const c=sS(t.baseURL,t.url);u.open(t.method.toUpperCase(),eS(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const f=Hn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:f,config:t,request:u};sR(function(v){n(v),l()},function(v){r(v),l()},w),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(r(new J("Request aborted",J.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new J("Network Error",J.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const w=t.transitional||tS;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new J(g,w.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,t,u)),u=null},mn.isStandardBrowserEnv){const f=(t.withCredentials||lR(c))&&t.xsrfCookieName&&iR.read(t.xsrfCookieName);f&&i.set(t.xsrfHeaderName,f)}s===void 0&&i.setContentType(null),"setRequestHeader"in u&&_.forEach(i.toJSON(),function(g,w){u.setRequestHeader(w,g)}),_.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",My(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",My(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=f=>{u&&(r(!f||f.type?new Ja(null,t,u):f),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=uR(c);if(d&&mn.protocols.indexOf(d)===-1){r(new J("Unsupported protocol "+d+":",J.ERR_BAD_REQUEST,t));return}u.send(s||null)})},Eu={http:$9,xhr:dR};_.forEach(Eu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const fR={getAdapter:t=>{t=_.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let s=0;s<e&&(n=t[s],!(r=_.isString(n)?Eu[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new J(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(_.hasOwnProp(Eu,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!_.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Eu};function Od(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ja(null,t)}function by(t){return Od(t),t.headers=Hn.from(t.headers),t.data=Ld.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),fR.getAdapter(t.adapter||Eg.adapter)(t).then(function(r){return Od(t),r.data=Ld.call(t,t.transformResponse,r),r.headers=Hn.from(r.headers),r},function(r){return rS(r)||(Od(t),r&&r.response&&(r.response.data=Ld.call(t,t.transformResponse,r.response),r.response.headers=Hn.from(r.response.headers))),Promise.reject(r)})}const $y=t=>t instanceof Hn?t.toJSON():t;function Mi(t,e){e=e||{};const n={};function r(u,c,h){return _.isPlainObject(u)&&_.isPlainObject(c)?_.merge.call({caseless:h},u,c):_.isPlainObject(c)?_.merge({},c):_.isArray(c)?c.slice():c}function s(u,c,h){if(_.isUndefined(c)){if(!_.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function i(u,c){if(!_.isUndefined(c))return r(void 0,c)}function o(u,c){if(_.isUndefined(c)){if(!_.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,h){if(h in e)return r(u,c);if(h in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>s($y(u),$y(c),!0)};return _.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=l[c]||s,d=h(t[c],e[c],c);_.isUndefined(d)&&h!==a||(n[c]=d)}),n}const iS="1.4.0",Cg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Cg[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const jy={};Cg.transitional=function(e,n,r){function s(i,o){return"[Axios v"+iS+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new J(s(o," has been removed"+(n?" in "+n:"")),J.ERR_DEPRECATED);return n&&!jy[o]&&(jy[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function pR(t,e,n){if(typeof t!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new J("option "+i+" must be "+l,J.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new J("Unknown option "+i,J.ERR_BAD_OPTION)}}const wp={assertOptions:pR,validators:Cg},ir=wp.validators;class sc{constructor(e){this.defaults=e,this.interceptors={request:new Ly,response:new Ly}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Mi(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&wp.assertOptions(r,{silentJSONParsing:ir.transitional(ir.boolean),forcedJSONParsing:ir.transitional(ir.boolean),clarifyTimeoutError:ir.transitional(ir.boolean)},!1),s!=null&&(_.isFunction(s)?n.paramsSerializer={serialize:s}:wp.assertOptions(s,{encode:ir.function,serialize:ir.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=i&&_.merge(i.common,i[n.method]),o&&_.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=Hn.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let c,h=0,d;if(!l){const g=[by.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,u),d=g.length,c=Promise.resolve(n);h<d;)c=c.then(g[h++],g[h++]);return c}d=a.length;let f=n;for(h=0;h<d;){const g=a[h++],w=a[h++];try{f=g(f)}catch(S){w.call(this,S);break}}try{c=by.call(this,f)}catch(g){return Promise.reject(g)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Mi(this.defaults,e);const n=sS(e.baseURL,e.url);return eS(n,e.params,e.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(e){sc.prototype[e]=function(n,r){return this.request(Mi(r||{},{method:e,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Mi(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}sc.prototype[e]=n(),sc.prototype[e+"Form"]=n(!0)});const Cu=sc;class Sg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Ja(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Sg(function(s){e=s}),cancel:e}}}const mR=Sg;function gR(t){return function(n){return t.apply(null,n)}}function yR(t){return _.isObject(t)&&t.isAxiosError===!0}const Ep={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ep).forEach(([t,e])=>{Ep[e]=t});const vR=Ep;function oS(t){const e=new Cu(t),n=BC(Cu.prototype.request,e);return _.extend(n,Cu.prototype,e,{allOwnKeys:!0}),_.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return oS(Mi(t,s))},n}const Ue=oS(Eg);Ue.Axios=Cu;Ue.CanceledError=Ja;Ue.CancelToken=mR;Ue.isCancel=rS;Ue.VERSION=iS;Ue.toFormData=ih;Ue.AxiosError=J;Ue.Cancel=Ue.CanceledError;Ue.all=function(e){return Promise.all(e)};Ue.spread=gR;Ue.isAxiosError=yR;Ue.mergeConfig=Mi;Ue.AxiosHeaders=Hn;Ue.formToJSON=t=>nS(_.isHTMLForm(t)?new FormData(t):t);Ue.HttpStatusCode=vR;Ue.default=Ue;const Pr=Ue;class Tg{constructor(e,n,r){this.posterUrl=n.poster_path?e+n.poster_path:"/projects/films_base/assets/images/no-poster.jpg",this.title=n.title?n.title:n.name,this.id=n.id,this.mediaType=r}}const Fy="https://api.themoviedb.org/3",Uy="api_key=582f9e2d6f3a1dc803b350bf76f168f2",wR="https://image.tmdb.org/t/p/w300",ER=(t,e,n,r,s,i,o,a)=>{const[l,u]=E.useState(!0),[c,h]=E.useState({show:!1,message:""}),d=E.useCallback(async(f,g,w,S,v,m)=>{u(!0),h({show:!1,message:""});try{let y;if(o==="home"?y=await Pr(`${Fy}/${f}/${w}?${Uy}&page=${v}&language=${g}&with_genres=${S}`):o==="search"&&(y=await Pr(`${Fy}/search/${f}?${Uy}&query=${m}&page=${v}&language=${g}`)),y.data.total_results===0)throw new Error(g==="ru"?"Нет результатов, удовлетворяющих заданным условиям":"No matching results");const C=[],T=[];if(y.data.results.forEach(k=>{C.push(new Tg(wR,k,f)),v===1&&T.push(k.id)}),v===1){const k=y.data.total_pages>500?500:y.data.total_pages;a({type:"INITIAL_LOAD_MOVIES",payload:[C,T,k]})}else a({type:"APPEND_MOVIES",payload:[C,T]});u(!1)}catch(y){h({show:!0,message:y.message}),u(!1)}},[a,o]);return E.useEffect(()=>{d(t,e,n,r,s,i)},[t,e,n,r,s,d,i]),{isLoading:l,error:c}},CR={lang:n9(),mediaType:"movie",filterList:"top_rated",filterGenre:"all",page:1,totalPages:0,moviesList:[],uniqueIds:[],moviesListMode:"home",searchQuery:""},aS=E.createContext(),lS=({children:t})=>{const e="/projects/films_base/",[n,r]=E.useState(""),[s,i]=E.useReducer(t9,CR),{isLoading:o,error:a}=ER(s.mediaType,s.lang,s.filterList,s.filterGenre,s.page,s.searchQuery,s.moviesListMode,i),{lang:l,mediaType:u,filterList:c,filterGenre:h,page:d,moviesList:f,totalPages:g,searchQuery:w,moviesListMode:S}=s;return p.jsx(aS.Provider,{value:{baseName:e,lang:l,moviesFetchError:a,moviesFetchLoading:o,mediaType:u,filterList:c,filterGenre:h,page:d,totalPages:g,searchQuery:w,moviesListMode:S,dispatch:i,moviesList:f,currentTitle:n,setCurrentTitle:r},children:t})},oe=()=>E.useContext(aS);lS.propTypes={children:b.node};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},SR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},cS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new TR;const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _R=function(t){const e=uS(t);return cS.encodeByteArray(e,!0)},ic=function(t){return _R(t).replace(/\./g,"")},hS=function(t){try{return cS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=()=>xR().__FIREBASE_DEFAULTS__,kR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hS(t[1]);return e&&JSON.parse(e)},lh=()=>{try{return IR()||kR()||RR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dS=t=>{var e,n;return(n=(e=lh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fS=t=>{const e=dS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pS=()=>{var t;return(t=lh())===null||t===void 0?void 0:t.config},mS=t=>{var e;return(e=lh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ic(JSON.stringify(n)),ic(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function NR(){var t;const e=(t=lh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OR(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MR(){try{return typeof indexedDB=="object"}catch{return!1}}function bR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$R,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Za.prototype.create)}}class Za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Dn(s,a,r)}}function jR(t,e){return t.replace(FR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FR=/\{\$([^}]+)}/g;function UR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Vy(i)&&Vy(o)){if(!oc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Vy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ao(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Po(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VR(t,e){const n=new BR(t,e);return n.subscribe.bind(n)}class BR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Md),s.error===void 0&&(s.error=Md),s.complete===void 0&&(s.complete=Md);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t){return t&&t._delegate?t._delegate:t}class jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KR(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WR(t){return t===is?void 0:t}function KR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ee||(ee={}));const GR={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},QR=ee.INFO,YR={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},XR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=QR,this._logHandler=XR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}const JR=(t,e)=>e.some(n=>t instanceof n);let By,zy;function ZR(){return By||(By=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e6(){return zy||(zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yS=new WeakMap,Cp=new WeakMap,vS=new WeakMap,bd=new WeakMap,xg=new WeakMap;function t6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yS.set(n,t)}).catch(()=>{}),xg.set(e,t),e}function n6(t){if(Cp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Cp.set(t,e)}let Sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r6(t){Sp=t(Sp)}function s6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($d(this),e,...n);return vS.set(r,e.sort?e.sort():[e]),Nr(r)}:e6().includes(t)?function(...e){return t.apply($d(this),e),Nr(yS.get(this))}:function(...e){return Nr(t.apply($d(this),e))}}function i6(t){return typeof t=="function"?s6(t):(t instanceof IDBTransaction&&n6(t),JR(t,ZR())?new Proxy(t,Sp):t)}function Nr(t){if(t instanceof IDBRequest)return t6(t);if(bd.has(t))return bd.get(t);const e=i6(t);return e!==t&&(bd.set(t,e),xg.set(e,t)),e}const $d=t=>xg.get(t);function o6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Nr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Nr(o.result),l.oldVersion,l.newVersion,Nr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const a6=["get","getKey","getAll","getAllKeys","count"],l6=["put","add","delete","clear"],jd=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=l6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||a6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return jd.set(e,i),i}r6(t=>({...t,get:(e,n,r)=>Hy(e,n)||t.get(e,n,r),has:(e,n)=>!!Hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function c6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",Wy="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new _g("@firebase/app"),h6="@firebase/app-compat",d6="@firebase/analytics-compat",f6="@firebase/analytics",p6="@firebase/app-check-compat",m6="@firebase/app-check",g6="@firebase/auth",y6="@firebase/auth-compat",v6="@firebase/database",w6="@firebase/database-compat",E6="@firebase/functions",C6="@firebase/functions-compat",S6="@firebase/installations",T6="@firebase/installations-compat",_6="@firebase/messaging",x6="@firebase/messaging-compat",I6="@firebase/performance",k6="@firebase/performance-compat",R6="@firebase/remote-config",A6="@firebase/remote-config-compat",P6="@firebase/storage",N6="@firebase/storage-compat",D6="@firebase/firestore",L6="@firebase/firestore-compat",O6="firebase",M6="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",b6={[Tp]:"fire-core",[h6]:"fire-core-compat",[f6]:"fire-analytics",[d6]:"fire-analytics-compat",[m6]:"fire-app-check",[p6]:"fire-app-check-compat",[g6]:"fire-auth",[y6]:"fire-auth-compat",[v6]:"fire-rtdb",[w6]:"fire-rtdb-compat",[E6]:"fire-fn",[C6]:"fire-fn-compat",[S6]:"fire-iid",[T6]:"fire-iid-compat",[_6]:"fire-fcm",[x6]:"fire-fcm-compat",[I6]:"fire-perf",[k6]:"fire-perf-compat",[R6]:"fire-rc",[A6]:"fire-rc-compat",[P6]:"fire-gcs",[N6]:"fire-gcs-compat",[D6]:"fire-fst",[L6]:"fire-fst-compat","fire-js":"fire-js",[O6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,xp=new Map;function $6(t,e){try{t.container.addComponent(e)}catch(n){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rs(t){const e=t.name;if(xp.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,t);for(const n of ac.values())$6(n,t);return!0}function uh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Dr=new Za("app","Firebase",j6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=M6;function wS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_p,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Dr.create("bad-app-name",{appName:String(s)});if(n||(n=pS()),!n)throw Dr.create("no-options");const i=ac.get(s);if(i){if(oc(n,i.options)&&oc(r,i.config))return i;throw Dr.create("duplicate-app",{appName:s})}const o=new qR(s);for(const l of xp.values())o.addComponent(l);const a=new F6(n,r,o);return ac.set(s,a),a}function Ig(t=_p){const e=ac.get(t);if(!e&&t===_p&&pS())return wS();if(!e)throw Dr.create("no-app",{appName:t});return e}function En(t,e,n){var r;let s=(r=b6[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(a.join(" "));return}Rs(new jr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6="firebase-heartbeat-database",V6=1,Ta="firebase-heartbeat-store";let Fd=null;function ES(){return Fd||(Fd=o6(U6,V6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ta)}}}).catch(t=>{throw Dr.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function B6(t){try{return await(await ES()).transaction(Ta).objectStore(Ta).get(CS(t))}catch(e){if(e instanceof Dn)ks.warn(e.message);else{const n=Dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(n.message)}}}async function Ky(t,e){try{const r=(await ES()).transaction(Ta,"readwrite");await r.objectStore(Ta).put(e,CS(t)),await r.done}catch(n){if(n instanceof Dn)ks.warn(n.message);else{const r=Dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ks.warn(r.message)}}}function CS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=1024,H6=30*24*60*60*1e3;class W6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qy();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=H6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qy(),{heartbeatsToSend:n,unsentEntries:r}=K6(this._heartbeatsCache.heartbeats),s=ic(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qy(){return new Date().toISOString().substring(0,10)}function K6(t,e=z6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MR()?bR().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await B6(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gy(t){return ic(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){Rs(new jr("platform-logger",e=>new u6(e),"PRIVATE")),Rs(new jr("heartbeat",e=>new W6(e),"PRIVATE")),En(Tp,Wy,t),En(Tp,Wy,"esm2017"),En("fire-js","")}G6("");var Q6="firebase",Y6="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(Q6,Y6,"app");function kg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function SS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X6=SS,TS=new Za("auth","Firebase",SS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new _g("@firebase/auth");function J6(t,...e){lc.logLevel<=ee.WARN&&lc.warn(`Auth (${js}): ${t}`,...e)}function Su(t,...e){lc.logLevel<=ee.ERROR&&lc.error(`Auth (${js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw Rg(t,...e)}function Cn(t,...e){return Rg(t,...e)}function _S(t,e,n){const r=Object.assign(Object.assign({},X6()),{[e]:n});return new Za("auth","Firebase",r).create(e,{appName:t.name})}function Z6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qt(t,"argument-error"),_S(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TS.create(t,...e)}function V(t,e,...n){if(!t)throw Rg(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Su(e),new Error(e)}function Xn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eA(){return Qy()==="http:"||Qy()==="https:"}function Qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eA()||DR()||"connection"in navigator)?navigator.onLine:!0}function nA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=PR()||LR()}get(){return tA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new tl(3e4,6e4);function to(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fs(t,e,n,r,s={}){return IS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=el(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),xS.fetch()(kS(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function IS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},rA),e);try{const s=new iA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _S(t,c,u);Qt(t,c)}}catch(s){if(s instanceof Dn)throw s;Qt(t,"network-request-failed",{message:String(s)})}}async function nl(t,e,n,r,s={}){const i=await Fs(t,e,n,r,s);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ag(t.config,s):`${t.config.apiScheme}://${s}`}class iA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),sA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e){return Fs(t,"POST","/v1/accounts:delete",e)}async function aA(t,e){return Fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lA(t,e=!1){const n=Te(t),r=await n.getIdToken(e),s=Pg(r);V(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ko(Ud(s.auth_time)),issuedAtTime:Ko(Ud(s.iat)),expirationTime:Ko(Ud(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ud(t){return Number(t)*1e3}function Pg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{const s=hS(n);return s?JSON.parse(s):(Su("Failed to decode base64 JWT payload"),null)}catch(s){return Su("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function uA(t){const e=Pg(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&cA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ko(this.lastLoginAt),this.creationTime=Ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bi(t,aA(n,{idToken:r}));V(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?pA(i.providerUserInfo):[],a=fA(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new RS(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function dA(t){const e=Te(t);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pA(t){return t.map(e=>{var{providerId:n}=e,r=kg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e){const n=await IS(t,{},async()=>{const r=el({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=kS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return V(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new _a;return r&&(V(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(V(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(V(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ws{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new RS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bi(this,this.stsTokenManager.getToken(this.auth,e));return V(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lA(this,e)}reload(){return dA(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ws(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await bi(this,oA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,m=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:C,isAnonymous:T,providerData:k,stsTokenManager:I}=n;V(y&&I,e,"internal-error");const x=_a.fromJSON(this.name,I);V(typeof y=="string",e,"internal-error"),or(h,e.name),or(d,e.name),V(typeof C=="boolean",e,"internal-error"),V(typeof T=="boolean",e,"internal-error"),or(f,e.name),or(g,e.name),or(w,e.name),or(S,e.name),or(v,e.name),or(m,e.name);const M=new ws({uid:y,auth:e,email:d,emailVerified:C,displayName:h,isAnonymous:T,photoURL:g,phoneNumber:f,tenantId:w,stsTokenManager:x,createdAt:v,lastLoginAt:m});return k&&Array.isArray(k)&&(M.providerData=k.map(j=>Object.assign({},j))),S&&(M._redirectEventId=S),M}static async _fromIdTokenResponse(e,n,r=!1){const s=new _a;s.updateFromServerResponse(n);const i=new ws({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await uc(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;function Un(t){Xn(t instanceof Function,"Expected a class definition");let e=Yy.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}AS.type="NONE";const Xy=AS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Tu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Tu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ws._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ci(Un(Xy),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Un(Xy);const o=Tu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=ws._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ci(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OS(e))return"Blackberry";if(MS(e))return"Webos";if(Ng(e))return"Safari";if((e.includes("chrome/")||NS(e))&&!e.includes("edge/"))return"Chrome";if(LS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PS(t=ut()){return/firefox\//i.test(t)}function Ng(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NS(t=ut()){return/crios\//i.test(t)}function DS(t=ut()){return/iemobile/i.test(t)}function LS(t=ut()){return/android/i.test(t)}function OS(t=ut()){return/blackberry/i.test(t)}function MS(t=ut()){return/webos/i.test(t)}function ch(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gA(t=ut()){var e;return ch(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yA(){return OR()&&document.documentMode===10}function bS(t=ut()){return ch(t)||LS(t)||MS(t)||OS(t)||/windows phone/i.test(t)||DS(t)}function vA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e=[]){let n;switch(t){case"Browser":n=Jy(ut());break;case"Worker":n=`${Jy(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}async function jS(t,e){return Fs(t,"GET","/v2/recaptchaConfig",to(t,e))}function Zy(t){return t!==void 0&&t.enterprise!==void 0}class FS{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function US(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",wA().appendChild(r)})}function EA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const CA="https://www.google.com/recaptcha/enterprise.js?render=",SA="recaptcha-enterprise",TA="NO_RECAPTCHA";class VS{constructor(e){this.type=SA,this.auth=Us(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{jS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new FS(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Zy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(TA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Zy(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}US(CA+a).then(()=>{s(a,i,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function cc(t,e,n,r=!1){const s=new VS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new _A(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Te(e):null;return n&&V(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}async initializeRecaptchaConfig(){const e=await jS(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new FS(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new VS(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;V(n,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return V(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&J6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Us(t){return Te(t)}class ev{constructor(e){this.auth=e,this.observer=null,this.addObserver=VR(n=>this.observer=n)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e){const n=uh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oc(i,e??{}))return s;Qt(s,"already-initialized")}return n.initialize({options:e})}function kA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RA(t,e,n){const r=Us(t);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=BS(e),{host:o,port:a}=AA(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||PA()}function BS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AA(t){const e=BS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:tv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:tv(o)}}}function tv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function NA(t,e){return Fs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(t,e){return nl(t,"POST","/v1/accounts:signInWithPassword",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return nl(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}async function LA(t,e){return nl(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Dg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new xa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await cc(e,r,"signInWithPassword");return Vd(e,s)}else return Vd(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const i=await cc(e,r,"signInWithPassword");return Vd(e,i)}else return Promise.reject(s)});case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return NA(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return LA(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t,e){return nl(t,"POST","/v1/accounts:signInWithIdp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class As extends Dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=kg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new As(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Si(e,n)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=el(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bA(t){const e=Ao(Po(t)).link,n=e?Ao(Po(e)).deep_link_id:null,r=Ao(Po(t)).deep_link_id;return(r?Ao(Po(r)).link:null)||r||n||e||t}class Lg{constructor(e){var n,r,s,i,o,a;const l=Ao(Po(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=MA((s=l.mode)!==null&&s!==void 0?s:null);V(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=bA(e);try{return new Lg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.providerId=no.PROVIDER_ID}static credential(e,n){return xa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lg.parseLink(n);return V(r,"argument-error"),xa._fromEmailAndCode(e,r.code,r.tenantId)}}no.PROVIDER_ID="password";no.EMAIL_PASSWORD_SIGN_IN_METHOD="password";no.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Og{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends rl{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return As._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bn.credential(n,r)}catch{return null}}}bn.GOOGLE_SIGN_IN_METHOD="google.com";bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends rl{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends rl{constructor(){super("twitter.com")}static credential(e,n){return As._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t,e){return nl(t,"POST","/v1/accounts:signUp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ws._fromIdTokenResponse(e,r,s),o=nv(r);return new Ps({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=nv(r);return new Ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Dn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new hc(e,n,r,s)}}function zS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(t,i,e,r):i})}async function $A(t,e,n=!1){const r=await bi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await bi(t,zS(r,s,e,t),n);V(i.idToken,r,"internal-error");const o=Pg(i.idToken);V(o,r,"internal-error");const{sub:a}=o;return V(t.uid===a,r,"user-mismatch"),Ps._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e,n=!1){const r="signIn",s=await zS(t,r,e),i=await Ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function FA(t,e){return HS(Us(t),e)}async function UA(t,e,n){var r;const s=Us(t),i={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await cc(s,i,"signUpPassword");o=Bd(s,u)}else o=Bd(s,i).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const c=await cc(s,i,"signUpPassword");return Bd(s,c)}else return Promise.reject(u)});const a=await o.catch(u=>Promise.reject(u)),l=await Ps._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function VA(t,e,n){return FA(Te(t),no.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return Fs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Te(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bi(r,BA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function zA(t,e,n,r){return Te(t).onIdTokenChanged(e,n,r)}function HA(t,e,n){return Te(t).beforeAuthStateChanged(e,n)}function WA(t,e,n,r){return Te(t).onAuthStateChanged(e,n,r)}function KA(t){return Te(t).signOut()}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){const t=ut();return Ng(t)||ch(t)}const GA=1e3,QA=10;class KS extends WS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=qA()&&vA(),this.fallbackToPolling=bS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);yA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KS.type="LOCAL";const YA=KS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends WS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qS.type="SESSION";const GS=qS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await XA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=bg("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function ZA(t){Sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function eP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nP(){return QS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firebaseLocalStorageDb",rP=1,fc="firebaseLocalStorage",XS="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dh(t,e){return t.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function sP(){const t=indexedDB.deleteDatabase(YS);return new sl(t).toPromise()}function kp(){const t=indexedDB.open(YS,rP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fc,{keyPath:XS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fc)?e(r):(r.close(),await sP(),e(await kp()))})})}async function rv(t,e,n){const r=dh(t,!0).put({[XS]:e,value:n});return new sl(r).toPromise()}async function iP(t,e){const n=dh(t,!1).get(e),r=await new sl(n).toPromise();return r===void 0?null:r.value}function sv(t,e){const n=dh(t,!0).delete(e);return new sl(n).toPromise()}const oP=800,aP=3;class JS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(nP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eP(),!this.activeServiceWorker)return;this.sender=new JA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await rv(e,dc,"1"),await sv(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=dh(s,!1).getAll();return new sl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JS.type="LOCAL";const lP=JS;new tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e){return e?Un(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends Dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uP(t){return HS(t.auth,new $g(t),t.bypassAuthState)}function cP(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),jA(n,new $g(t),t.bypassAuthState)}async function hP(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),$A(n,new $g(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uP;case"linkViaPopup":case"linkViaRedirect":return hP;case"reauthViaPopup":case"reauthViaRedirect":return cP;default:Qt(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new tl(2e3,1e4);async function fP(t,e,n){const r=Us(t);Z6(t,e,Og);const s=ZS(r,n);return new hs(r,"signInViaPopup",e,s).executeNotNull()}class hs extends eT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dP.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="pendingRedirect",_u=new Map;class mP extends eT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const r=await gP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gP(t,e){const n=wP(e),r=vP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function yP(t,e){_u.set(t._key(),e)}function vP(t){return Un(t._redirectPersistence)}function wP(t){return Tu(pP,t.config.apiKey,t.name)}async function EP(t,e,n=!1){const r=Us(t),s=ZS(r,e),o=await new mP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=10*60*1e3;class SP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CP&&this.cachedEventUids.clear(),this.cachedEventUids.has(iv(e))}saveEventToCache(e){this.cachedEventUids.add(iv(e)),this.lastProcessedEventTime=Date.now()}}function iv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(t,e={}){return Fs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IP=/^https?/;async function kP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _P(t);for(const n of e)try{if(RP(n))return}catch{}Qt(t,"unauthorized-domain")}function RP(t){const e=Ip(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IP.test(n))return!1;if(xP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new tl(3e4,6e4);function ov(){const t=Sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PP(t){return new Promise((e,n)=>{var r,s,i;function o(){ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ov(),n(Cn(t,"network-request-failed"))},timeout:AP.get()})}if(!((s=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Sn().gapi)===null||i===void 0)&&i.load)o();else{const a=EA("iframefcb");return Sn()[a]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},US(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw xu=null,e})}let xu=null;function NP(t){return xu=xu||PP(t),xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new tl(5e3,15e3),LP="__/auth/iframe",OP="emulator/auth/iframe",MP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $P(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ag(e,OP):`https://${t.config.authDomain}/${LP}`,r={apiKey:e.apiKey,appName:t.name,v:js},s=bP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${el(r).slice(1)}`}async function jP(t){const e=await NP(t),n=Sn().gapi;return V(n,t,"internal-error"),e.open({where:document.body,url:$P(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),a=Sn().setTimeout(()=>{i(o)},DP.get());function l(){Sn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UP=500,VP=600,BP="_blank",zP="http://localhost";class av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HP(t,e,n,r=UP,s=VP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FP),{width:r.toString(),height:s.toString(),top:i,left:o}),u=ut().toLowerCase();n&&(a=NS(u)?BP:n),PS(u)&&(e=e||zP,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(gA(u)&&a!=="_self")return WP(e||"",a),new av(null);const h=window.open(e||"",a,c);V(h,t,"popup-blocked");try{h.focus()}catch{}return new av(h)}function WP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="__/auth/handler",qP="emulator/auth/handler",GP=encodeURIComponent("fac");async function lv(t,e,n,r,s,i){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:s};if(e instanceof Og){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(i||{}))o[c]=h}if(e instanceof rl){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${GP}=${encodeURIComponent(l)}`:"";return`${QP(t)}?${el(a).slice(1)}${u}`}function QP({config:t}){return t.emulator?Ag(t,qP):`https://${t.authDomain}/${KP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class YP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GS,this._completeRedirectFn=EP,this._overrideRedirectResult=yP}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await lv(e,n,r,Ip(),s);return HP(e,o,bg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await lv(e,n,r,Ip(),s);return ZA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jP(e),r=new SP(e);return n.register("authEvent",s=>(V(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[zd];o!==void 0&&n(!!o),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bS()||Ng()||ch()}}const XP=YP;var uv="@firebase/auth",cv="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function eN(t){Rs(new jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;V(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(t)},u=new xA(r,s,i,l);return kA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new jr("auth-internal",e=>{const n=Us(e.getProvider("auth").getImmediate());return(r=>new JP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(uv,cv,ZP(t)),En(uv,cv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=5*60,nN=mS("authIdTokenMaxAge")||tN;let hv=null;const rN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nN)return;const s=n==null?void 0:n.token;hv!==s&&(hv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sN(t=Ig()){const e=uh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IA(t,{popupRedirectResolver:XP,persistence:[lP,YA,GS]}),r=mS("authTokenSyncURL");if(r){const i=rN(r);HA(n,i,()=>i(n.currentUser)),zA(n,o=>i(o))}const s=dS("auth");return s&&RA(n,`http://${s}`),n}eN("Browser");var iN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,jg=jg||{},z=iN||self;function fh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function il(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function oN(t){return Object.prototype.hasOwnProperty.call(t,Hd)&&t[Hd]||(t[Hd]=++aN)}var Hd="closure_uid_"+(1e9*Math.random()>>>0),aN=0;function lN(t,e,n){return t.call.apply(t.bind,arguments)}function uN(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function it(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?it=lN:it=uN,it.apply(null,arguments)}function Kl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function We(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function qr(){this.s=this.s,this.o=this.o}var cN=0;qr.prototype.s=!1;qr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),cN!=0)&&oN(this)};qr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Fg(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function dv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(fh(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var hN=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{z.addEventListener("test",()=>{},e),z.removeEventListener("test",()=>{},e)}catch{}return t}();function Ia(t){return/^[\s\xa0]*$/.test(t)}function ph(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function pn(t){return ph().indexOf(t)!=-1}function Ug(t){return Ug[" "](t),t}Ug[" "]=function(){};function dN(t,e){var n=sD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var fN=pn("Opera"),$i=pn("Trident")||pn("MSIE"),rT=pn("Edge"),Rp=rT||$i,sT=pn("Gecko")&&!(ph().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge"))&&!(pn("Trident")||pn("MSIE"))&&!pn("Edge"),pN=ph().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge");function iT(){var t=z.document;return t?t.documentMode:void 0}var Ap;e:{var Wd="",Kd=function(){var t=ph();if(sT)return/rv:([^\);]+)(\)|;)/.exec(t);if(rT)return/Edge\/([\d\.]+)/.exec(t);if($i)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(pN)return/WebKit\/(\S+)/.exec(t);if(fN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Kd&&(Wd=Kd?Kd[1]:""),$i){var qd=iT();if(qd!=null&&qd>parseFloat(Wd)){Ap=String(qd);break e}}Ap=Wd}var Pp;if(z.document&&$i){var fv=iT();Pp=fv||parseInt(Ap,10)||void 0}else Pp=void 0;var mN=Pp;function ka(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sT){e:{try{Ug(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ka.$.h.call(this)}}We(ka,ot);var gN={2:"touch",3:"pen",4:"mouse"};ka.prototype.h=function(){ka.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ol="closure_listenable_"+(1e6*Math.random()|0),yN=0;function vN(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++yN,this.fa=this.ia=!1}function mh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Vg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function wN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function oT(t){const e={};for(const n in t)e[n]=t[n];return e}const pv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aT(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<pv.length;i++)n=pv[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gh(t){this.src=t,this.g={},this.h=0}gh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Dp(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new vN(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Np(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=nT(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(mh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dp(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Bg="closure_lm_"+(1e6*Math.random()|0),Gd={};function lT(t,e,n,r,s){if(r&&r.once)return cT(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)lT(t,e[i],n,r,s);return null}return n=Wg(n),t&&t[ol]?t.O(e,n,il(r)?!!r.capture:!!r,s):uT(t,e,n,!1,r,s)}function uT(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=il(s)?!!s.capture:!!s,a=Hg(t);if(a||(t[Bg]=a=new gh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=EN(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)hN||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(dT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function EN(){function t(n){return e.call(t.src,t.listener,n)}const e=CN;return t}function cT(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)cT(t,e[i],n,r,s);return null}return n=Wg(n),t&&t[ol]?t.P(e,n,il(r)?!!r.capture:!!r,s):uT(t,e,n,!0,r,s)}function hT(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)hT(t,e[i],n,r,s);else r=il(r)?!!r.capture:!!r,n=Wg(n),t&&t[ol]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Dp(i,n,r,s),-1<n&&(mh(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Hg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dp(e,n,r,s)),(n=-1<t?e[t]:null)&&zg(n))}function zg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ol])Np(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hg(e))?(Np(n,t),n.h==0&&(n.src=null,e[Bg]=null)):mh(t)}}}function dT(t){return t in Gd?Gd[t]:Gd[t]="on"+t}function CN(t,e){if(t.fa)t=!0;else{e=new ka(e,this);var n=t.listener,r=t.la||t.src;t.ia&&zg(t),t=n.call(r,e)}return t}function Hg(t){return t=t[Bg],t instanceof gh?t:null}var Qd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wg(t){return typeof t=="function"?t:(t[Qd]||(t[Qd]=function(e){return t.handleEvent(e)}),t[Qd])}function He(){qr.call(this),this.i=new gh(this),this.S=this,this.J=null}We(He,qr);He.prototype[ol]=!0;He.prototype.removeEventListener=function(t,e,n,r){hT(this,t,e,n,r)};function Ye(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var s=e;e=new ot(r,t),aT(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=ql(o,r,!0,e)&&s}if(o=e.g=t,s=ql(o,r,!0,e)&&s,s=ql(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=ql(o,r,!1,e)&&s}He.prototype.N=function(){if(He.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)mh(n[r]);delete t.g[e],t.h--}}this.J=null};He.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};He.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ql(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Np(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Kg=z.JSON.stringify;class SN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function TN(){var t=qg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class _N{constructor(){this.h=this.g=null}add(e,n){const r=fT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var fT=new SN(()=>new xN,t=>t.reset());class xN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function IN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function kN(t){z.setTimeout(()=>{throw t},0)}let Ra,Aa=!1,qg=new _N,pT=()=>{const t=z.Promise.resolve(void 0);Ra=()=>{t.then(RN)}};var RN=()=>{for(var t;t=TN();){try{t.h.call(t.g)}catch(n){kN(n)}var e=fT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Aa=!1};function yh(t,e){He.call(this),this.h=t||1,this.g=e||z,this.j=it(this.qb,this),this.l=Date.now()}We(yh,He);N=yh.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(Gg(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Gg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){yh.$.N.call(this),Gg(this),delete this.g};function Qg(t,e,n){if(typeof t=="function")n&&(t=it(t,n));else if(t&&typeof t.handleEvent=="function")t=it(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function mT(t){t.g=Qg(()=>{t.g=null,t.i&&(t.i=!1,mT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AN extends qr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mT(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pa(t){qr.call(this),this.h=t,this.g={}}We(Pa,qr);var mv=[];function gT(t,e,n,r){Array.isArray(n)||(n&&(mv[0]=n.toString()),n=mv);for(var s=0;s<n.length;s++){var i=lT(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yT(t){Vg(t.g,function(e,n){this.g.hasOwnProperty(n)&&zg(e)},t),t.g={}}Pa.prototype.N=function(){Pa.$.N.call(this),yT(this)};Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vh(){this.g=!0}vh.prototype.Ea=function(){this.g=!1};function PN(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function NN(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ci(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+LN(t,n)+(r?" "+r:"")})}function DN(t,e){t.info(function(){return"TIMEOUT: "+e})}vh.prototype.info=function(){};function LN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Kg(n)}catch{return e}}var Vs={},gv=null;function wh(){return gv=gv||new He}Vs.Ta="serverreachability";function vT(t){ot.call(this,Vs.Ta,t)}We(vT,ot);function Na(t){const e=wh();Ye(e,new vT(e))}Vs.STAT_EVENT="statevent";function wT(t,e){ot.call(this,Vs.STAT_EVENT,t),this.stat=e}We(wT,ot);function pt(t){const e=wh();Ye(e,new wT(e,t))}Vs.Ua="timingevent";function ET(t,e){ot.call(this,Vs.Ua,t),this.size=e}We(ET,ot);function al(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var Eh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},CT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yg(){}Yg.prototype.h=null;function yv(t){return t.h||(t.h=t.i())}function ST(){}var ll={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xg(){ot.call(this,"d")}We(Xg,ot);function Jg(){ot.call(this,"c")}We(Jg,ot);var Lp;function Ch(){}We(Ch,Yg);Ch.prototype.g=function(){return new XMLHttpRequest};Ch.prototype.i=function(){return{}};Lp=new Ch;function ul(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Pa(this),this.P=ON,t=Rp?125:void 0,this.V=new yh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new TT}function TT(){this.i=null,this.g="",this.h=!1}var ON=45e3,Op={},pc={};N=ul.prototype;N.setTimeout=function(t){this.P=t};function Mp(t,e,n){t.L=1,t.v=Th(Jn(e)),t.s=n,t.S=!0,_T(t,null)}function _T(t,e){t.G=Date.now(),cl(t),t.A=Jn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),DT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new TT,t.g=ZT(t.l,n?e:null,!t.s),0<t.O&&(t.M=new AN(it(t.Pa,t,t.g),t.O)),gT(t.U,t.g,"readystatechange",t.nb),e=t.I?oT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Na(),PN(t.j,t.u,t.A,t.m,t.W,t.s)}N.nb=function(t){t=t.target;const e=this.M;e&&gn(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{const c=gn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Rp||this.g&&(this.h.h||this.g.ja()||Cv(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Na(3):Na(2)),Sh(this);var n=this.g.da();this.ca=n;t:if(xT(this)){var r=Cv(this.g);t="";var s=r.length,i=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),qo(this);var o="";break t}this.h.i=new z.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,NN(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ia(a)){var u=a;break t}}u=null}if(n=u)ci(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bp(this,n);else{this.i=!1,this.o=3,pt(12),ds(this),qo(this);break e}}this.S?(IT(this,c,o),Rp&&this.i&&c==3&&(gT(this.U,this.V,"tick",this.mb),this.V.start())):(ci(this.j,this.m,o,null),bp(this,o)),c==4&&ds(this),this.i&&!this.J&&(c==4?QT(this.l,this):(this.i=!1,cl(this)))}else tD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,pt(12)):(this.o=0,pt(13)),ds(this),qo(this)}}}catch{}finally{}};function xT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function IT(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=MN(t,n),s==pc){e==4&&(t.o=4,pt(14),r=!1),ci(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Op){t.o=4,pt(15),ci(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ci(t.j,t.m,s,null),bp(t,s);xT(t)&&s!=pc&&s!=Op&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,pt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),s1(e),e.M=!0,pt(11))):(ci(t.j,t.m,n,"[Invalid Chunked Response]"),ds(t),qo(t))}N.mb=function(){if(this.g){var t=gn(this.g),e=this.g.ja();this.C<e.length&&(Sh(this),IT(this,t,e),this.i&&t!=4&&cl(this))}};function MN(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?pc:(n=Number(e.substring(n,r)),isNaN(n)?Op:(r+=1,r+n>e.length?pc:(e=e.slice(r,r+n),t.C=r+n,e)))}N.cancel=function(){this.J=!0,ds(this)};function cl(t){t.Y=Date.now()+t.P,kT(t,t.P)}function kT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=al(it(t.lb,t),e)}function Sh(t){t.B&&(z.clearTimeout(t.B),t.B=null)}N.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(DN(this.j,this.A),this.L!=2&&(Na(),pt(17)),ds(this),this.o=2,qo(this)):kT(this,this.Y-t)};function qo(t){t.l.H==0||t.J||QT(t.l,t)}function ds(t){Sh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Gg(t.V),yT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function bp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||$p(n.i,t))){if(!t.K&&$p(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)yc(n),Ih(n);else break e;r1(n),pt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=al(it(n.ib,n),6e3));if(1>=MT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else fs(n,11)}else if((t.K||n.g==t)&&yc(n),!Ia(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Zg(i,i.h),i.h=null))}if(r.F){const w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,le(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=JT(r,r.J?r.pa:null,r.Y),o.K){bT(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Sh(a),cl(a)),r.g=o}else qT(r);0<n.j.length&&kh(n)}else u[0]!="stop"&&u[0]!="close"||fs(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?fs(n,7):n1(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Na(4)}catch{}}function bN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(fh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function $N(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function RT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(fh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=$N(t),r=bN(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var AT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Es(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Es){this.h=t.h,mc(this,t.j),this.s=t.s,this.g=t.g,gc(this,t.m),this.l=t.l;var e=t.i,n=new Da;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),vv(this,n),this.o=t.o}else t&&(e=String(t).match(AT))?(this.h=!1,mc(this,e[1]||"",!0),this.s=No(e[2]||""),this.g=No(e[3]||"",!0),gc(this,e[4]),this.l=No(e[5]||"",!0),vv(this,e[6]||"",!0),this.o=No(e[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}Es.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Do(e,wv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Do(e,wv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Do(n,n.charAt(0)=="/"?VN:UN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Do(n,zN)),t.join("")};function Jn(t){return new Es(t)}function mc(t,e,n){t.j=n?No(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function gc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vv(t,e,n){e instanceof Da?(t.i=e,HN(t.i,t.h)):(n||(e=Do(e,BN)),t.i=new Da(e,t.h))}function le(t,e,n){t.i.set(e,n)}function Th(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function No(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Do(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,FN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function FN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var wv=/[#\/\?@]/g,UN=/[#\?:]/g,VN=/[#\?]/g,BN=/[#\?@]/g,zN=/#/g;function Da(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Gr(t){t.g||(t.g=new Map,t.h=0,t.i&&jN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Da.prototype;N.add=function(t,e){Gr(this),this.i=null,t=ro(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function PT(t,e){Gr(t),e=ro(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function NT(t,e){return Gr(t),e=ro(t,e),t.g.has(e)}N.forEach=function(t,e){Gr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};N.ta=function(){Gr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};N.Z=function(t){Gr(this);let e=[];if(typeof t=="string")NT(this,t)&&(e=e.concat(this.g.get(ro(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return Gr(this),this.i=null,t=ro(this,t),NT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function DT(t,e,n){PT(t,e),0<n.length&&(t.i=null,t.g.set(ro(t,e),Fg(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function ro(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function HN(t,e){e&&!t.j&&(Gr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(PT(this,r),DT(this,s,n))},t)),t.j=e}var WN=class{constructor(t,e){this.g=t,this.map=e}};function LT(t){this.l=t||KN,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var KN=10;function OT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function MT(t){return t.h?1:t.g?t.g.size:0}function $p(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Zg(t,e){t.g?t.g.add(e):t.h=e}function bT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}LT.prototype.cancel=function(){if(this.i=$T(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $T(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Fg(t.i)}var qN=class{stringify(t){return z.JSON.stringify(t,void 0)}parse(t){return z.JSON.parse(t,void 0)}};function GN(){this.g=new qN}function QN(t,e,n){const r=n||"";try{RT(t,function(s,i){let o=s;il(s)&&(o=Kg(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function YN(t,e){const n=new vh;if(z.Image){const r=new Image;r.onload=Kl(Gl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Kl(Gl,n,r,"TestLoadImage: error",!1,e),r.onabort=Kl(Gl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Kl(Gl,n,r,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Gl(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function hl(t){this.l=t.fc||null,this.j=t.ob||!1}We(hl,Yg);hl.prototype.g=function(){return new _h(this.l,this.j)};hl.prototype.i=function(t){return function(){return t}}({});function _h(t,e){He.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=e1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}We(_h,He);var e1=0;N=_h.prototype;N.open=function(t,e){if(this.readyState!=e1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,La(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dl(this)),this.readyState=e1};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,La(this)),this.g&&(this.readyState=3,La(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function jT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?dl(this):La(this),this.readyState==3&&jT(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,dl(this))};N.Ya=function(t){this.g&&(this.response=t,dl(this))};N.ka=function(){this.g&&dl(this)};function dl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,La(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function La(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(_h.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var XN=z.JSON.parse;function _e(t){He.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=FT,this.L=this.M=!1}We(_e,He);var FT="",JN=/^https?$/i,ZN=["POST","PUT"];N=_e.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lp.g(),this.C=this.u?yv(this.u):yv(Lp),this.g.onreadystatechange=it(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Ev(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=z.FormData&&t instanceof z.FormData,!(0<=nT(ZN,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BT(this),0<this.B&&((this.L=eD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.ua,this)):this.A=Qg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Ev(this,i)}};function eD(t){return $i&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof jg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))};function Ev(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,UT(t),xh(t)}function UT(t){t.F||(t.F=!0,Ye(t,"complete"),Ye(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ye(this,"complete"),Ye(this,"abort"),xh(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xh(this,!0)),_e.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?VT(this):this.kb())};N.kb=function(){VT(this)};function VT(t){if(t.h&&typeof jg<"u"&&(!t.C[1]||gn(t)!=4||t.da()!=2)){if(t.v&&gn(t)==4)Qg(t.La,0,t);else if(Ye(t,"readystatechange"),gn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(AT)[1]||null;!s&&z.self&&z.self.location&&(s=z.self.location.protocol.slice(0,-1)),r=!JN.test(s?s.toLowerCase():"")}n=r}if(n)Ye(t,"complete"),Ye(t,"success");else{t.m=6;try{var i=2<gn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",UT(t)}}finally{xh(t)}}}}function xh(t,e){if(t.g){BT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ye(t,"ready");try{n.onreadystatechange=r}catch{}}}function BT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}N.isActive=function(){return!!this.g};function gn(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),XN(e)}};function Cv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case FT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function tD(t){const e={};t=(t.g&&2<=gn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ia(t[r]))continue;var n=IN(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}wN(e,function(r){return r.join(", ")})}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function zT(t){let e="";return Vg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function t1(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):le(t,e,n))}function Eo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function HT(t){this.Ga=0,this.j=[],this.l=new vh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Eo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Eo("baseRetryDelayMs",5e3,t),this.hb=Eo("retryDelaySeedMs",1e4,t),this.eb=Eo("forwardChannelMaxRetries",2,t),this.xa=Eo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new LT(t&&t.concurrentRequestLimit),this.Ja=new GN,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}N=HT.prototype;N.ra=8;N.H=1;function n1(t){if(WT(t),t.H==3){var e=t.W++,n=Jn(t.I);if(le(n,"SID",t.K),le(n,"RID",e),le(n,"TYPE","terminate"),fl(t,n),e=new ul(t,t.l,e),e.L=2,e.v=Th(Jn(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&z.Image&&(new Image().src=e.v,n=!0),n||(e.g=ZT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),cl(e)}XT(t)}function Ih(t){t.g&&(s1(t),t.g.cancel(),t.g=null)}function WT(t){Ih(t),t.u&&(z.clearTimeout(t.u),t.u=null),yc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function kh(t){if(!OT(t.i)&&!t.m){t.m=!0;var e=t.Na;Ra||pT(),Aa||(Ra(),Aa=!0),qg.add(e,t),t.C=0}}function nD(t,e){return MT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=al(it(t.Na,t,e),YT(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ul(this,this.l,t);let i=this.s;if(this.U&&(i?(i=oT(i),aT(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=KT(this,s,e),n=Jn(this.I),le(n,"RID",t),le(n,"CVER",22),this.F&&le(n,"X-HTTP-Session-Id",this.F),fl(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(zT(i)))+"&"+e:this.o&&t1(n,this.o,i)),Zg(this.i,s),this.bb&&le(n,"TYPE","init"),this.P?(le(n,"$req",e),le(n,"SID","null"),s.aa=!0,Mp(s,n,null)):Mp(s,n,e),this.H=2}}else this.H==3&&(t?Sv(this,t):this.j.length==0||OT(this.i)||Sv(this))};function Sv(t,e){var n;e?n=e.m:n=t.W++;const r=Jn(t.I);le(r,"SID",t.K),le(r,"RID",n),le(r,"AID",t.V),fl(t,r),t.o&&t.s&&t1(r,t.o,t.s),n=new ul(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=KT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Zg(t.i,n),Mp(n,r,e)}function fl(t,e){t.na&&Vg(t.na,function(n,r){le(e,r,n)}),t.h&&RT({},function(n,r){le(e,r,n)})}function KT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?it(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].g;const c=s[l].map;if(u-=i,0>u)i=Math.max(0,s[l].g-100),a=!1;else try{QN(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function qT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ra||pT(),Aa||(Ra(),Aa=!0),qg.add(e,t),t.A=0}}function r1(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=al(it(t.Ma,t),YT(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,GT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=al(it(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,pt(10),Ih(this),GT(this))};function s1(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function GT(t){t.g=new ul(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Jn(t.wa);le(e,"RID","rpc"),le(e,"SID",t.K),le(e,"AID",t.V),le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&le(e,"TO",t.qa),le(e,"TYPE","xmlhttp"),fl(t,e),t.o&&t.s&&t1(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Th(Jn(e)),n.s=null,n.S=!0,_T(n,t)}N.ib=function(){this.v!=null&&(this.v=null,Ih(this),r1(this),pt(19))};function yc(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function QT(t,e){var n=null;if(t.g==e){yc(t),s1(t),t.g=null;var r=2}else if($p(t.i,e))n=e.F,bT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=wh(),Ye(r,new ET(r,n)),kh(t)}else qT(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&nD(t,e)||r==2&&r1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:fs(t,5);break;case 4:fs(t,10);break;case 3:fs(t,6);break;default:fs(t,2)}}}function YT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function fs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=it(t.pb,t);n||(n=new Es("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||mc(n,"https"),Th(n)),YN(n.toString(),r)}else pt(2);t.H=0,t.h&&t.h.za(e),XT(t),WT(t)}N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),pt(2)):(this.l.info("Failed to ping google.com"),pt(1))};function XT(t){if(t.H=0,t.ma=[],t.h){const e=$T(t.i);(e.length!=0||t.j.length!=0)&&(dv(t.ma,e),dv(t.ma,t.j),t.i.i.length=0,Fg(t.j),t.j.length=0),t.h.ya()}}function JT(t,e,n){var r=n instanceof Es?Jn(n):new Es(n);if(r.g!="")e&&(r.g=e+"."+r.g),gc(r,r.m);else{var s=z.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Es(null);r&&mc(i,r),e&&(i.g=e),s&&gc(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&le(r,n,e),le(r,"VER",t.ra),fl(t,r),r}function ZT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new _e(new hl({ob:!0})):new _e(t.va),e.Oa(t.J),e}N.isActive=function(){return!!this.h&&this.h.isActive(this)};function e_(){}N=e_.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.isActive=function(){return!0};N.Va=function(){};function vc(){if($i&&!(10<=Number(mN)))throw Error("Environmental error: no available transport.")}vc.prototype.g=function(t,e){return new Ot(t,e)};function Ot(t,e){He.call(this),this.g=new HT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ia(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ia(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new so(this)}We(Ot,He);Ot.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;pt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=JT(t,null,t.Y),kh(t)};Ot.prototype.close=function(){n1(this.g)};Ot.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Kg(t),t=n);e.j.push(new WN(e.fb++,t)),e.H==3&&kh(e)};Ot.prototype.N=function(){this.g.h=null,delete this.j,n1(this.g),delete this.g,Ot.$.N.call(this)};function t_(t){Xg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}We(t_,Xg);function n_(){Jg.call(this),this.status=1}We(n_,Jg);function so(t){this.g=t}We(so,e_);so.prototype.Ba=function(){Ye(this.g,"a")};so.prototype.Aa=function(t){Ye(this.g,new t_(t))};so.prototype.za=function(t){Ye(this.g,new n_)};so.prototype.ya=function(){Ye(this.g,"b")};function rD(){this.blockSize=-1}function an(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}We(an,rD);an.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Yd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}an.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Yd(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Yd(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Yd(this,r),s=0;break}}this.h=s,this.i+=e};an.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function re(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var sD={};function i1(t){return-128<=t&&128>t?dN(t,function(e){return new re([e|0],0>e?-1:0)}):new re([t|0],0>t?-1:0)}function yn(t){if(isNaN(t)||!isFinite(t))return Ti;if(0>t)return Ge(yn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=jp;return new re(e,0)}function r_(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ge(r_(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=yn(Math.pow(e,8)),r=Ti,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=yn(Math.pow(e,i)),r=r.R(i).add(yn(o))):(r=r.R(n),r=r.add(yn(o)))}return r}var jp=4294967296,Ti=i1(0),Fp=i1(1),Tv=i1(16777216);N=re.prototype;N.ea=function(){if(zt(this))return-Ge(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:jp+r)*e,e*=jp}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Vn(this))return"0";if(zt(this))return"-"+Ge(this).toString(t);for(var e=yn(Math.pow(t,6)),n=this,r="";;){var s=Ec(n,e).g;n=wc(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Vn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Vn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function zt(t){return t.h==-1}N.X=function(t){return t=wc(this,t),zt(t)?-1:Vn(t)?0:1};function Ge(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new re(n,~t.h).add(Fp)}N.abs=function(){return zt(this)?Ge(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new re(n,n[n.length-1]&-2147483648?-1:0)};function wc(t,e){return t.add(Ge(e))}N.R=function(t){if(Vn(this)||Vn(t))return Ti;if(zt(this))return zt(t)?Ge(this).R(Ge(t)):Ge(Ge(this).R(t));if(zt(t))return Ge(this.R(Ge(t)));if(0>this.X(Tv)&&0>t.X(Tv))return yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Ql(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Ql(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ql(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ql(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new re(n,0)};function Ql(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Co(t,e){this.g=t,this.h=e}function Ec(t,e){if(Vn(e))throw Error("division by zero");if(Vn(t))return new Co(Ti,Ti);if(zt(t))return e=Ec(Ge(t),e),new Co(Ge(e.g),Ge(e.h));if(zt(e))return e=Ec(t,Ge(e)),new Co(Ge(e.g),e.h);if(30<t.g.length){if(zt(t)||zt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Fp,r=e;0>=r.X(t);)n=_v(n),r=_v(r);var s=Gs(n,1),i=Gs(r,1);for(r=Gs(r,2),n=Gs(n,2);!Vn(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Gs(r,1),n=Gs(n,1)}return e=wc(t,s.R(e)),new Co(s,e)}for(s=Ti;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=yn(n),o=i.R(e);zt(o)||0<o.X(t);)n-=r,i=yn(n),o=i.R(e);Vn(i)&&(i=Fp),s=s.add(i),t=wc(t,o)}return new Co(s,t)}N.gb=function(t){return Ec(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new re(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new re(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new re(n,this.h^t.h)};function _v(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new re(n,t.h)}function Gs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new re(s,t.h)}vc.prototype.createWebChannel=vc.prototype.g;Ot.prototype.send=Ot.prototype.u;Ot.prototype.open=Ot.prototype.m;Ot.prototype.close=Ot.prototype.close;Eh.NO_ERROR=0;Eh.TIMEOUT=8;Eh.HTTP_ERROR=6;CT.COMPLETE="complete";ST.EventType=ll;ll.OPEN="a";ll.CLOSE="b";ll.ERROR="c";ll.MESSAGE="d";He.prototype.listen=He.prototype.O;_e.prototype.listenOnce=_e.prototype.P;_e.prototype.getLastError=_e.prototype.Sa;_e.prototype.getLastErrorCode=_e.prototype.Ia;_e.prototype.getStatus=_e.prototype.da;_e.prototype.getResponseJson=_e.prototype.Wa;_e.prototype.getResponseText=_e.prototype.ja;_e.prototype.send=_e.prototype.ha;_e.prototype.setWithCredentials=_e.prototype.Oa;an.prototype.digest=an.prototype.l;an.prototype.reset=an.prototype.reset;an.prototype.update=an.prototype.j;re.prototype.add=re.prototype.add;re.prototype.multiply=re.prototype.R;re.prototype.modulo=re.prototype.gb;re.prototype.compare=re.prototype.X;re.prototype.toNumber=re.prototype.ea;re.prototype.toString=re.prototype.toString;re.prototype.getBits=re.prototype.D;re.fromNumber=yn;re.fromString=r_;var iD=function(){return new vc},oD=function(){return wh()},Xd=Eh,aD=CT,lD=Vs,xv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uD=hl,Yl=ST,cD=_e,hD=an,_i=re;const Iv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new _g("@firebase/firestore");function kv(){return Ns.logLevel}function O(t,...e){if(Ns.logLevel<=ee.DEBUG){const n=e.map(o1);Ns.debug(`Firestore (${io}): ${t}`,...n)}}function Zn(t,...e){if(Ns.logLevel<=ee.ERROR){const n=e.map(o1);Ns.error(`Firestore (${io}): ${t}`,...n)}}function ji(t,...e){if(Ns.logLevel<=ee.WARN){const n=e.map(o1);Ns.warn(`Firestore (${io}): ${t}`,...n)}}function o1(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t="Unexpected state"){const e=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: `+t;throw Zn(e),new Error(e)}function ce(t,e){t||B()}function q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class fD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pD{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new s_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new tt(e)}}class mD{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class gD{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new mD(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vD{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.T=n.token,new yD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=wD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function Fi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.timestamp=e}static fromTimestamp(e){return new K(e)}static min(){return new K(new Fe(0,0))}static max(){return new K(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Oa{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const ED=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Oa{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return ED.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new $(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.path=e}static fromPath(e){return new F(Se.fromString(e))}static fromName(e){return new F(Se.fromString(e).popFirst(5))}static empty(){return new F(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new Se(e.slice()))}}function CD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=K.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new Fr(s,F.empty(),e)}function SD(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(K.min(),F.empty(),-1)}static max(){return new Fr(K.max(),F.empty(),-1)}}function TD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==_D)throw t;O("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(s=>s?P.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new P((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new P((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}a1.ct=-1;function Rh(t){return t==null}function Cc(t){return t===0&&1/t==-1/0}function ID(t){return typeof t=="number"&&Number.isInteger(t)&&!Cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||qe.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xl(this.root,e,this.comparator,!0)}}class Xl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qe.RED,this.left=s??qe.EMPTY,this.right=i??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,e,n,r,s){return this}insert(t,e,n){return new qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Av(this.data.getIterator())}getIteratorFrom(e){return new Av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class Av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new at(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new a_("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const kD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(ce(!!t),typeof t=="string"){let e=0;const n=kD.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u1(t){const e=t.mapValue.fields.__previous_value__;return l1(e)?u1(e):e}function Ma(t){const e=Ur(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l1(t)?4:AD(t)?9007199254740991:10:B()}function kn(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Ur(r.timestampValue),o=Ur(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ds(r.bytesValue).isEqual(Ds(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Le(r.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Le(r.integerValue)===Le(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=Le(r.doubleValue),o=Le(s.doubleValue);return i===o?Cc(i)===Cc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Fi(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Rv(i)!==Rv(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!kn(i[a],o[a])))return!1;return!0}(t,e);default:return B()}}function $a(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Ui(t,e){if(t===e)return 0;const n=Ls(t),r=Ls(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=Le(s.integerValue||s.doubleValue),a=Le(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Pv(t.timestampValue,e.timestampValue);case 4:return Pv(Ma(t),Ma(e));case 5:return te(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Ds(s),a=Ds(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=te(o[l],a[l]);if(u!==0)return u}return te(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=te(Le(s.latitude),Le(i.latitude));return o!==0?o:te(Le(s.longitude),Le(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Ui(o[l],a[l]);if(u)return u}return te(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Jl.mapValue&&i===Jl.mapValue)return 0;if(s===Jl.mapValue)return 1;if(i===Jl.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=te(a[c],u[c]);if(h!==0)return h;const d=Ui(o[a[c]],l[u[c]]);if(d!==0)return d}return te(a.length,u.length)}(t.mapValue,e.mapValue);default:throw B()}}function Pv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=Ur(t),r=Ur(e),s=te(n.seconds,r.seconds);return s!==0?s:te(n.nanos,r.nanos)}function Vi(t){return Up(t)}function Up(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Ur(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ds(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=Up(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${Up(r.fields[a])}`;return i+"}"}(t.mapValue):B();var e,n}function Vp(t){return!!t&&"integerValue"in t}function c1(t){return!!t&&"arrayValue"in t}function Nv(t){return!!t&&"nullValue"in t}function Dv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function Go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Go(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Go(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Go(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Iu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Bs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(Go(this.value))}}function l_(t){const e=[];return Bs(t.fields,(n,r)=>{const s=new st([n]);if(Iu(r)){const i=l_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rt(e,0,K.min(),K.min(),K.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,K.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,K.min(),K.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,K.min(),K.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n){this.position=e,this.inclusive=n}}function Lv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=Ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n="asc"){this.field=e,this.dir=n}}function PD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{}class be extends u_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DD(e,n,r):n==="array-contains"?new MD(e,r):n==="in"?new bD(e,r):n==="not-in"?new $D(e,r):n==="array-contains-any"?new jD(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LD(e,r):new OD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ui(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.matchesComparison(Ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Rn extends u_{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Rn(e,n)}matches(e){return c_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function c_(t){return t.op==="and"}function h_(t){return ND(t)&&c_(t)}function ND(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function Bp(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+Vi(t.value);if(h_(t))return t.filters.map(e=>Bp(e)).join(",");{const e=t.filters.map(n=>Bp(n)).join(",");return`${t.op}(${e})`}}function d_(t,e){return t instanceof be?function(n,r){return r instanceof be&&n.op===r.op&&n.field.isEqual(r.field)&&kn(n.value,r.value)}(t,e):t instanceof Rn?function(n,r){return r instanceof Rn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&d_(i,r.filters[o]),!0):!1}(t,e):void B()}function f_(t){return t instanceof be?function(e){return`${e.field.canonicalString()} ${e.op} ${Vi(e.value)}`}(t):t instanceof Rn?function(e){return e.op.toString()+" {"+e.getFilters().map(f_).join(" ,")+"}"}(t):"Filter"}class DD extends be{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class LD extends be{constructor(e,n){super(e,"in",n),this.keys=p_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OD extends be{constructor(e,n){super(e,"not-in",n),this.keys=p_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}class MD extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return c1(n)&&$a(n.arrayValue,this.value)}}class bD extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$a(this.value.arrayValue,n)}}class $D extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if($a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$a(this.value.arrayValue,n)}}class jD extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!c1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function Mv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new FD(t,e,n,r,s,i,o)}function h1(t){const e=q(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vi(r)).join(",")),e.dt=n}return e.dt}function d1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!d_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ov(t.startAt,e.startAt)&&Ov(t.endAt,e.endAt)}function zp(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function UD(t,e,n,r,s,i,o,a){return new Ah(t,e,n,r,s,i,o,a)}function Ph(t){return new Ah(t)}function bv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VD(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function BD(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function zD(t){return t.collectionGroup!==null}function xi(t){const e=q(t);if(e.wt===null){e.wt=[];const n=BD(e),r=VD(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Qo(n)),e.wt.push(new Qo(st.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.wt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Qo(st.keyField(),i))}}}return e.wt}function er(t){const e=q(t);if(!e._t)if(e.limitType==="F")e._t=Mv(e.path,e.collectionGroup,xi(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of xi(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Qo(i.field,o))}const r=e.endAt?new Sc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Sc(e.startAt.position,e.startAt.inclusive):null;e._t=Mv(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function Hp(t,e,n){return new Ah(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nh(t,e){return d1(er(t),er(e))&&t.limitType===e.limitType}function m_(t){return`${h1(er(t))}|lt:${t.limitType}`}function Wp(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>f_(r)).join(", ")}]`),Rh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vi(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vi(r)).join(",")),`Target(${n})`}(er(t))}; limitType=${t.limitType})`}function Dh(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):F.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of xi(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=Lv(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,xi(n),r)||n.endAt&&!function(s,i,o){const a=Lv(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,xi(n),r))}(t,e)}function HD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g_(t){return(e,n)=>{let r=!1;for(const s of xi(t)){const i=WD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function WD(t,e,n){const r=t.field.isKeyField()?F.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Ui(a,l):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new Ee(F.comparator);function tr(){return KD}const y_=new Ee(F.comparator);function Lo(...t){let e=y_;for(const n of t)e=e.insert(n.key,n);return e}function v_(t){let e=y_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ps(){return Yo()}function w_(){return Yo()}function Yo(){return new oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const qD=new Ee(F.comparator),GD=new at(F.comparator);function Q(...t){let e=GD;for(const n of t)e=e.add(n);return e}const QD=new at(te);function YD(){return QD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(e)?"-0":e}}function C_(t){return{integerValue:""+t}}function XD(t,e){return ID(e)?C_(e):E_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this._=void 0}}function JD(t,e,n){return t instanceof Tc?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&l1(s)&&(s=u1(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Bi?T_(t,e):t instanceof ja?__(t,e):function(r,s){const i=S_(r,s),o=$v(i)+$v(r.gt);return Vp(i)&&Vp(r.gt)?C_(o):E_(r.serializer,o)}(t,e)}function ZD(t,e,n){return t instanceof Bi?T_(t,e):t instanceof ja?__(t,e):n}function S_(t,e){return t instanceof _c?Vp(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Tc extends Lh{}class Bi extends Lh{constructor(e){super(),this.elements=e}}function T_(t,e){const n=x_(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ja extends Lh{constructor(e){super(),this.elements=e}}function __(t,e){let n=x_(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class _c extends Lh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function $v(t){return Le(t.integerValue||t.doubleValue)}function x_(t){return c1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.field=e,this.transform=n}}function tL(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Bi&&r instanceof Bi||n instanceof ja&&r instanceof ja?Fi(n.elements,r.elements,kn):n instanceof _c&&r instanceof _c?kn(n.gt,r.gt):n instanceof Tc&&r instanceof Tc}(t.transform,e.transform)}class nL{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oh{}function I_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new R_(t.key,Tn.none()):new gl(t.key,t.data,Tn.none());{const n=t.data,r=Et.empty();let s=new at(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Qr(t.key,r,new Pt(s.toArray()),Tn.none())}}function rL(t,e,n){t instanceof gl?function(r,s,i){const o=r.value.clone(),a=Fv(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Qr?function(r,s,i){if(!ku(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Fv(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(k_(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Xo(t,e,n,r){return t instanceof gl?function(s,i,o,a){if(!ku(s.precondition,i))return o;const l=s.value.clone(),u=Uv(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qr?function(s,i,o,a){if(!ku(s.precondition,i))return o;const l=Uv(s.fieldTransforms,a,i),u=i.data;return u.setAll(k_(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return ku(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function sL(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=S_(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function jv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Fi(n,r,(s,i)=>tL(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gl extends Oh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qr extends Oh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function k_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fv(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ZD(o,a,n[s]))}return r}function Uv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,JD(i,o,e))}return r}class R_ extends Oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iL extends Oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rL(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=w_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=I_(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&Fi(this.mutations,e.mutations,(n,r)=>jv(n,r))&&Fi(this.baseMutations,e.baseMutations,(n,r)=>jv(n,r))}}class f1{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=qD;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new f1(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne,X;function uL(t){switch(t){default:return B();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function A_(t){if(t===void 0)return Zn("GRPC error has no .code"),R.UNKNOWN;switch(t){case Ne.OK:return R.OK;case Ne.CANCELLED:return R.CANCELLED;case Ne.UNKNOWN:return R.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return R.INTERNAL;case Ne.UNAVAILABLE:return R.UNAVAILABLE;case Ne.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Ne.NOT_FOUND:return R.NOT_FOUND;case Ne.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Ne.ABORTED:return R.ABORTED;case Ne.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Ne.DATA_LOSS:return R.DATA_LOSS;default:return B()}}(X=Ne||(Ne={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Zl}static getOrCreateInstance(){return Zl===null&&(Zl=new p1),Zl}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Zl=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new _i([4294967295,4294967295],0);function Vv(t){const e=cL().encode(t),n=new hD;return n.update(e),new Uint8Array(n.digest())}function Bv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _i([n,r],0),new _i([s,i],0)]}class m1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=_i.fromNumber(this.It)}Et(e,n,r){let s=e.add(n.multiply(_i.fromNumber(r)));return s.compare(hL)===1&&(s=new _i([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Vv(e),[r,s]=Bv(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);if(!this.At(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new m1(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Vv(e),[r,s]=Bv(n);for(let i=0;i<this.hashCount;i++){const o=this.Et(r,s,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mh(K.min(),s,new Ee(te),tr(),Q())}}class yl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yl(r,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r,s){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=s}}class P_{constructor(e,n){this.targetId=e,this.Vt=n}}class N_{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zv{constructor(){this.St=0,this.Dt=Wv(),this.Ct=ct.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Q(),n=Q(),r=Q();return this.Dt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:B()}}),new yl(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=Wv()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class dL{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=tr(),this.zt=Hv(),this.Wt=new Ee(te)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,s)=>{this.te(s)&&n(s)})}ne(e){var n;const r=e.targetId,s=e.Vt.count,i=this.se(r);if(i){const o=i.target;if(zp(o))if(s===0){const a=new F(o.path);this.Yt(r,a,rt.newNoDocument(a,K.min()))}else ce(s===1);else{const a=this.ie(r);if(a!==s){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=p1.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,h){var d,f,g,w,S,v;const m={localCacheCount:c,existenceFilterCount:h.count},y=h.unchangedNames;return y&&(m.bloomFilter={applied:u===0,hashCount:(d=y==null?void 0:y.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(w=(g=(f=y==null?void 0:y.bits)===null||f===void 0?void 0:f.bitmap)===null||g===void 0?void 0:g.length)!==null&&w!==void 0?w:0,padding:(v=(S=y==null?void 0:y.bits)===null||S===void 0?void 0:S.padding)!==null&&v!==void 0?v:0}),m}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Ds(i).toUint8Array()}catch(c){if(c instanceof a_)return ji("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new m1(l,o,a)}catch(c){return ji(c instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:s!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.vt(a)||(this.Yt(e,i,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((i,o)=>{const a=this.se(o);if(a){if(i.current&&zp(a.target)){const l=new F(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,rt.newNoDocument(l,e))}i.Mt&&(n.set(o,i.Ot()),i.Ft())}});let r=Q();this.zt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.jt.forEach((i,o)=>o.setReadTime(e));const s=new Mh(e,n,this.Wt,this.jt,r);return this.jt=tr(),this.zt=Hv(),this.Wt=new Ee(te),s}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new zv,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new at(te),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new zv),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Hv(){return new Ee(F.comparator)}function Wv(){return new Ee(F.comparator)}const fL=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),pL=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),mL=(()=>({and:"AND",or:"OR"}))();class gL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kp(t,e){return t.useProto3Json||Rh(e)?e:{value:e}}function xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yL(t,e){return xc(t,e.toTimestamp())}function _n(t){return ce(!!t),K.fromTimestamp(function(e){const n=Ur(e);return new Fe(n.seconds,n.nanos)}(t))}function g1(t,e){return function(n){return new Se(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function L_(t){const e=Se.fromString(t);return ce($_(e)),e}function qp(t,e){return g1(t.databaseId,e.path)}function Jd(t,e){const n=L_(e);if(n.get(1)!==t.databaseId.projectId)throw new $(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(O_(n))}function Gp(t,e){return g1(t.databaseId,e)}function vL(t){const e=L_(t);return e.length===4?Se.emptyPath():O_(e)}function Qp(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O_(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kv(t,e,n){return{name:qp(t,e),fields:n.value.mapValue.fields}}function wL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(ce(u===void 0||typeof u=="string"),ct.fromBase64String(u||"")):(ce(u===void 0||u instanceof Uint8Array),ct.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?R.UNKNOWN:A_(l.code);return new $(u,l.message||"")}(o);n=new N_(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Jd(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):K.min(),a=new Et({mapValue:{fields:r.document.fields}}),l=rt.newFoundDocument(s,i,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Ru(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Jd(t,r.document),i=r.readTime?_n(r.readTime):K.min(),o=rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Jd(t,r.document),i=r.removedTargetIds||[];n=new Ru([],i,s,null)}else{if(!("filter"in e))return B();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lL(s,i),a=r.targetId;n=new P_(a,o)}}return n}function EL(t,e){let n;if(e instanceof gl)n={update:Kv(t,e.key,e.value)};else if(e instanceof R_)n={delete:qp(t,e.key)};else if(e instanceof Qr)n={update:Kv(t,e.key,e.data),updateMask:AL(e.fieldMask)};else{if(!(e instanceof iL))return B();n={verify:qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Tc)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Bi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ja)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof _c)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:yL(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function CL(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?_n(r.updateTime):_n(s);return i.isEqual(K.min())&&(i=_n(s)),new nL(i,r.transformResults||[])}(n,e))):[]}function SL(t,e){return{documents:[Gp(t,e.path)]}}function TL(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Gp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return b_(Rn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Qs(c.field),direction:IL(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Kp(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function _L(t){let e=vL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(c){const h=M_(c);return h instanceof Rn&&h_(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Qo(Ys(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Rh(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new Sc(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new Sc(d,h)}(n.endAt)),UD(e,s,o,i,a,"F",l,u)}function xL(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M_(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ys(e.unaryFilter.field);return be.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ys(e.unaryFilter.field);return be.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ys(e.unaryFilter.field);return be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ys(e.unaryFilter.field);return be.create(i,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(e){return be.create(Ys(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Rn.create(e.compositeFilter.filters.map(n=>M_(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return B()}}(e.compositeFilter.op))}(t):B()}function IL(t){return fL[t]}function kL(t){return pL[t]}function RL(t){return mL[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return st.fromServerFormat(t.fieldPath)}function b_(t){return t instanceof be?function(e){if(e.op==="=="){if(Dv(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NAN"}};if(Nv(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Dv(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NOT_NAN"}};if(Nv(e.value))return{unaryFilter:{field:Qs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(e.field),op:kL(e.op),value:e.value}}}(t):t instanceof Rn?function(e){const n=e.getFilters().map(r=>b_(r));return n.length===1?n[0]:{compositeFilter:{op:RL(e.op),filters:n}}}(t):B()}function AL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,s,i=K.min(),o=K.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.fe=e}}function NL(t){const e=_L({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.rn=new LL}addToCollectionParentIndex(e,n){return this.rn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Fr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class LL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new at(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new at(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new zi(0)}static Mn(){return new zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Xo(r.mutation,s,Pt.empty(),Fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Q()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Q()){const s=ps();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Lo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ps();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Q()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=tr();const o=Yo(),a=Yo();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Qr)?i=i.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Xo(c.mutation,u,c.mutation.getFieldMask(),Fe.now())):o.set(u.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new ML(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Yo();let s=new Ee((o,a)=>o-a),i=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Pt.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||Q()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=w_();c.forEach(d=>{if(!i.has(d)){const f=I_(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return F.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):P.resolve(ps());let a=-1,l=i;return o.next(u=>P.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?P.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Q())).next(c=>({batchId:a,changes:v_(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let s=Lo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Lo();return this.indexManager.getCollectionParents(e,s).next(o=>P.forEach(o,a=>{const l=function(u,c){return new Ah(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,rt.newInvalidDocument(u)))});let o=Lo();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&Xo(u.mutation,l,Pt.empty(),Fe.now()),Dh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return P.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:_n(r.createTime)}),P.resolve()}getNamedQuery(e,n){return P.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:NL(r.bundledQuery),readTime:_n(r.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.overlays=new Ee(F.comparator),this.ls=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ps();return P.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.we(e,n,i)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.ls.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const s=ps(),i=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return P.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ee((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=ps(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ps(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return P.resolve(a)}we(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aL(n,r));let i=this.ls.get(n);i===void 0&&(i=Q(),this.ls.set(n,i)),this.ls.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.fs=new at(Ve.ds),this.ws=new at(Ve._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new Ve(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new Ve(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new F(new Se([])),r=new Ve(n,e),s=new Ve(n,e+1),i=[];return this.ws.forEachInRange([r,s],o=>{this.ys(o),i.push(o.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new F(new Se([])),r=new Ve(n,e),s=new Ve(n,e+1);let i=Q();return this.ws.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ve(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ve{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return F.comparator(e.key,n.key)||te(e.As,n.As)}static _s(e,n){return te(e.As,n.As)||F.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new at(Ve.ds)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oL(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new Ve(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.bs(r),i=s<0?0:s;return P.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ve(n,0),s=new Ve(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.Ps(o.As);i.push(a)}),P.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(te);return n.forEach(s=>{const i=new Ve(s,0),o=new Ve(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.As)})}),P.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;F.isDocumentKey(i)||(i=i.child(""));const o=new Ve(new F(i),0);let a=new at(te);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.As)),!0)},o),P.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return P.forEach(n.mutations,s=>{const i=new Ve(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new Ve(n,0),s=this.Rs.firstAfterOrEqual(r);return P.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.Ds=e,this.docs=new Ee(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=tr();const o=n.path,a=new F(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||TD(SD(c),r)<=0||(s.has(c.key)||Dh(n,c))&&(i=i.insert(c.key,c.mutableCopy()))}return P.resolve(i)}getAllFromCollectionGroup(e,n,r,s){B()}Cs(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VL(this)}getSize(e){return P.resolve(this.size)}}class VL extends OL{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.persistence=e,this.xs=new oo(n=>h1(n),d1),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Ns=0,this.ks=new y1,this.targetCount=0,this.Ms=zi.kn()}forEachTarget(e,n){return this.xs.forEach((r,s)=>n(s)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),P.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new zi(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Fn(n),P.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),P.waitFor(i).next(()=>s)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),P.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n){this.$s={},this.overlays={},this.Os=new a1(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new BL(this),this.indexManager=new DL,this.remoteDocumentCache=function(r){return new UL(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new PL(n),this.qs=new $L(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new FL(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);const s=new HL(this.Os.next());return this.referenceDelegate.Us(),r(s).next(i=>this.referenceDelegate.Ks(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gs(e,n){return P.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class HL extends xD{constructor(e){super(),this.currentSequenceNumber=e}}class v1{constructor(e){this.persistence=e,this.Qs=new y1,this.js=null}static zs(e){return new v1(e)}get Ws(){if(this.js)return this.js;throw B()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),P.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ws.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Ws,r=>{const s=F.fromPath(r);return this.Hs(e,s).next(i=>{i||n.removeEntry(s,K.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return P.or([()=>P.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=s}static Li(e,n){let r=Q(),s=Q();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new w1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ki(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.Qi(e,n))}Ki(e,n){if(bv(n))return P.resolve(null);let r=er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Hp(n,null,"F"),r=er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Q(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,Hp(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,s){return bv(n)||s.isEqual(K.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.zi(n,o,r,s)?this.Qi(e,n):(kv()<=ee.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wp(n)),this.Wi(e,o,n,CD(s,-1)))})}ji(e,n){let r=new at(g_(e));return n.forEach((s,i)=>{Dh(e,i)&&(r=r.add(i))}),r}zi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Qi(e,n){return kv()<=ee.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Wp(n)),this.Ui.getDocumentsMatchingQuery(e,n,Fr.min())}Wi(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,r,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new Ee(te),this.Yi=new oo(i=>h1(i),d1),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bL(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function qL(t,e,n,r){return new KL(t,e,n,r)}async function j_(t,e){const n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Q();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function GL(t,e){const n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=P.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(g=>{const w=l.docVersions.get(f);ce(w!==null),g.version.compareTo(w)<0&&(c.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Q();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function F_(t){const e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function QL(t,e){const n=q(t),r=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(ct.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(g,w,S){return g.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(d,f,c)&&a.push(n.Bs.updateTargetData(i,f))});let l=tr(),u=Q();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(YL(i,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(K.min())){const c=n.Bs.getLastRemoteSnapshotVersion(i).next(h=>n.Bs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return P.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ji=s,i))}function YL(t,e,n){let r=Q(),s=Q();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=tr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(K.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:s}})}function XL(t,e){const n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JL(t,e){const n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Bs.getTargetData(r,e).next(i=>i?(s=i,P.resolve(s)):n.Bs.allocateTargetId(r).next(o=>(s=new Er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function Yp(t,e,n){const r=q(t),s=r.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ml(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function qv(t,e,n){const r=q(t);let s=K.min(),i=Q();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=q(a),h=c.Yi.get(u);return h!==void 0?P.resolve(c.Ji.get(h)):c.Bs.getTargetData(l,u)}(r,o,er(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?s:K.min(),n?i:Q())).next(a=>(ZL(r,HD(e),a),{documents:a,ir:i})))}function ZL(t,e,n){let r=t.Xi.get(e)||K.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Xi.set(e,r)}class Gv{constructor(){this.activeTargetIds=YD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e8{constructor(){this.Hr=new Gv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function Zd(){return eu===null?eu=268435456+Math.round(2147483648*Math.random()):eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class s8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,s,i){const o=Zd(),a=this.To(e,n);O("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,s,i),this.Ao(e,a,l,r).then(u=>(O("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw ji("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,s,i,o){return this.Io(e,n,r,s,i)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+io,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}To(e,n){const r=n8[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,s){const i=Zd();return new Promise((o,a)=>{const l=new cD;l.setWithCredentials(!0),l.listenOnce(aD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xd.NO_ERROR:const c=l.getResponseJson();O(et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case Xd.TIMEOUT:O(et,`RPC '${e}' ${i} timed out`),a(new $(R.DEADLINE_EXCEEDED,"Request time out"));break;case Xd.HTTP_ERROR:const h=l.getStatus();if(O(et,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(S)>=0?S:R.UNKNOWN}(f.status);a(new $(g,f.message))}else a(new $(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(R.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{O(et,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);O(et,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const s=Zd(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iD(),a=oD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new uD({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=i.join("");O(et,`Creating RPC '${e}' stream ${s}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,f=!1;const g=new r8({ro:S=>{f?O(et,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(d||(O(et,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),O(et,`RPC '${e}' stream ${s} sending:`,S),h.send(S))},oo:()=>h.close()}),w=(S,v,m)=>{S.listen(v,y=>{try{m(y)}catch(C){setTimeout(()=>{throw C},0)}})};return w(h,Yl.EventType.OPEN,()=>{f||O(et,`RPC '${e}' stream ${s} transport opened.`)}),w(h,Yl.EventType.CLOSE,()=>{f||(f=!0,O(et,`RPC '${e}' stream ${s} transport closed`),g.wo())}),w(h,Yl.EventType.ERROR,S=>{f||(f=!0,ji(et,`RPC '${e}' stream ${s} transport errored:`,S),g.wo(new $(R.UNAVAILABLE,"The operation could not be completed")))}),w(h,Yl.EventType.MESSAGE,S=>{var v;if(!f){const m=S.data[0];ce(!!m);const y=m,C=y.error||((v=y[0])===null||v===void 0?void 0:v.error);if(C){O(et,`RPC '${e}' stream ${s} received error:`,C);const T=C.status;let k=function(x){const M=Ne[x];if(M!==void 0)return A_(M)}(T),I=C.message;k===void 0&&(k=R.INTERNAL,I="Unknown error status: "+T+" with message "+C.message),f=!0,g.wo(new $(k,I)),h.close()}else O(et,`RPC '${e}' stream ${s} received:`,m),g._o(m)}}),w(a,lD.STAT_EVENT,S=>{S.stat===xv.PROXY?O(et,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===xv.NOPROXY&&O(et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}function ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t){return new gL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=s,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-r);s>0&&O("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,r,s,i,o,a,l){this.ii=e,this.$o=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new U_(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===n&&this.Zo(r,s)},r=>{e(()=>{const s=new $(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i8 extends V_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=wL(this.serializer,e),r=function(s){if(!("targetChange"in s))return K.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?K.min():i.readTime?_n(i.readTime):K.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Qp(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=zp(a)?{documents:SL(s,a)}:{query:TL(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=D_(s,i.resumeToken);const l=Kp(s,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(K.min())>0){o.readTime=xc(s,i.snapshotVersion.toTimestamp());const l=Kp(s,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=xL(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Qp(this.serializer),n.removeTarget=e,this.Wo(n)}}class o8 extends V_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=CL(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.cu(r,n)}return ce(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Qp(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EL(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new $(R.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Io(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(R.UNKNOWN,s.toString())})}vo(e,n,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.vo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(R.UNKNOWN,i.toString())})}terminate(){this.lu=!0}}class l8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Zn(n),this.mu=!1):O("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{zs(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=q(a);l.vu.add(4),await vl(l),l.bu.set("Unknown"),l.vu.delete(4),await $h(l)}(this))})}),this.bu=new l8(r,s)}}async function $h(t){if(zs(t))for(const e of t.Ru)await e(!0)}async function vl(t){for(const e of t.Ru)await e(!1)}function B_(t,e){const n=q(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),S1(n)?C1(n):ao(n).Ko()&&E1(n,e))}function z_(t,e){const n=q(t),r=ao(n);n.Au.delete(e),r.Ko()&&H_(n,e),n.Au.size===0&&(r.Ko()?r.jo():zs(n)&&n.bu.set("Unknown"))}function E1(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ao(t).su(e)}function H_(t,e){t.Vu.qt(e),ao(t).iu(e)}function C1(t){t.Vu=new dL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),ao(t).start(),t.bu.gu()}function S1(t){return zs(t)&&!ao(t).Uo()&&t.Au.size>0}function zs(t){return q(t).vu.size===0}function W_(t){t.Vu=void 0}async function c8(t){t.Au.forEach((e,n)=>{E1(t,e)})}async function h8(t,e){W_(t),S1(t)?(t.bu.Iu(e),C1(t)):t.bu.set("Unknown")}async function d8(t,e,n){if(t.bu.set("Online"),e instanceof N_&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ic(t,r)}else if(e instanceof Ru?t.Vu.Ht(e):e instanceof P_?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(K.min()))try{const r=await F_(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Vu.ce(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.Au.get(l);u&&s.Au.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=s.Au.get(a);if(!u)return;s.Au.set(a,u.withResumeToken(ct.EMPTY_BYTE_STRING,u.snapshotVersion)),H_(s,a);const c=new Er(u.target,a,l,u.sequenceNumber);E1(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){O("RemoteStore","Failed to raise snapshot:",r),await Ic(t,r)}}async function Ic(t,e,n){if(!ml(e))throw e;t.vu.add(1),await vl(t),t.bu.set("Offline"),n||(n=()=>F_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await $h(t)})}function K_(t,e){return e().catch(n=>Ic(t,n,e))}async function jh(t){const e=q(t),n=Vr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;f8(e);)try{const s=await XL(e.localStore,r);if(s===null){e.Eu.length===0&&n.jo();break}r=s.batchId,p8(e,s)}catch(s){await Ic(e,s)}q_(e)&&G_(e)}function f8(t){return zs(t)&&t.Eu.length<10}function p8(t,e){t.Eu.push(e);const n=Vr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function q_(t){return zs(t)&&!Vr(t).Uo()&&t.Eu.length>0}function G_(t){Vr(t).start()}async function m8(t){Vr(t).hu()}async function g8(t){const e=Vr(t);for(const n of t.Eu)e.uu(n.mutations)}async function y8(t,e,n){const r=t.Eu.shift(),s=f1.from(r,e,n);await K_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jh(t)}async function v8(t,e){e&&Vr(t).ou&&await async function(n,r){if(s=r.code,uL(s)&&s!==R.ABORTED){const i=n.Eu.shift();Vr(n).Qo(),await K_(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await jh(n)}var s}(t,e),q_(t)&&G_(t)}async function Yv(t,e){const n=q(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const r=zs(n);n.vu.add(3),await vl(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await $h(n)}async function w8(t,e){const n=q(t);e?(n.vu.delete(2),await $h(n)):e||(n.vu.add(2),await vl(n),n.bu.set("Unknown"))}function ao(t){return t.Su||(t.Su=function(e,n,r){const s=q(e);return s.fu(),new i8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:c8.bind(null,t),ao:h8.bind(null,t),nu:d8.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),S1(t)?C1(t):t.bu.set("Unknown")):(await t.Su.stop(),W_(t))})),t.Su}function Vr(t){return t.Du||(t.Du=function(e,n,r){const s=q(e);return s.fu(),new o8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:m8.bind(null,t),ao:v8.bind(null,t),au:g8.bind(null,t),cu:y8.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await jh(t)):(await t.Du.stop(),t.Eu.length>0&&(O("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new T1(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _1(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),ml(t))return new $(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=Lo(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new Ii(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.Cu=new Ee(F.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):B():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hi{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Hi(e,n,Ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(){this.Nu=void 0,this.listeners=[]}}class C8{constructor(){this.queries=new oo(e=>m_(e),Nh),this.onlineState="Unknown",this.ku=new Set}}async function Q_(t,e){const n=q(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new E8),s)try{i.Nu=await n.onListen(r)}catch(o){const a=_1(o,`Initialization of query '${Wp(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&x1(n)}async function Y_(t,e){const n=q(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function S8(t,e){const n=q(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.$u(s)&&(r=!0);o.Nu=s}}r&&x1(n)}function T8(t,e,n){const r=q(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function x1(t){t.ku.forEach(e=>{e.next()})}class X_{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.key=e}}class Z_{constructor(e){this.key=e}}class _8{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Q(),this.mutatedKeys=Q(),this.tc=g_(e),this.ec=new Ii(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Xv,s=n?n.ec:this.ec;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=Dh(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let S=!1;d&&f?d.data.isEqual(f.data)?g!==w&&(r.track({type:3,doc:f}),S=!0):this.rc(d,f)||(r.track({type:2,doc:f}),S=!0,(l&&this.tc(f,l)>0||u&&this.tc(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),S=!0):d&&!f&&(r.track({type:1,doc:d}),S=!0,(l||u)&&(a=!0)),S&&(f?(o=o.add(f),i=w?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:i}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((u,c)=>function(h,d){const f=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return f(h)-f(d)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,i.length!==0||l?{snapshot:new Hi(this.query,e.ec,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Xv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Q(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new Z_(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new J_(r))}),n}hc(e){this.Yu=e.ir,this.Zu=Q();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Hi.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class x8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class I8{constructor(e){this.key=e,this.fc=!1}}class k8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new oo(a=>m_(a),Nh),this._c=new Map,this.mc=new Set,this.gc=new Ee(F.comparator),this.yc=new Map,this.Ic=new y1,this.Tc={},this.Ec=new Map,this.Ac=zi.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function R8(t,e){const n=j8(t);let r,s;const i=n.wc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const o=await JL(n.localStore,er(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await A8(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&B_(n.remoteStore,o)}return s}async function A8(t,e,n,r,s){t.Rc=(h,d,f)=>async function(g,w,S,v){let m=w.view.sc(S);m.zi&&(m=await qv(g.localStore,w.query,!1).then(({documents:T})=>w.view.sc(T,m)));const y=v&&v.targetChanges.get(w.targetId),C=w.view.applyChanges(m,g.isPrimaryClient,y);return Zv(g,w.targetId,C.cc),C.snapshot}(t,h,d,f);const i=await qv(t.localStore,e,!0),o=new _8(e,i.ir),a=o.sc(i.documents),l=yl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Zv(t,n,u.cc);const c=new x8(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function P8(t,e){const n=q(t),r=n.wc.get(e),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(i=>!Nh(i,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Yp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),z_(n.remoteStore,r.targetId),Xp(n,r.targetId)}).catch(pl)):(Xp(n,r.targetId),await Yp(n.localStore,r.targetId,!0))}async function N8(t,e,n){const r=F8(t);try{const s=await function(i,o){const a=q(i),l=Fe.now(),u=o.reduce((d,f)=>d.add(f.key),Q());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=tr(),g=Q();return a.Zi.getEntries(d,u).next(w=>{f=w,f.forEach((S,v)=>{v.isValidDocument()||(g=g.add(S))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(w=>{c=w;const S=[];for(const v of o){const m=sL(v,c.get(v.key).overlayedDocument);m!=null&&S.push(new Qr(v.key,m,l_(m.value.mapValue),Tn.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,S,o)}).next(w=>{h=w;const S=w.applyToLocalDocumentSet(c,g);return a.documentOverlayCache.saveOverlays(d,w.batchId,S)})}).then(()=>({batchId:h.batchId,changes:v_(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.Tc[i.currentUser.toKey()];l||(l=new Ee(te)),l=l.insert(o,a),i.Tc[i.currentUser.toKey()]=l}(r,s.batchId,n),await wl(r,s.changes),await jh(r.remoteStore)}catch(s){const i=_1(s,"Failed to persist write");n.reject(i)}}async function ex(t,e){const n=q(t);try{const r=await QL(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.yc.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?ce(o.fc):s.removedDocuments.size>0&&(ce(o.fc),o.fc=!1))}),await wl(n,r,e)}catch(r){await pl(r)}}function Jv(t,e,n){const r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wc.forEach((i,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=q(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Mu(o)&&(l=!0)}),l&&x1(a)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D8(t,e,n){const r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.yc.get(e),i=s&&s.key;if(i){let o=new Ee(F.comparator);o=o.insert(i,rt.newNoDocument(i,K.min()));const a=Q().add(i),l=new Mh(K.min(),new Map,new Ee(te),o,a);await ex(r,l),r.gc=r.gc.remove(i),r.yc.delete(e),I1(r)}else await Yp(r.localStore,e,!1).then(()=>Xp(r,e,n)).catch(pl)}async function L8(t,e){const n=q(t),r=e.batch.batchId;try{const s=await GL(n.localStore,e);nx(n,r,null),tx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wl(n,s)}catch(s){await pl(s)}}async function O8(t,e,n){const r=q(t);try{const s=await function(i,o){const a=q(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ce(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);nx(r,e,n),tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wl(r,s)}catch(s){await pl(s)}}function tx(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function nx(t,e,n){const r=q(t);let s=r.Tc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||rx(t,r)})}function rx(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(z_(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),I1(t))}function Zv(t,e,n){for(const r of n)r instanceof J_?(t.Ic.addReference(r.key,e),M8(t,r)):r instanceof Z_?(O("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||rx(t,r.key)):B()}function M8(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(O("SyncEngine","New document in limbo: "+n),t.mc.add(r),I1(t))}function I1(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new F(Se.fromString(e)),r=t.Ac.next();t.yc.set(r,new I8(n)),t.gc=t.gc.insert(n,r),B_(t.remoteStore,new Er(er(Ph(n.path)),r,"TargetPurposeLimboResolution",a1.ct))}}async function wl(t,e,n){const r=q(t),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const c=w1.Li(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.dc.nu(s),await async function(a,l){const u=q(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>P.forEach(l,h=>P.forEach(h.Fi,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>P.forEach(h.Bi,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!ml(c))throw c;O("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ji.get(h),f=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(f);u.Ji=u.Ji.insert(h,g)}}}(r.localStore,i))}async function b8(t,e){const n=q(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const r=await j_(n.localStore,e);n.currentUser=e,function(s,i){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new $(R.CANCELLED,i))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wl(n,r.er)}}function $8(t,e){const n=q(t),r=n.yc.get(e);if(r&&r.fc)return Q().add(r.key);{let s=Q();const i=n._c.get(e);if(!i)return s;for(const o of i){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function j8(t){const e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D8.bind(null,e),e.dc.nu=S8.bind(null,e.eventManager),e.dc.Pc=T8.bind(null,e.eventManager),e}function F8(t){const e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O8.bind(null,e),e}class ew{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qL(this.persistence,new WL,e.initialUser,this.serializer)}createPersistence(e){return new zL(v1.zs,this.serializer)}createSharedClientState(e){return new e8}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class U8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b8.bind(null,this.syncEngine),await w8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new C8}createDatastore(e){const n=bh(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new s8(s));var s;return function(i,o,a,l){return new a8(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>Jv(this.syncEngine,a,0),o=Qv.D()?new Qv:new t8,new u8(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new k8(r,s,i,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=q(e);O("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await vl(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tt.UNAUTHENTICATED,this.clientId=i_.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{O("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(O("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tf(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await j_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z8(t);O("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Yv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Yv(e.remoteStore,i)),t._onlineComponents=e}function B8(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function z8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!B8(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),await tf(t,new ew)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await tf(t,new ew);return t._offlineComponents}async function ix(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await tw(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await tw(t,new U8))),t._onlineComponents}function H8(t){return ix(t).then(e=>e.syncEngine)}async function Jp(t){const e=await ix(t),n=e.eventManager;return n.onListen=R8.bind(null,e.syncEngine),n.onUnlisten=P8.bind(null,e.syncEngine),n}function W8(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new sx({next:h=>{i.enqueueAndForget(()=>Y_(s,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new $(R.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new $(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new X_(Ph(o.path),u,{includeMetadataChanges:!0,Ku:!0});return Q_(s,c)}(await Jp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e,n){if(!n)throw new $(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function q8(t,e,n,r){if(e===!0&&r===!0)throw new $(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rw(t){if(!F.isDocumentKey(t))throw new $(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function k1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=k1(t);throw new $(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ox((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class R1{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new dD;switch(n.type){case"firstParty":return new gD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new $(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=nw.get(e);n&&(O("ComponentProvider","Removing Datastore"),nw.delete(e),n.terminate())}(this),Promise.resolve()}}function G8(t,e,n,r={}){var s;const i=(t=xn(t,R1))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=tt.MOCK_USER;else{a=gS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new $(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new tt(u)}t._authCredentials=new fD(new s_(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Fh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fh(this.firestore,e,this._query)}}class Fa extends Fh{constructor(e,n,r){super(e,n,Ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new F(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function Yr(t,e,...n){if(t=Te(t),arguments.length===1&&(e=i_.A()),K8("doc","path",e),t instanceof R1){const r=Se.fromString(e,...n);return rw(r),new xt(t,null,new F(r))}{if(!(t instanceof xt||t instanceof Fa))throw new $(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return rw(r),new xt(t.firestore,t instanceof Fa?t.converter:null,new F(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new U_(this,"async_queue_retry"),this.Xc=()=>{const n=ef();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=ef();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ml(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Zn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=T1.createAndSchedule(this,e,n,r,i=>this.na(i));return this.zc.push(s),s}Zc(){this.Wc&&B()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function iw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}let Wi=class extends R1{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Q8,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ax(this),this._firestoreClient.terminate()}};function Y8(t,e){const n=typeof t=="object"?t:Ig(),r=typeof t=="string"?t:e||"(default)",s=uh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=fS("firestore");i&&G8(s,...i)}return s}function A1(t){return t._firestoreClient||ax(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ax(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,l,u){return new RD(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ox(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new V8(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(ct.fromBase64String(e))}catch(n){throw new $(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=/^__.*__$/;class J8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new gl(e,this.data,n,this.fieldTransforms)}}class lx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ux(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class Bh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return kc(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(ux(this.ca)&&X8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Z8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bh(e)}ya(e,n,r,s=!1){return new Bh({ca:e,methodName:n,ga:r,path:st.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cx(t){const e=t._freezeSettings(),n=bh(t._databaseId);return new Z8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function e7(t,e,n,r,s,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,s);N1("Data must be an object, but it was:",o,r);const a=hx(r,o);let l,u;if(i.merge)l=new Pt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=Zp(e,h,n);if(!o.contains(d))throw new $(R.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);fx(c,d)||c.push(d)}l=new Pt(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new J8(new Et(a),l,u)}class zh extends Vh{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function t7(t,e,n){return new Bh({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n7 extends Vh{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=t7(this,e,!0),r=this.pa.map(i=>El(i,n)),s=new Bi(r);return new eL(e.path,s)}isEqual(e){return this===e}}function r7(t,e,n,r){const s=t.ya(1,e,n);N1("Data must be an object, but it was:",s,r);const i=[],o=Et.empty();Bs(r,(l,u)=>{const c=D1(e,l,n);u=Te(u);const h=s.da(c);if(u instanceof zh)i.push(c);else{const d=El(u,h);d!=null&&(i.push(c),o.set(c,d))}});const a=new Pt(i);return new lx(o,a,s.fieldTransforms)}function s7(t,e,n,r,s,i){const o=t.ya(1,e,n),a=[Zp(e,r,n)],l=[s];if(i.length%2!=0)throw new $(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(Zp(e,i[d])),l.push(i[d+1]);const u=[],c=Et.empty();for(let d=a.length-1;d>=0;--d)if(!fx(u,a[d])){const f=a[d];let g=l[d];g=Te(g);const w=o.da(f);if(g instanceof zh)u.push(f);else{const S=El(g,w);S!=null&&(u.push(f),c.set(f,S))}}const h=new Pt(u);return new lx(c,h,o.fieldTransforms)}function El(t,e){if(dx(t=Te(t)))return N1("Unsupported field value:",e,t),hx(t,e);if(t instanceof Vh)return function(n,r){if(!ux(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=El(o,r.wa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Te(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return XD(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Fe.fromDate(n);return{timestampValue:xc(r.serializer,s)}}if(n instanceof Fe){const s=new Fe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xc(r.serializer,s)}}if(n instanceof P1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ki)return{bytesValue:D_(r.serializer,n._byteString)};if(n instanceof xt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:g1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${k1(n)}`)}(t,e)}function hx(t,e){const n={};return o_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(r,s)=>{const i=El(s,e.ha(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function dx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof P1||t instanceof Ki||t instanceof xt||t instanceof Vh)}function N1(t,e,n){if(!dx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=k1(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function Zp(t,e,n){if((e=Te(e))instanceof Uh)return e._internalPath;if(typeof e=="string")return D1(t,e);throw kc("Field path arguments must be of type string or ",t,!1,void 0,n)}const i7=new RegExp("[~\\*/\\[\\]]");function D1(t,e,n){if(e.search(i7)>=0)throw kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uh(...e.split("."))._internalPath}catch{throw kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new $(R.INVALID_ARGUMENT,a+t+l)}function fx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o7 extends px{data(){return super.data()}}function mx(t,e){return typeof e=="string"?D1(t,e):e instanceof Uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l7{convertValue(e,n="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new P1(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);ce($_(r));const s=new ba(r.get(1),r.get(3)),i=new F(r.popFirst(5));return s.isEqual(n)||Zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gx extends px{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Au extends gx{data(e={}){return super.data(e)}}class c7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Mo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Au(this._firestore,this._userDataWriter,r.key,r,new Mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new Au(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Mo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Au(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Mo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:h7(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function h7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){t=xn(t,xt);const e=xn(t.firestore,Wi);return W8(A1(e),t._key).then(n=>Ex(e,t,n))}class yx extends l7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Cl(t,e,n){t=xn(t,xt);const r=xn(t.firestore,Wi),s=u7(t.converter,e,n);return wx(r,[e7(cx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Tn.none())])}function d7(t,e,n,...r){t=xn(t,xt);const s=xn(t.firestore,Wi),i=cx(s);let o;return o=typeof(e=Te(e))=="string"||e instanceof Uh?s7(i,"updateDoc",t._key,e,n,r):r7(i,"updateDoc",t._key,e),wx(s,[o.toMutation(t._key,Tn.exists(!0))])}function vx(t,...e){var n,r,s;t=Te(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||iw(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(iw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,c;if(t instanceof xt)u=xn(t.firestore,Wi),c=Ph(t._key.path),l={next:h=>{e[o]&&e[o](Ex(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=xn(t,Fh);u=xn(h.firestore,Wi),c=h._query;const d=new yx(u);l={next:f=>{e[o]&&e[o](new c7(u,d,h,f))},error:e[o+1],complete:e[o+2]},a7(t._query)}return function(h,d,f,g){const w=new sx(g),S=new X_(d,w,f);return h.asyncQueue.enqueueAndForget(async()=>Q_(await Jp(h),S)),()=>{w.Dc(),h.asyncQueue.enqueueAndForget(async()=>Y_(await Jp(h),S))}}(A1(u),c,a,l)}function wx(t,e){return function(n,r){const s=new Lr;return n.asyncQueue.enqueueAndForget(async()=>N8(await H8(n),r,s)),s.promise}(A1(t),e)}function Ex(t,e,n){const r=n.docs.get(e._key),s=new yx(t);return new gx(t,s,e._key,r,new Mo(n.hasPendingWrites,n.fromCache),e.converter)}function f7(...t){return new n7("arrayUnion",t)}(function(t,e=!0){(function(n){io=n})(js),Rs(new jr("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Wi(new pD(n.getProvider("auth-internal")),new vD(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new $(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),En(Iv,"3.13.0",t),En(Iv,"3.13.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="firebasestorage.googleapis.com",Sx="storageBucket",p7=2*60*1e3,m7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie extends Dn{constructor(e,n,r=0){super(nf(e),`Firebase Storage: ${n} (${nf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ie.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xe||(xe={}));function nf(t){return"storage/"+t}function L1(){const t="An unknown error occurred, please check the error payload for server response.";return new Ie(xe.UNKNOWN,t)}function g7(t){return new Ie(xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function y7(t){return new Ie(xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ie(xe.UNAUTHENTICATED,t)}function w7(){return new Ie(xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E7(t){return new Ie(xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function C7(){return new Ie(xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S7(){return new Ie(xe.CANCELED,"User canceled the upload/download.")}function T7(t){return new Ie(xe.INVALID_URL,"Invalid URL '"+t+"'.")}function _7(t){return new Ie(xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function x7(){return new Ie(xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Sx+"' property when initializing the app?")}function I7(){return new Ie(xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function k7(){return new Ie(xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function R7(t){return new Ie(xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function em(t){return new Ie(xe.INVALID_ARGUMENT,t)}function Tx(){return new Ie(xe.APP_DELETED,"The Firebase app was deleted.")}function A7(t){return new Ie(xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jo(t,e){return new Ie(xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function So(t){throw new Ie(xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Nt.makeFromUrl(e,n)}catch{return new Nt(e,"")}if(r.path==="")return r;throw _7(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${s}/o${d}`,"i"),g={bucket:1,path:3},w=n===Cx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",v=new RegExp(`^https?://${w}/${s}/${S}`,"i"),y=[{regex:a,indices:l,postModify:i},{regex:f,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<y.length;C++){const T=y[C],k=T.regex.exec(e);if(k){const I=k[T.indices.bucket];let x=k[T.indices.path];x||(x=""),r=new Nt(I,x),T.postModify(r);break}}if(r==null)throw T7(e);return r}}class P7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...S){u||(u=!0,e.apply(null,S))}function h(S){s=setTimeout(()=>{s=null,t(f,l())},S)}function d(){i&&clearTimeout(i)}function f(S,...v){if(u){d();return}if(S){d(),c.call(null,S,...v);return}if(l()||o){d(),c.call(null,S,...v);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,h(y)}let g=!1;function w(S){g||(g=!0,d(),!u&&(s!==null?(S||(a=2),clearTimeout(s),h(0)):S||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function D7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(t){return t!==void 0}function O7(t){return typeof t=="object"&&!Array.isArray(t)}function O1(t){return typeof t=="string"||t instanceof String}function ow(t){return M1()&&t instanceof Blob}function M1(){return typeof Blob<"u"&&!NR()}function aw(t,e,n,r){if(r<e)throw em(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw em(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _x(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Cs||(Cs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n,r,s,i,o,a,l,u,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Cs.NO_ERROR,l=i.getStatus();if(!a||M7(l,this.additionalRetryCodes_)&&this.retry){const c=i.getErrorCode()===Cs.ABORT;r(!1,new tu(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new tu(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());L7(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=L1();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Tx():S7();o(l)}else{const l=C7();o(l)}};this.canceled_?n(!1,new tu(!1,null,!0)):this.backoffId_=N7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&D7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function j7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function F7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function U7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function V7(t,e,n,r,s,i,o=!0){const a=_x(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return F7(u,e),$7(u,n),j7(u,i),U7(u,r),new b7(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function z7(...t){const e=B7();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(M1())return new Blob(t);throw new Ie(xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function H7(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t){if(typeof atob>"u")throw R7("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rf{constructor(e,n){this.data=e,this.contentType=n||null}}function xx(t,e){switch(t){case tn.RAW:return new rf(Ix(e));case tn.BASE64:case tn.BASE64URL:return new rf(kx(t,e));case tn.DATA_URL:return new rf(q7(e),G7(e))}throw L1()}function Ix(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function K7(t){let e;try{e=decodeURIComponent(t)}catch{throw Jo(tn.DATA_URL,"Malformed data URL.")}return Ix(e)}function kx(t,e){switch(t){case tn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Jo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case tn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Jo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=W7(e)}catch(s){throw s.message.includes("polyfill")?s:Jo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Rx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jo(tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Q7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function q7(t){const e=new Rx(t);return e.base64?kx(tn.BASE64,e.rest):K7(e.rest)}function G7(t){return new Rx(t).contentType}function Q7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){let r=0,s="";ow(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(ow(this.data_)){const r=this.data_,s=H7(r,e,n);return s===null?null:new gr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new gr(r,!0)}}static getBlob(...e){if(M1()){const n=e.map(r=>r instanceof gr?r.data_:r);return new gr(z7.apply(null,n))}else{const n=e.map(o=>O1(o)?xx(tn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new gr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){let e;try{e=JSON.parse(t)}catch{return null}return O7(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function X7(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Px(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(t,e){return e}class ht{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||J7}}let nu=null;function Z7(t){return!O1(t)||t.length<2?t:Px(t)}function Nx(){if(nu)return nu;const t=[];t.push(new ht("bucket")),t.push(new ht("generation")),t.push(new ht("metageneration")),t.push(new ht("name","fullPath",!0));function e(i,o){return Z7(o)}const n=new ht("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ht("size");return s.xform=r,t.push(s),t.push(new ht("timeCreated")),t.push(new ht("updated")),t.push(new ht("md5Hash",null,!0)),t.push(new ht("cacheControl",null,!0)),t.push(new ht("contentDisposition",null,!0)),t.push(new ht("contentEncoding",null,!0)),t.push(new ht("contentLanguage",null,!0)),t.push(new ht("contentType",null,!0)),t.push(new ht("metadata","customMetadata",!0)),nu=t,nu}function eO(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Nt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function tO(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return eO(r,t),r}function Dx(t,e,n){const r=Ax(e);return r===null?null:tO(t,r,n)}function nO(t,e,n,r){const s=Ax(e);if(s===null||!O1(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=b1(d,n,r),g=_x({alt:"media",token:u});return f+g})[0]}function rO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Lx{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){if(!t)throw L1()}function sO(t,e){function n(r,s){const i=Dx(t,s,e);return Ox(i!==null),i}return n}function iO(t,e){function n(r,s){const i=Dx(t,s,e);return Ox(i!==null),nO(i,s,t.host,t._protocol)}return n}function Mx(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=w7():s=v7():n.getStatus()===402?s=y7(t.bucket):n.getStatus()===403?s=E7(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function oO(t){const e=Mx(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=g7(t.path)),i.serverResponse=s.serverResponse,i}return n}function aO(t,e,n){const r=e.fullServerUrl(),s=b1(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Lx(s,i,iO(t,n),o);return a.errorHandler=oO(e),a}function lO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function uO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=lO(null,e)),r}function cO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let C=0;C<2;C++)y=y+Math.random().toString().slice(2);return y}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=uO(e,r,s),c=rO(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=gr.getBlob(h,r,d);if(f===null)throw I7();const g={name:u.fullPath},w=b1(i,t.host,t._protocol),S="POST",v=t.maxUploadRetryTime,m=new Lx(w,S,sO(t,n),v);return m.urlParams=g,m.headers=o,m.body=f.uploadData(),m.errorHandler=Mx(e),m}class hO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw So("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw So("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw So("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw So("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw So("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dO extends hO{initXhr(){this.xhr_.responseType="text"}}function bx(){return new dO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this._service=e,n instanceof Nt?this._location=n:this._location=Nt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Os(e,n)}get root(){const e=new Nt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Px(this._location.path)}get storage(){return this._service}get parent(){const e=Y7(this._location.path);if(e===null)return null;const n=new Nt(this._location.bucket,e);return new Os(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw A7(e)}}function fO(t,e,n){t._throwIfRoot("uploadBytes");const r=cO(t.storage,t._location,Nx(),new gr(e,!0),n);return t.storage.makeRequestWithTokens(r,bx).then(s=>({metadata:s,ref:t}))}function pO(t,e,n=tn.RAW,r){t._throwIfRoot("uploadString");const s=xx(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),fO(t,s.data,i)}function mO(t){t._throwIfRoot("getDownloadURL");const e=aO(t.storage,t._location,Nx());return t.storage.makeRequestWithTokens(e,bx).then(n=>{if(n===null)throw k7();return n})}function gO(t,e){const n=X7(t._location.path,e),r=new Nt(t._location.bucket,n);return new Os(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){return/^[A-Za-z]+:\/\//.test(t)}function vO(t,e){return new Os(t,e)}function $x(t,e){if(t instanceof $1){const n=t;if(n._bucket==null)throw x7();const r=new Os(n,n._bucket);return e!=null?$x(r,e):r}else return e!==void 0?gO(t,e):t}function wO(t,e){if(e&&yO(e)){if(t instanceof $1)return vO(t,e);throw em("To use ref(service, url), the first argument must be a Storage instance.")}else return $x(t,e)}function lw(t,e){const n=e==null?void 0:e[Sx];return n==null?null:Nt.makeFromBucketSpec(n,t)}function EO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:gS(s,t.app.options.projectId))}class $1{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Cx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p7,this._maxUploadRetryTime=m7,this._requests=new Set,s!=null?this._bucket=Nt.makeFromBucketSpec(s,this._host):this._bucket=lw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nt.makeFromBucketSpec(this._url,e):this._bucket=lw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Os(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new P7(Tx());{const o=V7(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const uw="@firebase/storage",cw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="storage";function CO(t,e,n,r){return t=Te(t),pO(t,e,n,r)}function SO(t){return t=Te(t),mO(t)}function TO(t,e){return t=Te(t),wO(t,e)}function _O(t=Ig(),e){t=Te(t);const r=uh(t,jx).getImmediate({identifier:e}),s=fS("storage");return s&&xO(r,...s),r}function xO(t,e,n,r={}){EO(t,e,n,r)}function IO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new $1(n,r,s,e,js)}function kO(){Rs(new jr(jx,IO,"PUBLIC").setMultipleInstances(!0)),En(uw,cw,""),En(uw,cw,"esm2017")}kO();const RO=async(t,e,n)=>await new Promise(s=>{let i=new Image;i.src=t,i.onload=()=>{let o=i.width,a=i.height;o<=e&&a<=n&&s(t);let l=document.createElement("canvas");o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),l.width=o,l.height=a,l.getContext("2d").drawImage(i,0,0,o,a),s(l.toDataURL("image/jpeg"))}}),AO={apiKey:"AIzaSyAzprVs3tA3oUsLUjr0k__RWuf5uGWt8nM",authDomain:"filmsbase-bea7b.firebaseapp.com",projectId:"filmsbase-bea7b",storageBucket:"filmsbase-bea7b.appspot.com",messagingSenderId:"350143607848",appId:"1:350143607848:web:8a1a9944e08d52a0cab11d",measurementId:"G-B08QMRKV1W"},PO=wS(AO),Xr=Y8(),NO=_O(PO),Fx=new bn;Fx.setCustomParameters({prompt:"select_account"});const Yt=sN(),DO=()=>fP(Yt,Fx),LO=async(t,e)=>await VA(Yt,t,e),OO=async(t,e)=>await UA(Yt,t,e),j1=async(t,e)=>{if(!t)return;const n=Yr(Xr,"users",t.uid);if(!(await lo(n)).exists())try{e&&await Mg(t,{displayName:e}),await Cl(n,{userLists:[{title:"Посмотреть позже...",data:[]}]})}catch(s){console.log("createUserDocumentFromAuth error:"),console.log(s)}return n},MO=async()=>await KA(Yt),bO=async t=>{const e=new Date().getTime()+t.name,n=TO(NO,e),r=new FileReader;r.readAsDataURL(t),r.onload=s=>{RO(s.target.result,500,500).then(o=>{CO(n,o.slice(23),"base64").then(l=>{SO(l.ref).then(u=>{Mg(Yt.currentUser,{photoURL:u})})})})}},$O=async t=>{Mg(Yt.currentUser,{displayName:t})},jO=t=>WA(Yt,t),FO=async t=>{const e={title:t,data:[]},n=Yr(Xr,"users",Yt.currentUser.uid);(await lo(n)).data().userLists.find(s=>s.title===e.title)||await d7(n,{userLists:f7(e)})},UO=async t=>{const e=Yr(Xr,"users",Yt.currentUser.uid),n=(await lo(e)).data().userLists;await Cl(e,{userLists:n.toSpliced(t,1)})},VO=async(t,e)=>{const n=Yr(Xr,"users",Yt.currentUser.uid),r=(await lo(n)).data().userLists,s={...r[t],title:e};await Cl(n,{userLists:r.toSpliced(t,1,s)})},BO=async(t,e,n)=>{const r=Yr(Xr,"users",Yt.currentUser.uid),s=(await lo(r)).data().userLists;s[t].data.push({mediaType:n,id:e}),await Cl(r,{userLists:s})},Ux=async(t,e,n)=>{console.log(t,e,n);const r=Yr(Xr,"users",Yt.currentUser.uid),s=(await lo(r)).data().userLists;s[t].data=s[t].data.filter(i=>!(i.mediaType===n&&i.id===`${e}`)),console.log(s),await Cl(r,{userLists:s})},zO=(t,e)=>{switch(e.type){case"LOGIN":return{currentUser:e.payload};case"LOGOUT":return{currentUser:null};default:return t}},HO={currentUser:null},Vx=E.createContext(),Bx=({children:t})=>{const[e,n]=E.useReducer(zO,HO),{currentUser:r}=e;return E.useEffect(()=>jO(i=>{i&&j1(i),n({type:"LOGIN",payload:i})}),[]),p.jsx(Vx.Provider,{value:{currentUser:r,dispatch:n},children:t})},uo=()=>E.useContext(Vx);Bx.propTypes={children:b.node};const WO=()=>{const{baseName:t}=oe();return p.jsx("div",{className:"logo-container",children:p.jsxs(yg,{to:t,children:[p.jsx("img",{src:`${t}assets/images/logo.svg`,alt:"FilmsBase"}),p.jsxs("h3",{children:["FILMS",p.jsx("span",{className:"logo-accent",children:"BASE"})]})]})})},KO=()=>{const{lang:t,mediaType:e,dispatch:n}=oe();return p.jsxs("div",{className:"media-type-links",children:[p.jsx("button",{className:e==="movie"?"active":"",onClick:()=>{n({type:"SET_MEDIA_TYPE",payload:"movie"})},children:t==="en"?"Movies":"Фильмы"}),p.jsx("button",{className:e==="tv"?"active":"",onClick:()=>{n({type:"SET_MEDIA_TYPE",payload:"tv"})},children:t==="en"?"TV Shows":"Сериалы"})]})},qO=()=>p.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2C5.13401 2 2 5.13401 2 9C2 12.866 5.13401 16 9 16C12.866 16 16 12.866 16 9C16 5.13401 12.866 2 9 2ZM0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 13.9706 13.9706 18 9 18C4.02944 18 0 13.9706 0 9Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.9428 13.9428C14.3333 13.5523 14.9665 13.5523 15.357 13.9428L19.707 18.2928C20.0975 18.6833 20.0975 19.3165 19.707 19.707C19.3165 20.0975 18.6833 20.0975 18.2928 19.707L13.9428 15.357C13.5523 14.9665 13.5523 14.3333 13.9428 13.9428Z",fill:"var(--primary-color)"})]}),GO=()=>{const{mediaType:t,lang:e,baseName:n}=oe(),r=e==="en"?["Find","movie...","tv show..."]:["Найти","фильм...","сериал..."],s=th(),[i,o]=E.useState(""),a=()=>{i&&(s(`${n}search/${i}`),o(""))};return p.jsx("div",{className:"search-box-container",children:p.jsxs("form",{className:"search-box-form",onSubmit:l=>{l.preventDefault(),a()},children:[p.jsx("button",{className:"search-button",children:p.jsx(qO,{})}),p.jsx("input",{type:"text",className:"search-box-input",placeholder:`${r[0]} ${t==="movie"?r[1]:r[2]}`,value:i,onChange:l=>o(l.target.value)})]})})},QO=()=>localStorage.getItem("theme")||"dark",zx=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Hh=E.createContext({}),Wh=E.createContext(null),Kh=typeof document<"u",Ua=Kh?E.useLayoutEffect:E.useEffect,Hx=E.createContext({strict:!1});function YO(t,e,n,r){const{visualElement:s}=E.useContext(Hh),i=E.useContext(Hx),o=E.useContext(Wh),a=E.useContext(zx).reducedMotion,l=E.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;return E.useInsertionEffect(()=>{u&&u.update(n,o)}),Ua(()=>{u&&u.render()}),E.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?Ua:E.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}function hi(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function XO(t,e,n){return E.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):hi(n)&&(n.current=r))},[e])}function Va(t){return typeof t=="string"||Array.isArray(t)}function qh(t){return typeof t=="object"&&typeof t.start=="function"}const F1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],U1=["initial",...F1];function Gh(t){return qh(t.animate)||U1.some(e=>Va(t[e]))}function Wx(t){return!!(Gh(t)||t.variants)}function JO(t,e){if(Gh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Va(n)?n:void 0,animate:Va(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZO(t){const{initial:e,animate:n}=JO(t,E.useContext(Hh));return E.useMemo(()=>({initial:e,animate:n}),[hw(e),hw(n)])}function hw(t){return Array.isArray(t)?t.join(" "):t}const dw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ba={};for(const t in dw)Ba[t]={isEnabled:e=>dw[t].some(n=>!!e[n])};function eM(t){for(const e in t)Ba[e]={...Ba[e],...t[e]}}const V1=E.createContext({}),Kx=E.createContext({}),tM=Symbol.for("motionComponentSymbol");function nM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&eM(t);function i(a,l){let u;const c={...E.useContext(zx),...a,layoutId:rM(a)},{isStatic:h}=c,d=ZO(a),f=r(a,h);if(!h&&Kh){d.visualElement=YO(s,f,c,e);const g=E.useContext(Kx),w=E.useContext(Hx).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,w,t,g))}return E.createElement(Hh.Provider,{value:d},u&&d.visualElement?E.createElement(u,{visualElement:d.visualElement,...c}):null,n(s,a,XO(f,d.visualElement,l),f,h,d.visualElement))}const o=E.forwardRef(i);return o[tM]=s,o}function rM({layoutId:t}){const e=E.useContext(V1).id;return e&&t!==void 0?e+"-"+t:t}function sM(t){function e(r,s={}){return nM(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const iM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function B1(t){return typeof t!="string"||t.includes("-")?!1:!!(iM.indexOf(t)>-1||/[A-Z]/.test(t))}const Rc={};function oM(t){Object.assign(Rc,t)}const Sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hs=new Set(Sl);function qx(t,{layout:e,layoutId:n}){return Hs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Rc[t]||t==="opacity")}const It=t=>!!(t&&t.getVelocity),aM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lM=Sl.length;function uM(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<lM;o++){const a=Sl[o];if(t[a]!==void 0){const l=aM[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const Gx=t=>e=>typeof e=="string"&&e.startsWith(t),Qx=Gx("--"),tm=Gx("var(--"),cM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,hM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Br=(t,e,n)=>Math.min(Math.max(n,t),e),Ws={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Zo={...Ws,transform:t=>Br(0,1,t)},ru={...Ws,default:1},ea=t=>Math.round(t*1e5)/1e5,Qh=/(-)?([\d]*\.?[\d])+/g,Yx=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,dM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Tl(t){return typeof t=="string"}const _l=t=>({test:e=>Tl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ar=_l("deg"),In=_l("%"),U=_l("px"),fM=_l("vh"),pM=_l("vw"),fw={...In,parse:t=>In.parse(t)/100,transform:t=>In.transform(t*100)},pw={...Ws,transform:Math.round},Xx={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,size:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,rotate:ar,rotateX:ar,rotateY:ar,rotateZ:ar,scale:ru,scaleX:ru,scaleY:ru,scaleZ:ru,skew:ar,skewX:ar,skewY:ar,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:Zo,originX:fw,originY:fw,originZ:U,zIndex:pw,fillOpacity:Zo,strokeOpacity:Zo,numOctaves:pw};function z1(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,u=!1,c=!0;for(const h in e){const d=e[h];if(Qx(h)){i[h]=d;continue}const f=Xx[h],g=hM(d,f);if(Hs.has(h)){if(l=!0,o[h]=g,!c)continue;d!==(f.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,a[h]=g):s[h]=g}if(e.transform||(l||r?s.transform=uM(t.transform,n,c,r):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:d="50%",originZ:f=0}=a;s.transformOrigin=`${h} ${d} ${f}`}}const H1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jx(t,e,n){for(const r in e)!It(e[r])&&!qx(r,n)&&(t[r]=e[r])}function mM({transformTemplate:t},e,n){return E.useMemo(()=>{const r=H1();return z1(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function gM(t,e,n){const r=t.style||{},s={};return Jx(s,r,t),Object.assign(s,mM(t,e,n)),t.transformValues?t.transformValues(s):s}function yM(t,e,n){const r={},s=gM(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const vM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Ac(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||vM.has(t)}let Zx=t=>!Ac(t);function wM(t){t&&(Zx=e=>e.startsWith("on")?!Ac(e):t(e))}try{wM(require("@emotion/is-prop-valid").default)}catch{}function EM(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Zx(s)||n===!0&&Ac(s)||!e&&!Ac(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function mw(t,e,n){return typeof t=="string"?t:U.transform(e+n*t)}function CM(t,e,n){const r=mw(e,t.x,t.width),s=mw(n,t.y,t.height);return`${r} ${s}`}const SM={offset:"stroke-dashoffset",array:"stroke-dasharray"},TM={offset:"strokeDashoffset",array:"strokeDasharray"};function _M(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?SM:TM;t[i.offset]=U.transform(-r);const o=U.transform(e),a=U.transform(n);t[i.array]=`${o} ${a}`}function W1(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h,d){if(z1(t,u,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:w}=t;f.transform&&(w&&(g.transform=f.transform),delete f.transform),w&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=CM(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&_M(f,o,a,l,!1)}const e4=()=>({...H1(),attrs:{}}),K1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xM(t,e,n,r){const s=E.useMemo(()=>{const i=e4();return W1(i,e,{enableHardwareAcceleration:!1},K1(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Jx(i,t.style,t),s.style={...i,...s.style}}return s}function IM(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(B1(n)?xM:yM)(r,i,o,n),c={...EM(r,typeof n=="string",t),...l,ref:s},{children:h}=r,d=E.useMemo(()=>It(h)?h.get():h,[h]);return E.createElement(n,{...c,children:d})}}const q1=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function t4(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const n4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function r4(t,e,n,r){t4(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(n4.has(s)?s:q1(s),e.attrs[s])}function G1(t,e){const{style:n}=t,r={};for(const s in n)(It(n[s])||e.style&&It(e.style[s])||qx(s,t))&&(r[s]=n[s]);return r}function s4(t,e){const n=G1(t,e);for(const r in t)if(It(t[r])||It(e[r])){const s=Sl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Q1(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function Y1(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pc=t=>Array.isArray(t),kM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),RM=t=>Pc(t)?t[t.length-1]||0:t;function Pu(t){const e=It(t)?t.get():t;return kM(e)?e.toValue():e}function AM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:PM(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const i4=t=>(e,n)=>{const r=E.useContext(Hh),s=E.useContext(Wh),i=()=>AM(t,e,r,s);return n?i():Y1(i)};function PM(t,e,n,r){const s={},i=r(t,{});for(const d in i)s[d]=Pu(i[d]);let{initial:o,animate:a}=t;const l=Gh(t),u=Wx(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;return h&&typeof h!="boolean"&&!qh(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const g=Q1(t,f);if(!g)return;const{transitionEnd:w,transition:S,...v}=g;for(const m in v){let y=v[m];if(Array.isArray(y)){const C=c?y.length-1:0;y=y[C]}y!==null&&(s[m]=y)}for(const m in w)s[m]=w[m]}),s}const NM={useVisualState:i4({scrapeMotionValuesFromProps:s4,createRenderState:e4,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}W1(n,r,{enableHardwareAcceleration:!1},K1(e.tagName),t.transformTemplate),r4(e,n)}})},DM={useVisualState:i4({scrapeMotionValuesFromProps:G1,createRenderState:H1})};function LM(t,{forwardMotionProps:e=!1},n,r){return{...B1(t)?NM:DM,preloadedFeatures:n,useRender:IM(e),createVisualElement:r,Component:t}}function Bn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const o4=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Yh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const OM=t=>e=>o4(e)&&t(e,Yh(e));function Wn(t,e,n,r){return Bn(t,e,OM(n),r)}const MM=(t,e)=>n=>e(t(n)),Or=(...t)=>t.reduce(MM);function a4(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const gw=a4("dragHorizontal"),yw=a4("dragVertical");function l4(t){let e=!1;if(t==="y")e=yw();else if(t==="x")e=gw();else{const n=gw(),r=yw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function u4(){const t=l4(!0);return t?(t(),!1):!0}class Jr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function bM(t){let e=[],n=[],r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const h=c&&s,d=h?e:n;return u&&o.add(l),d.indexOf(l)===-1&&(d.push(l),h&&s&&(r=e.length)),l},cancel:l=>{const u=n.indexOf(l);u!==-1&&n.splice(u,1),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let u=0;u<r;u++){const c=e[u];c(l),o.has(c)&&(a.schedule(c),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const me={delta:0,timestamp:0,isProcessing:!1},$M=40;let nm=!0,za=!1;const Xh=["read","update","preRender","render","postRender"],ki=Xh.reduce((t,e)=>(t[e]=bM(()=>za=!0),t),{}),jM=t=>ki[t].process(me),c4=t=>{za=!1,me.delta=nm?1e3/60:Math.max(Math.min(t-me.timestamp,$M),1),me.timestamp=t,me.isProcessing=!0,Xh.forEach(jM),me.isProcessing=!1,za&&(nm=!1,requestAnimationFrame(c4))},FM=()=>{za=!0,nm=!0,me.isProcessing||requestAnimationFrame(c4)},de=Xh.reduce((t,e)=>{const n=ki[e];return t[e]=(r,s=!1,i=!1)=>(za||FM(),n.schedule(r,s,i)),t},{});function nr(t){Xh.forEach(e=>ki[e].cancel(t))}function vw(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.type==="touch"||u4())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&de.update(()=>a[r](i,o))};return Wn(t.current,n,s,{passive:!t.getProps()[r]})}class UM extends Jr{mount(){this.unmount=Or(vw(this.node,!0),vw(this.node,!1))}unmount(){}}class VM extends Jr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Or(Bn(this.node.current,"focus",()=>this.onFocus()),Bn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const h4=(t,e)=>e?t===e?!0:h4(t,e.parentElement):!1,$e=t=>t;function sf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Yh(n))}class BM extends Jr{constructor(){super(...arguments),this.removeStartListeners=$e,this.removeEndListeners=$e,this.removeAccessibleListeners=$e,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),i=Wn(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c}=this.node.getProps();de.update(()=>{h4(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Wn(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Or(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||sf("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&de.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Bn(this.node.current,"keyup",o),sf("down",(a,l)=>{this.startPress(a,l)})},n=Bn(this.node.current,"keydown",e),r=()=>{this.isPressing&&sf("cancel",(i,o)=>this.cancelPress(i,o))},s=Bn(this.node.current,"blur",r);this.removeAccessibleListeners=Or(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&de.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!u4()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&de.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Wn(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Bn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Or(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const rm=new WeakMap,of=new WeakMap,zM=t=>{const e=rm.get(t.target);e&&e(t)},HM=t=>{t.forEach(zM)};function WM({root:t,...e}){const n=t||document;of.has(n)||of.set(n,{});const r=of.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(HM,{root:t,...e})),r[s]}function KM(t,e,n){const r=WM(e);return rm.set(t,n),r.observe(t),()=>{rm.delete(t),r.unobserve(t)}}const qM={some:0,all:1};class GM extends Jr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:qM[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return KM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(QM(e,n))&&this.startObserver()}unmount(){}}function QM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const YM={inView:{Feature:GM},tap:{Feature:BM},focus:{Feature:VM},hover:{Feature:UM}};function d4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function XM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function JM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Jh(t,e,n){const r=t.getProps();return Q1(r,e,n!==void 0?n:r.custom,XM(t),JM(t))}const ZM="framerAppearId",eb="data-"+q1(ZM);let tb=$e,X1=$e;const Mr=t=>t*1e3,Kn=t=>t/1e3,nb={current:!1},f4=t=>Array.isArray(t)&&typeof t[0]=="number";function p4(t){return!!(!t||typeof t=="string"&&m4[t]||f4(t)||Array.isArray(t)&&t.every(p4))}const bo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,m4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bo([0,.65,.55,1]),circOut:bo([.55,0,1,.45]),backIn:bo([.31,.01,.66,-.59]),backOut:bo([.33,1.53,.69,.99])};function g4(t){if(t)return f4(t)?bo(t):Array.isArray(t)?t.map(g4):m4[t]}function rb(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=g4(a);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:s,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const ww={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},af={},y4={};for(const t in ww)y4[t]=()=>(af[t]===void 0&&(af[t]=ww[t]()),af[t]);function sb(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const v4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ib=1e-7,ob=12;function ab(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=v4(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>ib&&++a<ob);return o}function xl(t,e,n,r){if(t===e&&n===r)return $e;const s=i=>ab(i,0,1,t,n);return i=>i===0||i===1?i:v4(s(i),e,r)}const lb=xl(.42,0,1,1),ub=xl(0,0,.58,1),w4=xl(.42,0,.58,1),cb=t=>Array.isArray(t)&&typeof t[0]!="number",E4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,C4=t=>e=>1-t(1-e),S4=t=>1-Math.sin(Math.acos(t)),J1=C4(S4),hb=E4(J1),T4=xl(.33,1.53,.69,.99),Z1=C4(T4),db=E4(Z1),fb=t=>(t*=2)<1?.5*Z1(t):.5*(2-Math.pow(2,-10*(t-1))),pb={linear:$e,easeIn:lb,easeInOut:w4,easeOut:ub,circIn:S4,circInOut:hb,circOut:J1,backIn:Z1,backInOut:db,backOut:T4,anticipate:fb},Ew=t=>{if(Array.isArray(t)){X1(t.length===4);const[e,n,r,s]=t;return xl(e,n,r,s)}else if(typeof t=="string")return pb[t];return t},e0=(t,e)=>n=>!!(Tl(n)&&dM.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),_4=(t,e,n)=>r=>{if(!Tl(r))return r;const[s,i,o,a]=r.match(Qh);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},mb=t=>Br(0,255,t),lf={...Ws,transform:t=>Math.round(mb(t))},ms={test:e0("rgb","red"),parse:_4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lf.transform(t)+", "+lf.transform(e)+", "+lf.transform(n)+", "+ea(Zo.transform(r))+")"};function gb(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const sm={test:e0("#"),parse:gb,transform:ms.transform},di={test:e0("hsl","hue"),parse:_4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+In.transform(ea(e))+", "+In.transform(ea(n))+", "+ea(Zo.transform(r))+")"},dt={test:t=>ms.test(t)||sm.test(t)||di.test(t),parse:t=>ms.test(t)?ms.parse(t):di.test(t)?di.parse(t):sm.parse(t),transform:t=>Tl(t)?t:t.hasOwnProperty("red")?ms.transform(t):di.transform(t)},ye=(t,e,n)=>-n*t+n*e+t;function uf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yb({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=uf(l,a,t+1/3),i=uf(l,a,t),o=uf(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const cf=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},vb=[sm,ms,di],wb=t=>vb.find(e=>e.test(t));function Cw(t){const e=wb(t);let n=e.parse(t);return e===di&&(n=yb(n)),n}const x4=(t,e)=>{const n=Cw(t),r=Cw(e),s={...n};return i=>(s.red=cf(n.red,r.red,i),s.green=cf(n.green,r.green,i),s.blue=cf(n.blue,r.blue,i),s.alpha=ye(n.alpha,r.alpha,i),ms.transform(s))};function Eb(t){var e,n;return isNaN(t)&&Tl(t)&&(((e=t.match(Qh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Yx))===null||n===void 0?void 0:n.length)||0)>0}const I4={regex:cM,countKey:"Vars",token:"${v}",parse:$e},k4={regex:Yx,countKey:"Colors",token:"${c}",parse:dt.parse},R4={regex:Qh,countKey:"Numbers",token:"${n}",parse:Ws.parse};function hf(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Nc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&hf(n,I4),hf(n,k4),hf(n,R4),n}function A4(t){return Nc(t).values}function P4(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Nc(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(I4.token,o[l]):l<r+n?a=a.replace(k4.token,dt.transform(o[l])):a=a.replace(R4.token,ea(o[l]));return a}}const Cb=t=>typeof t=="number"?0:t;function Sb(t){const e=A4(t);return P4(t)(e.map(Cb))}const zr={test:Eb,parse:A4,createTransformer:P4,getAnimatableNone:Sb},N4=(t,e)=>n=>`${n>0?e:t}`;function D4(t,e){return typeof t=="number"?n=>ye(t,e,n):dt.test(t)?x4(t,e):t.startsWith("var(")?N4(t,e):O4(t,e)}const L4=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>D4(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},Tb=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=D4(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},O4=(t,e)=>{const n=zr.createTransformer(e),r=Nc(t),s=Nc(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Or(L4(r.values,s.values),n):N4(t,e)},Ha=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Sw=(t,e)=>n=>ye(t,e,n);function _b(t){return typeof t=="number"?Sw:typeof t=="string"?dt.test(t)?x4:O4:Array.isArray(t)?L4:typeof t=="object"?Tb:Sw}function xb(t,e,n){const r=[],s=n||_b(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||$e:e;a=Or(l,a)}r.push(a)}return r}function M4(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(X1(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=xb(e,r,s),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const h=Ha(t[c],t[c+1],u);return o[c](h)};return n?u=>l(Br(t[0],t[i-1],u)):l}function Ib(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ha(0,e,r);t.push(ye(n,1,s))}}function kb(t){const e=[0];return Ib(e,t.length-1),e}function Rb(t,e){return t.map(n=>n*e)}function Ab(t,e){return t.map(()=>e||w4).splice(0,t.length-1)}function Dc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=cb(r)?r.map(Ew):Ew(r),i={done:!1,value:e[0]},o=Rb(n&&n.length===e.length?n:kb(e),t),a=M4(o,e,{ease:Array.isArray(s)?s:Ab(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function b4(t,e){return e?t*(1e3/e):0}const Pb=5;function $4(t,e,n){const r=Math.max(e-Pb,0);return b4(n-t(r),e-r)}const df=.001,Nb=.01,Tw=10,Db=.05,Lb=1;function Ob({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;tb(t<=Mr(Tw));let o=1-e;o=Br(Db,Lb,o),t=Br(Nb,Tw,Kn(t)),o<1?(s=u=>{const c=u*o,h=c*t,d=c-n,f=im(u,o),g=Math.exp(-h);return df-d/f*g},i=u=>{const h=u*o*t,d=h*n+n,f=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-h),w=im(Math.pow(u,2),o);return(-s(u)+df>0?-1:1)*((d-f)*g)/w}):(s=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-df+c*h},i=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=bb(s,i,a);if(t=Mr(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const Mb=12;function bb(t,e,n){let r=n;for(let s=1;s<Mb;s++)r=r-t(r)/e(r);return r}function im(t,e){return t*Math.sqrt(1-e*e)}const $b=["duration","bounce"],jb=["stiffness","damping","mass"];function _w(t,e){return e.some(n=>t[n]!==void 0)}function Fb(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!_w(t,jb)&&_w(t,$b)){const n=Ob(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function j4({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,velocity:c,duration:h,isResolvedFromDuration:d}=Fb(r),f=c?-Kn(c):0,g=l/(2*Math.sqrt(a*u)),w=i-s,S=Kn(Math.sqrt(a/u)),v=Math.abs(w)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let m;if(g<1){const y=im(S,g);m=C=>{const T=Math.exp(-g*S*C);return i-T*((f+g*S*w)/y*Math.sin(y*C)+w*Math.cos(y*C))}}else if(g===1)m=y=>i-Math.exp(-S*y)*(w+(f+S*w)*y);else{const y=S*Math.sqrt(g*g-1);m=C=>{const T=Math.exp(-g*S*C),k=Math.min(y*C,300);return i-T*((f+g*S*w)*Math.sinh(k)+y*w*Math.cosh(k))/y}}return{calculatedDuration:d&&h||null,next:y=>{const C=m(y);if(d)o.done=y>=h;else{let T=f;y!==0&&(g<1?T=$4(m,y,C):T=0);const k=Math.abs(T)<=n,I=Math.abs(i-C)<=e;o.done=k&&I}return o.value=o.done?i:C,o}}}function xw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],d={done:!1,value:h},f=x=>a!==void 0&&x<a||l!==void 0&&x>l,g=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let w=n*e;const S=h+w,v=o===void 0?S:o(S);v!==S&&(w=v-h);const m=x=>-w*Math.exp(-x/r),y=x=>v+m(x),C=x=>{const M=m(x),j=y(x);d.done=Math.abs(M)<=u,d.value=d.done?v:j};let T,k;const I=x=>{f(d.value)&&(T=x,k=j4({keyframes:[d.value,g(d.value)],velocity:$4(y,x,d.value),damping:s,stiffness:i,restDelta:u,restSpeed:c}))};return I(0),{calculatedDuration:null,next:x=>{let M=!1;return!k&&T===void 0&&(M=!0,C(x),I(x)),T!==void 0&&x>T?k.next(x-T):(!M&&C(x),d)}}}const Ub=t=>{const e=({timestamp:n})=>t(n);return{start:()=>de.update(e,!0),stop:()=>nr(e),now:()=>me.isProcessing?me.timestamp:performance.now()}},Iw=2e4;function kw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Iw;)e+=n,r=t.next(e);return e>=Iw?1/0:e}const Vb={decay:xw,inertia:xw,tween:Dc,keyframes:Dc,spring:j4};function Lc({autoplay:t=!0,delay:e=0,driver:n=Ub,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:h,...d}){let f=1,g=!1,w,S;const v=()=>{w&&w(),S=new Promise(W=>{w=W})};v();let m;const y=Vb[s]||Dc;let C;y!==Dc&&typeof r[0]!="number"&&(C=M4([0,100],r,{clamp:!1}),r=[0,100]);const T=y({...d,keyframes:r});let k;a==="mirror"&&(k=y({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let I="idle",x=null,M=null,j=null;T.calculatedDuration===null&&i&&(T.calculatedDuration=kw(T));const{calculatedDuration:fe}=T;let vt=1/0,jt=1/0;fe!==null&&(vt=fe+o,jt=vt*(i+1)-o);let ke=0;const Re=W=>{if(M===null)return;f>0&&(M=Math.min(M,W)),x!==null?ke=x:ke=(W-M)*f;const pe=ke-e,Zr=pe<0;ke=Math.max(pe,0),I==="finished"&&x===null&&(ke=jt);let un=ke,Ks=T;if(i){const rd=ke/vt;let kl=Math.floor(rd),ts=rd%1;!ts&&rd>=1&&(ts=1),ts===1&&kl--,kl=Math.min(kl,i+1);const l0=!!(kl%2);l0&&(a==="reverse"?(ts=1-ts,o&&(ts-=o/vt)):a==="mirror"&&(Ks=k));let u0=Br(0,1,ts);ke>jt&&(u0=a==="reverse"&&l0?1:0),un=u0*vt}const kt=Zr?{done:!1,value:r[0]}:Ks.next(un);C&&(kt.value=C(kt.value));let{done:es}=kt;!Zr&&fe!==null&&(es=ke>=jt);const _3=x===null&&(I==="finished"||I==="running"&&es||f<0&&ke<=0);return h&&h(kt.value),_3&&D(),kt},Ft=()=>{m&&m.stop(),m=void 0},ln=()=>{I="idle",Ft(),v(),M=j=null},D=()=>{I="finished",c&&c(),Ft(),v()},H=()=>{if(g)return;m||(m=n(Re));const W=m.now();l&&l(),x!==null?M=W-x:(!M||I==="finished")&&(M=W),j=M,x=null,I="running",m.start()};t&&H();const G={then(W,pe){return S.then(W,pe)},get time(){return Kn(ke)},set time(W){W=Mr(W),ke=W,x!==null||!m||f===0?x=W:M=m.now()-W/f},get duration(){const W=T.calculatedDuration===null?kw(T):T.calculatedDuration;return Kn(W)},get speed(){return f},set speed(W){W===f||!m||(f=W,G.time=Kn(ke))},get state(){return I},play:H,pause:()=>{I="paused",x=ke},stop:()=>{g=!0,I!=="idle"&&(I="idle",u&&u(),ln())},cancel:()=>{j!==null&&Re(j),ln()},complete:()=>{I="finished"},sample:W=>(M=0,Re(W))};return G}const Bb=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),su=10,zb=2e4,Hb=(t,e)=>e.type==="spring"||t==="backgroundColor"||!p4(e.ease);function Wb(t,e,{onUpdate:n,onComplete:r,...s}){if(!(y4.waapi()&&Bb.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l;const u=()=>{l=new Promise(v=>{a=v})};u();let{keyframes:c,duration:h=300,ease:d,times:f}=s;if(Hb(e,s)){const v=Lc({...s,repeat:0,delay:0});let m={done:!1,value:c[0]};const y=[];let C=0;for(;!m.done&&C<zb;)m=v.sample(C),y.push(m.value),C+=su;f=void 0,c=y,h=C-su,d="linear"}const g=rb(t.owner.current,e,c,{...s,duration:h,ease:d,times:f}),w=()=>g.cancel(),S=()=>{de.update(w),a(),u()};return g.onfinish=()=>{t.set(sb(c,s)),r&&r(),S()},{then(v,m){return l.then(v,m)},get time(){return Kn(g.currentTime||0)},set time(v){g.currentTime=Mr(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return Kn(h)},play:()=>{o||(g.play(),nr(w))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const m=Lc({...s,autoplay:!1});t.setWithVelocity(m.sample(v-su).value,m.sample(v).value,su)}S()},complete:()=>g.finish(),cancel:S}}function Kb({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:$e,pause:$e,stop:$e,then:i=>(i(),Promise.resolve()),cancel:$e,complete:$e});return e?Lc({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const qb={type:"spring",stiffness:500,damping:25,restSpeed:10},Gb=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Qb={type:"keyframes",duration:.8},Yb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Xb=(t,{keyframes:e})=>e.length>2?Qb:Hs.has(t)?t.startsWith("scale")?Gb(e[1]):qb:Yb,om=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zr.test(e)||e==="0")&&!e.startsWith("url(")),Jb=new Set(["brightness","contrast","saturate","opacity"]);function Zb(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Qh)||[];if(!r)return t;const s=n.replace(r,"");let i=Jb.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const e$=/([a-z-]*)\(.*?\)/g,am={...zr,getAnimatableNone:t=>{const e=t.match(e$);return e?e.map(Zb).join(" "):t}},t$={...Xx,color:dt,backgroundColor:dt,outlineColor:dt,fill:dt,stroke:dt,borderColor:dt,borderTopColor:dt,borderRightColor:dt,borderBottomColor:dt,borderLeftColor:dt,filter:am,WebkitFilter:am},t0=t=>t$[t];function F4(t,e){let n=t0(t);return n!==am&&(n=zr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const U4=t=>/^0[^.\s]+$/.test(t);function n$(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||U4(t)}function r$(t,e,n,r){const s=om(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),n$(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];i[c]=F4(e,a)}return i}function s$({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function V4(t,e){return t[e]||t.default||t}const n0=(t,e,n,r={})=>s=>{const i=V4(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Mr(o);const l=r$(e,t,n,i),u=l[0],c=l[l.length-1],h=om(t,u),d=om(t,c);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{e.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(s$(i)||(f={...f,...Xb(t,f)}),f.duration&&(f.duration=Mr(f.duration)),f.repeatDelay&&(f.repeatDelay=Mr(f.repeatDelay)),!h||!d||nb.current||i.type===!1)return Kb(f);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=Wb(e,t,f);if(g)return g}return Lc(f)};function Oc(t){return!!(It(t)&&t.add)}const i$=t=>/^\-?\d*\.?\d+$/.test(t);function r0(t,e){t.indexOf(e)===-1&&t.push(e)}function s0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class i0{constructor(){this.subscriptions=[]}add(e){return r0(this.subscriptions,e),()=>s0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const o$=t=>!isNaN(parseFloat(t));class a${constructor(e,n={}){this.version="10.12.16",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=me;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,de.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>de.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=o$(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new i0);const r=this.events[e].add(n);return e==="change"?()=>{r(),de.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?b4(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qi(t,e){return new a$(t,e)}const B4=t=>e=>e.test(t),l$={test:t=>t==="auto",parse:t=>t},z4=[Ws,U,In,ar,pM,fM,l$],To=t=>z4.find(B4(t)),u$=[...z4,dt,zr],c$=t=>u$.find(B4(t));function h$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qi(n))}function o0(t,e){const n=Jh(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=RM(i[o]);h$(t,o,a)}}function lm(t,e){[...e].reverse().forEach(r=>{const s=t.getVariant(r);s&&o0(t,s),t.variantChildren&&t.variantChildren.forEach(i=>{lm(i,e)})})}function d$(t,e){if(Array.isArray(e))return lm(t,e);if(typeof e=="string")return lm(t,[e]);o0(t,e)}function f$(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),c!=null&&(typeof c=="string"&&(i$(c)||U4(c))?c=parseFloat(c):!c$(c)&&zr.test(u)&&(c=F4(l,u)),t.addValue(l,qi(c,{owner:t})),n[l]===void 0&&(n[l]=c),c!==null&&t.setBaseTarget(l,c))}}function p$(t,e){return e?(e[t]||e.default||e).from:void 0}function m$(t,e,n){const r={};for(const s in t){const i=p$(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function g$({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function H4(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const u=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const d=t.getValue(h),f=a[h];if(!d||f===void 0||c&&g$(c,h))continue;const g={delay:n,elapsed:0,...i};if(window.HandoffAppearAnimations&&!d.hasAnimated){const S=t.getProps()[eb];S&&(g.elapsed=window.HandoffAppearAnimations(S,h,d,de))}d.start(n0(h,d,f,t.shouldReduceMotion&&Hs.has(h)?{type:!1}:g));const w=d.animation;Oc(l)&&(l.add(h),w.then(()=>l.remove(h))),u.push(w)}return o&&Promise.all(u).then(()=>{o&&o0(t,o)}),u}function um(t,e,n={}){const r=Jh(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(H4(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:h}=s;return y$(t,e,u+l,c,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function y$(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(v$).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(um(u,e,{...i,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function v$(t,e){return t.sortNodePosition(e)}function W4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>um(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=um(t,e,n);else{const s=typeof e=="function"?Jh(t,e,n.custom):e;r=Promise.all(H4(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const w$=[...F1].reverse(),E$=F1.length;function C$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>W4(t,n,r)))}function S$(t){let e=C$(t);const n=_$();let r=!0;const s=(l,u)=>{const c=Jh(t,u);if(c){const{transition:h,transitionEnd:d,...f}=c;l={...l,...f,...d}}return l};function i(l){e=l(t)}function o(l,u){const c=t.getProps(),h=t.getVariantContext(!0)||{},d=[],f=new Set;let g={},w=1/0;for(let v=0;v<E$;v++){const m=w$[v],y=n[m],C=c[m]!==void 0?c[m]:h[m],T=Va(C),k=m===u?y.isActive:null;k===!1&&(w=v);let I=C===h[m]&&C!==c[m]&&T;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),y.protectedKeys={...g},!y.isActive&&k===null||!C&&!y.prevProp||qh(C)||typeof C=="boolean")continue;const x=T$(y.prevProp,C);let M=x||m===u&&y.isActive&&!I&&T||v>w&&T;const j=Array.isArray(C)?C:[C];let fe=j.reduce(s,{});k===!1&&(fe={});const{prevResolvedValues:vt={}}=y,jt={...vt,...fe},ke=Re=>{M=!0,f.delete(Re),y.needsAnimating[Re]=!0};for(const Re in jt){const Ft=fe[Re],ln=vt[Re];g.hasOwnProperty(Re)||(Ft!==ln?Pc(Ft)&&Pc(ln)?!d4(Ft,ln)||x?ke(Re):y.protectedKeys[Re]=!0:Ft!==void 0?ke(Re):f.add(Re):Ft!==void 0&&f.has(Re)?ke(Re):y.protectedKeys[Re]=!0)}y.prevProp=C,y.prevResolvedValues=fe,y.isActive&&(g={...g,...fe}),r&&t.blockInitialAnimation&&(M=!1),M&&!I&&d.push(...j.map(Re=>({animation:Re,options:{type:m,...l}})))}if(f.size){const v={};f.forEach(m=>{const y=t.getBaseTarget(m);y!==void 0&&(v[m]=y)}),d.push({animation:v})}let S=!!d.length;return r&&c.initial===!1&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,u,c){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=o(c,l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function T$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!d4(e,t):!1}function ns(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _$(){return{animate:ns(!0),whileInView:ns(),whileHover:ns(),whileTap:ns(),whileDrag:ns(),whileFocus:ns(),exit:ns()}}class x$ extends Jr{constructor(e){super(e),e.animationState||(e.animationState=S$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),qh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let I$=0;class k$ extends Jr{constructor(){super(...arguments),this.id=I$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const R$={animation:{Feature:x$},exit:{Feature:k$}},Rw=(t,e)=>Math.abs(t-e);function A$(t,e){const n=Rw(t.x,e.x),r=Rw(t.y,e.y);return Math.sqrt(n**2+r**2)}class K4{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=pf(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,h=A$(u.offset,{x:0,y:0})>=3;if(!c&&!h)return;const{point:d}=u,{timestamp:f}=me;this.history.push({...d,timestamp:f});const{onStart:g,onMove:w}=this.handlers;c||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,u)},this.handlePointerMove=(u,c)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=ff(c,this.transformPagePoint),de.update(this.updatePoint,!0)},this.handlePointerUp=(u,c)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:h,onSessionEnd:d}=this.handlers,f=pf(u.type==="pointercancel"?this.lastMoveEventInfo:ff(c,this.transformPagePoint),this.history);this.startEvent&&h&&h(u,f),d&&d(u,f)},!o4(e))return;this.handlers=n,this.transformPagePoint=r;const s=Yh(e),i=ff(s,this.transformPagePoint),{point:o}=i,{timestamp:a}=me;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,pf(i,this.history)),this.removeListeners=Or(Wn(window,"pointermove",this.handlePointerMove),Wn(window,"pointerup",this.handlePointerUp),Wn(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nr(this.updatePoint)}}function ff(t,e){return e?{point:e(t.point)}:t}function Aw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function pf({point:t},e){return{point:t,delta:Aw(t,q4(e)),offset:Aw(t,P$(e)),velocity:N$(e,.1)}}function P$(t){return t[0]}function q4(t){return t[t.length-1]}function N$(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=q4(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Mr(e)));)n--;if(!r)return{x:0,y:0};const i=Kn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Mt(t){return t.max-t.min}function cm(t,e=0,n=.01){return Math.abs(t-e)<=n}function Pw(t,e,n,r=.5){t.origin=r,t.originPoint=ye(e.min,e.max,t.origin),t.scale=Mt(n)/Mt(e),(cm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(cm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ta(t,e,n,r){Pw(t.x,e.x,n.x,r?r.originX:void 0),Pw(t.y,e.y,n.y,r?r.originY:void 0)}function Nw(t,e,n){t.min=n.min+e.min,t.max=t.min+Mt(e)}function D$(t,e,n){Nw(t.x,e.x,n.x),Nw(t.y,e.y,n.y)}function Dw(t,e,n){t.min=e.min-n.min,t.max=t.min+Mt(e)}function na(t,e,n){Dw(t.x,e.x,n.x),Dw(t.y,e.y,n.y)}function L$(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ye(n,t,r.max):Math.min(t,n)),t}function Lw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O$(t,{top:e,left:n,bottom:r,right:s}){return{x:Lw(t.x,n,s),y:Lw(t.y,e,r)}}function Ow(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function M$(t,e){return{x:Ow(t.x,e.x),y:Ow(t.y,e.y)}}function b$(t,e){let n=.5;const r=Mt(t),s=Mt(e);return s>r?n=Ha(e.min,e.max-r,t.min):r>s&&(n=Ha(t.min,t.max-s,e.min)),Br(0,1,n)}function $$(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hm=.35;function j$(t=hm){return t===!1?t=0:t===!0&&(t=hm),{x:Mw(t,"left","right"),y:Mw(t,"top","bottom")}}function Mw(t,e,n){return{min:bw(t,e),max:bw(t,n)}}function bw(t,e){return typeof t=="number"?t:t[e]||0}const $w=()=>({translate:0,scale:1,origin:0,originPoint:0}),fi=()=>({x:$w(),y:$w()}),jw=()=>({min:0,max:0}),De=()=>({x:jw(),y:jw()});function dn(t){return[t("x"),t("y")]}function G4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function F$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function U$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mf(t){return t===void 0||t===1}function dm({scale:t,scaleX:e,scaleY:n}){return!mf(t)||!mf(e)||!mf(n)}function os(t){return dm(t)||Q4(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Q4(t){return Fw(t.x)||Fw(t.y)}function Fw(t){return t&&t!=="0%"}function Mc(t,e,n){const r=t-n,s=e*r;return n+s}function Uw(t,e,n,r,s){return s!==void 0&&(t=Mc(t,s,r)),Mc(t,n,r)+e}function fm(t,e=0,n=1,r,s){t.min=Uw(t.min,e,n,r,s),t.max=Uw(t.max,e,n,r,s)}function Y4(t,{x:e,y:n}){fm(t.x,e.translate,e.scale,e.originPoint),fm(t.y,n.translate,n.scale,n.originPoint)}function V$(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&pi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Y4(t,o)),r&&os(i.latestValues)&&pi(t,i.latestValues))}e.x=Vw(e.x),e.y=Vw(e.y)}function Vw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function cr(t,e){t.min=t.min+e,t.max=t.max+e}function Bw(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ye(t.min,t.max,i);fm(t,e[n],e[r],o,e.scale)}const B$=["x","scaleX","originX"],z$=["y","scaleY","originY"];function pi(t,e){Bw(t.x,e,B$),Bw(t.y,e,z$)}function X4(t,e){return G4(U$(t.getBoundingClientRect(),e))}function H$(t,e,n){const r=X4(t,n),{scroll:s}=e;return s&&(cr(r.x,s.offset.x),cr(r.y,s.offset.y)),r}const W$=new WeakMap;class K${constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=l=>{this.stopAnimation(),n&&this.snapToCursor(Yh(l,"page").point)},i=(l,u)=>{const{drag:c,dragPropagation:h,onDragStart:d}=this.getProps();if(c&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=l4(c),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),dn(g=>{let w=this.getAxisMotionValue(g).get()||0;if(In.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const v=S.layout.layoutBox[g];v&&(w=Mt(v)*(parseFloat(w)/100))}}this.originPoint[g]=w}),d&&de.update(()=>d(l,u),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(l,u)=>{const{dragPropagation:c,dragDirectionLock:h,onDirectionLock:d,onDrag:f}=this.getProps();if(!c&&!this.openGlobalLock)return;const{offset:g}=u;if(h&&this.currentDirection===null){this.currentDirection=q$(g),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),f&&f(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new K4(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&de.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!iu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=L$(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},s=this.constraints;e&&hi(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=O$(r.layoutBox,e):this.constraints=!1,this.elastic=j$(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&dn(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=$$(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!hi(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=H$(r,s.root,this.visualElement.getTransformPagePoint());let o=M$(s.layout.layoutBox,i);if(n){const a=n(F$(o));this.hasMutatedConstraints=!!a,a&&(o=G4(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=dn(c=>{if(!iu(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(n0(e,r,0,n))}stopAnimation(){dn(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){dn(n=>{const{drag:r}=this.getProps();if(!iu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!hi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};dn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=b$({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),dn(o=>{if(!iu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ye(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;W$.set(this.visualElement,this);const e=this.visualElement.current,n=Wn(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();hi(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Bn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(dn(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=hm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function iu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function q$(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class G$ extends Jr{constructor(e){super(e),this.removeGroupControls=$e,this.removeListeners=$e,this.controls=new K$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$e}unmount(){this.removeGroupControls(),this.removeListeners()}}const zw=t=>(e,n)=>{t&&de.update(()=>t(e,n))};class Q$ extends Jr{constructor(){super(...arguments),this.removePointerDownListener=$e}onPointerDown(e){this.session=new K4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:zw(e),onStart:zw(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&de.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Wn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Y$(){const t=E.useContext(Wh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=E.useId();return E.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Nu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Hw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _o={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(U.test(t))t=parseFloat(t);else return t;const n=Hw(t,e.target.x),r=Hw(t,e.target.y);return`${n}% ${r}%`}},X$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=zr.parse(t);if(s.length>5)return r;const i=zr.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=ye(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class J$ extends jc.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;oM(Z$),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Nu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||de.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function J4(t){const[e,n]=Y$(),r=E.useContext(V1);return jc.createElement(J$,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(Kx),isPresent:e,safeToRemove:n})}const Z$={borderRadius:{..._o,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_o,borderTopRightRadius:_o,borderBottomLeftRadius:_o,borderBottomRightRadius:_o,boxShadow:X$},Z4=["TopLeft","TopRight","BottomLeft","BottomRight"],ej=Z4.length,Ww=t=>typeof t=="string"?parseFloat(t):t,Kw=t=>typeof t=="number"||U.test(t);function tj(t,e,n,r,s,i){s?(t.opacity=ye(0,n.opacity!==void 0?n.opacity:1,nj(r)),t.opacityExit=ye(e.opacity!==void 0?e.opacity:1,0,rj(r))):i&&(t.opacity=ye(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<ej;o++){const a=`border${Z4[o]}Radius`;let l=qw(e,a),u=qw(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Kw(l)===Kw(u)?(t[a]=Math.max(ye(Ww(l),Ww(u),r),0),(In.test(u)||In.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,r))}function qw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const nj=e3(0,.5,J1),rj=e3(.5,.95,$e);function e3(t,e,n){return r=>r<t?0:r>e?1:n(Ha(t,e,r))}function Gw(t,e){t.min=e.min,t.max=e.max}function Ut(t,e){Gw(t.x,e.x),Gw(t.y,e.y)}function Qw(t,e,n,r,s){return t-=e,t=Mc(t,1/n,r),s!==void 0&&(t=Mc(t,1/s,r)),t}function sj(t,e=0,n=1,r=.5,s,i=t,o=t){if(In.test(e)&&(e=parseFloat(e),e=ye(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ye(i.min,i.max,r);t===i&&(a-=e),t.min=Qw(t.min,e,n,a,s),t.max=Qw(t.max,e,n,a,s)}function Yw(t,e,[n,r,s],i,o){sj(t,e[n],e[r],e[s],e.scale,i,o)}const ij=["x","scaleX","originX"],oj=["y","scaleY","originY"];function Xw(t,e,n,r){Yw(t.x,e,ij,n?n.x:void 0,r?r.x:void 0),Yw(t.y,e,oj,n?n.y:void 0,r?r.y:void 0)}function Jw(t){return t.translate===0&&t.scale===1}function t3(t){return Jw(t.x)&&Jw(t.y)}function pm(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Zw(t){return Mt(t.x)/Mt(t.y)}class aj{constructor(){this.members=[]}add(e){r0(this.members,e),e.scheduleRender()}remove(e){if(s0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function e2(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const lj=(t,e)=>t.depth-e.depth;class uj{constructor(){this.children=[],this.isDirty=!1}add(e){r0(this.children,e),this.isDirty=!0}remove(e){s0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lj),this.isDirty=!1,this.children.forEach(e)}}function cj(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(nr(r),t(i-e))};return de.read(r,!0),()=>nr(r)}function hj(t){window.MotionDebug&&window.MotionDebug.record(t)}function dj(t){return t instanceof SVGElement&&t.tagName!=="svg"}function fj(t,e,n){const r=It(t)?t:qi(t);return r.start(n0("",r,e,n)),r.animation}const t2=["","X","Y","Z"],n2=1e3;let pj=0;const as={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function n3({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=pj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{as.totalNodes=as.resolvedTargetDeltas=as.recalculatedProjection=0,this.nodes.forEach(yj),this.nodes.forEach(Sj),this.nodes.forEach(Tj),this.nodes.forEach(vj),hj(as)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new uj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new i0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=dj(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=cj(d,250),Nu.hasAnimatedSinceResize&&(Nu.hasAnimatedSinceResize=!1,this.nodes.forEach(s2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||c.getDefaultTransition()||Rj,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=c.getProps(),m=!this.targetLayout||!pm(this.targetLayout,g)||f,y=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const C={...V4(w,"layout"),onPlay:S,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else d||s2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_j),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(r2);return}this.isUpdating||this.nodes.forEach(Ej),this.isUpdating=!1,this.nodes.forEach(Cj),this.nodes.forEach(mj),this.nodes.forEach(gj),this.clearAllSnapshots();const a=performance.now();me.delta=Br(0,1e3/60,a-me.timestamp),me.timestamp=a,me.isProcessing=!0,ki.update.process(me),ki.preRender.process(me),ki.render.process(me),me.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(wj),this.sharedNodes.forEach(xj)}scheduleUpdateProjection(){de.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){de.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!t3(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||os(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Aj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return De();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(cr(a.x,l.offset.x),cr(a.y,l.offset.y)),a}removeElementScroll(o){const a=De();Ut(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:h}=u;if(u!==this.root&&c&&h.layoutScroll){if(c.isRoot){Ut(a,o);const{scroll:d}=this.root;d&&(cr(a.x,-d.offset.x),cr(a.y,-d.offset.y))}cr(a.x,c.offset.x),cr(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=De();Ut(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&pi(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),os(c.latestValues)&&pi(l,c.latestValues)}return os(this.latestValues)&&pi(l,this.latestValues),l}removeTransform(o){const a=De();Ut(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!os(u.latestValues))continue;dm(u.latestValues)&&u.updateSnapshot();const c=De(),h=u.measurePageBox();Ut(c,h),Xw(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return os(this.latestValues)&&Xw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==me.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=me.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),na(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ut(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ut(this.target,this.layout.layoutBox),Y4(this.target,this.targetDelta)):Ut(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),na(this.relativeTargetOrigin,this.target,f.target),Ut(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}as.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dm(this.parent.latestValues)||Q4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===me.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Ut(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;V$(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=fi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=fi(),this.projectionDeltaWithTransform=fi());const w=this.projectionTransform;ta(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=e2(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==d||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),as.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=fi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=De(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,w=f!==g,S=this.getStack(),v=!S||S.members.length<=1,m=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(kj));this.animationProgress=0;let y;this.mixTargetDelta=C=>{const T=C/1e3;i2(h.x,o.x,T),i2(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(na(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ij(this.relativeTarget,this.relativeTargetOrigin,d,T),y&&pm(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=De()),Ut(y,this.relativeTarget)),w&&(this.animationValues=c,tj(c,u,this.latestValues,T,m,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=de.update(()=>{Nu.hasAnimatedSinceResize=!0,this.currentAnimation=fj(0,n2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(n2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&r3(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||De();const h=Mt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=Mt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Ut(a,l),pi(a,c),ta(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new aj),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<t2.length;c++){const h="rotate"+t2[c];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Pu(o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Pu(o.pointerEvents)||""),this.hasProjected&&!os(this.latestValues)&&(w.transform=c?c({},""):"none",this.hasProjected=!1),w}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=e2(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:f,y:g}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in Rc){if(d[w]===void 0)continue;const{correct:S,applyTo:v}=Rc[w],m=u.transform==="none"?d[w]:S(d[w],h);if(v){const y=v.length;for(let C=0;C<y;C++)u[v[C]]=m}else u[w]=m}return this.options.layoutId&&(u.pointerEvents=h===this?Pu(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(r2),this.root.sharedNodes.clear()}}}function mj(t){t.updateLayout()}function gj(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?dn(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=Mt(d);d.min=r[h].min,d.max=d.min+f}):r3(i,n.layoutBox,r)&&dn(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=Mt(r[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const a=fi();ta(a,r,n.layoutBox);const l=fi();o?ta(l,t.applyTransform(s,!0),n.measuredBox):ta(l,r,n.layoutBox);const u=!t3(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const g=De();na(g,n.layoutBox,d.layoutBox);const w=De();na(w,r,f.layoutBox),pm(g,w)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function yj(t){as.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wj(t){t.clearSnapshot()}function r2(t){t.clearMeasurements()}function Ej(t){t.isLayoutDirty=!1}function Cj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function s2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Sj(t){t.resolveTargetDelta()}function Tj(t){t.calcProjection()}function _j(t){t.resetRotation()}function xj(t){t.removeLeadSnapshot()}function i2(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function o2(t,e,n,r){t.min=ye(e.min,n.min,r),t.max=ye(e.max,n.max,r)}function Ij(t,e,n,r){o2(t.x,e.x,n.x,r),o2(t.y,e.y,n.y,r)}function kj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Rj={duration:.45,ease:[.4,0,.1,1]};function a2(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function Aj(t){a2(t.x),a2(t.y)}function r3(t,e,n){return t==="position"||t==="preserve-aspect"&&!cm(Zw(e),Zw(n),.2)}const Pj=n3({attachResizeListener:(t,e)=>Bn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gf={current:void 0},s3=n3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!gf.current){const t=new Pj({});t.mount(window),t.setOptions({layoutScroll:!0}),gf.current=t}return gf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Nj={pan:{Feature:Q$},drag:{Feature:G$,ProjectionNode:s3,MeasureLayout:J4}},Dj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Lj(t){const e=Dj.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function mm(t,e,n=1){const[r,s]=Lj(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);return i?i.trim():tm(s)?mm(s,e,n+1):s}function Oj(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!tm(i))return;const o=mm(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!tm(i))continue;const o=mm(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const Mj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),i3=t=>Mj.has(t),bj=t=>Object.keys(t).some(i3),l2=t=>t===Ws||t===U,u2=(t,e)=>parseFloat(t.split(", ")[e]),c2=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return u2(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?u2(i[1],t):0}},$j=new Set(["x","y","z"]),jj=Sl.filter(t=>!$j.has(t));function Fj(t){const e=[];return jj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const h2={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:c2(4,13),y:c2(5,14)},Uj=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=h2[u](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const c=e.getValue(u);c&&c.jump(a[u]),t[u]=h2[u](l,i)}),t},Vj=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(i3);let i=[],o=!1;const a=[];if(s.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let c=n[l],h=To(c);const d=e[l];let f;if(Pc(d)){const g=d.length,w=d[0]===null?1:0;c=d[w],h=To(c);for(let S=w;S<g&&d[S]!==null;S++)f?X1(To(d[S])===f):f=To(d[S])}else f=To(d);if(h!==f)if(l2(h)&&l2(f)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof d=="string"?e[l]=parseFloat(d):Array.isArray(d)&&f===U&&(e[l]=d.map(parseFloat))}else h!=null&&h.transform&&(f!=null&&f.transform)&&(c===0||d===0)?c===0?u.set(f.transform(c)):e[l]=h.transform(d):(o||(i=Fj(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Uj(e,t,a);return i.length&&i.forEach(([c,h])=>{t.getValue(c).set(h)}),t.render(),Kh&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Bj(t,e,n,r){return bj(e)?Vj(t,e,n,r):{target:e,transitionEnd:r}}const zj=(t,e,n,r)=>{const s=Oj(t,e,r);return e=s.target,r=s.transitionEnd,Bj(t,e,n,r)},gm={current:null},o3={current:!1};function Hj(){if(o3.current=!0,!!Kh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gm.current=t.matches;t.addListener(e),e()}else gm.current=!1}function Wj(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(It(i))t.addValue(s,i),Oc(r)&&r.add(s);else if(It(o))t.addValue(s,qi(i,{owner:t})),Oc(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,qi(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const d2=new WeakMap,a3=Object.keys(Ba),Kj=a3.length,f2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],qj=U1.length;class Gj{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>de.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Gh(n),this.isVariantNode=Wx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const h in c){const d=c[h];a[h]!==void 0&&It(d)&&(d.set(a[h],!1),Oc(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,d2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),o3.current||Hj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){d2.delete(this.current),this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Hs.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&de.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<Kj;l++){const u=a3[l],{isEnabled:c,Feature:h,ProjectionNode:d,MeasureLayout:f}=Ba[u];d&&(o=d),c(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),f&&(a=f))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:f}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||h&&hi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<f2.length;r++){const s=f2[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Wj(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<qj;r++){const s=U1[r],i=this.props[s];(Va(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qi(n,{owner:this}),this.addValue(e,r)),r}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Q1(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!It(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new i0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class l3 extends Gj{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=m$(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){f$(this,r,o);const a=zj(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Qj(t){return window.getComputedStyle(t)}class Yj extends l3{readValueFromInstance(e,n){if(Hs.has(n)){const r=t0(n);return r&&r.default||0}else{const r=Qj(e),s=(Qx(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return X4(e,n)}build(e,n,r,s){z1(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return G1(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;It(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){t4(e,n,r,s)}}class Xj extends l3{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Hs.has(n)){const r=t0(n);return r&&r.default||0}return n=n4.has(n)?n:q1(n),e.getAttribute(n)}measureInstanceViewportBox(){return De()}scrapeMotionValuesFromProps(e,n){return s4(e,n)}build(e,n,r,s){W1(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){r4(e,n,r,s)}mount(e){this.isSVGTag=K1(e.tagName),super.mount(e)}}const Jj=(t,e)=>B1(t)?new Xj(e,{enableHardwareAcceleration:!1}):new Yj(e,{enableHardwareAcceleration:!0}),Zj={layout:{ProjectionNode:s3,MeasureLayout:J4}},eF={...R$,...YM,...Nj,...Zj},ie=sM((t,e)=>LM(t,e,eF,Jj));function u3(){const t=E.useRef(!1);return Ua(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function tF(){const t=u3(),[e,n]=E.useState(0),r=E.useCallback(()=>{t.current&&n(e+1)},[e]);return[E.useCallback(()=>de.postRender(r),[r]),e]}class nF extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function rF({children:t,isPresent:e}){const n=E.useId(),r=E.useRef(null),s=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),E.createElement(nF,{isPresent:e,childRef:r,sizeRef:s},E.cloneElement(t,{ref:r}))}const yf=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Y1(sF),l=E.useId(),u=E.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c=>{a.set(c,!0);for(const h of a.values())if(!h)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),i?void 0:[n]);return E.useMemo(()=>{a.forEach((c,h)=>a.set(h,!1))},[n]),E.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=E.createElement(rF,{isPresent:n},t)),E.createElement(Wh.Provider,{value:u},t)};function sF(){return new Map}function iF(t){return E.useEffect(()=>()=>t(),[])}const Xs=t=>t.key||"";function oF(t,e){t.forEach(n=>{const r=Xs(n);e.set(r,n)})}function aF(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const An=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=E.useContext(V1).forceRender||tF()[0],l=u3(),u=aF(t);let c=u;const h=E.useRef(new Map).current,d=E.useRef(c),f=E.useRef(new Map).current,g=E.useRef(!0);if(Ua(()=>{g.current=!1,oF(u,f),d.current=c}),iF(()=>{g.current=!0,f.clear(),h.clear()}),g.current)return E.createElement(E.Fragment,null,c.map(m=>E.createElement(yf,{key:Xs(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},m)));c=[...c];const w=d.current.map(Xs),S=u.map(Xs),v=w.length;for(let m=0;m<v;m++){const y=w[m];S.indexOf(y)===-1&&!h.has(y)&&h.set(y,void 0)}return o==="wait"&&h.size&&(c=[]),h.forEach((m,y)=>{if(S.indexOf(y)!==-1)return;const C=f.get(y);if(!C)return;const T=w.indexOf(y);let k=m;if(!k){const I=()=>{f.delete(y),h.delete(y);const x=d.current.findIndex(M=>M.key===y);if(d.current.splice(x,1),!h.size){if(d.current=u,l.current===!1)return;a(),r&&r()}};k=E.createElement(yf,{key:Xs(C),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:i,mode:o},C),h.set(y,k)}c.splice(T,0,k)}),c=c.map(m=>{const y=m.key;return h.has(y)?m:E.createElement(yf,{key:Xs(m),isPresent:!0,presenceAffectsLayout:i,mode:o},m)}),E.createElement(E.Fragment,null,h.size?c:c.map(m=>E.cloneElement(m)))};function lF(t){t.values.forEach(e=>e.stop())}function uF(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const s=[];return t.forEach(i=>{s.push(W4(i,n,{transitionOverride:r}))}),Promise.all(s)},set(n){return t.forEach(r=>{d$(r,n)})},stop(){t.forEach(n=>{lF(n)})},mount(){return()=>{e.stop()}}};return e}function cF(){const t=Y1(uF);return Ua(t.mount,[]),t}const Zh=cF,c3=()=>p.jsxs("svg",{width:"27",height:"27",viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M13.5 27.0003C17.2632 27.0003 20.6666 25.4606 23.1149 22.9768C22.2406 20.2265 19.9794 18.0061 17.058 16.9727C16.0535 17.8121 14.7613 18.3171 13.3505 18.3171C11.9398 18.3171 10.6476 17.8121 9.64308 16.9727C6.80379 17.9771 4.58814 20.1026 3.66321 22.7462C6.12556 25.365 9.62181 27.0003 13.5 27.0003Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 25C19.8513 25 25 19.8513 25 13.5C25 7.14872 19.8513 2 13.5 2C7.14872 2 2 7.14872 2 13.5C2 19.8513 7.14872 25 13.5 25ZM27 13.5C27 20.9558 20.9558 27 13.5 27C6.04415 27 0 20.9558 0 13.5C0 6.04415 6.04415 0 13.5 0C20.9558 0 27 6.04415 27 13.5Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M13.3505 15.9183C16.5449 15.9183 19.1346 13.3286 19.1346 10.1342C19.1346 6.93972 16.5449 4.3501 13.3505 4.3501C10.156 4.3501 7.56641 6.93972 7.56641 10.1342C7.56641 13.3286 10.156 15.9183 13.3505 15.9183Z",fill:"var(--accent-color)"})]}),p2=()=>p.jsxs("svg",{width:"27",height:"27",viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.45455C7.39976 2.45455 2.45455 7.39976 2.45455 13.5C2.45455 19.6002 7.39976 24.5455 13.5 24.5455C19.6002 24.5455 24.5455 19.6002 24.5455 13.5C24.5455 7.39976 19.6002 2.45455 13.5 2.45455ZM0 13.5C0 6.04416 6.04416 0 13.5 0C20.9558 0 27 6.04416 27 13.5C27 20.9558 20.9558 27 13.5 27C6.04416 27 0 20.9558 0 13.5Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6705 9.3295C18.1098 9.76884 18.1098 10.4812 17.6705 10.9205L10.9205 17.6705C10.4812 18.1098 9.76884 18.1098 9.3295 17.6705C8.89017 17.2312 8.89017 16.5188 9.3295 16.0795L16.0795 9.3295C16.5188 8.89017 17.2312 8.89017 17.6705 9.3295Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.3295 9.3295C9.76884 8.89017 10.4812 8.89017 10.9205 9.3295L17.6705 16.0795C18.1098 16.5188 18.1098 17.2312 17.6705 17.6705C17.2312 18.1098 16.5188 18.1098 16.0795 17.6705L9.3295 10.9205C8.89017 10.4812 8.89017 9.76884 9.3295 9.3295Z",fill:"var(--primary-color)"})]}),Il=({children:t,mode:e,hideModal:n})=>{if(e==="gallery")return p.jsx(ie.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},className:"modal-container",children:t});if(e==="box")return p.jsx(ie.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},className:"modal-container",children:p.jsxs("div",{className:"modal-box-container",children:[p.jsx("button",{className:"close-modal",onClick:n,children:p.jsx(p2,{})}),t]})});if(e==="overlay")return p.jsx(ie.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},className:"modal-container",children:p.jsxs("div",{className:"modal-overlay-container",children:[p.jsx("button",{className:"close-modal",onClick:n,children:p.jsx(p2,{})}),t]})})};Il.propTypes={children:b.node,mode:b.string,hideModal:b.func};function ed(t,e){E.useEffect(()=>{function n(r){t.current&&!t.current.contains(r.target)&&e()}return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[t,e])}const hF=()=>p.jsx("svg",{width:"24",height:"18",viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.6095 0.405544C24.1302 0.94627 24.1302 1.82296 23.6095 2.36369L8.94281 17.5945C8.42211 18.1352 7.57789 18.1352 7.05719 17.5945L0.390524 10.6714C-0.130175 10.1307 -0.130175 9.25396 0.390524 8.71324C0.911223 8.17251 1.75544 8.17251 2.27614 8.71324L8 14.6572L21.7239 0.405544C22.2446 -0.135182 23.0888 -0.135182 23.6095 0.405544Z",fill:"var(--accent-color)"})}),dF=()=>p.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6234 0.376577C18.1255 0.87868 18.1255 1.69275 17.6234 2.19485L2.19485 17.6234C1.69275 18.1255 0.87868 18.1255 0.376577 17.6234C-0.125526 17.1213 -0.125526 16.3073 0.376577 15.8051L15.8051 0.376577C16.3073 -0.125526 17.1213 -0.125526 17.6234 0.376577Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.376577 0.376577C0.87868 -0.125526 1.69275 -0.125526 2.19485 0.376577L17.6234 15.8051C18.1255 16.3073 18.1255 17.1213 17.6234 17.6234C17.1213 18.1255 16.3073 18.1255 15.8051 17.6234L0.376577 2.19485C-0.125526 1.69275 -0.125526 0.87868 0.376577 0.376577Z",fill:"var(--accent-color)"})]}),td=({initialValue:t,submit:e,hideCustomInput:n,customClass:r,placeholder:s})=>{const[i,o]=E.useState(t),a=E.useRef(null);return ed(a,n),p.jsx(ie.div,{className:`custom-input-container ${r}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:p.jsxs("form",{onSubmit:l=>{l.preventDefault(),e(i)},ref:a,children:[p.jsx("input",{type:"text",value:i,onChange:l=>o(()=>l.target.value),placeholder:s&&s,autoFocus:!0}),p.jsxs("div",{className:"input-buttons-container",children:[p.jsx("button",{className:"submit-button",type:"submit",children:p.jsx(hF,{})}),p.jsx("button",{className:"cancel-button",type:"button",onClick:n,children:p.jsx(dF,{})})]})]})})};td.propTypes={initialValue:b.string,submit:b.func,hideCustomInput:b.func,customClass:b.string,placeholder:b.string};const h3=({hideModal:t})=>{const{currentUser:e}=uo(),{baseName:n,lang:r}=oe(),s=th(),[i,o]=E.useState(!1),a=E.useRef(null),l=()=>{t(),s(`${n}profile`)},u=()=>{o(()=>!1)},c=f=>{f===""||f.length<3||f.length>100||(t(),$O(f))},h=f=>{bO(f),t()},d=()=>{t(),s(n),MO()};return ed(a,t),p.jsxs("div",{className:"user-modal-inner",ref:a,children:[e!=null&&e.photoURL?p.jsx("div",{className:"profile-pic-container",children:p.jsx("img",{className:"profile-pic",src:e==null?void 0:e.photoURL})}):p.jsx(c3,{}),p.jsx(An,{children:p.jsx("div",{className:"user-name-container",children:i?p.jsx(td,{initialValue:e==null?void 0:e.displayName,submit:c,hideCustomInput:u,customClass:"user-name-input"}):p.jsx(ie.h3,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:e==null?void 0:e.displayName})})}),p.jsx("input",{type:"file",id:"file",onChange:f=>h(f.target.files[0]),hidden:!0}),p.jsxs("ul",{className:"profile-actions-container",children:[p.jsx("li",{children:p.jsx("button",{onClick:l,children:r==="en"?"Profile page":"Профиль"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>o(()=>!0),children:r==="en"?"Change username":"Изменить логин"})}),p.jsx("li",{children:p.jsx("label",{htmlFor:"file",children:r==="en"?"Change profile pic":"Изменить фото"})}),p.jsx("li",{children:p.jsx("button",{onClick:d,children:r==="en"?"Sign-Out":"Выйти"})})]})]})};h3.propTypes={hideModal:b.func};const fF=()=>p.jsxs("svg",{width:"21",height:"24",viewBox:"0 0 21 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.68414 15.9341C2.76247 14.8558 4.225 14.25 5.75 14.25H15.25C16.775 14.25 18.2375 14.8558 19.3159 15.9341C20.3942 17.0125 21 18.475 21 20V22.375C21 22.9273 20.5523 23.375 20 23.375C19.4477 23.375 19 22.9273 19 22.375V20C19 19.0054 18.6049 18.0516 17.9016 17.3484C17.1984 16.6451 16.2446 16.25 15.25 16.25H5.75C4.75544 16.25 3.80161 16.6451 3.09835 17.3484C2.39509 18.0516 2 19.0054 2 20V22.375C2 22.9273 1.55228 23.375 1 23.375C0.447715 23.375 0 22.9273 0 22.375V20C0 18.475 0.605802 17.0125 1.68414 15.9341Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2C8.42893 2 6.75 3.67893 6.75 5.75C6.75 7.82107 8.42893 9.5 10.5 9.5C12.5711 9.5 14.25 7.82107 14.25 5.75C14.25 3.67893 12.5711 2 10.5 2ZM4.75 5.75C4.75 2.57436 7.32436 0 10.5 0C13.6756 0 16.25 2.57436 16.25 5.75C16.25 8.92564 13.6756 11.5 10.5 11.5C7.32436 11.5 4.75 8.92564 4.75 5.75Z",fill:"var(--primary-color)"})]}),pF=()=>p.jsx(ie.svg,{animate:{rotate:0,opacity:1},initial:{rotate:-180,opacity:0},exit:{rotate:180,opacity:0},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33316 2.02236C7.30655 0.703788 9.62663 0 12 0C12.6187 0 13.2275 0.0536869 13.7973 0.131392L16.2938 0.471819L14.2434 1.93603C13.2771 2.62602 12.555 3.60508 12.1812 4.73201C11.8074 5.85894 11.8011 7.07548 12.1634 8.20617C12.5257 9.33686 13.2378 10.3233 14.1969 11.0231C15.156 11.7229 16.3127 12.1 17.5 12.1L17.5023 12.1C18.3944 12.1021 19.2741 11.8904 20.0676 11.4828C20.8612 11.0752 21.5456 10.4835 22.0636 9.75715L23.5279 7.70391L23.8686 10.2027C23.9463 10.7725 24 11.3813 24 12C24 14.3734 23.2962 16.6934 21.9776 18.6668C20.6591 20.6402 18.7849 22.1783 16.5922 23.0865C14.3995 23.9948 11.9867 24.2324 9.65892 23.7694C7.33115 23.3064 5.19295 22.1635 3.51472 20.4853C1.83649 18.807 0.693605 16.6689 0.230582 14.3411C-0.232441 12.0133 0.00519931 9.60051 0.913451 7.4078C1.8217 5.21508 3.35977 3.34094 5.33316 2.02236ZM11.3527 2.02096C9.60259 2.13447 7.90887 2.70671 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17316C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8078C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.2932 16.0913 21.8654 14.3978 21.979 12.6478C21.6638 12.8772 21.3304 13.0826 20.9814 13.2619C19.9041 13.8152 18.71 14.1026 17.499 14.1C15.8883 14.0998 14.3192 13.5881 13.018 12.6387C11.7166 11.6891 10.7504 10.3507 10.2588 8.81643C9.76721 7.28218 9.77565 5.63144 10.2829 4.10231C10.5315 3.3528 10.8937 2.6515 11.3527 2.02096Z",fill:"#FAFAFA"})}),mF=()=>p.jsx(ie.svg,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",animate:{rotate:0,opacity:1},initial:{rotate:-180,opacity:0},exit:{rotate:180,opacity:0},xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M12 8.72727C13.8 8.72727 15.2727 10.2 15.2727 12C15.2727 13.8 13.8 15.2727 12 15.2727C10.2 15.2727 8.72727 13.8 8.72727 12C8.72727 10.2 10.2 8.72727 12 8.72727ZM12 6.54545C8.98909 6.54545 6.54545 8.98909 6.54545 12C6.54545 15.0109 8.98909 17.4545 12 17.4545C15.0109 17.4545 17.4545 15.0109 17.4545 12C17.4545 8.98909 15.0109 6.54545 12 6.54545ZM1.09091 13.0909H3.27273C3.87273 13.0909 4.36364 12.6 4.36364 12C4.36364 11.4 3.87273 10.9091 3.27273 10.9091H1.09091C0.490909 10.9091 0 11.4 0 12C0 12.6 0.490909 13.0909 1.09091 13.0909ZM20.7273 13.0909H22.9091C23.5091 13.0909 24 12.6 24 12C24 11.4 23.5091 10.9091 22.9091 10.9091H20.7273C20.1273 10.9091 19.6364 11.4 19.6364 12C19.6364 12.6 20.1273 13.0909 20.7273 13.0909ZM10.9091 1.09091V3.27273C10.9091 3.87273 11.4 4.36364 12 4.36364C12.6 4.36364 13.0909 3.87273 13.0909 3.27273V1.09091C13.0909 0.490909 12.6 0 12 0C11.4 0 10.9091 0.490909 10.9091 1.09091ZM10.9091 20.7273V22.9091C10.9091 23.5091 11.4 24 12 24C12.6 24 13.0909 23.5091 13.0909 22.9091V20.7273C13.0909 20.1273 12.6 19.6364 12 19.6364C11.4 19.6364 10.9091 20.1273 10.9091 20.7273ZM5.44364 3.90545C5.34271 3.80432 5.22283 3.72409 5.09086 3.66935C4.95889 3.6146 4.81742 3.58643 4.67455 3.58643C4.53167 3.58643 4.3902 3.6146 4.25823 3.66935C4.12626 3.72409 4.00638 3.80432 3.90545 3.90545C3.80432 4.00638 3.72409 4.12626 3.66935 4.25823C3.6146 4.3902 3.58643 4.53167 3.58643 4.67455C3.58643 4.81742 3.6146 4.95889 3.66935 5.09086C3.72409 5.22283 3.80432 5.34271 3.90545 5.44364L5.06182 6.6C5.48727 7.02545 6.18545 7.02545 6.6 6.6C7.01455 6.17455 7.02545 5.47636 6.6 5.06182L5.44364 3.90545ZM18.9382 17.4C18.8373 17.2989 18.7174 17.2186 18.5854 17.1639C18.4534 17.1091 18.312 17.081 18.1691 17.081C18.0262 17.081 17.8847 17.1091 17.7528 17.1639C17.6208 17.2186 17.5009 17.2989 17.4 17.4C17.2989 17.5009 17.2186 17.6208 17.1639 17.7528C17.1091 17.8847 17.081 18.0262 17.081 18.1691C17.081 18.312 17.1091 18.4534 17.1639 18.5854C17.2186 18.7174 17.2989 18.8373 17.4 18.9382L18.5564 20.0945C18.9818 20.52 19.68 20.52 20.0945 20.0945C20.1957 19.9936 20.2759 19.8737 20.3307 19.7418C20.3854 19.6098 20.4136 19.4683 20.4136 19.3255C20.4136 19.1826 20.3854 19.0411 20.3307 18.9091C20.2759 18.7772 20.1957 18.6573 20.0945 18.5564L18.9382 17.4ZM20.0945 5.44364C20.1957 5.34271 20.2759 5.22283 20.3307 5.09086C20.3854 4.95889 20.4136 4.81742 20.4136 4.67455C20.4136 4.53167 20.3854 4.3902 20.3307 4.25823C20.2759 4.12626 20.1957 4.00638 20.0945 3.90545C19.9936 3.80432 19.8737 3.72409 19.7418 3.66935C19.6098 3.6146 19.4683 3.58643 19.3255 3.58643C19.1826 3.58643 19.0411 3.6146 18.9091 3.66935C18.7772 3.72409 18.6573 3.80432 18.5564 3.90545L17.4 5.06182C16.9745 5.48727 16.9745 6.18545 17.4 6.6C17.8255 7.01455 18.5236 7.02545 18.9382 6.6L20.0945 5.44364ZM6.6 18.9382C6.70113 18.8373 6.78137 18.7174 6.83611 18.5854C6.89085 18.4534 6.91903 18.312 6.91903 18.1691C6.91903 18.0262 6.89085 17.8847 6.83611 17.7528C6.78137 17.6208 6.70113 17.5009 6.6 17.4C6.49908 17.2989 6.3792 17.2186 6.24723 17.1639C6.11526 17.1091 5.97378 17.081 5.83091 17.081C5.68803 17.081 5.54656 17.1091 5.41459 17.1639C5.28262 17.2186 5.16274 17.2989 5.06182 17.4L3.90545 18.5564C3.48 18.9818 3.48 19.68 3.90545 20.0945C4.33091 20.5091 5.02909 20.52 5.44364 20.0945L6.6 18.9382Z",fill:"#262626"})}),gF=()=>p.jsxs("svg",{width:"47",height:"23",viewBox:"0 0 47 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4 2.2876C6.20852 2.2876 2 6.49612 2 11.6876C2 16.8791 6.20852 21.0876 11.4 21.0876C16.5915 21.0876 20.8 16.8791 20.8 11.6876C20.8 6.49612 16.5915 2.2876 11.4 2.2876ZM0 11.6876C0 5.39155 5.10395 0.287598 11.4 0.287598C17.696 0.287598 22.8 5.39155 22.8 11.6876C22.8 17.9836 17.696 23.0876 11.4 23.0876C5.10395 23.0876 0 17.9836 0 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11.6875C0 11.1352 0.447715 10.6875 1 10.6875H21.8C22.3523 10.6875 22.8 11.1352 22.8 11.6875C22.8 12.2398 22.3523 12.6875 21.8 12.6875H1C0.447715 12.6875 0 12.2398 0 11.6875Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4001 0.287598C11.681 0.287598 11.949 0.405758 12.1385 0.613175C14.9033 3.64004 16.4745 7.56813 16.5599 11.6668C16.5602 11.6807 16.5602 11.6945 16.5599 11.7084C16.4745 15.8071 14.9033 19.7352 12.1385 22.762C11.949 22.9694 11.681 23.0876 11.4001 23.0876C11.1192 23.0876 10.8512 22.9694 10.6618 22.762C7.89695 19.7352 6.32572 15.8071 6.24033 11.7084C6.24004 11.6945 6.24004 11.6807 6.24033 11.6668C6.32572 7.56813 7.89695 3.64004 10.6618 0.613175C10.8512 0.405758 11.1192 0.287598 11.4001 0.287598ZM8.24034 11.6876C8.31201 14.9116 9.42629 18.0149 11.4001 20.5399C13.3739 18.0149 14.4882 14.9116 14.5599 11.6876C14.4882 8.4636 13.3739 5.3603 11.4001 2.83534C9.42629 5.3603 8.31201 8.4636 8.24034 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M36.1119 12.6159C36.1119 12.6692 36.0959 12.9519 36.0639 13.4639H29.9839C30.1119 13.7946 30.3253 14.0506 30.6239 14.2319C30.9226 14.4026 31.2959 14.4879 31.7439 14.4879C32.1279 14.4879 32.4479 14.4399 32.7039 14.3439C32.9706 14.2479 33.2586 14.0826 33.5679 13.8479L35.4559 15.7519C34.6026 16.6906 33.3279 17.1599 31.6319 17.1599C30.5759 17.1599 29.6479 16.9679 28.8479 16.5839C28.0479 16.1892 27.4293 15.6452 26.9919 14.9519C26.5546 14.2586 26.3359 13.4799 26.3359 12.6159C26.3359 11.7412 26.5493 10.9626 26.9759 10.2799C27.4133 9.58656 28.0053 9.04789 28.7519 8.66389C29.5093 8.27989 30.3573 8.08789 31.2959 8.08789C32.1813 8.08789 32.9866 8.26389 33.7119 8.61589C34.4479 8.96789 35.0293 9.48522 35.4559 10.1679C35.8933 10.8506 36.1119 11.6666 36.1119 12.6159ZM31.3279 10.5519C30.9546 10.5519 30.6453 10.6532 30.3999 10.8559C30.1546 11.0586 29.9946 11.3466 29.9199 11.7199H32.7359C32.6613 11.3572 32.5013 11.0746 32.2559 10.8719C32.0106 10.6586 31.7013 10.5519 31.3279 10.5519Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M43.3331 8.08789C44.4104 8.08789 45.2744 8.41322 45.9251 9.06389C46.5864 9.71456 46.9171 10.6959 46.9171 12.0079V16.9999H43.3011V12.6319C43.3011 11.6292 42.9437 11.1279 42.2291 11.1279C41.8237 11.1279 41.4931 11.2719 41.2371 11.5599C40.9917 11.8372 40.8691 12.2799 40.8691 12.8879V16.9999H37.2531V8.24789H40.6931V9.11189C41.0344 8.77056 41.4291 8.51456 41.8771 8.34389C42.3251 8.17322 42.8104 8.08789 43.3331 8.08789Z",fill:"var(--primary-color)"})]}),yF=()=>p.jsxs("svg",{width:"47",height:"23",viewBox:"0 0 47 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4 2.2876C6.20852 2.2876 2 6.49612 2 11.6876C2 16.8791 6.20852 21.0876 11.4 21.0876C16.5915 21.0876 20.8 16.8791 20.8 11.6876C20.8 6.49612 16.5915 2.2876 11.4 2.2876ZM0 11.6876C0 5.39155 5.10395 0.287598 11.4 0.287598C17.696 0.287598 22.8 5.39155 22.8 11.6876C22.8 17.9836 17.696 23.0876 11.4 23.0876C5.10395 23.0876 0 17.9836 0 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11.6875C0 11.1352 0.447715 10.6875 1 10.6875H21.8C22.3523 10.6875 22.8 11.1352 22.8 11.6875C22.8 12.2398 22.3523 12.6875 21.8 12.6875H1C0.447715 12.6875 0 12.2398 0 11.6875Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4001 0.287598C11.681 0.287598 11.949 0.405758 12.1385 0.613175C14.9033 3.64004 16.4745 7.56813 16.5599 11.6668C16.5602 11.6807 16.5602 11.6945 16.5599 11.7084C16.4745 15.8071 14.9033 19.7352 12.1385 22.762C11.949 22.9694 11.681 23.0876 11.4001 23.0876C11.1192 23.0876 10.8512 22.9694 10.6618 22.762C7.89695 19.7352 6.32572 15.8071 6.24033 11.7084C6.24004 11.6945 6.24004 11.6807 6.24033 11.6668C6.32572 7.56813 7.89695 3.64004 10.6618 0.613175C10.8512 0.405758 11.1192 0.287598 11.4001 0.287598ZM8.24034 11.6876C8.31201 14.9116 9.42629 18.0149 11.4001 20.5399C13.3739 18.0149 14.4882 14.9116 14.5599 11.6876C14.4882 8.4636 13.3739 5.3603 11.4001 2.83534C9.42629 5.3603 8.31201 8.4636 8.24034 11.6876Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M32.24 9.19189C32.88 8.45589 33.824 8.08789 35.072 8.08789V11.2879C34.784 11.2452 34.5174 11.2239 34.272 11.2239C33.0347 11.2239 32.416 11.8532 32.416 13.1119V16.9999H28.8V8.24789H32.24V9.19189Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M45.6649 8.24789V16.9999H42.2249V16.1679C41.9049 16.4986 41.5316 16.7492 41.1049 16.9199C40.6783 17.0799 40.2249 17.1599 39.7449 17.1599C38.6356 17.1599 37.7449 16.8239 37.0729 16.1519C36.4009 15.4692 36.0649 14.4452 36.0649 13.0799V8.24789H39.6809V12.4559C39.6809 13.0532 39.7769 13.4799 39.9689 13.7359C40.1609 13.9919 40.4436 14.1199 40.8169 14.1199C41.1689 14.1199 41.4623 13.9812 41.6969 13.7039C41.9316 13.4159 42.0489 12.9679 42.0489 12.3599V8.24789H45.6649Z",fill:"var(--primary-color)"})]}),vF=()=>{const{lang:t,dispatch:e}=oe(),{currentUser:n}=uo(),[r,s]=E.useState(!1),[i,o]=E.useState(()=>QO()),a=()=>{s(()=>!1)};E.useEffect(()=>{document.documentElement.setAttribute("data-theme",i),localStorage.setItem("theme",i)},[i]);const l=()=>{o(i==="dark"?()=>"light":"dark")},u=()=>{t==="ru"?(e({type:"SET_LANG",payload:"en"}),localStorage.setItem("FBlang","en")):(e({type:"SET_LANG",payload:"ru"}),localStorage.setItem("FBlang","ru"))};return p.jsxs(p.Fragment,{children:[p.jsx(An,{children:r&&p.jsx(Il,{hideModal:a,mode:"box",children:p.jsx(h3,{hideModal:a})})}),p.jsxs("div",{className:"header-icons-container",children:[n?p.jsx("button",{onClick:()=>s(()=>!0),children:n.photoURL?p.jsx("div",{className:"profile-pic-container",children:p.jsx("img",{className:"profile-pic",src:n==null?void 0:n.photoURL})}):p.jsx(c3,{})}):p.jsx(yg,{to:"auth",children:p.jsx(fF,{})}),p.jsx("a",{href:"#",onClick:l,className:"theme-icons-container",children:p.jsx(An,{children:i==="dark"?p.jsx(pF,{},"dark-mode-icon"):p.jsx(mF,{},"light-mode-icon")})}),p.jsx("button",{href:"#",onClick:u,children:t==="en"?p.jsx(gF,{}):p.jsx(yF,{})})]})]})},wF=()=>{const{currentTitle:t}=oe();return p.jsx("div",{className:"title-container",children:p.jsx("h2",{className:"title-heading",children:t})})},EF=()=>{const{baseName:t}=oe(),{pathname:e}=$s();return p.jsxs("header",{className:"header-container",children:[p.jsx(WO,{}),e===t?p.jsx(KO,{}):p.jsx(wF,{}),p.jsx(GO,{}),p.jsx(vF,{})]})},CF=()=>p.jsxs("div",{className:"page-wrapper",children:[p.jsx("div",{className:"bg-noise-container"}),p.jsx(EF,{}),p.jsx(Fk,{})]}),SF="https://api.themoviedb.org/3",TF="api_key=582f9e2d6f3a1dc803b350bf76f168f2",_F=(t,e)=>{const[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,a]=E.useState({show:!1,message:""}),l=E.useCallback(async(u,c)=>{i(!0);try{const{data:h}=await Pr(`${SF}/genre/${u}/list?${TF}&language=${c}`),d={id:"all",name:c==="ru"?"Все":"All"};r(()=>[d,...h.genres]),i(!1)}catch(h){a({show:!0,message:h.message}),i(!1)}},[]);return E.useEffect(()=>{l(t,e)},[t,e,l]),{isLoading:s,error:o,data:n}},nn=({errorMessage:t,componentMessage:e,showImage:n,fullHeight:r})=>{const{baseName:s}=oe();return p.jsxs("div",{className:`error-message-container ${r?"full-height":""}`,children:[n&&p.jsx(ie.img,{animate:{y:[15,0,15]},transition:{repeat:"loop",duration:4},src:`${s}assets/images/void.png`,alt:"error"}),p.jsxs("h3",{children:[e&&`${e}:`," ",p.jsx("span",{children:t})]})]})};nn.propTypes={errorMessage:b.string,componentMessage:b.string,showImage:b.bool,fullHeight:b.bool};const xF=()=>{const{filterGenre:t,lang:e,mediaType:n,dispatch:r}=oe(),{isLoading:s,error:i,data:o}=_F(n,e),[a,l]=E.useState(0),u=Zh(),c=E.useRef(null);E.useEffect(()=>{c.current&&l(()=>c.current.scrollWidth)},[o,a,u]);const h=(d,f)=>{r({type:"SET_FILTER_GENRE",payload:`${f}`}),u.start({x:a/2-d.offsetLeft-d.scrollWidth,transition:{stiffness:50,type:"spring"}})};return s?p.jsx("div",{className:"genres-list-container",children:p.jsx("h3",{children:e==="ru"?"Загрузка списка жанров":"Loading..."})}):i.show?p.jsx("div",{className:"genres-list-container",children:p.jsx(nn,{errorMessage:i.message,componentMessage:e==="en"?"Fail to load genres list":"Ошибка при загрузке списка жанров",showImage:!1})}):p.jsx("div",{className:"genres-list-container",children:p.jsx(ie.ul,{ref:c,drag:"x",dragConstraints:{left:a/2*-1,right:a/2},animate:u,transition:{stiffness:100,type:"spring"},initial:{x:"50%"},children:o.map(d=>p.jsx("li",{onClick:f=>h(f.target,d.id),className:t===`${d.id}`?"active":"",children:`${d.name[0].toUpperCase()}${d.name.slice(1)}`},d.id))})})},IF={ru:[{upcoming:"Скоро"},{now_playing:"Сейчас в кинотеатрах"},{popular:"Популярные"},{top_rated:"По рейтингу"}],en:[{upcoming:"Upcoming"},{now_playing:"Now playing"},{popular:"Popular"},{top_rated:"Top rated"}]},kF={ru:[{on_the_air:"Сейчас в эфире"},{popular:"Популярные"},{top_rated:"По рейтингу"}],en:[{on_the_air:"Now playing"},{popular:"Popular"},{top_rated:"Top rated"}]},RF=()=>{const{mediaType:t,filterList:e,lang:n,dispatch:r}=oe(),s=t==="movie"?IF[n]:kF[n];return p.jsx("div",{className:"lists-container",children:p.jsx("ul",{children:s.map((i,o)=>{const a=Object.keys(i)[0],l=Object.values(i)[0];return p.jsx("li",{onClick:()=>r({type:"SET_FILTER_LIST",payload:a}),className:e===a?"active":"",children:l},o)})})})};function d3(){const[t,e]=E.useState(()=>n());function n(r){if(r)e(()=>r.target.innerWidth<=768?"mobile":"desktop");else return window.innerWidth<=768?"mobile":"desktop"}return E.useEffect(()=>(window.addEventListener("resize",n),()=>{document.removeEventListener("resize",n)}),[]),t}const AF=()=>p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11C20 6.02944 15.9706 2 11 2ZM0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11Z",fill:"#fafafa"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7069 7.29265C15.0974 7.68317 15.0974 8.31634 14.7069 8.70686L8.70686 14.7069C8.31634 15.0974 7.68317 15.0974 7.29265 14.7069C6.90212 14.3163 6.90212 13.6832 7.29265 13.2926L13.2926 7.29265C13.6832 6.90212 14.3163 6.90212 14.7069 7.29265Z",fill:"#fafafa"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29265 7.29265C7.68317 6.90212 8.31634 6.90212 8.70686 7.29265L14.7069 13.2926C15.0974 13.6832 15.0974 14.3163 14.7069 14.7069C14.3163 15.0974 13.6832 15.0974 13.2926 14.7069L7.29265 8.70686C6.90212 8.31634 6.90212 7.68317 7.29265 7.29265Z",fill:"#fafafa"})]}),nd=({title:t,poster:e,id:n,mediaType:r,isDrag:s,removeItemButton:i,listIndex:o})=>{const[a,l]=E.useState(!0),[u,c]=E.useState(!1),h=d3(),{baseName:d}=oe(),f=()=>{l(!1)};return p.jsxs(ie.div,{layout:!0,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},whileHover:{scale:h==="desktop"?1.05:1,zIndex:999},onHoverStart:()=>i?c(()=>!0):null,onHoverEnd:()=>i?c(()=>!1):null,className:"movie-container",children:[p.jsxs(yg,{style:{pointerEvents:s?"none":""},to:`${d}${r}/${n}`,draggable:"false",children:[p.jsxs("div",{className:"movie-poster-container",children:[p.jsx(ie.img,{initial:{opacity:0},animate:{opacity:a?0:1},transition:{opacity:{delay:.3,duration:.3}},onLoad:f,src:e,alt:t}),p.jsx(ie.div,{initial:{opacity:.5},animate:{opacity:a?.5:0},transition:{opacity:{delay:.3,duration:.3}},className:"img-loading-container"})]}),p.jsx("div",{className:"movie-title-container",children:p.jsx("h3",{children:t})})]}),i&&!a&&(u||h==="mobile")&&p.jsx("button",{className:"remove-item-button",onClick:()=>{Ux(o,n,r)},children:p.jsx(AF,{})})]})};nd.propTypes={title:b.string,poster:b.string,id:b.string,mediaType:b.string,isDrag:b.bool,removeItemButton:b.bool,listIndex:b.number};const Wa=()=>p.jsx("div",{className:"loader-container",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[p.jsx("circle",{cx:"30",cy:"50",fill:"#ff6699",r:"20",children:p.jsx("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.5;1",values:"30;70;30",begin:"-0.5s"})}),p.jsx("circle",{cx:"70",cy:"50",style:{fill:"var(--primary-color)"},r:"20",children:p.jsx("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.5;1",values:"30;70;30",begin:"0s"})}),p.jsxs("circle",{cx:"30",cy:"50",fill:"#ff6699",r:"20",children:[p.jsx("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",keyTimes:"0;0.5;1",values:"30;70;30",begin:"-0.5s"}),p.jsx("animate",{attributeName:"fill-opacity",values:"0;0;1;1",calcMode:"discrete",keyTimes:"0;0.499;0.5;1",dur:"1s",repeatCount:"indefinite"})]})]})}),f3=()=>{const{moviesFetchLoading:t,moviesFetchError:e,dispatch:n,moviesList:r,page:s,totalPages:i}=oe(),o=E.useCallback(()=>{if(s<i&&window.innerHeight+window.scrollY>=document.body.scrollHeight-100){const a=s+1;n({type:"INCREASE_PAGE",payload:a})}},[n,s,i]);return E.useEffect(()=>{if(!e.show)return i>1&&window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[e,i,o]),e.show?p.jsx(nn,{errorMessage:e.message,componentMessage:"Ошибка при загрузке списка",showImage:!0}):p.jsxs(p.Fragment,{children:[p.jsx(ie.div,{layout:!0,layoutRoot:!0,className:"movies-list-container",children:r.map(({posterUrl:a,title:l,id:u,mediaType:c})=>(l.length>35&&(l=l.slice(0,35)+"..."),p.jsxs(An,{children:[p.jsx(nd,{poster:a,title:l,id:`${u}`,mediaType:c}),";"]},u)))}),t&&p.jsx(Wa,{})]})},PF=()=>{const{moviesListMode:t,searchQuery:e,dispatch:n,setCurrentTitle:r}=oe();return E.useEffect(()=>{t!=="home"&&n({type:"SET_HOME_MODE"}),r(()=>"")},[e,n,t,r]),p.jsxs("section",{className:"section-home",children:[p.jsx(RF,{}),p.jsx(xF,{}),p.jsx(f3,{})]})};class NF{constructor(e,n,r,s){this.fetchedData=e,this.lang=n,this.mediaType=s,this.title=this.fetchedData.title?this.fetchedData.title:this.fetchedData.name,this.poster=e.poster_path?`${r}${e.poster_path}`:"/projects/films_base/assets/images/no-poster.jpg",this.data=this.mediaType==="movie"?this.getMovieData():this.getTVSeriesData(),this.description=this.fetchedData.overview}getMovieData(){return[...this.fetchedData.release_date?[{[`${this.lang==="en"?"Release date":"Дата выхода"}`]:this.getReleaseDate(this.fetchedData.release_date,this.lang)}]:[],...this.fetchedData.genres.length>0?[{[`${this.lang==="en"?"Genres":"Жанр"}`]:this.getGenresList()}]:[],...this.fetchedData.production_countries.length>0?[{[`${this.lang==="en"?"Country":"Страна"}`]:this.getCountriesList()}]:[],...this.fetchedData.budget?[{[`${this.lang==="en"?"Budget":"Бюджет"}`]:this.getBudgetString(this.fetchedData.budget)}]:[],...this.fetchedData.revenue?[{[`${this.lang==="en"?"Revenue":"Сборы"}`]:this.getBudgetString(this.fetchedData.revenue)}]:[],...this.fetchedData.runtime?[{[`${this.lang==="en"?"Runtime":"Продолжительность"}`]:this.getRuntime(this.fetchedData.runtime)}]:[],...this.fetchedData.vote_average?[{[`${this.lang==="en"?"TMDB Rating":"Рейтинг TMDB"}`]:this.fetchedData.vote_average}]:[]]}getTVSeriesData(){return[...this.fetchedData.first_air_date?[{[`${this.lang==="en"?"Release date":"Дата выхода"}`]:this.getReleaseDate(this.fetchedData.first_air_date)}]:[],...this.fetchedData.genres.length>0?[{[`${this.lang==="en"?"Genres":"Жанр"}`]:this.getGenresList()}]:[],...this.fetchedData.production_countries.length>0?[{[`${this.lang==="en"?"Country":"Страна"}`]:this.getCountriesList()}]:[],...this.fetchedData.number_of_seasons?[{[`${this.lang==="en"?"Total Seasons":"Всего сезонов"}`]:this.fetchedData.number_of_seasons}]:[],...this.fetchedData.number_of_episodes?[{[`${this.lang==="en"?"Total episodes":"Серий"}`]:this.fetchedData.number_of_episodes}]:[],...this.fetchedData.vote_average?[{[`${this.lang==="en"?"TMDB Rating":"Рейтинг TMDB"}`]:this.fetchedData.vote_average}]:[]]}getCountriesList(){return this.fetchedData.production_countries.reduce((e,n,r)=>r===0?this.getCountryName(n.iso_3166_1,this.lang):`${e}, ${this.getCountryName(n.iso_3166_1,this.lang)}`,"")}getCountryName(e){return new Intl.DisplayNames([this.lang],{type:"region"}).of(e)}getReleaseDate(e){const n=new Date(e),r=n.getDay()+1;let s=this.getMonths(this.lang)[n.getMonth()];this.lang==="ru"&&(s=s[s.length-1]==="ь"||s[s.length-1]==="й"?s.slice(0,-1)+"я":s+"а");const i=n.getFullYear();return this.lang==="en"?`${s} ${r}, ${i}`:`${r} ${s} ${i} г.`}getMonths(){return Array.from({length:12},(e,n)=>new Intl.DateTimeFormat(this.lang,{month:"long"}).format(new Date(0,n)))}getGenresList(){return this.fetchedData.genres.reduce((e,n,r)=>r===0?n.name[0].toUpperCase()+n.name.slice(1):`${e}, ${n.name}`,"")}getBudgetString(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}getRuntime(e){const n=Math.floor(e/60),r=e%60;let s,i;if(this.lang==="ru"){const o=String(n),a=String(r);return o[o.length-1]==="1"?s="час":Number(o[o.length-1])>1&&Number(o[o.length-1])<5?s="часа":s="часов",a[a.length-1]==="1"?i="минута":Number(a[a.length-1])>1&&Number(a[a.length-1])<5?i="минуты":i="минут",(a==="11"||a==="12"||a==="13"||a==="14")&&(i="минут"),n===0?`${a} ${i}`:r===0?`${o} ${s}`:`${o} ${s} ${a} ${i}`}if(this.lang==="en")return n===1?s="hour":s="hours",r===1?i="minute":i="minutes",n===0?`${r} ${i}`:`${n} ${s} ${r} ${i}`}}const vf="https://api.themoviedb.org/3",wf="api_key=582f9e2d6f3a1dc803b350bf76f168f2",m2="https://image.tmdb.org/t/p/w1280",DF=(t,e,n)=>{const[r,s]=E.useState([]),[i,o]=E.useState(!0),[a,l]=E.useState({show:!1,message:""}),[u,c]=E.useState([]),[h,d]=E.useState({show:!1,message:""}),[f,g]=E.useState([]),[w,S]=E.useState({show:!1,message:""}),v=E.useCallback(async(m,y,C)=>{o(!0),g(()=>[]),s(()=>[]),c(()=>[]);try{const{data:T}=await Pr(`${vf}/${m}/${C}?${wf}&language=${y}`);s(()=>new NF(T,y,m2,m))}catch(T){l(()=>({show:!0,message:T.message}))}try{const{data:{backdrops:T}}=await Pr(`${vf}/${m}/${C}/images?${wf}`),k=[];T.length>20&&T.splice(20),T.forEach(I=>{k.push(m2+I.file_path)}),c(()=>k)}catch(T){d(()=>({show:!0,message:T.message}))}try{const{data:{results:T}}=await Pr(`${vf}/${m}/${C}/videos?${wf}&language=${y}`);if(T.length!==0){const k=[],I=T.filter(x=>x.type==="Trailer"&&x.site==="YouTube");I.length!==0&&I.forEach(x=>{k.push(x.key)}),g(()=>k)}}catch(T){S(()=>({show:!0,message:T.message}))}o(!1)},[]);return E.useEffect(()=>{v(t,e,n)},[t,e,n,v]),{isLoading:i,dataError:a,imagesError:h,videosError:w,data:r,images:u,videos:f}},p3=({openModal:t,imagesArray:e})=>{const[n,r]=E.useState([]),[s,i]=E.useState(0),[o,a]=E.useState(0),[l,u]=E.useState(!1),[c,h]=E.useState(!0),d=Zh(),f=E.useRef(null);E.useEffect(()=>{r(()=>e),e.length===0&&h(!1)},[e]),E.useEffect(()=>{s===n.length&&(a(()=>f.current.scrollWidth),o!==0&&(d.start({opacity:1,x:n.length>4?-Math.floor(o/n.length/2):0,transition:{duration:1}}),h(()=>!1)))},[s,n.length,d,o]);const g=w=>{s===n.length&&t(n,w)};return p.jsxs("div",{className:"gallery-container",children:[p.jsx(ie.div,{ref:f,drag:"x",dragConstraints:{left:(o-o/n.length)*-1,right:0},onDrag:()=>u(()=>!0),onDragEnd:()=>u(()=>!1),className:"gallery-wrapper",animate:d,initial:{opacity:0},children:n.map((w,S)=>p.jsx("div",{className:"gallery-image-container",onClick:()=>g(S),style:{pointerEvents:l?"none":""},children:p.jsx("img",{src:w,alt:"img",onLoad:()=>{i(v=>v+1)}})},S))}),p.jsx(ie.div,{initial:{opacity:1},animate:{opacity:c?1:0},transition:{opacity:{delay:.3,duration:.3}},className:"gallery-loading-container"})]})};p3.propTypes={openModal:b.func,imagesArray:b.array};const m3=({image:t})=>{const[e,n]=E.useState(!0),r=()=>{n(!1)};return p.jsxs("div",{className:"movie-poster-container",children:[p.jsx(ie.img,{animate:{opacity:e?0:1},initial:{opacity:0},transition:{opacity:{delay:.3,duration:.3}},onLoad:r,src:t,alt:"poster"}),p.jsx(ie.div,{initial:{opacity:1},animate:{opacity:e?1:0},transition:{opacity:{delay:.3,duration:.3}},className:"img-loading-container"})]})};m3.propTypes={image:b.string};const g3=({videoKey:t})=>{const[e,n]=E.useState(!0),r=()=>{n(()=>!1)};return p.jsxs("div",{className:"movie-video-container",children:[p.jsx(ie.iframe,{animate:{opacity:e?0:1},initial:{opacity:0},src:`https://www.youtube.com/embed/${t}`,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",onLoad:()=>r(),allowFullScreen:!0}),p.jsx(ie.div,{className:"video-loading-container",animate:{opacity:e?1:0},initial:{opacity:1}})]})};g3.propTypes={videoKey:b.string};const y3=({hideModal:t,changeModalImage:e,control:n,modal:r})=>(console.log(n,r),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"modal-index-controls",onClick:s=>t(s.target),children:[p.jsx("div",{className:"prev-btn",onClick:()=>{e("prev")},children:p.jsx("svg",{width:"30",height:"36",viewBox:"0 0 30 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M-8.74228e-07 18L30 0.679488L30 35.3205L-8.74228e-07 18Z",fill:"var(--primary-color)"})})}),p.jsx("div",{className:"next-btn",onClick:()=>{e("next")},children:p.jsx("svg",{width:"30",height:"36",viewBox:"0 0 30 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M30 18L4.45043e-07 35.3205L3.19526e-08 0.679491L30 18Z",fill:"var(--primary-color)"})})})]}),p.jsx(ie.div,{className:"modal-images-wrapper",animate:n,initial:{x:`-${r.imageIndex*100}%`},transition:{stiffness:50,type:"spring"},children:r.imagesArray})]}));y3.propTypes={hideModal:b.func,changeModalImage:b.func,control:b.object,modal:b.object};const LF=()=>p.jsx("svg",{width:"18",height:"23",viewBox:"0 0 18 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.375 2.3C3.07663 2.3 2.79048 2.42116 2.5795 2.63683C2.36853 2.85249 2.25 3.145 2.25 3.45V19.6153L8.34611 15.1642C8.73727 14.8786 9.26273 14.8786 9.65389 15.1642L15.75 19.6153V3.45C15.75 3.145 15.6315 2.85249 15.4205 2.63683C15.2095 2.42116 14.9234 2.3 14.625 2.3H3.375ZM0.988515 1.01048C1.62145 0.363481 2.47989 0 3.375 0H14.625C15.5201 0 16.3785 0.363481 17.0115 1.01048C17.6444 1.65748 18 2.535 18 3.45V21.85C18 22.2808 17.7645 22.6754 17.3898 22.8725C17.0151 23.0697 16.564 23.0362 16.2211 22.7858L9 17.5132L1.77889 22.7858C1.43598 23.0362 0.984926 23.0697 0.610221 22.8725C0.235516 22.6754 0 22.2808 0 21.85V3.45C0 2.535 0.355579 1.65748 0.988515 1.01048Z",fill:"var(--primary-color)"})}),OF=()=>p.jsx("svg",{width:"19",height:"23",viewBox:"0 0 19 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M3.89995 0C2.98495 0 2.10743 0.363481 1.46043 1.01048C0.813432 1.65748 0.449951 2.535 0.449951 3.45V21.85C0.449951 22.2808 0.690701 22.6754 1.07373 22.8725C1.45676 23.0697 1.91784 23.0362 2.26838 22.7858L9.64995 17.5132L17.0315 22.7858C17.3821 23.0362 17.8431 23.0697 18.2262 22.8725C18.6092 22.6754 18.85 22.2808 18.85 21.85V3.45C18.85 2.535 18.4865 1.65748 17.8395 1.01048C17.1925 0.363481 16.3149 0 15.4 0H3.89995Z",fill:"var(--primary-color)"})}),v3=({hideModal:t,title:e,userLists:n,currentMovieData:r})=>{const{lang:s}=oe(),{id:i,mediaType:o}=r,a=E.useRef(null);return ed(a,t),p.jsxs("div",{className:"user-lists-widget-inner",ref:a,children:[s==="en"?p.jsxs("h3",{children:["Add ",`«${e}»`," to list..."]}):p.jsxs("h3",{children:["Добавить ",`«${e}»`," в список..."]}),p.jsx("div",{className:"user-lists-widget-container",children:p.jsx("ul",{className:"user-lists-widget",children:n.map(({data:l,title:u},c)=>{const h=l.some(d=>d.id===i);return p.jsxs("li",{className:"user-list-item",children:[p.jsx("div",{className:"user-list-title",children:p.jsx("span",{children:u})}),h?p.jsx("button",{onClick:()=>Ux(c,i,o),children:p.jsx(OF,{})}):p.jsx("button",{onClick:()=>BO(c,i,o),children:p.jsx(LF,{})})]},c)})})})]})};v3.propTypes={hideModal:b.func,title:b.string,userLists:b.array,currentMovieData:b.object};const a0=()=>p.jsxs("svg",{width:"20",height:"28",viewBox:"0 0 20 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M15 27.5V7.5C15 6.12125 13.8787 5 12.5 5H2.5C1.12125 5 0 6.12125 0 7.5V27.5L7.5 22.9987L15 27.5Z",fill:"var(--primary-color)"}),p.jsx("path",{d:"M13.2325 2.5H15C16.3787 2.5 17.5 3.62125 17.5 5V18.0537L20 21.165V2.5C20 1.12125 18.8787 0 17.5 0H7.5C6.12125 0 5 1.12125 5 2.5H13.2325Z",fill:"var(--primary-color)"})]}),w3=({id:t,mediaType:e,title:n})=>{const{currentUser:r}=uo(),{lang:s}=oe(),[i,o]=E.useState(!1),[a,l]=E.useState([]),u=()=>{o(()=>!1)};return E.useEffect(()=>vx(Yr(Xr,"users",r.uid),h=>{l(h.data().userLists)}),[r]),p.jsxs(p.Fragment,{children:[p.jsx(An,{children:i&&p.jsx(Il,{mode:"box",hideModal:u,children:p.jsx(v3,{hideModal:u,title:n,userLists:a,currentMovieData:{id:t,mediaType:e}})})}),p.jsxs("div",{className:"add-to-user-list-container",onClick:()=>o(()=>!0),children:[p.jsx("h3",{children:s==="en"?"Add to list":"Добавить в список"}),p.jsx(a0,{})]})]})};w3.propTypes={id:b.string,mediaType:b.string,title:b.string};const MF="https://api.themoviedb.org/3",bF="api_key=582f9e2d6f3a1dc803b350bf76f168f2",$F="https://image.tmdb.org/t/p/w300",jF=(t,e,n)=>{const[r,s]=E.useState(!0),[i,o]=E.useState({show:!1,message:""}),[a,l]=E.useState([]),u=E.useCallback(async c=>{s(!0),o({show:!1,message:""});try{const h=await Pr(`${MF}/${n}/${e}/similar?${bF}&language=${c}`),d=[];h.data.results.forEach(f=>{d.push(new Tg($F,f,n))}),l(()=>d),s(!1)}catch(h){o({show:!0,message:h.message}),s(!1)}},[e,n]);return E.useEffect(()=>{u(t)},[u,t]),{data:a,isLoading:r,error:i}},E3=({itemID:t,itemMediaType:e})=>{const{lang:n}=oe(),[r,s]=E.useState(0),[i,o]=E.useState(!1),a=E.useRef(null),l=Zh(),{data:u,isLoading:c,error:h}=jF(n,t,e);return E.useEffect(()=>{a.current&&(s(()=>a.current.scrollWidth),l.start({x:0}))},[u,l,r]),h.show?p.jsx(nn,{errorMessage:h.message,componentMessage:"Ошибка при загрузке списка",showImage:!0}):c?p.jsx(Wa,{}):p.jsxs("div",{className:"similar-movies-list-wrapper",children:[u.length>0&&p.jsx("h2",{children:n==="en"?"Similar":"Похожие"}),p.jsx(ie.div,{layout:!0,layoutRoot:!0,className:"movies-list-container similar",drag:"x",dragConstraints:{left:r/1.2*-1,right:r/1.2},animate:l,initial:{x:"50%"},ref:a,onDrag:()=>o(()=>!0),onDragEnd:()=>o(()=>!1),children:u.map(({posterUrl:d,title:f,id:g,mediaType:w})=>(f.length>35&&(f=f.slice(0,35)+"..."),p.jsx(nd,{poster:d,title:f,id:`${g}`,mediaType:w,isDrag:i},g)))})]})};E3.propTypes={itemID:b.string,itemMediaType:b.string};const g2=()=>{const{setCurrentTitle:t,lang:e}=oe(),{currentUser:n}=uo(),{id:r}=bC(),s=$s(),i=s.pathname.split("/")[3],[o,a]=E.useState({show:!1,imagesArray:[],imageIndex:0}),l=Zh(),{data:u,images:c,videos:h,dataError:d,imagesError:f,videosError:g,isLoading:w}=DF(i,e,r),{data:S,description:v,title:m,poster:y}=u;E.useEffect(()=>{window.scrollTo(0,0)},[s.pathname]),E.useEffect(()=>{w?t(()=>""):d.show?t(d.message):t(m)},[m,t,w,e,d]),E.useEffect(()=>{l.start({x:`-${o.imageIndex*100}%`})},[o.imageIndex,l]);const C=(I,x)=>{a(()=>({show:!0,imagesArray:I.map((j,fe)=>p.jsx("div",{className:"modal-image-container",children:p.jsx("img",{src:j,alt:"gallery-image"})},fe)),imageIndex:x}))},T=I=>{I.classList.contains("modal-index-controls")&&a(x=>({...x,show:!1}))},k=I=>{let x;I==="next"?x=o.imageIndex===o.imagesArray.length-1?0:o.imageIndex+1:x=o.imageIndex===0?o.imagesArray.length-1:o.imageIndex-1,a(M=>({...M,imageIndex:x}))};return w?p.jsx(Wa,{}):p.jsxs("section",{className:"section-single-movie",children:[p.jsx(An,{children:o.show&&p.jsx(Il,{mode:"gallery",children:p.jsx(y3,{hideModal:T,changeModalImage:k,control:l,modal:o})})}),p.jsxs("div",{className:"movie-wrapper",children:[p.jsxs("div",{className:"left-col",children:[d.show?p.jsx(nn,{errorMessage:d.message,componentMessage:"Ошибка при загрузке данных",showImage:!0}):p.jsx(m3,{image:y}),g.show?p.jsx(nn,{errorMessage:g.message,componentMessage:"Ошибка при загрузке видео",showImage:!0}):h.map((I,x)=>p.jsx(g3,{videoKey:I},x))]}),p.jsxs("div",{className:"right-col",children:[n&&p.jsx(w3,{id:r,mediaType:i,title:m}),p.jsx("div",{className:"data-container",children:d.show?p.jsx(nn,{errorMessage:d.message,componentMessage:"Ошибка при загрузке данных",showImage:!1}):S.map((I,x)=>{const[M,j]=Object.entries(I)[0];return p.jsxs("div",{className:"data-item",children:[p.jsx("span",{className:"label",children:M}),p.jsx("span",{className:"data-info",children:j})]},x)})}),p.jsx("div",{className:"description-container",children:p.jsx("p",{children:v})}),f.show?p.jsx(nn,{errorMessage:g.message,componentMessage:"Ошибка при загрузке галереи",showImage:!0}):p.jsx(p3,{openModal:C,imagesArray:c})]})]}),p.jsx(E.Suspense,{fallback:p.jsx(Wa,{}),children:p.jsx(E3,{itemID:r,itemMediaType:i})})]})},FF=()=>{const{setCurrentTitle:t,dispatch:e,moviesListMode:n}=oe(),{query:r}=bC();return E.useEffect(()=>{t(r),e({type:"SET_SEARCH_MODE",payload:r})},[r,t,e,n]),p.jsx("section",{className:"section-search-results",children:p.jsx(f3,{})})},C3=({activeMode:t,setActiveMode:e})=>{const{lang:n}=oe();return p.jsxs("div",{className:"auth-mode-container",children:[p.jsx("div",{className:`sign-in ${t==="sign-in"?"active":""}`,onClick:()=>e("sign-in"),children:p.jsx("h3",{children:n==="en"?"Sign-In":"Вход"})}),p.jsx("div",{className:"divider",children:p.jsx("h3",{children:"|"})}),p.jsx("div",{className:`sign-up ${t==="sign-up"?"active":""}`,onClick:()=>e("sign-up"),children:p.jsx("h3",{children:n==="en"?"Sign-Up":"Регистрация"})})]})};C3.propTypes={activeMode:b.string,setActiveMode:b.func};const gs=({label:t,handleSignUpChanges:e,...n})=>{const[r,s]=E.useState(!1),i=o=>{e(o),o.target.value.length!==0?s(!0):r&&s(!1)};return p.jsxs("div",{className:"form-input-group",children:[p.jsx("input",{...n,onChange:i}),p.jsx("label",{className:r?"active":"",children:t})]})};gs.propTypes={label:b.string,handleSignUpChanges:b.func};const bc=({type:t,onClick:e,imgPath:n,text:r})=>p.jsx("button",{type:t,onClick:()=>e?e():null,children:p.jsxs("span",{children:[r||null,n&&p.jsx("img",{src:n})]})});bc.propTypes={type:b.string,onClick:b.func,imgPath:b.string,text:b.string};const UF={displayName:"",email:"",password:"",confirmPassword:""},VF=()=>{const{setCurrentTitle:t,lang:e}=oe(),[n,r]=E.useState(UF),{displayName:s,email:i,password:o,confirmPassword:a}=n,l=async c=>{if(c.preventDefault(),!(!i||!o)){if(o!==a){alert(e==="en"?"Passwords don't match!":"Пароли не совпадают!");return}try{const{user:h}=await OO(i,o);await j1(h,s),t(s)}catch(h){console.log("error from handleSignUpSubmit:"),console.log(h),h.code==="auth/email-already-in-use"&&alert(e==="en"?"Email already in use!":"Эта почта уже используется!")}}},u=c=>{const{name:h,value:d}=c.target;r({...n,[h]:d})};return p.jsxs(ie.form,{animate:{x:0,opacity:1},initial:{x:-20,opacity:0},onSubmit:l,children:[p.jsx(gs,{type:"text",name:"displayName",handleSignUpChanges:u,label:e==="en"?"Username":"Логин",value:s,required:!0}),p.jsx(gs,{type:"email",required:!0,name:"email",handleSignUpChanges:u,value:i,label:e==="en"?"Email":"Почта"}),p.jsx(gs,{type:"password",required:!0,name:"password",handleSignUpChanges:u,value:o,label:e==="en"?"Password":"Пароль"}),p.jsx(gs,{type:"password",required:!0,name:"confirmPassword",handleSignUpChanges:u,value:a,label:e==="en"?"Confirm Password":"Подтвердите пароль"}),p.jsx("div",{className:"buttons-container",children:p.jsx(bc,{type:"submit",text:e==="en"?"Sign-Up":"Зарегистрироваться"})})]})},BF={email:"",password:""},zF=()=>{const{baseName:t,lang:e}=oe(),[n,r]=E.useState(BF),{email:s,password:i}=n,o=async u=>{if(u.preventDefault(),!(!s||!i))try{await LO(s,i)}catch(c){console.log("handleSignInSubmit error:"),console.log(c)}},a=async()=>{const{user:u}=await DO();await j1(u)},l=u=>{const{name:c,value:h}=u.target;r({...n,[c]:h})};return p.jsxs(ie.form,{animate:{x:0,opacity:1},initial:{x:20,opacity:0},onSubmit:o,children:[p.jsx(gs,{type:"email",required:!0,name:"email",handleSignUpChanges:l,value:s,label:e==="en"?"Email":"Почта"}),p.jsx(gs,{type:"password",required:!0,name:"password",handleSignUpChanges:l,value:i,label:e==="en"?"Password":"Пароль"}),p.jsxs("div",{className:"buttons-container",children:[p.jsx(bc,{type:"submit",text:e==="en"?"Sign-In":"Войти"}),p.jsx(bc,{onClick:a,type:"button",imgPath:`${t}assets/images/icons/icon-google.svg`})]})]})},HF=()=>{const{setCurrentTitle:t,lang:e}=oe(),[n,r]=E.useState("sign-in");return E.useEffect(()=>{t(()=>e==="en"?"Account":"Авторизация")},[t,e]),p.jsxs("section",{className:"section-auth",children:[p.jsx(C3,{activeMode:n,setActiveMode:r}),p.jsx("div",{className:"form-container",children:n==="sign-up"?p.jsx(VF,{}):p.jsx(zF,{})})]})},WF=(t,e)=>{switch(e.type){case"LOAD_USER_LISTS":return{...t,userLists:e.payload};case"UPDATE_USER_LISTS":{const n=t.currentListIndex,r=t.userLists.length;let s;return e.payload.length>r||e.payload.length===r?s=n:n-1<=0?s=0:s=n-1,{currentListIndex:s,userLists:e.payload}}case"SET_CURRENT_LIST_INDEX":return{...t,currentListIndex:e.payload};default:return t}},KF=()=>p.jsxs("svg",{width:"24",height:"23",viewBox:"0 0 24 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4375 21.5334C10.4375 20.9812 10.8852 20.5334 11.4375 20.5334H22.4375C22.9898 20.5334 23.4375 20.9812 23.4375 21.5334C23.4375 22.0857 22.9898 22.5334 22.4375 22.5334H11.4375C10.8852 22.5334 10.4375 22.0857 10.4375 21.5334Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6775 2C18.3317 2 17.986 2.14591 17.7205 2.42908L3.8494 17.2249L3.16683 20.1372L5.77588 19.4415L19.6344 4.65905C19.7664 4.5183 19.8742 4.34776 19.9488 4.15565C20.0234 3.96347 20.0625 3.75548 20.0625 3.54407C20.0625 3.33266 20.0234 3.12466 19.9488 2.93248C19.8742 2.74037 19.7664 2.56983 19.6344 2.42908C19.5026 2.28846 19.3496 2.18062 19.186 2.10835C19.0227 2.03617 18.8501 2 18.6775 2ZM16.2614 1.0612C16.8905 0.390155 17.7581 0 18.6775 0C19.1313 0 19.579 0.0954399 19.9943 0.278958C20.4095 0.462391 20.7824 0.729338 21.0935 1.0612C21.4045 1.39293 21.648 1.7833 21.8132 2.2085C21.9782 2.63365 22.0625 3.08729 22.0625 3.54407C22.0625 4.00084 21.9782 4.45449 21.8132 4.87963C21.648 5.30484 21.4045 5.69521 21.0935 6.02693L7.03938 21.018C6.91155 21.1543 6.74808 21.2521 6.5675 21.3003L2.07018 22.4996C1.73063 22.5901 1.36847 22.4958 1.11624 22.2511C0.864003 22.0064 0.758715 21.6473 0.838905 21.3051L1.96323 16.508C2.00324 16.3373 2.08741 16.1801 2.20731 16.0523L16.2614 1.0612Z",fill:"var(--accent-color)"})]}),qF=()=>p.jsxs("svg",{width:"21",height:"24",viewBox:"0 0 21 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.875 6.11133C0.875 5.55904 1.32272 5.11133 1.875 5.11133H19.6875C20.2398 5.11133 20.6875 5.55904 20.6875 6.11133C20.6875 6.66361 20.2398 7.11133 19.6875 7.11133H1.875C1.32272 7.11133 0.875 6.66361 0.875 6.11133Z",fill:"var(--accent-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.80217 2.88892C8.56406 2.88892 8.32157 2.98922 8.13222 3.19119C7.94082 3.39534 7.823 3.68526 7.823 4.00003V6.11114C7.823 6.66342 7.37528 7.11114 6.823 7.11114C6.27071 7.11114 5.823 6.66342 5.823 6.11114V4.00003C5.823 3.19499 6.12221 2.41097 6.67315 1.8233C7.22613 1.23346 7.99045 0.888916 8.80217 0.888916H12.7605C13.5722 0.888916 14.3365 1.23346 14.8895 1.8233C15.4405 2.41097 15.7397 3.19499 15.7397 4.00003V6.11114C15.7397 6.66342 15.292 7.11114 14.7397 7.11114C14.1874 7.11114 13.7397 6.66342 13.7397 6.11114V4.00003C13.7397 3.68526 13.6218 3.39534 13.4304 3.19119C13.2411 2.98922 12.9986 2.88892 12.7605 2.88892H8.80217ZM3.85425 5.11114C4.40653 5.11114 4.85425 5.55885 4.85425 6.11114V20.8889C4.85425 21.2037 4.97207 21.4936 5.16347 21.6978C5.35282 21.8997 5.59531 22 5.83342 22H15.7292C15.9674 22 16.2098 21.8997 16.3992 21.6978C16.5906 21.4936 16.7084 21.2037 16.7084 20.8889V6.11114C16.7084 5.55885 17.1561 5.11114 17.7084 5.11114C18.2607 5.11114 18.7084 5.55885 18.7084 6.11114V20.8889C18.7084 21.694 18.4092 22.478 17.8583 23.0656C17.3053 23.6555 16.541 24 15.7292 24H5.83342C5.0217 24 4.25738 23.6555 3.7044 23.0656C3.15346 22.478 2.85425 21.694 2.85425 20.8889V6.11114C2.85425 5.55885 3.30196 5.11114 3.85425 5.11114Z",fill:"var(--accent-color)"})]}),S3=({title:t,active:e,dispatch:n,listIndex:r})=>{const[s,i]=E.useState(!1),o=E.useRef(null),a=()=>{i(()=>!1)};ed(o,a);const l=u=>{u===""||u.length<3||u.length>100||u===t||(VO(r,u),a())};return p.jsx(p.Fragment,{children:s?p.jsx(td,{initialValue:t,submit:l,hideCustomInput:a,customClass:"user-list-item-input"}):p.jsxs("div",{className:`user-list-container ${e&&"active"}`,onClick:()=>{n({type:"SET_CURRENT_LIST_INDEX",payload:r})},children:[p.jsx("div",{className:"user-list-title",children:p.jsx("h3",{children:t})}),p.jsx(An,{children:e&&p.jsxs(ie.div,{initial:{y:"2rem",opacity:0},animate:{y:"-50%",opacity:1},className:"user-list-icons-container",children:[p.jsx("button",{className:"edit-list-icon",onClick:()=>i(()=>!0),children:p.jsx(KF,{})}),p.jsx("button",{className:"delete-list-icon",onClick:()=>UO(r),children:p.jsx(qF,{})})]})})]})})};S3.propTypes={title:b.string,active:b.bool,dispatch:b.func,listIndex:b.number};const GF=()=>p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11C20 6.02944 15.9706 2 11 2ZM0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 17.0751 17.0751 22 11 22C4.92487 22 0 17.0751 0 11Z",fill:"var(--primary-color)"}),p.jsxs("g",{children:[p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 6C11.5523 6 12 6.44772 12 7V15C12 15.5523 11.5523 16 11 16C10.4477 16 10 15.5523 10 15V7C10 6.44772 10.4477 6 11 6Z",fill:"var(--primary-color)"}),p.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 11C6 10.4477 6.44772 10 7 10H15C15.5523 10 16 10.4477 16 11C16 11.5523 15.5523 12 15 12H7C6.44772 12 6 11.5523 6 11Z",fill:"var(--primary-color)"})]})]}),ym=({userLists:t,currentListIndex:e,dispatch:n})=>{const{lang:r}=oe(),[s,i]=E.useState(!1),o=()=>{i(()=>!0)},a=()=>{i(()=>!1)},l=u=>{u===""||u.length<3||u.length>100||(i(()=>!1),FO(u))};return p.jsxs("div",{className:"user-lists-container",children:[p.jsxs("div",{className:"user-lists-header",children:[p.jsx(a0,{}),p.jsx("h3",{children:"Мои списки"})]}),!t.length&&p.jsx(nn,{errorMessage:r==="en"?"No list found. Add new list 👇":"Не найдено ни одного списка. Добавить список 👇",showImage:!0}),p.jsx("div",{className:"user-lists",children:t.map(({title:u},c)=>p.jsx(S3,{title:u,active:e===c,dispatch:n,listIndex:c},c))}),p.jsx(An,{children:s?p.jsx(td,{initialValue:"",submit:l,hideCustomInput:a,customClass:"user-list-item-input",placeholder:r==="en"?"New list title...":"Название списка..."}):p.jsx("div",{className:"add-user-list-button",children:p.jsx(ie.button,{onClick:o,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:p.jsx(GF,{active:s})})})})]})};ym.propTypes={userLists:b.array,currentListIndex:b.number,dispatch:b.func};const QF="https://api.themoviedb.org/3",YF="api_key=582f9e2d6f3a1dc803b350bf76f168f2",XF="https://image.tmdb.org/t/p/w300",JF=(t,e)=>{const[n,r]=E.useState(!0),[s,i]=E.useState({show:!1,message:""}),[o,a]=E.useState([]),l=E.useCallback(async u=>{r(!0),i({show:!1,message:""});try{const c=[];for(let{id:h,mediaType:d}of e)try{const f=await Pr(`${QF}/${d}/${h}?${YF}&language=${u}`),{data:g}=f;c.push(new Tg(XF,g,d))}catch(f){console.log(f)}if(c.length===0)throw new Error(`${u==="ru"?"Этот список пуст":"This list is empty"}`);a(()=>c),r(!1)}catch(c){i({show:!0,message:c.message}),r(!1)}},[e]);return E.useEffect(()=>{l(t)},[l,t]),{data:o,isLoading:n,error:s}},T3=({currentUserList:t,listIndex:e})=>{const{lang:n}=oe(),{data:r,isLoading:s,error:i}=JF(n,t);return i.show?p.jsx(nn,{errorMessage:i.message,showImage:!0}):s?p.jsx(Wa,{}):p.jsx(p.Fragment,{children:p.jsx(ie.div,{layout:!0,layoutRoot:!0,className:"movies-list-container",children:r.map(({posterUrl:o,title:a,id:l,mediaType:u})=>(a.length>35&&(a=a.slice(0,35)+"..."),p.jsxs(An,{children:[p.jsx(nd,{poster:o,title:a,id:`${l}`,mediaType:u,removeItemButton:!0,listIndex:e}),";"]},l)))})})};T3.propTypes={currentUserList:b.array,listIndex:b.number};const ZF={userLists:[],currentListIndex:0},eU=()=>{var h;const{currentUser:t}=uo(),{setCurrentTitle:e}=oe();E.useEffect(()=>{e(t.displayName)},[t,e]);const[n,r]=E.useReducer(WF,ZF),[s,i]=E.useState(!1),o=d3(),{userLists:a,currentListIndex:l}=n,u=E.useRef(!1);E.useEffect(()=>vx(Yr(Xr,"users",t.uid),f=>{f.data()&&(u.current?r({type:"UPDATE_USER_LISTS",payload:f.data().userLists}):(r({type:"LOAD_USER_LISTS",payload:f.data().userLists}),u.current=!0))}),[t]);const c=()=>{i(()=>!1)};return p.jsxs("section",{className:"section-profile",children:[p.jsx("div",{className:"left-col",children:o==="desktop"?p.jsx(p.Fragment,{children:p.jsx(ym,{userLists:a,currentListIndex:l,dispatch:r})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"user-lists-modal-toggler",onClick:()=>i(()=>!0),children:[p.jsx(a0,{}),p.jsx("h3",{children:"Мои списки"})]}),p.jsx(An,{children:s&&p.jsx(Il,{hideModal:c,mode:"overlay",children:p.jsx("div",{className:"user-lists-modal-inner",children:p.jsx(ym,{userLists:a,currentListIndex:l,dispatch:r,hideModal:c})})})})]})}),p.jsxs("div",{className:"right-col",children:[p.jsx("div",{className:"user-movies-list-title",children:a[l]&&p.jsx("h2",{children:(h=a[l])==null?void 0:h.title})}),a[l]&&p.jsx(T3,{currentUserList:a[l].data,listIndex:l})]})]})};function tU(){const{baseName:t,lang:e}=oe(),{currentUser:n}=uo(),r=({children:i})=>n?i:p.jsx(_y,{to:`${t}auth`}),s=({children:i})=>n?p.jsx(_y,{to:`${t}profile`}):i;return p.jsx(Kk,{children:p.jsx(Vk,{children:p.jsxs(Ln,{path:t,element:p.jsx(CF,{}),children:[p.jsx(Ln,{index:!0,element:p.jsx(PF,{})}),p.jsx(Ln,{path:"movie/:id",element:p.jsx(g2,{})}),p.jsx(Ln,{path:"tv/:id",element:p.jsx(g2,{})}),p.jsx(Ln,{path:"search/:query",element:p.jsx(FF,{})}),p.jsx(Ln,{path:"auth",element:p.jsx(s,{children:p.jsx(HF,{})})}),p.jsx(Ln,{path:"profile",element:p.jsx(r,{children:p.jsx(eU,{})})}),p.jsx(Ln,{path:"*",element:p.jsx("section",{children:p.jsx(nn,{componentMessage:"404",errorMessage:e==="en"?"This page is not exist":"Такой страницы не существует!",showImage:!0,fullHeight:!0})})})]})})})}Ef.createRoot(document.getElementById("root")).render(p.jsx(jc.StrictMode,{children:p.jsx(lS,{children:p.jsx(Bx,{children:p.jsx(tU,{})})})}));
